!function(){var I,E;window.printPreview={init:function(d,p,h,m,u,y,f,g,v,w,b){var e=new ECPrint.Designer({target:document.querySelector("#app"),props:{authKey:"53616C7465645F5F3702F8548980B6FE795C6B148B754BEFE3F11B06B6AE3FCBCB29EAEB266D242A29CB956DB85A1071",showOption:{showFooter:!1,showToolbar:!1},template:JSON.parse(d),printData:JSON.parse(p),theme:"winter",$$scope:{},$$slots:{}}});e.$set({showOption:{showHeader:!1,showPower:!1}}),e.$on("onDesigned",e=>{var t,n,s,i,o,a=e.detail.hiprint,e=e.detail.designerUtils;{var r,l,c;printPanels=e.printTemplate.printPanels,E=e.printTemplate,e.preview.setConfig({showPdf:!1,showImg:!1}),e.preview.show(),e.preview.hide(),e=h,t=m,n=u,s=y,i=f,o=g,(I=new a.PrintTemplate({template:d})).printPanels=printPanels,"true"==e&&(a=t,r=n,l=s,c=i,e=o,Promise.all([function(s,i){return new Promise((n,e)=>{setTimeout(()=>{var e=new XMLHttpRequest,t=(e.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(this.responseText)},s+i);e.open("GET",t,!0),e.send()},1)})}(a,e)]).then(e=>{var t,n,s,i,e='<html><head><meta charset="utf-8"><style>'+e[0]+"</style></head><body>"+I.getHtml(JSON.parse(p))[0].outerHTML+"</body></html>";console.log(e),t=e,e=l,s=c,(n=r)?((i=io(e,{auth:{token:n}})).emit("getCurrentClients",{auth:{token:n}}),i.on("currentClients",e=>{getclientIdByMachineId(e,i,t,!0,s)})):(i=io(e)).on("clientInfo",e=>{getclientIdByMachineId(e,i,t,!1,s)})}).catch(e=>{console.log("发生错误:",e)}))}$("#hinnnDpi").hide()}),pdfHtmlTemplateData="",getclientIdByMachineId=function(t,n,s,e,i){var o;switch(sessionStorage.getItem("lang")){case"cn":o=w;break;case"ja":o=v;break;case"en":o=b;break;default:o=v}if(e){const r=i;var a=!1;if(Object.keys(t).forEach(e=>{t[e].machineId===r&&(a=!0)}),!a){e=o;i="alert";const l=document.createElement("div");l.style.position="fixed",l.style.top="50px",l.style.left="50%",l.style.transform="translateX(-50%)","success"==i?l.style.backgroundColor="#079b2a":"alert"==i&&(l.style.backgroundColor="#ba0517");l.style.color="white",l.style.padding="10px",l.style.borderRadius="5px",l.style.zIndex="9999";const c=document.createElement("span"),d=(c.style.fontSize="16px",c.innerHTML='<i class="svicon sv-sigh" style="font-size: 22px; vertical-align: middle;"></i>   '+e+"   ",l.appendChild(c),document.createElement("i"));d.className="svicon sv-close",d.addEventListener("click",()=>{l.remove()}),d.style.cursor="pointer",d.addEventListener("mouseover",()=>{d.style.color="#bfbfbf"}),d.addEventListener("mouseout",()=>{d.style.color="white"}),l.appendChild(d),document.body.appendChild(l),setTimeout(()=>{l.style.transition="opacity 3s",l.style.opacity="0",setTimeout(()=>{l.remove()},3e3)},1e3)}Object.keys(t).forEach(e=>{t[e].machineId===r&&n.emit("news",{client:e,html:s,templateId:100,printer:"",height:8e3,width:8e3})})}else n.emit("news",{html:s,templateId:100,printer:"",height:8e3,width:8e3})}},ecp_exportPdfData:function(e,t){""==t&&(t="PDF Preview"),I.toPdf.call(I,JSON.parse(e),t)},ecp_exportPdfObject:function(e){return I.toPdfBlob.call(I,JSON.parse(dataSource),e)},ecp_browserPrint:function(e){E.print(JSON.parse(e))},ecp_printData:function(o,e,a,r,l,t){var s,i;Promise.all([(s=e,i=t,new Promise((n,e)=>{setTimeout(()=>{var e=new XMLHttpRequest,t=(e.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(this.responseText)},s+i);e.open("GET",t,!0),e.send()},1)}))]).then(e=>{var t,n,s,i,e='<html><head><meta charset="utf-8"><style>'+e[0]+"</style></head><body>"+I.getHtml(JSON.parse(o))[0].outerHTML+"</body></html>";t=e,e=r,s=l,(n=a)?((i=io(e,{auth:{token:n}})).emit("getCurrentClients",{auth:{token:n}}),i.on("currentClients",e=>{getclientIdByMachineId(e,i,t,!0,s)})):(i=io(e)).on("clientInfo",e=>{getclientIdByMachineId(e,i,t,!1,s)})}).catch(e=>{console.log("发生错误:",e)}),getclientIdByMachineId=function(t,n,s,e,i){var o;switch(sessionStorage.getItem("lang")){case"cn":o=errmsg_cn;break;case"ja":o=errmsg_ja;break;case"en":o=errmsg_en;break;default:o=errmsg_ja}if(e){const r=i;var a=!1;if(Object.keys(t).forEach(e=>{t[e].machineId===r&&(a=!0)}),!a){e=o;i="alert";const l=document.createElement("div"),c=(l.style.position="fixed",l.style.top="50px",l.style.left="50%",l.style.transform="translateX(-50%)","success"==i?l.style.backgroundColor="#079b2a":"alert"==i&&(l.style.backgroundColor="#ba0517"),l.style.color="white",l.style.padding="10px",l.style.borderRadius="5px",l.style.zIndex="9999",(i=document.createElement("span")).style.fontSize="16px",i.innerHTML='<i class="svicon sv-sigh" style="font-size: 22px; vertical-align: middle;"></i>   '+e+"   ",l.appendChild(i),document.createElement("i"));c.className="svicon sv-close",c.addEventListener("click",()=>{l.remove()}),c.style.cursor="pointer",c.addEventListener("mouseover",()=>{c.style.color="#bfbfbf"}),c.addEventListener("mouseout",()=>{c.style.color="white"}),l.appendChild(c),document.body.appendChild(l),setTimeout(()=>{l.style.transition="opacity 3s",l.style.opacity="0",setTimeout(()=>{l.remove()},3e3)},1e3)}Object.keys(t).forEach(e=>{t[e].machineId===r&&n.emit("news",{client:e,html:s,templateId:100,printer:"",height:8e3,width:8e3})})}else n.emit("news",{html:s,templateId:100,printer:"",height:8e3,width:8e3})}}}}(window);