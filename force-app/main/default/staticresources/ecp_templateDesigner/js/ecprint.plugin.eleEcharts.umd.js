(function(n,a){typeof exports=="object"&&typeof module!="undefined"?module.exports=a():typeof define=="function"&&define.amd?define(a):(n=typeof globalThis!="undefined"?globalThis:n||self,n.pluginEleEcharts=a())})(this,function(){"use strict";const en={\u56FE\u8868:"chart",\u6E32\u67D3\u51FD\u6570:"Render function",\u6807\u9898:"Title",\u8BF7\u8F93\u5165\u6807\u9898:"Please enter title",\u6570\u636E\u5217:"Data column","\u8BF7\u8F93\u5165\u6570\u636E\u5217, \u683C\u5F0F: x,y,x,y":"Please input data columns, format: x,y,x,y",\u6298\u7EBF\u56FE:"Line Chart",\u67F1\u72B6\u56FE:"Histogram",\u997C\u56FE:"Pie Chart",\u96F7\u8FBE\u56FE:"Radar Chart",\u6563\u70B9\u56FE:"Scatter Plot",\u6F0F\u6597\u56FE:"Funnel Plot",\u57FA\u7840:"Basic",\u6837\u5F0F:"Style",\u9AD8\u7EA7:"Advanced",\u914D\u7F6E\u9519\u8BEF\u65E0\u6CD5\u6E32\u67D3:"Configuration error cannot render"},cn={\u56FE\u8868:"\u56FE\u8868",\u6E32\u67D3\u51FD\u6570:"\u6E32\u67D3\u51FD\u6570",\u6807\u9898:"\u6807\u9898",\u8BF7\u8F93\u5165\u6807\u9898:"\u8BF7\u8F93\u5165\u6807\u9898",\u6570\u636E\u5217:"\u6570\u636E\u5217","\u8BF7\u8F93\u5165\u6570\u636E\u5217, \u683C\u5F0F: x,y,x,y":"\u8BF7\u8F93\u5165\u6570\u636E\u5217, \u683C\u5F0F: x,y,x,y",\u6298\u7EBF\u56FE:"\u6298\u7EBF\u56FE",\u67F1\u72B6\u56FE:"\u67F1\u72B6\u56FE",\u997C\u56FE:"\u997C\u56FE",\u96F7\u8FBE\u56FE:"\u96F7\u8FBE\u56FE",\u6563\u70B9\u56FE:"\u6563\u70B9\u56FE",\u6F0F\u6597\u56FE:"\u6F0F\u6597\u56FE",\u57FA\u7840:"\u57FA\u7840",\u6837\u5F0F:"\u6837\u5F0F",\u9AD8\u7EA7:"\u9AD8\u7EA7",\u914D\u7F6E\u9519\u8BEF\u65E0\u6CD5\u6E32\u67D3:"\u914D\u7F6E\u9519\u8BEF\u65E0\u6CD5\u6E32\u67D3"},ja={\u56FE\u8868:"\u56F3\u5F62",\u6E32\u67D3\u51FD\u6570:"\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u95A2\u6570",\u6807\u9898:"\uFF80\uFF72\uFF84\uFF99",\u8BF7\u8F93\u5165\u6807\u9898:"\uFF80\uFF72\uFF84\uFF99\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",\u6570\u636E\u5217:"\uFF83\uFF9E\uFF70\uFF80\u5217","\u8BF7\u8F93\u5165\u6570\u636E\u5217, \u683C\u5F0F: x,y,x,y":"\uFF83\uFF9E\uFF70\uFF80\u5217\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF64\uFF8C\uFF6B\uFF70\uFF8F\uFF6F\uFF84: x,y,x,y",\u6298\u7EBF\u56FE:"\u6298\u308C\u7DDA\u30B0\u30E9\u30D5",\u67F1\u72B6\u56FE:"\u7E26\u68D2\u30B0\u30E9\u30D5",\u997C\u56FE:"\u5186\u30B0\u30E9\u30D5",\u96F7\u8FBE\u56FE:"\u30EC\u30C0\u56F3",\u6563\u70B9\u56FE:"\u6563\u5E03\u56F3",\u6F0F\u6597\u56FE:"\u6F0F\u6597\u56F3",\u57FA\u7840:"\u30D9\u30FC\u30B9",\u6837\u5F0F:"\u30B9\u30BF\u30A4\u30EB",\u9AD8\u7EA7:"\u9AD8\u7D1A",\u914D\u7F6E\u9519\u8BEF\u65E0\u6CD5\u6E32\u67D3:"\u69CB\u6210\u30A8\u30E9\u30FC\u3067\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3067\u304D\u307E\u305B\u3093"};let storedLang=sessionStorage.getItem("lang");(storedLang===null||storedLang===""||storedLang===void 0)&&(storedLang="en");function format$2(n){let a="en";storedLang&&(a=storedLang);const r={en,cn,ja};return r[a]&&r[a][n]?r[a][n]:n}const PrintElementConfig={defaultEcharts:{tabs:[{name:format$2("\u57FA\u7840"),options:[{name:"field",hidden:!1},{name:"customTitle",hidden:!1},{name:"coordinate",hidden:!1},{name:"widthHeight",hidden:!1},{name:"fixed",hidden:!1}]},{name:format$2("\u6837\u5F0F"),options:[{name:"color",hidden:!1},{name:"backgroundColor",hidden:!1},{name:"transform",hidden:!1},{name:"zIndex",hidden:!1}]},{name:format$2("\u9AD8\u7EA7"),options:[{name:"pageBreak",hidden:!1},{name:"showInPage",hidden:!1},{name:"unShowInPage",hidden:!1},{name:"axis",hidden:!1},{name:"eChartsOption",hidden:!1}]}],supportOptions:[{name:"customTitle",hidden:!1},{name:"coordinate",hidden:!1},{name:"widthHeight",hidden:!1},{name:"color",hidden:!1},{name:"backgroundColor",hidden:!1},{name:"fixed",hidden:!1},{name:"axis",hidden:!1},{name:"pageBreak",hidden:!1},{name:"showInPage",hidden:!1},{name:"unShowInPage",hidden:!1},{name:"transform",hidden:!1},{name:"zIndex",hidden:!1},{name:"eChartsOption",hidden:!1}],default:{height:40,width:40}},echartsXY:{tabs:[{name:format$2("\u57FA\u7840"),options:[{name:"field",hidden:!1},{name:"dataColumns",hidden:!1},{name:"coordinate",hidden:!1},{name:"widthHeight",hidden:!1},{name:"fixed",hidden:!1}]},{name:format$2("\u6837\u5F0F"),options:[{name:"color",hidden:!1},{name:"backgroundColor",hidden:!1},{name:"transform",hidden:!1},{name:"zIndex",hidden:!1}]},{name:format$2("\u9AD8\u7EA7"),options:[{name:"pageBreak",hidden:!1},{name:"showInPage",hidden:!1},{name:"unShowInPage",hidden:!1},{name:"axis",hidden:!1},{name:"eChartsOption",hidden:!1}]}],supportOptions:[{name:"dataColumns",hidden:!1},{name:"coordinate",hidden:!1},{name:"widthHeight",hidden:!1},{name:"color",hidden:!1},{name:"backgroundColor",hidden:!1},{name:"fixed",hidden:!1},{name:"axis",hidden:!1},{name:"pageBreak",hidden:!1},{name:"showInPage",hidden:!1},{name:"unShowInPage",hidden:!1},{name:"transform",hidden:!1},{name:"zIndex",hidden:!1},{name:"eChartsOption",hidden:!1}],default:{height:40,width:40}}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var extendStatics=function(n,a){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},extendStatics(n,a)};function __extends(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");extendStatics(n,a);function r(){this.constructor=n}n.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var Browser=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),Env=function(){function n(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return n}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?env.worker=!0:typeof navigator=="undefined"?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(n,a){var r=a.browser,o=n.match(/Firefox\/([\d.]+)/),l=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),u=n.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(n);o&&(r.firefox=!0,r.version=o[1]),l&&(r.ie=!0,r.version=l[1]),u&&(r.edge=!0,r.version=u[1],r.newEdge=+u[1].split(".")[0]>18),c&&(r.weChat=!0),a.svgSupported=typeof SVGRect!="undefined",a.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,a.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),a.domSupported=typeof document!="undefined";var h=document.documentElement.style;a.transform3dSupported=(r.ie&&"transition"in h||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in h)&&!("OTransition"in h),a.transformSupported=a.transform3dSupported||r.ie&&+r.version>=9}const env$1=env;var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(n){var a={};if(typeof JSON=="undefined")return a;for(var r=0;r<n.length;r++){var o=String.fromCharCode(r+32),l=(n.charCodeAt(r)-OFFSET)/SCALE;a[o]=l}return a}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var n,a;return function(r,o){if(!n){var l=platformApi.createCanvas();n=l&&l.getContext("2d")}if(n)return a!==o&&(a=n.font=o||DEFAULT_FONT),n.measureText(r);r=r||"",o=o||DEFAULT_FONT;var u=/(\d+)px/.exec(o),c=u&&+u[1]||DEFAULT_FONT_SIZE,h=0;if(o.indexOf("mono")>=0)h=c*r.length;else for(var f=0;f<r.length;f++){var v=DEFAULT_TEXT_WIDTH_MAP[r[f]];h+=v==null?c:v*c}return{width:h}}}(),loadImage:function(n,a,r){var o=new Image;return o.onload=a,o.onerror=r,o.src=n,o}};function setPlatformAPI(n){for(var a in platformApi)n[a]&&(platformApi[a]=n[a])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,a){return n["[object "+a+"]"]=!0,n},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,a){return n["[object "+a+"Array]"]=!0,n},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=function(){}.constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];typeof console!="undefined"&&console.error.apply(console,n)}function clone$4(n){if(n==null||typeof n!="object")return n;var a=n,r=objToString.call(n);if(r==="[object Array]"){if(!isPrimitive(n)){a=[];for(var o=0,l=n.length;o<l;o++)a[o]=clone$4(n[o])}}else if(TYPED_ARRAY[r]){if(!isPrimitive(n)){var u=n.constructor;if(u.from)a=u.from(n);else{a=new u(n.length);for(var o=0,l=n.length;o<l;o++)a[o]=n[o]}}}else if(!BUILTIN_OBJECT[r]&&!isPrimitive(n)&&!isDom(n)){a={};for(var c in n)n.hasOwnProperty(c)&&c!==protoKey&&(a[c]=clone$4(n[c]))}return a}function merge(n,a,r){if(!isObject$3(a)||!isObject$3(n))return r?clone$4(a):n;for(var o in a)if(a.hasOwnProperty(o)&&o!==protoKey){var l=n[o],u=a[o];isObject$3(u)&&isObject$3(l)&&!isArray$1(u)&&!isArray$1(l)&&!isDom(u)&&!isDom(l)&&!isBuiltInObject(u)&&!isBuiltInObject(l)&&!isPrimitive(u)&&!isPrimitive(l)?merge(l,u,r):(r||!(o in n))&&(n[o]=clone$4(a[o]))}return n}function mergeAll(n,a){for(var r=n[0],o=1,l=n.length;o<l;o++)r=merge(r,n[o],a);return r}function extend(n,a){if(Object.assign)Object.assign(n,a);else for(var r in a)a.hasOwnProperty(r)&&r!==protoKey&&(n[r]=a[r]);return n}function defaults(n,a,r){for(var o=keys(a),l=0;l<o.length;l++){var u=o[l];(r?a[u]!=null:n[u]==null)&&(n[u]=a[u])}return n}var createCanvas=platformApi.createCanvas;function indexOf(n,a){if(n){if(n.indexOf)return n.indexOf(a);for(var r=0,o=n.length;r<o;r++)if(n[r]===a)return r}return-1}function inherits(n,a){var r=n.prototype;function o(){}o.prototype=a.prototype,n.prototype=new o;for(var l in r)r.hasOwnProperty(l)&&(n.prototype[l]=r[l]);n.prototype.constructor=n,n.superClass=a}function mixin(n,a,r){if(n="prototype"in n?n.prototype:n,a="prototype"in a?a.prototype:a,Object.getOwnPropertyNames)for(var o=Object.getOwnPropertyNames(a),l=0;l<o.length;l++){var u=o[l];u!=="constructor"&&(r?a[u]!=null:n[u]==null)&&(n[u]=a[u])}else defaults(n,a,r)}function isArrayLike(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function each$f(n,a,r){if(!!(n&&a))if(n.forEach&&n.forEach===nativeForEach)n.forEach(a,r);else if(n.length===+n.length)for(var o=0,l=n.length;o<l;o++)a.call(r,n[o],o,n);else for(var u in n)n.hasOwnProperty(u)&&a.call(r,n[u],u,n)}function map$1(n,a,r){if(!n)return[];if(!a)return slice(n);if(n.map&&n.map===nativeMap)return n.map(a,r);for(var o=[],l=0,u=n.length;l<u;l++)o.push(a.call(r,n[l],l,n));return o}function reduce(n,a,r,o){if(!!(n&&a)){for(var l=0,u=n.length;l<u;l++)r=a.call(o,r,n[l],l,n);return r}}function filter(n,a,r){if(!n)return[];if(!a)return slice(n);if(n.filter&&n.filter===nativeFilter)return n.filter(a,r);for(var o=[],l=0,u=n.length;l<u;l++)a.call(r,n[l],l,n)&&o.push(n[l]);return o}function find(n,a,r){if(!!(n&&a)){for(var o=0,l=n.length;o<l;o++)if(a.call(r,n[o],o,n))return n[o]}}function keys(n){if(!n)return[];if(Object.keys)return Object.keys(n);var a=[];for(var r in n)n.hasOwnProperty(r)&&a.push(r);return a}function bindPolyfill(n,a){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return function(){return n.apply(a,r.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(n){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];return function(){return n.apply(this,a.concat(nativeSlice.call(arguments)))}}function isArray$1(n){return Array.isArray?Array.isArray(n):objToString.call(n)==="[object Array]"}function isFunction(n){return typeof n=="function"}function isString(n){return typeof n=="string"}function isStringSafe(n){return objToString.call(n)==="[object String]"}function isNumber(n){return typeof n=="number"}function isObject$3(n){var a=typeof n;return a==="function"||!!n&&a==="object"}function isBuiltInObject(n){return!!BUILTIN_OBJECT[objToString.call(n)]}function isTypedArray(n){return!!TYPED_ARRAY[objToString.call(n)]}function isDom(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function isGradientObject(n){return n.colorStops!=null}function isImagePatternObject(n){return n.image!=null}function isRegExp(n){return objToString.call(n)==="[object RegExp]"}function eqNaN(n){return n!==n}function retrieve(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];for(var r=0,o=n.length;r<o;r++)if(n[r]!=null)return n[r]}function retrieve2(n,a){return n!=null?n:a}function retrieve3(n,a,r){return n!=null?n:a!=null?a:r}function slice(n){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];return nativeSlice.apply(n,a)}function normalizeCssArray$1(n){if(typeof n=="number")return[n,n,n,n];var a=n.length;return a===2?[n[0],n[1],n[0],n[1]]:a===3?[n[0],n[1],n[2],n[1]]:n}function assert(n,a){if(!n)throw new Error(a)}function trim$1(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(n){n[primitiveKey]=!0}function isPrimitive(n){return n[primitiveKey]}var MapPolyfill=function(){function n(){this.data={}}return n.prototype.delete=function(a){var r=this.has(a);return r&&delete this.data[a],r},n.prototype.has=function(a){return this.data.hasOwnProperty(a)},n.prototype.get=function(a){return this.data[a]},n.prototype.set=function(a,r){return this.data[a]=r,this},n.prototype.keys=function(){return keys(this.data)},n.prototype.forEach=function(a){var r=this.data;for(var o in r)r.hasOwnProperty(o)&&a(r[o],o)},n}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function n(a){var r=isArray$1(a);this.data=maybeNativeMap();var o=this;a instanceof n?a.each(l):a&&each$f(a,l);function l(u,c){r?o.set(u,c):o.set(c,u)}}return n.prototype.hasKey=function(a){return this.data.has(a)},n.prototype.get=function(a){return this.data.get(a)},n.prototype.set=function(a,r){return this.data.set(a,r),r},n.prototype.each=function(a,r){this.data.forEach(function(o,l){a.call(r,o,l)})},n.prototype.keys=function(){var a=this.data.keys();return isNativeMapSupported?Array.from(a):a},n.prototype.removeKey=function(a){this.data.delete(a)},n}();function createHashMap(n){return new HashMap(n)}function concatArray(n,a){for(var r=new n.constructor(n.length+a.length),o=0;o<n.length;o++)r[o]=n[o];for(var l=n.length,o=0;o<a.length;o++)r[o+l]=a[o];return r}function createObject(n,a){var r;if(Object.create)r=Object.create(n);else{var o=function(){};o.prototype=n,r=new o}return a&&extend(r,a),r}function disableUserSelect(n){var a=n.style;a.webkitUserSelect="none",a.userSelect="none",a.webkitTapHighlightColor="rgba(0,0,0,0)",a["-webkit-touch-callout"]="none"}function hasOwn(n,a){return n.hasOwnProperty(a)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,guid,logError,clone:clone$4,merge,mergeAll,extend,defaults,createCanvas,indexOf,inherits,mixin,isArrayLike,each:each$f,map:map$1,reduce,filter,find,keys,bind:bind$1,curry:curry$1,isArray:isArray$1,isFunction,isString,isStringSafe,isNumber,isObject:isObject$3,isBuiltInObject,isTypedArray,isDom,isGradientObject,isImagePatternObject,isRegExp,eqNaN,retrieve,retrieve2,retrieve3,slice,normalizeCssArray:normalizeCssArray$1,assert,trim:trim$1,setAsPrimitive,isPrimitive,HashMap,createHashMap,concatArray,createObject,disableUserSelect,hasOwn,noop,RADIAN_TO_DEGREE},Symbol.toStringTag,{value:"Module"}));function create$2(n,a){return n==null&&(n=0),a==null&&(a=0),[n,a]}function copy$1(n,a){return n[0]=a[0],n[1]=a[1],n}function clone$3(n){return[n[0],n[1]]}function set$1(n,a,r){return n[0]=a,n[1]=r,n}function add(n,a,r){return n[0]=a[0]+r[0],n[1]=a[1]+r[1],n}function scaleAndAdd$1(n,a,r,o){return n[0]=a[0]+r[0]*o,n[1]=a[1]+r[1]*o,n}function sub(n,a,r){return n[0]=a[0]-r[0],n[1]=a[1]-r[1],n}function len(n){return Math.sqrt(lenSquare(n))}var length=len;function lenSquare(n){return n[0]*n[0]+n[1]*n[1]}var lengthSquare=lenSquare;function mul$1(n,a,r){return n[0]=a[0]*r[0],n[1]=a[1]*r[1],n}function div(n,a,r){return n[0]=a[0]/r[0],n[1]=a[1]/r[1],n}function dot(n,a){return n[0]*a[0]+n[1]*a[1]}function scale$2(n,a,r){return n[0]=a[0]*r,n[1]=a[1]*r,n}function normalize$3(n,a){var r=len(a);return r===0?(n[0]=0,n[1]=0):(n[0]=a[0]/r,n[1]=a[1]/r),n}function distance(n,a){return Math.sqrt((n[0]-a[0])*(n[0]-a[0])+(n[1]-a[1])*(n[1]-a[1]))}var dist$1=distance;function distanceSquare(n,a){return(n[0]-a[0])*(n[0]-a[0])+(n[1]-a[1])*(n[1]-a[1])}var distSquare=distanceSquare;function negate(n,a){return n[0]=-a[0],n[1]=-a[1],n}function lerp$1(n,a,r,o){return n[0]=a[0]+o*(r[0]-a[0]),n[1]=a[1]+o*(r[1]-a[1]),n}function applyTransform$1(n,a,r){var o=a[0],l=a[1];return n[0]=r[0]*o+r[2]*l+r[4],n[1]=r[1]*o+r[3]*l+r[5],n}function min$1(n,a,r){return n[0]=Math.min(a[0],r[0]),n[1]=Math.min(a[1],r[1]),n}function max$1(n,a,r){return n[0]=Math.max(a[0],r[0]),n[1]=Math.max(a[1],r[1]),n}const vector=Object.freeze(Object.defineProperty({__proto__:null,create:create$2,copy:copy$1,clone:clone$3,set:set$1,add,scaleAndAdd:scaleAndAdd$1,sub,len,length,lenSquare,lengthSquare,mul:mul$1,div,dot,scale:scale$2,normalize:normalize$3,distance,dist:dist$1,distanceSquare,distSquare,negate,lerp:lerp$1,applyTransform:applyTransform$1,min:min$1,max:max$1},Symbol.toStringTag,{value:"Module"}));var Param=function(){function n(a,r){this.target=a,this.topTarget=r&&r.topTarget}return n}(),Draggable=function(){function n(a){this.handler=a,a.on("mousedown",this._dragStart,this),a.on("mousemove",this._drag,this),a.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(a){for(var r=a.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=a.offsetX,this._y=a.offsetY,this.handler.dispatchToElement(new Param(r,a),"dragstart",a.event))},n.prototype._drag=function(a){var r=this._draggingTarget;if(r){var o=a.offsetX,l=a.offsetY,u=o-this._x,c=l-this._y;this._x=o,this._y=l,r.drift(u,c,a),this.handler.dispatchToElement(new Param(r,a),"drag",a.event);var h=this.handler.findHover(o,l,r).target,f=this._dropTarget;this._dropTarget=h,r!==h&&(f&&h!==f&&this.handler.dispatchToElement(new Param(f,a),"dragleave",a.event),h&&h!==f&&this.handler.dispatchToElement(new Param(h,a),"dragenter",a.event))}},n.prototype._dragEnd=function(a){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Param(r,a),"dragend",a.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,a),"drop",a.event),this._draggingTarget=null,this._dropTarget=null},n}();const Draggable$1=Draggable;var Eventful=function(){function n(a){a&&(this._$eventProcessor=a)}return n.prototype.on=function(a,r,o,l){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof r=="function"&&(l=o,o=r,r=null),!o||!a)return this;var c=this._$eventProcessor;r!=null&&c&&c.normalizeQuery&&(r=c.normalizeQuery(r)),u[a]||(u[a]=[]);for(var h=0;h<u[a].length;h++)if(u[a][h].h===o)return this;var f={h:o,query:r,ctx:l||this,callAtLast:o.zrEventfulCallAtLast},v=u[a].length-1,d=u[a][v];return d&&d.callAtLast?u[a].splice(v,0,f):u[a].push(f),this},n.prototype.isSilent=function(a){var r=this._$handlers;return!r||!r[a]||!r[a].length},n.prototype.off=function(a,r){var o=this._$handlers;if(!o)return this;if(!a)return this._$handlers={},this;if(r){if(o[a]){for(var l=[],u=0,c=o[a].length;u<c;u++)o[a][u].h!==r&&l.push(o[a][u]);o[a]=l}o[a]&&o[a].length===0&&delete o[a]}else delete o[a];return this},n.prototype.trigger=function(a){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!this._$handlers)return this;var l=this._$handlers[a],u=this._$eventProcessor;if(l)for(var c=r.length,h=l.length,f=0;f<h;f++){var v=l[f];if(!(u&&u.filter&&v.query!=null&&!u.filter(a,v.query)))switch(c){case 0:v.h.call(v.ctx);break;case 1:v.h.call(v.ctx,r[0]);break;case 2:v.h.call(v.ctx,r[0],r[1]);break;default:v.h.apply(v.ctx,r);break}}return u&&u.afterTrigger&&u.afterTrigger(a),this},n.prototype.triggerWithContext=function(a){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!this._$handlers)return this;var l=this._$handlers[a],u=this._$eventProcessor;if(l)for(var c=r.length,h=r[c-1],f=l.length,v=0;v<f;v++){var d=l[v];if(!(u&&u.filter&&d.query!=null&&!u.filter(a,d.query)))switch(c){case 0:d.h.call(h);break;case 1:d.h.call(h,r[0]);break;case 2:d.h.call(h,r[0],r[1]);break;default:d.h.apply(h,r.slice(1,c-1));break}}return u&&u.afterTrigger&&u.afterTrigger(a),this},n}();const Eventful$1=Eventful;var LN2=Math.log(2);function determinant(n,a,r,o,l,u){var c=o+"-"+l,h=n.length;if(u.hasOwnProperty(c))return u[c];if(a===1){var f=Math.round(Math.log((1<<h)-1&~l)/LN2);return n[r][f]}for(var v=o|1<<r,d=r+1;o&1<<d;)d++;for(var p=0,g=0,y=0;g<h;g++){var _=1<<g;_&l||(p+=(y%2?-1:1)*n[r][g]*determinant(n,a-1,d,v,l|_,u),y++)}return u[c]=p,p}function buildTransformer(n,a){var r=[[n[0],n[1],1,0,0,0,-a[0]*n[0],-a[0]*n[1]],[0,0,0,n[0],n[1],1,-a[1]*n[0],-a[1]*n[1]],[n[2],n[3],1,0,0,0,-a[2]*n[2],-a[2]*n[3]],[0,0,0,n[2],n[3],1,-a[3]*n[2],-a[3]*n[3]],[n[4],n[5],1,0,0,0,-a[4]*n[4],-a[4]*n[5]],[0,0,0,n[4],n[5],1,-a[5]*n[4],-a[5]*n[5]],[n[6],n[7],1,0,0,0,-a[6]*n[6],-a[6]*n[7]],[0,0,0,n[6],n[7],1,-a[7]*n[6],-a[7]*n[7]]],o={},l=determinant(r,8,0,0,0,o);if(l!==0){for(var u=[],c=0;c<8;c++)for(var h=0;h<8;h++)u[h]==null&&(u[h]=0),u[h]+=((c+h)%2?-1:1)*determinant(r,7,c===0?1:0,1<<c,1<<h,o)/l*a[c];return function(f,v,d){var p=v*u[6]+d*u[7]+1;f[0]=(v*u[0]+d*u[1]+u[2])/p,f[1]=(v*u[3]+d*u[4]+u[5])/p}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(n,a,r,o,l){return transformCoordWithViewport(_calcOut$1,a,o,l,!0)&&transformCoordWithViewport(n,r,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(n,a,r,o,l){if(a.getBoundingClientRect&&env$1.domSupported&&!isCanvasEl(a)){var u=a[EVENT_SAVED_PROP]||(a[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(a,u),h=preparePointerTransformer(c,u,l);if(h)return h(n,r,o),!0}return!1}function prepareCoordMarkers(n,a){var r=a.markers;if(r)return r;r=a.markers=[];for(var o=["left","right"],l=["top","bottom"],u=0;u<4;u++){var c=document.createElement("div"),h=c.style,f=u%2,v=(u>>1)%2;h.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[f]+":0",l[v]+":0",o[1-f]+":auto",l[1-v]+":auto",""].join("!important;"),n.appendChild(c),r.push(c)}return r}function preparePointerTransformer(n,a,r){for(var o=r?"invTrans":"trans",l=a[o],u=a.srcCoords,c=[],h=[],f=!0,v=0;v<4;v++){var d=n[v].getBoundingClientRect(),p=2*v,g=d.left,y=d.top;c.push(g,y),f=f&&u&&g===u[p]&&y===u[p+1],h.push(n[v].offsetLeft,n[v].offsetTop)}return f&&l?l:(a.srcCoords=c,a[o]=r?buildTransformer(h,c):buildTransformer(c,h))}function isCanvasEl(n){return n.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(n){return n==null?"":(n+"").replace(replaceReg,function(a,r){return replaceMap[r]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env$1.browser.firefox&&+env$1.browser.version.split(".")[0]<39;function clientToLocal(n,a,r,o){return r=r||{},o?calculateZrXY(n,a,r):firefoxNotSupportOffsetXY&&a.layerX!=null&&a.layerX!==a.offsetX?(r.zrX=a.layerX,r.zrY=a.layerY):a.offsetX!=null?(r.zrX=a.offsetX,r.zrY=a.offsetY):calculateZrXY(n,a,r),r}function calculateZrXY(n,a,r){if(env$1.domSupported&&n.getBoundingClientRect){var o=a.clientX,l=a.clientY;if(isCanvasEl(n)){var u=n.getBoundingClientRect();r.zrX=o-u.left,r.zrY=l-u.top;return}else if(transformCoordWithViewport(_calcOut,n,o,l)){r.zrX=_calcOut[0],r.zrY=_calcOut[1];return}}r.zrX=r.zrY=0}function getNativeEvent(n){return n||window.event}function normalizeEvent(n,a,r){if(a=getNativeEvent(a),a.zrX!=null)return a;var o=a.type,l=o&&o.indexOf("touch")>=0;if(l){var c=o!=="touchend"?a.targetTouches[0]:a.changedTouches[0];c&&clientToLocal(n,c,a,r)}else{clientToLocal(n,a,a,r);var u=getWheelDeltaMayPolyfill(a);a.zrDelta=u?u/120:-(a.detail||0)/3}var h=a.button;return a.which==null&&h!==void 0&&MOUSE_EVENT_REG.test(a.type)&&(a.which=h&1?1:h&2?3:h&4?2:0),a}function getWheelDeltaMayPolyfill(n){var a=n.wheelDelta;if(a)return a;var r=n.deltaX,o=n.deltaY;if(r==null||o==null)return a;var l=Math.abs(o!==0?o:r),u=o>0?-1:o<0?1:r>0?-1:1;return 3*l*u}function addEventListener(n,a,r,o){n.addEventListener(a,r,o)}function removeEventListener(n,a,r,o){n.removeEventListener(a,r,o)}var stop=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(n){return n.which===2||n.which===3}var GestureMgr=function(){function n(){this._track=[]}return n.prototype.recognize=function(a,r,o){return this._doTrack(a,r,o),this._recognize(a)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(a,r,o){var l=a.touches;if(!!l){for(var u={points:[],touches:[],target:r,event:a},c=0,h=l.length;c<h;c++){var f=l[c],v=clientToLocal(o,f,{});u.points.push([v.zrX,v.zrY]),u.touches.push(f)}this._track.push(u)}},n.prototype._recognize=function(a){for(var r in recognizers)if(recognizers.hasOwnProperty(r)){var o=recognizers[r](this._track,a);if(o)return o}},n}();function dist(n){var a=n[1][0]-n[0][0],r=n[1][1]-n[0][1];return Math.sqrt(a*a+r*r)}function center$1(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var recognizers={pinch:function(n,a){var r=n.length;if(!!r){var o=(n[r-1]||{}).points,l=(n[r-2]||{}).points||o;if(l&&l.length>1&&o&&o.length>1){var u=dist(o)/dist(l);!isFinite(u)&&(u=1),a.pinchScale=u;var c=center$1(o);return a.pinchX=c[0],a.pinchY=c[1],{type:"pinch",target:n[0].target,event:a}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function copy(n,a){return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n}function mul(n,a,r){var o=a[0]*r[0]+a[2]*r[1],l=a[1]*r[0]+a[3]*r[1],u=a[0]*r[2]+a[2]*r[3],c=a[1]*r[2]+a[3]*r[3],h=a[0]*r[4]+a[2]*r[5]+a[4],f=a[1]*r[4]+a[3]*r[5]+a[5];return n[0]=o,n[1]=l,n[2]=u,n[3]=c,n[4]=h,n[5]=f,n}function translate(n,a,r){return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4]+r[0],n[5]=a[5]+r[1],n}function rotate(n,a,r){var o=a[0],l=a[2],u=a[4],c=a[1],h=a[3],f=a[5],v=Math.sin(r),d=Math.cos(r);return n[0]=o*d+c*v,n[1]=-o*v+c*d,n[2]=l*d+h*v,n[3]=-l*v+d*h,n[4]=d*u+v*f,n[5]=d*f-v*u,n}function scale$1(n,a,r){var o=r[0],l=r[1];return n[0]=a[0]*o,n[1]=a[1]*l,n[2]=a[2]*o,n[3]=a[3]*l,n[4]=a[4]*o,n[5]=a[5]*l,n}function invert(n,a){var r=a[0],o=a[2],l=a[4],u=a[1],c=a[3],h=a[5],f=r*c-u*o;return f?(f=1/f,n[0]=c*f,n[1]=-u*f,n[2]=-o*f,n[3]=r*f,n[4]=(o*h-c*l)*f,n[5]=(u*l-r*h)*f,n):null}function clone$2(n){var a=create$1();return copy(a,n),a}const matrix=Object.freeze(Object.defineProperty({__proto__:null,create:create$1,identity,copy,mul,translate,rotate,scale:scale$1,invert,clone:clone$2},Symbol.toStringTag,{value:"Module"}));var Point=function(){function n(a,r){this.x=a||0,this.y=r||0}return n.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(a,r){return this.x=a,this.y=r,this},n.prototype.equal=function(a){return a.x===this.x&&a.y===this.y},n.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},n.prototype.scale=function(a){this.x*=a,this.y*=a},n.prototype.scaleAndAdd=function(a,r){this.x+=a.x*r,this.y+=a.y*r},n.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},n.prototype.dot=function(a){return this.x*a.x+this.y*a.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var a=this.len();return this.x/=a,this.y/=a,this},n.prototype.distance=function(a){var r=this.x-a.x,o=this.y-a.y;return Math.sqrt(r*r+o*o)},n.prototype.distanceSquare=function(a){var r=this.x-a.x,o=this.y-a.y;return r*r+o*o},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(a){if(!!a){var r=this.x,o=this.y;return this.x=a[0]*r+a[2]*o+a[4],this.y=a[1]*r+a[3]*o+a[5],this}},n.prototype.toArray=function(a){return a[0]=this.x,a[1]=this.y,a},n.prototype.fromArray=function(a){this.x=a[0],this.y=a[1]},n.set=function(a,r,o){a.x=r,a.y=o},n.copy=function(a,r){a.x=r.x,a.y=r.y},n.len=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},n.lenSquare=function(a){return a.x*a.x+a.y*a.y},n.dot=function(a,r){return a.x*r.x+a.y*r.y},n.add=function(a,r,o){a.x=r.x+o.x,a.y=r.y+o.y},n.sub=function(a,r,o){a.x=r.x-o.x,a.y=r.y-o.y},n.scale=function(a,r,o){a.x=r.x*o,a.y=r.y*o},n.scaleAndAdd=function(a,r,o,l){a.x=r.x+o.x*l,a.y=r.y+o.y*l},n.lerp=function(a,r,o,l){var u=1-l;a.x=u*r.x+l*o.x,a.y=u*r.y+l*o.y},n}();const Point$1=Point;var mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point$1,rb=new Point$1,lb=new Point$1,rt=new Point$1,minTv$1=new Point$1,maxTv$1=new Point$1,BoundingRect=function(){function n(a,r,o,l){o<0&&(a=a+o,o=-o),l<0&&(r=r+l,l=-l),this.x=a,this.y=r,this.width=o,this.height=l}return n.prototype.union=function(a){var r=mathMin$a(a.x,this.x),o=mathMin$a(a.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(a.x+a.width,this.x+this.width)-r:this.width=a.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(a.y+a.height,this.y+this.height)-o:this.height=a.height,this.x=r,this.y=o},n.prototype.applyTransform=function(a){n.applyTransform(this,this,a)},n.prototype.calculateTransform=function(a){var r=this,o=a.width/r.width,l=a.height/r.height,u=create$1();return translate(u,u,[-r.x,-r.y]),scale$1(u,u,[o,l]),translate(u,u,[a.x,a.y]),u},n.prototype.intersect=function(a,r){if(!a)return!1;a instanceof n||(a=n.create(a));var o=this,l=o.x,u=o.x+o.width,c=o.y,h=o.y+o.height,f=a.x,v=a.x+a.width,d=a.y,p=a.y+a.height,g=!(u<f||v<l||h<d||p<c);if(r){var y=1/0,_=0,S=Math.abs(u-f),x=Math.abs(v-l),T=Math.abs(h-d),A=Math.abs(p-c),b=Math.min(S,x),C=Math.min(T,A);u<f||v<l?b>_&&(_=b,S<x?Point$1.set(maxTv$1,-S,0):Point$1.set(maxTv$1,x,0)):b<y&&(y=b,S<x?Point$1.set(minTv$1,S,0):Point$1.set(minTv$1,-x,0)),h<d||p<c?C>_&&(_=C,T<A?Point$1.set(maxTv$1,0,-T):Point$1.set(maxTv$1,0,A)):b<y&&(y=b,T<A?Point$1.set(minTv$1,0,T):Point$1.set(minTv$1,0,-A))}return r&&Point$1.copy(r,g?minTv$1:maxTv$1),g},n.prototype.contain=function(a,r){var o=this;return a>=o.x&&a<=o.x+o.width&&r>=o.y&&r<=o.y+o.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(a){n.copy(this,a)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(a){return new n(a.x,a.y,a.width,a.height)},n.copy=function(a,r){a.x=r.x,a.y=r.y,a.width=r.width,a.height=r.height},n.applyTransform=function(a,r,o){if(!o){a!==r&&n.copy(a,r);return}if(o[1]<1e-5&&o[1]>-1e-5&&o[2]<1e-5&&o[2]>-1e-5){var l=o[0],u=o[3],c=o[4],h=o[5];a.x=r.x*l+c,a.y=r.y*u+h,a.width=r.width*l,a.height=r.height*u,a.width<0&&(a.x+=a.width,a.width=-a.width),a.height<0&&(a.y+=a.height,a.height=-a.height);return}lt.x=lb.x=r.x,lt.y=rt.y=r.y,rb.x=rt.x=r.x+r.width,rb.y=lb.y=r.y+r.height,lt.transform(o),rt.transform(o),rb.transform(o),lb.transform(o),a.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),a.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var f=mathMax$a(lt.x,rb.x,lb.x,rt.x),v=mathMax$a(lt.y,rb.y,lb.y,rt.y);a.width=f-a.x,a.height=v-a.y},n}();const BoundingRect$1=BoundingRect;var SILENT="silent";function makeEventPacket(n,a,r){return{type:n,event:r,target:a.target,topTarget:a.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.handler=null,r}return a.prototype.dispose=function(){},a.prototype.setCursor=function(){},a}(Eventful$1),HoveredResult=function(){function n(a,r){this.x=a,this.y=r}return n}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect$1(0,0,0,0),Handler=function(n){__extends(a,n);function a(r,o,l,u,c){var h=n.call(this)||this;return h._hovered=new HoveredResult(0,0),h.storage=r,h.painter=o,h.painterRoot=u,h._pointerSize=c,l=l||new EmptyProxy,h.proxy=null,h.setHandlerProxy(l),h._draggingMgr=new Draggable$1(h),h}return a.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(each$f(handlerNames,function(o){r.on&&r.on(o,this[o],this)},this),r.handler=this),this.proxy=r},a.prototype.mousemove=function(r){var o=r.zrX,l=r.zrY,u=isOutsideBoundary(this,o,l),c=this._hovered,h=c.target;h&&!h.__zr&&(c=this.findHover(c.x,c.y),h=c.target);var f=this._hovered=u?new HoveredResult(o,l):this.findHover(o,l),v=f.target,d=this.proxy;d.setCursor&&d.setCursor(v?v.cursor:"default"),h&&v!==h&&this.dispatchToElement(c,"mouseout",r),this.dispatchToElement(f,"mousemove",r),v&&v!==h&&this.dispatchToElement(f,"mouseover",r)},a.prototype.mouseout=function(r){var o=r.zrEventControl;o!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),o!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},a.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},a.prototype.dispatch=function(r,o){var l=this[r];l&&l.call(this,o)},a.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},a.prototype.setCursorStyle=function(r){var o=this.proxy;o.setCursor&&o.setCursor(r)},a.prototype.dispatchToElement=function(r,o,l){r=r||{};var u=r.target;if(!(u&&u.silent)){for(var c="on"+o,h=makeEventPacket(o,r,l);u&&(u[c]&&(h.cancelBubble=!!u[c].call(u,h)),u.trigger(o,h),u=u.__hostTarget?u.__hostTarget:u.parent,!h.cancelBubble););h.cancelBubble||(this.trigger(o,h),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(f){typeof f[c]=="function"&&f[c].call(f,h),f.trigger&&f.trigger(o,h)}))}},a.prototype.findHover=function(r,o,l){var u=this.storage.getDisplayList(),c=new HoveredResult(r,o);if(setHoverTarget(u,c,r,o,l),this._pointerSize&&!c.target){for(var h=[],f=this._pointerSize,v=f/2,d=new BoundingRect$1(r-v,o-v,f,f),p=u.length-1;p>=0;p--){var g=u[p];g!==l&&!g.ignore&&!g.ignoreCoarsePointer&&(!g.parent||!g.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(g.getBoundingRect()),g.transform&&tmpRect$1.applyTransform(g.transform),tmpRect$1.intersect(d)&&h.push(g))}if(h.length)for(var y=4,_=Math.PI/12,S=Math.PI*2,x=0;x<v;x+=y)for(var T=0;T<S;T+=_){var A=r+x*Math.cos(T),b=o+x*Math.sin(T);if(setHoverTarget(h,c,A,b,l),c.target)return c}}return c},a.prototype.processGesture=function(r,o){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;o==="start"&&l.clear();var u=l.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(o==="end"&&l.clear(),u){var c=u.type;r.gestureEvent=c;var h=new HoveredResult;h.target=u.target,this.dispatchToElement(h,c,u.event)}},a}(Eventful$1);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Handler.prototype[n]=function(a){var r=a.zrX,o=a.zrY,l=isOutsideBoundary(this,r,o),u,c;if((n!=="mouseup"||!l)&&(u=this.findHover(r,o),c=u.target),n==="mousedown")this._downEl=c,this._downPoint=[a.zrX,a.zrY],this._upEl=c;else if(n==="mouseup")this._upEl=c;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[a.zrX,a.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,n,a)}});function isHover(n,a,r){if(n[n.rectHover?"rectContain":"contain"](a,r)){for(var o=n,l=void 0,u=!1;o;){if(o.ignoreClip&&(u=!0),!u){var c=o.getClipPath();if(c&&!c.contain(a,r))return!1;o.silent&&(l=!0)}var h=o.__hostTarget;o=h||o.parent}return l?SILENT:!0}return!1}function setHoverTarget(n,a,r,o,l){for(var u=n.length-1;u>=0;u--){var c=n[u],h=void 0;if(c!==l&&!c.ignore&&(h=isHover(c,r,o))&&(!a.topTarget&&(a.topTarget=c),h!==SILENT)){a.target=c;break}}}function isOutsideBoundary(n,a,r){var o=n.painter;return a<0||a>o.getWidth()||r<0||r>o.getHeight()}const Handler$1=Handler;var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(n){for(var a=0;n>=DEFAULT_MIN_MERGE;)a|=n&1,n>>=1;return n+a}function makeAscendingRun(n,a,r,o){var l=a+1;if(l===r)return 1;if(o(n[l++],n[a])<0){for(;l<r&&o(n[l],n[l-1])<0;)l++;reverseRun(n,a,l)}else for(;l<r&&o(n[l],n[l-1])>=0;)l++;return l-a}function reverseRun(n,a,r){for(r--;a<r;){var o=n[a];n[a++]=n[r],n[r--]=o}}function binaryInsertionSort(n,a,r,o,l){for(o===a&&o++;o<r;o++){for(var u=n[o],c=a,h=o,f;c<h;)f=c+h>>>1,l(u,n[f])<0?h=f:c=f+1;var v=o-c;switch(v){case 3:n[c+3]=n[c+2];case 2:n[c+2]=n[c+1];case 1:n[c+1]=n[c];break;default:for(;v>0;)n[c+v]=n[c+v-1],v--}n[c]=u}}function gallopLeft(n,a,r,o,l,u){var c=0,h=0,f=1;if(u(n,a[r+l])>0){for(h=o-l;f<h&&u(n,a[r+l+f])>0;)c=f,f=(f<<1)+1,f<=0&&(f=h);f>h&&(f=h),c+=l,f+=l}else{for(h=l+1;f<h&&u(n,a[r+l-f])<=0;)c=f,f=(f<<1)+1,f<=0&&(f=h);f>h&&(f=h);var v=c;c=l-f,f=l-v}for(c++;c<f;){var d=c+(f-c>>>1);u(n,a[r+d])>0?c=d+1:f=d}return f}function gallopRight(n,a,r,o,l,u){var c=0,h=0,f=1;if(u(n,a[r+l])<0){for(h=l+1;f<h&&u(n,a[r+l-f])<0;)c=f,f=(f<<1)+1,f<=0&&(f=h);f>h&&(f=h);var v=c;c=l-f,f=l-v}else{for(h=o-l;f<h&&u(n,a[r+l+f])>=0;)c=f,f=(f<<1)+1,f<=0&&(f=h);f>h&&(f=h),c+=l,f+=l}for(c++;c<f;){var d=c+(f-c>>>1);u(n,a[r+d])<0?f=d:c=d+1}return f}function TimSort(n,a){var r=DEFAULT_MIN_GALLOPING,o,l,u=0;n.length;var c=[];o=[],l=[];function h(y,_){o[u]=y,l[u]=_,u+=1}function f(){for(;u>1;){var y=u-2;if(y>=1&&l[y-1]<=l[y]+l[y+1]||y>=2&&l[y-2]<=l[y]+l[y-1])l[y-1]<l[y+1]&&y--;else if(l[y]>l[y+1])break;d(y)}}function v(){for(;u>1;){var y=u-2;y>0&&l[y-1]<l[y+1]&&y--,d(y)}}function d(y){var _=o[y],S=l[y],x=o[y+1],T=l[y+1];l[y]=S+T,y===u-3&&(o[y+1]=o[y+2],l[y+1]=l[y+2]),u--;var A=gallopRight(n[x],n,_,S,0,a);_+=A,S-=A,S!==0&&(T=gallopLeft(n[_+S-1],n,x,T,T-1,a),T!==0&&(S<=T?p(_,S,x,T):g(_,S,x,T)))}function p(y,_,S,x){var T=0;for(T=0;T<_;T++)c[T]=n[y+T];var A=0,b=S,C=y;if(n[C++]=n[b++],--x===0){for(T=0;T<_;T++)n[C+T]=c[A+T];return}if(_===1){for(T=0;T<x;T++)n[C+T]=n[b+T];n[C+x]=c[A];return}for(var E=r,w,D,M;;){w=0,D=0,M=!1;do if(a(n[b],c[A])<0){if(n[C++]=n[b++],D++,w=0,--x===0){M=!0;break}}else if(n[C++]=c[A++],w++,D=0,--_===1){M=!0;break}while((w|D)<E);if(M)break;do{if(w=gallopRight(n[b],c,A,_,0,a),w!==0){for(T=0;T<w;T++)n[C+T]=c[A+T];if(C+=w,A+=w,_-=w,_<=1){M=!0;break}}if(n[C++]=n[b++],--x===0){M=!0;break}if(D=gallopLeft(c[A],n,b,x,0,a),D!==0){for(T=0;T<D;T++)n[C+T]=n[b+T];if(C+=D,b+=D,x-=D,x===0){M=!0;break}}if(n[C++]=c[A++],--_===1){M=!0;break}E--}while(w>=DEFAULT_MIN_GALLOPING||D>=DEFAULT_MIN_GALLOPING);if(M)break;E<0&&(E=0),E+=2}if(r=E,r<1&&(r=1),_===1){for(T=0;T<x;T++)n[C+T]=n[b+T];n[C+x]=c[A]}else{if(_===0)throw new Error;for(T=0;T<_;T++)n[C+T]=c[A+T]}}function g(y,_,S,x){var T=0;for(T=0;T<x;T++)c[T]=n[S+T];var A=y+_-1,b=x-1,C=S+x-1,E=0,w=0;if(n[C--]=n[A--],--_===0){for(E=C-(x-1),T=0;T<x;T++)n[E+T]=c[T];return}if(x===1){for(C-=_,A-=_,w=C+1,E=A+1,T=_-1;T>=0;T--)n[w+T]=n[E+T];n[C]=c[b];return}for(var D=r;;){var M=0,P=0,L=!1;do if(a(c[b],n[A])<0){if(n[C--]=n[A--],M++,P=0,--_===0){L=!0;break}}else if(n[C--]=c[b--],P++,M=0,--x===1){L=!0;break}while((M|P)<D);if(L)break;do{if(M=_-gallopRight(c[b],n,y,_,_-1,a),M!==0){for(C-=M,A-=M,_-=M,w=C+1,E=A+1,T=M-1;T>=0;T--)n[w+T]=n[E+T];if(_===0){L=!0;break}}if(n[C--]=c[b--],--x===1){L=!0;break}if(P=x-gallopLeft(n[A],c,0,x,x-1,a),P!==0){for(C-=P,b-=P,x-=P,w=C+1,E=b+1,T=0;T<P;T++)n[w+T]=c[E+T];if(x<=1){L=!0;break}}if(n[C--]=n[A--],--_===0){L=!0;break}D--}while(M>=DEFAULT_MIN_GALLOPING||P>=DEFAULT_MIN_GALLOPING);if(L)break;D<0&&(D=0),D+=2}if(r=D,r<1&&(r=1),x===1){for(C-=_,A-=_,w=C+1,E=A+1,T=_-1;T>=0;T--)n[w+T]=n[E+T];n[C]=c[b]}else{if(x===0)throw new Error;for(E=C-(x-1),T=0;T<x;T++)n[E+T]=c[T]}}return{mergeRuns:f,forceMergeRuns:v,pushRun:h}}function sort$2(n,a,r,o){r||(r=0),o||(o=n.length);var l=o-r;if(!(l<2)){var u=0;if(l<DEFAULT_MIN_MERGE){u=makeAscendingRun(n,r,o,a),binaryInsertionSort(n,r,o,r+u,a);return}var c=TimSort(n,a),h=minRunLength(l);do{if(u=makeAscendingRun(n,r,o,a),u<h){var f=l;f>h&&(f=h),binaryInsertionSort(n,r,r+f,r+u,a),u=f}c.pushRun(r,u),c.mergeRuns(),l-=u,r+=u}while(l!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(n,a){return n.zlevel===a.zlevel?n.z===a.z?n.z2-a.z2:n.z-a.z:n.zlevel-a.zlevel}var Storage=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return n.prototype.traverse=function(a,r){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(a,r)},n.prototype.getDisplayList=function(a,r){r=r||!1;var o=this._displayList;return(a||!o.length)&&this.updateDisplayList(r),o},n.prototype.updateDisplayList=function(a){this._displayListLen=0;for(var r=this._roots,o=this._displayList,l=0,u=r.length;l<u;l++)this._updateAndAddDisplayable(r[l],null,a);o.length=this._displayListLen,sort$2(o,shapeCompareFunc)},n.prototype._updateAndAddDisplayable=function(a,r,o){if(!(a.ignore&&!o)){a.beforeUpdate(),a.update(),a.afterUpdate();var l=a.getClipPath();if(a.ignoreClip)r=null;else if(l){r?r=r.slice():r=[];for(var u=l,c=a;u;)u.parent=c,u.updateTransform(),r.push(u),c=u,u=u.getClipPath()}if(a.childrenRef){for(var h=a.childrenRef(),f=0;f<h.length;f++){var v=h[f];a.__dirty&&(v.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(v,r,o)}a.__dirty=0}else{var d=a;r&&r.length?d.__clipPaths=r:d.__clipPaths&&d.__clipPaths.length>0&&(d.__clipPaths=[]),isNaN(d.z)&&(logInvalidZError(),d.z=0),isNaN(d.z2)&&(logInvalidZError(),d.z2=0),isNaN(d.zlevel)&&(logInvalidZError(),d.zlevel=0),this._displayList[this._displayListLen++]=d}var p=a.getDecalElement&&a.getDecalElement();p&&this._updateAndAddDisplayable(p,r,o);var g=a.getTextGuideLine();g&&this._updateAndAddDisplayable(g,r,o);var y=a.getTextContent();y&&this._updateAndAddDisplayable(y,r,o)}},n.prototype.addRoot=function(a){a.__zr&&a.__zr.storage===this||this._roots.push(a)},n.prototype.delRoot=function(a){if(a instanceof Array){for(var r=0,o=a.length;r<o;r++)this.delRoot(a[r]);return}var l=indexOf(this._roots,a);l>=0&&this._roots.splice(l,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const Storage$1=Storage;var requestAnimationFrame;requestAnimationFrame=env$1.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const requestAnimationFrame$1=requestAnimationFrame;var easingFuncs={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var a,r=.1,o=.4;return n===0?0:n===1?1:(!r||r<1?(r=1,a=o/4):a=o*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/o)))},elasticOut:function(n){var a,r=.1,o=.4;return n===0?0:n===1?1:(!r||r<1?(r=1,a=o/4):a=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*n)*Math.sin((n-a)*(2*Math.PI)/o)+1)},elasticInOut:function(n){var a,r=.1,o=.4;return n===0?0:n===1?1:(!r||r<1?(r=1,a=o/4):a=o*Math.asin(1/r)/(2*Math.PI),(n*=2)<1?-.5*(r*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/o)):r*Math.pow(2,-10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/o)*.5+1)},backIn:function(n){var a=1.70158;return n*n*((a+1)*n-a)},backOut:function(n){var a=1.70158;return--n*n*((a+1)*n+a)+1},backInOut:function(n){var a=2.5949095;return(n*=2)<1?.5*(n*n*((a+1)*n-a)):.5*((n-=2)*n*((a+1)*n+a)+2)},bounceIn:function(n){return 1-easingFuncs.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?easingFuncs.bounceIn(n*2)*.5:easingFuncs.bounceOut(n*2-1)*.5+.5}};const easingFuncs$1=easingFuncs;var mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(n){return n>-EPSILON$4&&n<EPSILON$4}function isNotAroundZero$1(n){return n>EPSILON$4||n<-EPSILON$4}function cubicAt(n,a,r,o,l){var u=1-l;return u*u*(u*n+3*l*a)+l*l*(l*o+3*u*r)}function cubicDerivativeAt(n,a,r,o,l){var u=1-l;return 3*(((a-n)*u+2*(r-a)*l)*u+(o-r)*l*l)}function cubicRootAt(n,a,r,o,l,u){var c=o+3*(a-r)-n,h=3*(r-a*2+n),f=3*(a-n),v=n-l,d=h*h-3*c*f,p=h*f-9*c*v,g=f*f-3*h*v,y=0;if(isAroundZero$1(d)&&isAroundZero$1(p))if(isAroundZero$1(h))u[0]=0;else{var _=-f/h;_>=0&&_<=1&&(u[y++]=_)}else{var S=p*p-4*d*g;if(isAroundZero$1(S)){var x=p/d,_=-h/c+x,T=-x/2;_>=0&&_<=1&&(u[y++]=_),T>=0&&T<=1&&(u[y++]=T)}else if(S>0){var A=mathSqrt$3(S),b=d*h+1.5*c*(-p+A),C=d*h+1.5*c*(-p-A);b<0?b=-mathPow$2(-b,ONE_THIRD):b=mathPow$2(b,ONE_THIRD),C<0?C=-mathPow$2(-C,ONE_THIRD):C=mathPow$2(C,ONE_THIRD);var _=(-h-(b+C))/(3*c);_>=0&&_<=1&&(u[y++]=_)}else{var E=(2*d*h-3*c*p)/(2*mathSqrt$3(d*d*d)),w=Math.acos(E)/3,D=mathSqrt$3(d),M=Math.cos(w),_=(-h-2*D*M)/(3*c),T=(-h+D*(M+THREE_SQRT*Math.sin(w)))/(3*c),P=(-h+D*(M-THREE_SQRT*Math.sin(w)))/(3*c);_>=0&&_<=1&&(u[y++]=_),T>=0&&T<=1&&(u[y++]=T),P>=0&&P<=1&&(u[y++]=P)}}return y}function cubicExtrema(n,a,r,o,l){var u=6*r-12*a+6*n,c=9*a+3*o-3*n-9*r,h=3*a-3*n,f=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var v=-h/u;v>=0&&v<=1&&(l[f++]=v)}}else{var d=u*u-4*c*h;if(isAroundZero$1(d))l[0]=-u/(2*c);else if(d>0){var p=mathSqrt$3(d),v=(-u+p)/(2*c),g=(-u-p)/(2*c);v>=0&&v<=1&&(l[f++]=v),g>=0&&g<=1&&(l[f++]=g)}}return f}function cubicSubdivide(n,a,r,o,l,u){var c=(a-n)*l+n,h=(r-a)*l+a,f=(o-r)*l+r,v=(h-c)*l+c,d=(f-h)*l+h,p=(d-v)*l+v;u[0]=n,u[1]=c,u[2]=v,u[3]=p,u[4]=p,u[5]=d,u[6]=f,u[7]=o}function cubicProjectPoint(n,a,r,o,l,u,c,h,f,v,d){var p,g=.005,y=1/0,_,S,x,T;_v0[0]=f,_v0[1]=v;for(var A=0;A<1;A+=.05)_v1[0]=cubicAt(n,r,l,c,A),_v1[1]=cubicAt(a,o,u,h,A),x=distSquare(_v0,_v1),x<y&&(p=A,y=x);y=1/0;for(var b=0;b<32&&!(g<EPSILON_NUMERIC);b++)_=p-g,S=p+g,_v1[0]=cubicAt(n,r,l,c,_),_v1[1]=cubicAt(a,o,u,h,_),x=distSquare(_v1,_v0),_>=0&&x<y?(p=_,y=x):(_v2[0]=cubicAt(n,r,l,c,S),_v2[1]=cubicAt(a,o,u,h,S),T=distSquare(_v2,_v0),S<=1&&T<y?(p=S,y=T):g*=.5);return d&&(d[0]=cubicAt(n,r,l,c,p),d[1]=cubicAt(a,o,u,h,p)),mathSqrt$3(y)}function cubicLength(n,a,r,o,l,u,c,h,f){for(var v=n,d=a,p=0,g=1/f,y=1;y<=f;y++){var _=y*g,S=cubicAt(n,r,l,c,_),x=cubicAt(a,o,u,h,_),T=S-v,A=x-d;p+=Math.sqrt(T*T+A*A),v=S,d=x}return p}function quadraticAt$1(n,a,r,o){var l=1-o;return l*(l*n+2*o*a)+o*o*r}function quadraticDerivativeAt(n,a,r,o){return 2*((1-o)*(a-n)+o*(r-a))}function quadraticRootAt(n,a,r,o,l){var u=n-2*a+r,c=2*(a-n),h=n-o,f=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var v=-h/c;v>=0&&v<=1&&(l[f++]=v)}}else{var d=c*c-4*u*h;if(isAroundZero$1(d)){var v=-c/(2*u);v>=0&&v<=1&&(l[f++]=v)}else if(d>0){var p=mathSqrt$3(d),v=(-c+p)/(2*u),g=(-c-p)/(2*u);v>=0&&v<=1&&(l[f++]=v),g>=0&&g<=1&&(l[f++]=g)}}return f}function quadraticExtremum(n,a,r){var o=n+r-2*a;return o===0?.5:(n-a)/o}function quadraticSubdivide(n,a,r,o,l){var u=(a-n)*o+n,c=(r-a)*o+a,h=(c-u)*o+u;l[0]=n,l[1]=u,l[2]=h,l[3]=h,l[4]=c,l[5]=r}function quadraticProjectPoint(n,a,r,o,l,u,c,h,f){var v,d=.005,p=1/0;_v0[0]=c,_v0[1]=h;for(var g=0;g<1;g+=.05){_v1[0]=quadraticAt$1(n,r,l,g),_v1[1]=quadraticAt$1(a,o,u,g);var y=distSquare(_v0,_v1);y<p&&(v=g,p=y)}p=1/0;for(var _=0;_<32&&!(d<EPSILON_NUMERIC);_++){var S=v-d,x=v+d;_v1[0]=quadraticAt$1(n,r,l,S),_v1[1]=quadraticAt$1(a,o,u,S);var y=distSquare(_v1,_v0);if(S>=0&&y<p)v=S,p=y;else{_v2[0]=quadraticAt$1(n,r,l,x),_v2[1]=quadraticAt$1(a,o,u,x);var T=distSquare(_v2,_v0);x<=1&&T<p?(v=x,p=T):d*=.5}}return f&&(f[0]=quadraticAt$1(n,r,l,v),f[1]=quadraticAt$1(a,o,u,v)),mathSqrt$3(p)}function quadraticLength(n,a,r,o,l,u,c){for(var h=n,f=a,v=0,d=1/c,p=1;p<=c;p++){var g=p*d,y=quadraticAt$1(n,r,l,g),_=quadraticAt$1(a,o,u,g),S=y-h,x=_-f;v+=Math.sqrt(S*S+x*x),h=y,f=_}return v}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(n){var a=n&&regexp.exec(n);if(a){var r=a[1].split(","),o=+trim$1(r[0]),l=+trim$1(r[1]),u=+trim$1(r[2]),c=+trim$1(r[3]);if(isNaN(o+l+u+c))return;var h=[];return function(f){return f<=0?0:f>=1?1:cubicRootAt(0,o,u,1,f,h)&&cubicAt(0,l,c,1,h[0])}}}var Clip=function(){function n(a){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=a.life||1e3,this._delay=a.delay||0,this.loop=a.loop||!1,this.onframe=a.onframe||noop,this.ondestroy=a.ondestroy||noop,this.onrestart=a.onrestart||noop,a.easing&&this.setEasing(a.easing)}return n.prototype.step=function(a,r){if(this._inited||(this._startTime=a+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var o=this._life,l=a-this._startTime-this._pausedTime,u=l/o;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,h=c?c(u):u;if(this.onframe(h),u===1)if(this.loop){var f=l%o;this._startTime=a-f,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(a){this.easing=a,this.easingFunc=isFunction(a)?a:easingFuncs$1[a]||createCubicEasingFunc(a)},n}();const Clip$1=Clip;var Entry=function(){function n(a){this.value=a}return n}(),LinkedList=function(){function n(){this._len=0}return n.prototype.insert=function(a){var r=new Entry(a);return this.insertEntry(r),r},n.prototype.insertEntry=function(a){this.head?(this.tail.next=a,a.prev=this.tail,a.next=null,this.tail=a):this.head=this.tail=a,this._len++},n.prototype.remove=function(a){var r=a.prev,o=a.next;r?r.next=o:this.head=o,o?o.prev=r:this.tail=r,a.next=a.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),LRU=function(){function n(a){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=a}return n.prototype.put=function(a,r){var o=this._list,l=this._map,u=null;if(l[a]==null){var c=o.len(),h=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var f=o.head;o.remove(f),delete l[f.key],u=f.value,this._lastRemovedEntry=f}h?h.value=r:h=new Entry(r),h.key=a,o.insertEntry(h),l[a]=h}return u},n.prototype.get=function(a){var r=this._map[a],o=this._list;if(r!=null)return r!==o.tail&&(o.remove(r),o.insertEntry(r)),r.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const LRU$1=LRU;var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(n){return n=Math.round(n),n<0?0:n>255?255:n}function clampCssAngle(n){return n=Math.round(n),n<0?0:n>360?360:n}function clampCssFloat(n){return n<0?0:n>1?1:n}function parseCssInt(n){var a=n;return a.length&&a.charAt(a.length-1)==="%"?clampCssByte(parseFloat(a)/100*255):clampCssByte(parseInt(a,10))}function parseCssFloat(n){var a=n;return a.length&&a.charAt(a.length-1)==="%"?clampCssFloat(parseFloat(a)/100):clampCssFloat(parseFloat(a))}function cssHueToRgb(n,a,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?n+(a-n)*r*6:r*2<1?a:r*3<2?n+(a-n)*(2/3-r)*6:n}function lerpNumber(n,a,r){return n+(a-n)*r}function setRgba(n,a,r,o,l){return n[0]=a,n[1]=r,n[2]=o,n[3]=l,n}function copyRgba(n,a){return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}var colorCache=new LRU$1(20),lastRemovedArr=null;function putToCache(n,a){lastRemovedArr&&copyRgba(lastRemovedArr,a),lastRemovedArr=colorCache.put(n,lastRemovedArr||a.slice())}function parse(n,a){if(!!n){a=a||[];var r=colorCache.get(n);if(r)return copyRgba(a,r);n=n+"";var o=n.replace(/ /g,"").toLowerCase();if(o in kCSSColorTable)return copyRgba(a,kCSSColorTable[o]),putToCache(n,a),a;var l=o.length;if(o.charAt(0)==="#"){if(l===4||l===5){var u=parseInt(o.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba(a,0,0,0,1);return}return setRgba(a,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,l===5?parseInt(o.slice(4),16)/15:1),putToCache(n,a),a}else if(l===7||l===9){var u=parseInt(o.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba(a,0,0,0,1);return}return setRgba(a,(u&16711680)>>16,(u&65280)>>8,u&255,l===9?parseInt(o.slice(7),16)/255:1),putToCache(n,a),a}return}var c=o.indexOf("("),h=o.indexOf(")");if(c!==-1&&h+1===l){var f=o.substr(0,c),v=o.substr(c+1,h-(c+1)).split(","),d=1;switch(f){case"rgba":if(v.length!==4)return v.length===3?setRgba(a,+v[0],+v[1],+v[2],1):setRgba(a,0,0,0,1);d=parseCssFloat(v.pop());case"rgb":if(v.length>=3)return setRgba(a,parseCssInt(v[0]),parseCssInt(v[1]),parseCssInt(v[2]),v.length===3?d:parseCssFloat(v[3])),putToCache(n,a),a;setRgba(a,0,0,0,1);return;case"hsla":if(v.length!==4){setRgba(a,0,0,0,1);return}return v[3]=parseCssFloat(v[3]),hsla2rgba(v,a),putToCache(n,a),a;case"hsl":if(v.length!==3){setRgba(a,0,0,0,1);return}return hsla2rgba(v,a),putToCache(n,a),a;default:return}}setRgba(a,0,0,0,1)}}function hsla2rgba(n,a){var r=(parseFloat(n[0])%360+360)%360/360,o=parseCssFloat(n[1]),l=parseCssFloat(n[2]),u=l<=.5?l*(o+1):l+o-l*o,c=l*2-u;return a=a||[],setRgba(a,clampCssByte(cssHueToRgb(c,u,r+1/3)*255),clampCssByte(cssHueToRgb(c,u,r)*255),clampCssByte(cssHueToRgb(c,u,r-1/3)*255),1),n.length===4&&(a[3]=n[3]),a}function rgba2hsla(n){if(!!n){var a=n[0]/255,r=n[1]/255,o=n[2]/255,l=Math.min(a,r,o),u=Math.max(a,r,o),c=u-l,h=(u+l)/2,f,v;if(c===0)f=0,v=0;else{h<.5?v=c/(u+l):v=c/(2-u-l);var d=((u-a)/6+c/2)/c,p=((u-r)/6+c/2)/c,g=((u-o)/6+c/2)/c;a===u?f=g-p:r===u?f=1/3+d-g:o===u&&(f=2/3+p-d),f<0&&(f+=1),f>1&&(f-=1)}var y=[f*360,v,h];return n[3]!=null&&y.push(n[3]),y}}function lift(n,a){var r=parse(n);if(r){for(var o=0;o<3;o++)a<0?r[o]=r[o]*(1-a)|0:r[o]=(255-r[o])*a+r[o]|0,r[o]>255?r[o]=255:r[o]<0&&(r[o]=0);return stringify(r,r.length===4?"rgba":"rgb")}}function toHex(n){var a=parse(n);if(a)return((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1)}function fastLerp(n,a,r){if(!(!(a&&a.length)||!(n>=0&&n<=1))){r=r||[];var o=n*(a.length-1),l=Math.floor(o),u=Math.ceil(o),c=a[l],h=a[u],f=o-l;return r[0]=clampCssByte(lerpNumber(c[0],h[0],f)),r[1]=clampCssByte(lerpNumber(c[1],h[1],f)),r[2]=clampCssByte(lerpNumber(c[2],h[2],f)),r[3]=clampCssFloat(lerpNumber(c[3],h[3],f)),r}}var fastMapToColor=fastLerp;function lerp(n,a,r){if(!(!(a&&a.length)||!(n>=0&&n<=1))){var o=n*(a.length-1),l=Math.floor(o),u=Math.ceil(o),c=parse(a[l]),h=parse(a[u]),f=o-l,v=stringify([clampCssByte(lerpNumber(c[0],h[0],f)),clampCssByte(lerpNumber(c[1],h[1],f)),clampCssByte(lerpNumber(c[2],h[2],f)),clampCssFloat(lerpNumber(c[3],h[3],f))],"rgba");return r?{color:v,leftIndex:l,rightIndex:u,value:o}:v}}var mapToColor=lerp;function modifyHSL(n,a,r,o){var l=parse(n);if(n)return l=rgba2hsla(l),a!=null&&(l[0]=clampCssAngle(a)),r!=null&&(l[1]=parseCssFloat(r)),o!=null&&(l[2]=parseCssFloat(o)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(n,a){var r=parse(n);if(r&&a!=null)return r[3]=clampCssFloat(a),stringify(r,"rgba")}function stringify(n,a){if(!(!n||!n.length)){var r=n[0]+","+n[1]+","+n[2];return(a==="rgba"||a==="hsva"||a==="hsla")&&(r+=","+n[3]),a+"("+r+")"}}function lum(n,a){var r=parse(n);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*a:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}const color=Object.freeze(Object.defineProperty({__proto__:null,parse,lift,toHex,fastLerp,fastMapToColor,lerp,mapToColor,modifyHSL,modifyAlpha,stringify,lum,random},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(n){var a;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var r=parse(n);r&&(n="rgb("+r[0]+","+r[1]+","+r[2]+")",a=r[3])}return{color:n,opacity:a==null?1:a}}var EPSILON$3=1e-4;function isAroundZero(n){return n<EPSILON$3&&n>-EPSILON$3}function round3(n){return mathRound$1(n*1e3)/1e3}function round4(n){return mathRound$1(n*1e4)/1e4}function getMatrixStr(n){return"matrix("+round3(n[0])+","+round3(n[1])+","+round3(n[2])+","+round3(n[3])+","+round4(n[4])+","+round4(n[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(n,a,r){return r==="top"?n+=a/2:r==="bottom"&&(n-=a/2),n}function hasShadow(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function getShadowKey(n){var a=n.style,r=n.getGlobalScale();return[a.shadowColor,(a.shadowBlur||0).toFixed(2),(a.shadowOffsetX||0).toFixed(2),(a.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function isImagePattern(n){return n&&!!n.image}function isSVGPattern(n){return n&&!!n.svgElement}function isPattern(n){return isImagePattern(n)||isSVGPattern(n)}function isLinearGradient(n){return n.type==="linear"}function isRadialGradient(n){return n.type==="radial"}function isGradient(n){return n&&(n.type==="linear"||n.type==="radial")}function getIdURL(n){return"url(#"+n+")"}function getPathPrecision(n){var a=n.getGlobalScale(),r=Math.max(a[0],a[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function getSRTTransformString(n){var a=n.x||0,r=n.y||0,o=(n.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(n.scaleX,1),u=retrieve2(n.scaleY,1),c=n.skewX||0,h=n.skewY||0,f=[];return(a||r)&&f.push("translate("+a+"px,"+r+"px)"),o&&f.push("rotate("+o+")"),(l!==1||u!==1)&&f.push("scale("+l+","+u+")"),(c||h)&&f.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(h*RADIAN_TO_DEGREE)+"deg)"),f.join(" ")}var encodeBase64=function(){return env$1.hasGlobalWindow&&isFunction(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer!="undefined"?function(n){return Buffer.from(n).toString("base64")}:function(n){return{}.NODE_ENV!=="production"&&logError("Base64 isn't natively supported in the current environment."),null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(n,a,r){return(a-n)*r+n}function interpolate1DArray(n,a,r,o){for(var l=a.length,u=0;u<l;u++)n[u]=interpolateNumber$1(a[u],r[u],o);return n}function interpolate2DArray(n,a,r,o){for(var l=a.length,u=l&&a[0].length,c=0;c<l;c++){n[c]||(n[c]=[]);for(var h=0;h<u;h++)n[c][h]=interpolateNumber$1(a[c][h],r[c][h],o)}return n}function add1DArray(n,a,r,o){for(var l=a.length,u=0;u<l;u++)n[u]=a[u]+r[u]*o;return n}function add2DArray(n,a,r,o){for(var l=a.length,u=l&&a[0].length,c=0;c<l;c++){n[c]||(n[c]=[]);for(var h=0;h<u;h++)n[c][h]=a[c][h]+r[c][h]*o}return n}function fillColorStops(n,a){for(var r=n.length,o=a.length,l=r>o?a:n,u=Math.min(r,o),c=l[u-1]||{color:[0,0,0,0],offset:0},h=u;h<Math.max(r,o);h++)l.push({offset:c.offset,color:c.color.slice()})}function fillArray(n,a,r){var o=n,l=a;if(!(!o.push||!l.push)){var u=o.length,c=l.length;if(u!==c){var h=u>c;if(h)o.length=c;else for(var f=u;f<c;f++)o.push(r===1?l[f]:arraySlice.call(l[f]))}for(var v=o[0]&&o[0].length,f=0;f<o.length;f++)if(r===1)isNaN(o[f])&&(o[f]=l[f]);else for(var d=0;d<v;d++)isNaN(o[f][d])&&(o[f][d]=l[f][d])}}function cloneValue(n){if(isArrayLike(n)){var a=n.length;if(isArrayLike(n[0])){for(var r=[],o=0;o<a;o++)r.push(arraySlice.call(n[o]));return r}return arraySlice.call(n)}return n}function rgba2String(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function guessArrayDim(n){return isArrayLike(n&&n[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(n){return n===VALUE_TYPE_LINEAR_GRADIENT||n===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(n){return n===VALUE_TYPE_1D_ARRAY||n===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function n(a){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=a}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(a,r,o){this._needsSort=!0;var l=this.keyframes,u=l.length,c=!1,h=VALUE_TYPE_UNKOWN,f=r;if(isArrayLike(r)){var v=guessArrayDim(r);h=v,(v===1&&!isNumber(r[0])||v===2&&!isNumber(r[0][0]))&&(c=!0)}else if(isNumber(r)&&!eqNaN(r))h=VALUE_TYPE_NUMBER;else if(isString(r))if(!isNaN(+r))h=VALUE_TYPE_NUMBER;else{var d=parse(r);d&&(f=d,h=VALUE_TYPE_COLOR)}else if(isGradientObject(r)){var p=extend({},f);p.colorStops=map$1(r.colorStops,function(y){return{offset:y.offset,color:parse(y.color)}}),isLinearGradient(r)?h=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(r)&&(h=VALUE_TYPE_RADIAL_GRADIENT),f=p}u===0?this.valType=h:(h!==this.valType||h===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var g={time:a,value:f,rawValue:r,percent:0};return o&&(g.easing=o,g.easingFunc=isFunction(o)?o:easingFuncs$1[o]||createCubicEasingFunc(o)),l.push(g),g},n.prototype.prepare=function(a,r){var o=this.keyframes;this._needsSort&&o.sort(function(S,x){return S.time-x.time});for(var l=this.valType,u=o.length,c=o[u-1],h=this.discrete,f=isArrayValueType(l),v=isGradientValueType(l),d=0;d<u;d++){var p=o[d],g=p.value,y=c.value;p.percent=p.time/a,h||(f&&d!==u-1?fillArray(g,y,l):v&&fillColorStops(g.colorStops,y.colorStops))}if(!h&&l!==VALUE_TYPE_RADIAL_GRADIENT&&r&&this.needsAnimate()&&r.needsAnimate()&&l===r.valType&&!r._finished){this._additiveTrack=r;for(var _=o[0].value,d=0;d<u;d++)l===VALUE_TYPE_NUMBER?o[d].additiveValue=o[d].value-_:l===VALUE_TYPE_COLOR?o[d].additiveValue=add1DArray([],o[d].value,_,-1):isArrayValueType(l)&&(o[d].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],o[d].value,_,-1):add2DArray([],o[d].value,_,-1))}},n.prototype.step=function(a,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var o=this._additiveTrack!=null,l=o?"additiveValue":"value",u=this.valType,c=this.keyframes,h=c.length,f=this.propName,v=u===VALUE_TYPE_COLOR,d,p=this._lastFr,g=Math.min,y,_;if(h===1)y=_=c[0];else{if(r<0)d=0;else if(r<this._lastFrP){var S=g(p+1,h-1);for(d=S;d>=0&&!(c[d].percent<=r);d--);d=g(d,h-2)}else{for(d=p;d<h&&!(c[d].percent>r);d++);d=g(d-1,h-2)}_=c[d+1],y=c[d]}if(!!(y&&_)){this._lastFr=d,this._lastFrP=r;var x=_.percent-y.percent,T=x===0?1:g((r-y.percent)/x,1);_.easingFunc&&(T=_.easingFunc(T));var A=o?this._additiveValue:v?tmpRgba:a[f];if((isArrayValueType(u)||v)&&!A&&(A=this._additiveValue=[]),this.discrete)a[f]=T<1?y.rawValue:_.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(A,y[l],_[l],T):interpolate2DArray(A,y[l],_[l],T);else if(isGradientValueType(u)){var b=y[l],C=_[l],E=u===VALUE_TYPE_LINEAR_GRADIENT;a[f]={type:E?"linear":"radial",x:interpolateNumber$1(b.x,C.x,T),y:interpolateNumber$1(b.y,C.y,T),colorStops:map$1(b.colorStops,function(D,M){var P=C.colorStops[M];return{offset:interpolateNumber$1(D.offset,P.offset,T),color:rgba2String(interpolate1DArray([],D.color,P.color,T))}}),global:C.global},E?(a[f].x2=interpolateNumber$1(b.x2,C.x2,T),a[f].y2=interpolateNumber$1(b.y2,C.y2,T)):a[f].r=interpolateNumber$1(b.r,C.r,T)}else if(v)interpolate1DArray(A,y[l],_[l],T),o||(a[f]=rgba2String(A));else{var w=interpolateNumber$1(y[l],_[l],T);o?this._additiveValue=w:a[f]=w}o&&this._addToTarget(a)}}},n.prototype._addToTarget=function(a){var r=this.valType,o=this.propName,l=this._additiveValue;r===VALUE_TYPE_NUMBER?a[o]=a[o]+l:r===VALUE_TYPE_COLOR?(parse(a[o],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),a[o]=rgba2String(tmpRgba)):r===VALUE_TYPE_1D_ARRAY?add1DArray(a[o],a[o],l,1):r===VALUE_TYPE_2D_ARRAY&&add2DArray(a[o],a[o],l,1)},n}(),Animator=function(){function n(a,r,o,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=a,this._loop=r,r&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=o}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(a){this._target=a},n.prototype.when=function(a,r,o){return this.whenWithKeys(a,r,keys(r),o)},n.prototype.whenWithKeys=function(a,r,o,l){for(var u=this._tracks,c=0;c<o.length;c++){var h=o[c],f=u[h];if(!f){f=u[h]=new Track(h);var v=void 0,d=this._getAdditiveTrack(h);if(d){var p=d.keyframes,g=p[p.length-1];v=g&&g.value,d.valType===VALUE_TYPE_COLOR&&v&&(v=rgba2String(v))}else v=this._target[h];if(v==null)continue;a>0&&f.addKeyframe(0,cloneValue(v),l),this._trackKeys.push(h)}f.addKeyframe(a,cloneValue(r[h]),l)}return this._maxTime=Math.max(this._maxTime,a),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(a){return this._maxTime=a,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var a=this._doneCbs;if(a)for(var r=a.length,o=0;o<r;o++)a[o].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var a=this.animation,r=this._abortedCbs;if(a&&a.removeClip(this._clip),this._clip=null,r)for(var o=0;o<r.length;o++)r[o].call(this)},n.prototype._setTracksFinished=function(){for(var a=this._tracks,r=this._trackKeys,o=0;o<r.length;o++)a[r[o]].setFinished()},n.prototype._getAdditiveTrack=function(a){var r,o=this._additiveAnimators;if(o)for(var l=0;l<o.length;l++){var u=o[l].getTrack(a);u&&(r=u)}return r},n.prototype.start=function(a){if(!(this._started>0)){this._started=1;for(var r=this,o=[],l=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],h=this._tracks[c],f=this._getAdditiveTrack(c),v=h.keyframes,d=v.length;if(h.prepare(l,f),h.needsAnimate())if(!this._allowDiscrete&&h.discrete){var p=v[d-1];p&&(r._target[h.propName]=p.rawValue),h.setFinished()}else o.push(h)}if(o.length||this._force){var g=new Clip$1({life:l,loop:this._loop,delay:this._delay||0,onframe:function(y){r._started=2;var _=r._additiveAnimators;if(_){for(var S=!1,x=0;x<_.length;x++)if(_[x]._clip){S=!0;break}S||(r._additiveAnimators=null)}for(var x=0;x<o.length;x++)o[x].step(r._target,y);var T=r._onframeCbs;if(T)for(var x=0;x<T.length;x++)T[x](r._target,y)},ondestroy:function(){r._doneCallback()}});this._clip=g,this.animation&&this.animation.addClip(g),a&&g.setEasing(a)}else this._doneCallback();return this}},n.prototype.stop=function(a){if(!!this._clip){var r=this._clip;a&&r.onframe(1),this._abortedCallback()}},n.prototype.delay=function(a){return this._delay=a,this},n.prototype.during=function(a){return a&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(a)),this},n.prototype.done=function(a){return a&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(a)),this},n.prototype.aborted=function(a){return a&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(a)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(a){return this._tracks[a]},n.prototype.getTracks=function(){var a=this;return map$1(this._trackKeys,function(r){return a._tracks[r]})},n.prototype.stopTracks=function(a,r){if(!a.length||!this._clip)return!0;for(var o=this._tracks,l=this._trackKeys,u=0;u<a.length;u++){var c=o[a[u]];c&&!c.isFinished()&&(r?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var h=!0,u=0;u<l.length;u++)if(!o[l[u]].isFinished()){h=!1;break}return h&&this._abortedCallback(),h},n.prototype.saveTo=function(a,r,o){if(!!a){r=r||this._trackKeys;for(var l=0;l<r.length;l++){var u=r[l],c=this._tracks[u];if(!(!c||c.isFinished())){var h=c.keyframes,f=h[o?0:h.length-1];f&&(a[u]=cloneValue(f.rawValue))}}}},n.prototype.__changeFinalValue=function(a,r){r=r||keys(a);for(var o=0;o<r.length;o++){var l=r[o],u=this._tracks[l];if(!!u){var c=u.keyframes;if(c.length>1){var h=c.pop();u.addKeyframe(h.time,a[l]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},n}();const Animator$1=Animator;function getTime(){return new Date().getTime()}var Animation=function(n){__extends(a,n);function a(r){var o=n.call(this)||this;return o._running=!1,o._time=0,o._pausedTime=0,o._pauseStart=0,o._paused=!1,r=r||{},o.stage=r.stage||{},o}return a.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},a.prototype.addAnimator=function(r){r.animation=this;var o=r.getClip();o&&this.addClip(o)},a.prototype.removeClip=function(r){if(!!r.animation){var o=r.prev,l=r.next;o?o.next=l:this._head=l,l?l.prev=o:this._tail=o,r.next=r.prev=r.animation=null}},a.prototype.removeAnimator=function(r){var o=r.getClip();o&&this.removeClip(o),r.animation=null},a.prototype.update=function(r){for(var o=getTime()-this._pausedTime,l=o-this._time,u=this._head;u;){var c=u.next,h=u.step(o,l);h&&(u.ondestroy(),this.removeClip(u)),u=c}this._time=o,r||(this.trigger("frame",l),this.stage.update&&this.stage.update())},a.prototype._startLoop=function(){var r=this;this._running=!0;function o(){r._running&&(requestAnimationFrame$1(o),!r._paused&&r.update())}requestAnimationFrame$1(o)},a.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},a.prototype.stop=function(){this._running=!1},a.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},a.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},a.prototype.clear=function(){for(var r=this._head;r;){var o=r.next;r.prev=r.next=r.animation=null,r=o}this._head=this._tail=null},a.prototype.isFinished=function(){return this._head==null},a.prototype.animate=function(r,o){o=o||{},this.start();var l=new Animator$1(r,o.loop);return this.addAnimator(l),l},a}(Eventful$1);const Animation$1=Animation;var TOUCH_CLICK_DELAY=300,globalEventSupported=env$1.domSupported,localNativeListenerNames=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],a=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},o=map$1(n,function(l){var u=l.replace("mouse","pointer");return r.hasOwnProperty(u)?u:l});return{mouse:n,touch:a,pointer:o}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(n){var a=n.pointerType;return a==="pen"||a==="touch"}function setTouchTimer(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function markTouch(n){n&&(n.zrByTouch=!0)}function normalizeGlobalEvent(n,a){return normalizeEvent(n.dom,new FakeGlobalEvent(n,a),!0)}function isLocalEl(n,a){for(var r=a,o=!1;r&&r.nodeType!==9&&!(o=r.domBelongToZr||r!==a&&r===n.painterRoot);)r=r.parentNode;return o}var FakeGlobalEvent=function(){function n(a,r){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=r.type,this.target=this.currentTarget=a.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return n}(),localDOMHandlers={mousedown:function(n){n=normalizeEvent(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=normalizeEvent(this.dom,n);var a=this.__mayPointerCapture;a&&(n.zrX!==a[0]||n.zrY!==a[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=normalizeEvent(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=normalizeEvent(this.dom,n);var a=n.toElement||n.relatedTarget;isLocalEl(this,a)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){wheelEventSupported=!0,n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){wheelEventSupported||(n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),localDOMHandlers.mousemove.call(this,n),localDOMHandlers.mousedown.call(this,n)},touchmove:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"change"),localDOMHandlers.mousemove.call(this,n)},touchend:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"end"),localDOMHandlers.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,n)},pointerdown:function(n){localDOMHandlers.mousedown.call(this,n)},pointermove:function(n){isPointerFromTouch(n)||localDOMHandlers.mousemove.call(this,n)},pointerup:function(n){localDOMHandlers.mouseup.call(this,n)},pointerout:function(n){isPointerFromTouch(n)||localDOMHandlers.mouseout.call(this,n)}};each$f(["click","dblclick","contextmenu"],function(n){localDOMHandlers[n]=function(a){a=normalizeEvent(this.dom,a),this.trigger(n,a)}});var globalDOMHandlers={pointermove:function(n){isPointerFromTouch(n)||globalDOMHandlers.mousemove.call(this,n)},pointerup:function(n){globalDOMHandlers.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var a=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),a&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function mountLocalDOMEventListeners(n,a){var r=a.domHandlers;env$1.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(o){mountSingleDOMEventListener(a,o,function(l){r[o].call(n,l)})}):(env$1.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(o){mountSingleDOMEventListener(a,o,function(l){r[o].call(n,l),setTouchTimer(a)})}),each$f(localNativeListenerNames.mouse,function(o){mountSingleDOMEventListener(a,o,function(l){l=getNativeEvent(l),a.touching||r[o].call(n,l)})}))}function mountGlobalDOMEventListeners(n,a){env$1.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,r):env$1.touchEventsSupported||each$f(globalNativeListenerNames.mouse,r);function r(o){function l(u){u=getNativeEvent(u),isLocalEl(n,u.target)||(u=normalizeGlobalEvent(n,u),a.domHandlers[o].call(n,u))}mountSingleDOMEventListener(a,o,l,{capture:!0})}}function mountSingleDOMEventListener(n,a,r,o){n.mounted[a]=r,n.listenerOpts[a]=o,addEventListener(n.domTarget,a,r,o)}function unmountDOMEventListeners(n){var a=n.mounted;for(var r in a)a.hasOwnProperty(r)&&removeEventListener(n.domTarget,r,a[r],n.listenerOpts[r]);n.mounted={}}var DOMHandlerScope=function(){function n(a,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=a,this.domHandlers=r}return n}(),HandlerDomProxy=function(n){__extends(a,n);function a(r,o){var l=n.call(this)||this;return l.__pointerCapturing=!1,l.dom=r,l.painterRoot=o,l._localHandlerScope=new DOMHandlerScope(r,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return a.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},a.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},a.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var o=this._globalHandlerScope;r?mountGlobalDOMEventListeners(this,o):unmountDOMEventListeners(o)}},a}(Eventful$1);const HandlerProxy=HandlerDomProxy;var dpr=1;env$1.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(n){return n>EPSILON$2||n<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function n(){}return n.prototype.getLocalTransform=function(a){return n.getLocalTransform(this,a)},n.prototype.setPosition=function(a){this.x=a[0],this.y=a[1]},n.prototype.setScale=function(a){this.scaleX=a[0],this.scaleY=a[1]},n.prototype.setSkew=function(a){this.skewX=a[0],this.skewY=a[1]},n.prototype.setOrigin=function(a){this.originX=a[0],this.originY=a[1]},n.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},n.prototype.updateTransform=function(){var a=this.parent&&this.parent.transform,r=this.needLocalTransform(),o=this.transform;if(!(r||a)){o&&(mIdentity(o),this.invTransform=null);return}o=o||create$1(),r?this.getLocalTransform(o):mIdentity(o),a&&(r?mul(o,a,o):copy(o,a)),this.transform=o,this._resolveGlobalScaleRatio(o)},n.prototype._resolveGlobalScaleRatio=function(a){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(scaleTmp);var o=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-o)*r+o)/scaleTmp[0]||0,c=((scaleTmp[1]-l)*r+l)/scaleTmp[1]||0;a[0]*=u,a[1]*=u,a[2]*=c,a[3]*=c}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,a)},n.prototype.getComputedTransform=function(){for(var a=this,r=[];a;)r.push(a),a=a.parent;for(;a=r.pop();)a.updateTransform();return this.transform},n.prototype.setLocalTransform=function(a){if(!!a){var r=a[0]*a[0]+a[1]*a[1],o=a[2]*a[2]+a[3]*a[3],l=Math.atan2(a[1],a[0]),u=Math.PI/2+l-Math.atan2(a[3],a[2]);o=Math.sqrt(o)*Math.cos(u),r=Math.sqrt(r),this.skewX=u,this.skewY=0,this.rotation=-l,this.x=+a[4],this.y=+a[5],this.scaleX=r,this.scaleY=o,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(!!this.transform){var a=this.parent,r=this.transform;a&&a.transform&&(mul(tmpTransform,a.invTransform,r),r=tmpTransform);var o=this.originX,l=this.originY;(o||l)&&(originTransform[4]=o,originTransform[5]=l,mul(tmpTransform,r,originTransform),tmpTransform[4]-=o,tmpTransform[5]-=l,r=tmpTransform),this.setLocalTransform(r)}},n.prototype.getGlobalScale=function(a){var r=this.transform;return a=a||[],r?(a[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(a[0]=-a[0]),r[3]<0&&(a[1]=-a[1]),a):(a[0]=1,a[1]=1,a)},n.prototype.transformCoordToLocal=function(a,r){var o=[a,r],l=this.invTransform;return l&&applyTransform$1(o,o,l),o},n.prototype.transformCoordToGlobal=function(a,r){var o=[a,r],l=this.transform;return l&&applyTransform$1(o,o,l),o},n.prototype.getLineScale=function(){var a=this.transform;return a&&abs(a[0]-1)>1e-10&&abs(a[3]-1)>1e-10?Math.sqrt(abs(a[0]*a[3]-a[2]*a[1])):1},n.prototype.copyTransform=function(a){copyTransform(this,a)},n.getLocalTransform=function(a,r){r=r||[];var o=a.originX||0,l=a.originY||0,u=a.scaleX,c=a.scaleY,h=a.anchorX,f=a.anchorY,v=a.rotation||0,d=a.x,p=a.y,g=a.skewX?Math.tan(a.skewX):0,y=a.skewY?Math.tan(-a.skewY):0;if(o||l||h||f){var _=o+h,S=l+f;r[4]=-_*u-g*S*c,r[5]=-S*c-y*_*u}else r[4]=r[5]=0;return r[0]=u,r[3]=c,r[1]=y*u,r[2]=g*c,v&&rotate(r,r,v),r[4]+=o+d,r[5]+=l+p,r},n.initDefaultProps=function(){var a=n.prototype;a.scaleX=a.scaleY=a.globalScaleRatio=1,a.x=a.y=a.originX=a.originY=a.skewX=a.skewY=a.rotation=a.anchorX=a.anchorY=0}(),n}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(n,a){for(var r=0;r<TRANSFORMABLE_PROPS.length;r++){var o=TRANSFORMABLE_PROPS[r];n[o]=a[o]}}const Transformable$1=Transformable;var textWidthCache={};function getWidth(n,a){a=a||DEFAULT_FONT;var r=textWidthCache[a];r||(r=textWidthCache[a]=new LRU$1(500));var o=r.get(n);return o==null&&(o=platformApi.measureText(n,a).width,r.put(n,o)),o}function innerGetBoundingRect(n,a,r,o){var l=getWidth(n,a),u=getLineHeight(a),c=adjustTextX(0,l,r),h=adjustTextY(0,u,o),f=new BoundingRect$1(c,h,l,u);return f}function getBoundingRect(n,a,r,o){var l=((n||"")+"").split(`
`),u=l.length;if(u===1)return innerGetBoundingRect(l[0],a,r,o);for(var c=new BoundingRect$1(0,0,0,0),h=0;h<l.length;h++){var f=innerGetBoundingRect(l[h],a,r,o);h===0?c.copy(f):c.union(f)}return c}function adjustTextX(n,a,r){return r==="right"?n-=a:r==="center"&&(n-=a/2),n}function adjustTextY(n,a,r){return r==="middle"?n-=a/2:r==="bottom"&&(n-=a),n}function getLineHeight(n){return getWidth("\u56FD",n)}function parsePercent$1(n,a){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*a:parseFloat(n):n}function calculateTextPosition(n,a,r){var o=a.position||"inside",l=a.distance!=null?a.distance:5,u=r.height,c=r.width,h=u/2,f=r.x,v=r.y,d="left",p="top";if(o instanceof Array)f+=parsePercent$1(o[0],r.width),v+=parsePercent$1(o[1],r.height),d=null,p=null;else switch(o){case"left":f-=l,v+=h,d="right",p="middle";break;case"right":f+=l+c,v+=h,p="middle";break;case"top":f+=c/2,v-=l,d="center",p="bottom";break;case"bottom":f+=c/2,v+=u+l,d="center";break;case"inside":f+=c/2,v+=h,d="center",p="middle";break;case"insideLeft":f+=l,v+=h,p="middle";break;case"insideRight":f+=c-l,v+=h,d="right",p="middle";break;case"insideTop":f+=c/2,v+=l,d="center";break;case"insideBottom":f+=c/2,v+=u-l,d="center",p="bottom";break;case"insideTopLeft":f+=l,v+=l;break;case"insideTopRight":f+=c-l,v+=l,d="right";break;case"insideBottomLeft":f+=l,v+=u-l,p="bottom";break;case"insideBottomRight":f+=c-l,v+=u-l,d="right",p="bottom";break}return n=n||{},n.x=f,n.y=v,n.align=d,n.verticalAlign=p,n}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(n,a){return n[a]=!0,n},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect$1(0,0,0,0),Element=function(){function n(a){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(a)}return n.prototype._init=function(a){this.attr(a)},n.prototype.drift=function(a,r,o){switch(this.draggable){case"horizontal":r=0;break;case"vertical":a=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=a,l[5]+=r,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(a){var r=this._textContent;if(r&&(!r.ignore||a)){this.textConfig||(this.textConfig={});var o=this.textConfig,l=o.local,u=r.innerTransformable,c=void 0,h=void 0,f=!1;u.parent=l?this:null;var v=!1;if(u.copyTransform(r),o.position!=null){var d=tmpBoundingRect;o.layoutRect?d.copy(o.layoutRect):d.copy(this.getBoundingRect()),l||d.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,o,d):calculateTextPosition(tmpTextPosCalcRes,o,d),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,h=tmpTextPosCalcRes.verticalAlign;var p=o.origin;if(p&&o.rotation!=null){var g=void 0,y=void 0;p==="center"?(g=d.width*.5,y=d.height*.5):(g=parsePercent$1(p[0],d.width),y=parsePercent$1(p[1],d.height)),v=!0,u.originX=-u.x+g+(l?0:d.x),u.originY=-u.y+y+(l?0:d.y)}}o.rotation!=null&&(u.rotation=o.rotation);var _=o.offset;_&&(u.x+=_[0],u.y+=_[1],v||(u.originX=-_[0],u.originY=-_[1]));var S=o.inside==null?typeof o.position=="string"&&o.position.indexOf("inside")>=0:o.inside,x=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),T=void 0,A=void 0,b=void 0;S&&this.canBeInsideText()?(T=o.insideFill,A=o.insideStroke,(T==null||T==="auto")&&(T=this.getInsideTextFill()),(A==null||A==="auto")&&(A=this.getInsideTextStroke(T),b=!0)):(T=o.outsideFill,A=o.outsideStroke,(T==null||T==="auto")&&(T=this.getOutsideFill()),(A==null||A==="auto")&&(A=this.getOutsideStroke(T),b=!0)),T=T||"#000",(T!==x.fill||A!==x.stroke||b!==x.autoStroke||c!==x.align||h!==x.verticalAlign)&&(f=!0,x.fill=T,x.stroke=A,x.autoStroke=b,x.align=c,x.verticalAlign=h,r.setDefaultTextStyle(x)),r.__dirty|=REDRAW_BIT,f&&r.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(a){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},n.prototype.getOutsideStroke=function(a){var r=this.__zr&&this.__zr.getBackgroundColor(),o=typeof r=="string"&&parse(r);o||(o=[255,255,255,1]);for(var l=o[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)o[c]=o[c]*l+(u?0:255)*(1-l);return o[3]=1,stringify(o,"rgba")},n.prototype.traverse=function(a,r){},n.prototype.attrKV=function(a,r){a==="textConfig"?this.setTextConfig(r):a==="textContent"?this.setTextContent(r):a==="clipPath"?this.setClipPath(r):a==="extra"?(this.extra=this.extra||{},extend(this.extra,r)):this[a]=r},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(a,r){if(typeof a=="string")this.attrKV(a,r);else if(isObject$3(a))for(var o=a,l=keys(o),u=0;u<l.length;u++){var c=l[u];this.attrKV(c,a[c])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(a){this._innerSaveToNormal(a);for(var r=this._normalState,o=0;o<this.animators.length;o++){var l=this.animators[o],u=l.__fromStateTransition;if(!(l.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var c=l.targetName,h=c?r[c]:r;l.saveTo(h)}}},n.prototype._innerSaveToNormal=function(a){var r=this._normalState;r||(r=this._normalState={}),a.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(a,r,PRIMARY_STATES_KEYS$1)},n.prototype._savePrimaryToNormal=function(a,r,o){for(var l=0;l<o.length;l++){var u=o[l];a[u]!=null&&!(u in r)&&(r[u]=this[u])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(a){return this.states[a]},n.prototype.ensureState=function(a){var r=this.states;return r[a]||(r[a]={}),r[a]},n.prototype.clearStates=function(a){this.useState(PRESERVED_NORMAL_STATE,!1,a)},n.prototype.useState=function(a,r,o,l){var u=a===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&u)){var h=this.currentStates,f=this.stateTransition;if(!(indexOf(h,a)>=0&&(r||h.length===1))){var v;if(this.stateProxy&&!u&&(v=this.stateProxy(a)),v||(v=this.states&&this.states[a]),!v&&!u){logError("State "+a+" not exists.");return}u||this.saveCurrentToNormalState(v);var d=!!(v&&v.hoverLayer||l);d&&this._toggleHoverLayerFlag(!0),this._applyStateObj(a,v,this._normalState,r,!o&&!this.__inHover&&f&&f.duration>0,f);var p=this._textContent,g=this._textGuide;return p&&p.useState(a,r,o,d),g&&g.useState(a,r,o,d),u?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(a):this.currentStates=[a],this._updateAnimationTargets(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),v}}},n.prototype.useStates=function(a,r,o){if(!a.length)this.clearStates();else{var l=[],u=this.currentStates,c=a.length,h=c===u.length;if(h){for(var f=0;f<c;f++)if(a[f]!==u[f]){h=!1;break}}if(h)return;for(var f=0;f<c;f++){var v=a[f],d=void 0;this.stateProxy&&(d=this.stateProxy(v,a)),d||(d=this.states[v]),d&&l.push(d)}var p=l[c-1],g=!!(p&&p.hoverLayer||o);g&&this._toggleHoverLayerFlag(!0);var y=this._mergeStates(l),_=this.stateTransition;this.saveCurrentToNormalState(y),this._applyStateObj(a.join(","),y,this._normalState,!1,!r&&!this.__inHover&&_&&_.duration>0,_);var S=this._textContent,x=this._textGuide;S&&S.useStates(a,r,g),x&&x.useStates(a,r,g),this._updateAnimationTargets(),this.currentStates=a.slice(),this.markRedraw(),!g&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},n.prototype._updateAnimationTargets=function(){for(var a=0;a<this.animators.length;a++){var r=this.animators[a];r.targetName&&r.changeTarget(this[r.targetName])}},n.prototype.removeState=function(a){var r=indexOf(this.currentStates,a);if(r>=0){var o=this.currentStates.slice();o.splice(r,1),this.useStates(o)}},n.prototype.replaceState=function(a,r,o){var l=this.currentStates.slice(),u=indexOf(l,a),c=indexOf(l,r)>=0;u>=0?c?l.splice(u,1):l[u]=r:o&&!c&&l.push(r),this.useStates(l)},n.prototype.toggleState=function(a,r){r?this.useState(a,!0):this.removeState(a)},n.prototype._mergeStates=function(a){for(var r={},o,l=0;l<a.length;l++){var u=a[l];extend(r,u),u.textConfig&&(o=o||{},extend(o,u.textConfig))}return o&&(r.textConfig=o),r},n.prototype._applyStateObj=function(a,r,o,l,u,c){var h=!(r&&l);r&&r.textConfig?(this.textConfig=extend({},l?this.textConfig:o.textConfig),extend(this.textConfig,r.textConfig)):h&&o.textConfig&&(this.textConfig=o.textConfig);for(var f={},v=!1,d=0;d<PRIMARY_STATES_KEYS$1.length;d++){var p=PRIMARY_STATES_KEYS$1[d],g=u&&DEFAULT_ANIMATABLE_MAP[p];r&&r[p]!=null?g?(v=!0,f[p]=r[p]):this[p]=r[p]:h&&o[p]!=null&&(g?(v=!0,f[p]=o[p]):this[p]=o[p])}if(!u)for(var d=0;d<this.animators.length;d++){var y=this.animators[d],_=y.targetName;y.getLoop()||y.__changeFinalValue(_?(r||o)[_]:r||o)}v&&this._transitionState(a,f,c)},n.prototype._attachComponent=function(a){if(a.__zr&&!a.__hostTarget){if({}.NODE_ENV!=="production")throw new Error("Text element has been added to zrender.");return}if(a===this){if({}.NODE_ENV!=="production")throw new Error("Recursive component attachment.");return}var r=this.__zr;r&&a.addSelfToZr(r),a.__zr=r,a.__hostTarget=this},n.prototype._detachComponent=function(a){a.__zr&&a.removeSelfFromZr(a.__zr),a.__zr=null,a.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(a){this._clipPath&&this._clipPath!==a&&this.removeClipPath(),this._attachComponent(a),this._clipPath=a,this.markRedraw()},n.prototype.removeClipPath=function(){var a=this._clipPath;a&&(this._detachComponent(a),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(a){var r=this._textContent;if(r!==a){if(r&&r!==a&&this.removeTextContent(),{}.NODE_ENV!=="production"&&a.__zr&&!a.__hostTarget)throw new Error("Text element has been added to zrender.");a.innerTransformable=new Transformable$1,this._attachComponent(a),this._textContent=a,this.markRedraw()}},n.prototype.setTextConfig=function(a){this.textConfig||(this.textConfig={}),extend(this.textConfig,a),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var a=this._textContent;a&&(a.innerTransformable=null,this._detachComponent(a),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(a){this._textGuide&&this._textGuide!==a&&this.removeTextGuideLine(),this._attachComponent(a),this._textGuide=a,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var a=this._textGuide;a&&(this._detachComponent(a),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var a=this.__zr;a&&(this.__inHover?a.refreshHover():a.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(a){this.__inHover=a;var r=this._textContent,o=this._textGuide;r&&(r.__inHover=a),o&&(o.__inHover=a)},n.prototype.addSelfToZr=function(a){if(this.__zr!==a){this.__zr=a;var r=this.animators;if(r)for(var o=0;o<r.length;o++)a.animation.addAnimator(r[o]);this._clipPath&&this._clipPath.addSelfToZr(a),this._textContent&&this._textContent.addSelfToZr(a),this._textGuide&&this._textGuide.addSelfToZr(a)}},n.prototype.removeSelfFromZr=function(a){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var o=0;o<r.length;o++)a.animation.removeAnimator(r[o]);this._clipPath&&this._clipPath.removeSelfFromZr(a),this._textContent&&this._textContent.removeSelfFromZr(a),this._textGuide&&this._textGuide.removeSelfFromZr(a)}},n.prototype.animate=function(a,r,o){var l=a?this[a]:this;if({}.NODE_ENV!=="production"&&!l){logError('Property "'+a+'" is not existed in element '+this.id);return}var u=new Animator$1(l,r,o);return a&&(u.targetName=a),this.addAnimator(u,a),u},n.prototype.addAnimator=function(a,r){var o=this.__zr,l=this;a.during(function(){l.updateDuringAnimation(r)}).done(function(){var u=l.animators,c=indexOf(u,a);c>=0&&u.splice(c,1)}),this.animators.push(a),o&&o.animation.addAnimator(a),o&&o.wakeUp()},n.prototype.updateDuringAnimation=function(a){this.markRedraw()},n.prototype.stopAnimation=function(a,r){for(var o=this.animators,l=o.length,u=[],c=0;c<l;c++){var h=o[c];!a||a===h.scope?h.stop(r):u.push(h)}return this.animators=u,this},n.prototype.animateTo=function(a,r,o){animateTo(this,a,r,o)},n.prototype.animateFrom=function(a,r,o){animateTo(this,a,r,o,!0)},n.prototype._transitionState=function(a,r,o,l){for(var u=animateTo(this,r,o,l),c=0;c<u.length;c++)u[c].__fromStateTransition=a},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var a=n.prototype;a.type="element",a.name="",a.ignore=a.silent=a.isGroup=a.draggable=a.dragging=a.ignoreClip=a.__inHover=!1,a.__dirty=REDRAW_BIT;var r={};function o(u,c,h){r[u+c+h]||(console.warn("DEPRECATED: '"+u+"' has been deprecated. use '"+c+"', '"+h+"' instead"),r[u+c+h]=!0)}function l(u,c,h,f){Object.defineProperty(a,u,{get:function(){if({}.NODE_ENV!=="production"&&o(u,h,f),!this[c]){var d=this[c]=[];v(this,d)}return this[c]},set:function(d){({}).NODE_ENV!=="production"&&o(u,h,f),this[h]=d[0],this[f]=d[1],this[c]=d,v(this,d)}});function v(d,p){Object.defineProperty(p,0,{get:function(){return d[h]},set:function(g){d[h]=g}}),Object.defineProperty(p,1,{get:function(){return d[f]},set:function(g){d[f]=g}})}}Object.defineProperty&&(l("position","_legacyPos","x","y"),l("scale","_legacyScale","scaleX","scaleY"),l("origin","_legacyOrigin","originX","originY"))}(),n}();mixin(Element,Eventful$1),mixin(Element,Transformable$1);function animateTo(n,a,r,o,l){r=r||{};var u=[];animateToShallow(n,"",n,a,r,o,u,l);var c=u.length,h=!1,f=r.done,v=r.aborted,d=function(){h=!0,c--,c<=0&&(h?f&&f():v&&v())},p=function(){c--,c<=0&&(h?f&&f():v&&v())};c||f&&f(),u.length>0&&r.during&&u[0].during(function(_,S){r.during(S)});for(var g=0;g<u.length;g++){var y=u[g];d&&y.done(d),p&&y.aborted(p),r.force&&y.duration(r.duration),y.start(r.easing)}return u}function copyArrShallow(n,a,r){for(var o=0;o<r;o++)n[o]=a[o]}function is2DArray(n){return isArrayLike(n[0])}function copyValue(n,a,r){if(isArrayLike(a[r]))if(isArrayLike(n[r])||(n[r]=[]),isTypedArray(a[r])){var o=a[r].length;n[r].length!==o&&(n[r]=new a[r].constructor(o),copyArrShallow(n[r],a[r],o))}else{var l=a[r],u=n[r],c=l.length;if(is2DArray(l))for(var h=l[0].length,f=0;f<c;f++)u[f]?copyArrShallow(u[f],l[f],h):u[f]=Array.prototype.slice.call(l[f]);else copyArrShallow(u,l,c);u.length=l.length}else n[r]=a[r]}function isValueSame(n,a){return n===a||isArrayLike(n)&&isArrayLike(a)&&is1DArraySame(n,a)}function is1DArraySame(n,a){var r=n.length;if(r!==a.length)return!1;for(var o=0;o<r;o++)if(n[o]!==a[o])return!1;return!0}function animateToShallow(n,a,r,o,l,u,c,h){for(var f=keys(o),v=l.duration,d=l.delay,p=l.additive,g=l.setToFinal,y=!isObject$3(u),_=n.animators,S=[],x=0;x<f.length;x++){var T=f[x],A=o[T];if(A!=null&&r[T]!=null&&(y||u[T]))if(isObject$3(A)&&!isArrayLike(A)&&!isGradientObject(A)){if(a){h||(r[T]=A,n.updateDuringAnimation(a));continue}animateToShallow(n,T,r[T],A,l,u&&u[T],c,h)}else S.push(T);else h||(r[T]=A,n.updateDuringAnimation(a),S.push(T))}var b=S.length;if(!p&&b)for(var C=0;C<_.length;C++){var E=_[C];if(E.targetName===a){var w=E.stopTracks(S);if(w){var D=indexOf(_,E);_.splice(D,1)}}}if(l.force||(S=filter(S,function(I){return!isValueSame(o[I],r[I])}),b=S.length),b>0||l.force&&!c.length){var M=void 0,P=void 0,L=void 0;if(h){P={},g&&(M={});for(var C=0;C<b;C++){var T=S[C];P[T]=r[T],g?M[T]=o[T]:r[T]=o[T]}}else if(g){L={};for(var C=0;C<b;C++){var T=S[C];L[T]=cloneValue(r[T]),copyValue(r,o,T)}}var E=new Animator$1(r,!1,!1,p?filter(_,function(R){return R.targetName===a}):null);E.targetName=a,l.scope&&(E.scope=l.scope),g&&M&&E.whenWithKeys(0,M,S),L&&E.whenWithKeys(0,L,S),E.whenWithKeys(v==null?500:v,h?P:o,S).delay(d||0),n.addAnimator(E,a),c.push(E)}}const Element$1=Element;var Group$3=function(n){__extends(a,n);function a(r){var o=n.call(this)||this;return o.isGroup=!0,o._children=[],o.attr(r),o}return a.prototype.childrenRef=function(){return this._children},a.prototype.children=function(){return this._children.slice()},a.prototype.childAt=function(r){return this._children[r]},a.prototype.childOfName=function(r){for(var o=this._children,l=0;l<o.length;l++)if(o[l].name===r)return o[l]},a.prototype.childCount=function(){return this._children.length},a.prototype.add=function(r){if(r&&(r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),{}.NODE_ENV!=="production"&&r.__hostTarget))throw"This elemenet has been used as an attachment";return this},a.prototype.addBefore=function(r,o){if(r&&r!==this&&r.parent!==this&&o&&o.parent===this){var l=this._children,u=l.indexOf(o);u>=0&&(l.splice(u,0,r),this._doAdd(r))}return this},a.prototype.replace=function(r,o){var l=indexOf(this._children,r);return l>=0&&this.replaceAt(o,l),this},a.prototype.replaceAt=function(r,o){var l=this._children,u=l[o];if(r&&r!==this&&r.parent!==this&&r!==u){l[o]=r,u.parent=null;var c=this.__zr;c&&u.removeSelfFromZr(c),this._doAdd(r)}return this},a.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var o=this.__zr;o&&o!==r.__zr&&r.addSelfToZr(o),o&&o.refresh()},a.prototype.remove=function(r){var o=this.__zr,l=this._children,u=indexOf(l,r);return u<0?this:(l.splice(u,1),r.parent=null,o&&r.removeSelfFromZr(o),o&&o.refresh(),this)},a.prototype.removeAll=function(){for(var r=this._children,o=this.__zr,l=0;l<r.length;l++){var u=r[l];o&&u.removeSelfFromZr(o),u.parent=null}return r.length=0,this},a.prototype.eachChild=function(r,o){for(var l=this._children,u=0;u<l.length;u++){var c=l[u];r.call(o,c,u)}return this},a.prototype.traverse=function(r,o){for(var l=0;l<this._children.length;l++){var u=this._children[l],c=r.call(o,u);u.isGroup&&!c&&u.traverse(r,o)}return this},a.prototype.addSelfToZr=function(r){n.prototype.addSelfToZr.call(this,r);for(var o=0;o<this._children.length;o++){var l=this._children[o];l.addSelfToZr(r)}},a.prototype.removeSelfFromZr=function(r){n.prototype.removeSelfFromZr.call(this,r);for(var o=0;o<this._children.length;o++){var l=this._children[o];l.removeSelfFromZr(r)}},a.prototype.getBoundingRect=function(r){for(var o=new BoundingRect$1(0,0,0,0),l=r||this._children,u=[],c=null,h=0;h<l.length;h++){var f=l[h];if(!(f.ignore||f.invisible)){var v=f.getBoundingRect(),d=f.getLocalTransform(u);d?(BoundingRect$1.applyTransform(o,v,d),c=c||o.clone(),c.union(o)):(c=c||v.clone(),c.union(v))}}return c||o},a}(Element$1);Group$3.prototype.type="group";const Group$4=Group$3;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(n){delete instances$1[n]}function isDarkMode(n){if(!n)return!1;if(typeof n=="string")return lum(n,1)<DARK_MODE_THRESHOLD;if(n.colorStops){for(var a=n.colorStops,r=0,o=a.length,l=0;l<o;l++)r+=lum(a[l].color,1);return r/=o,r<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function n(a,r,o){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,o=o||{},this.dom=r,this.id=a;var u=new Storage$1,c=o.renderer||"canvas";if(painterCtors[c]||(c=keys(painterCtors)[0]),{}.NODE_ENV!=="production"&&!painterCtors[c])throw new Error("Renderer '"+c+"' is not imported. Please import it first.");o.useDirtyRect=o.useDirtyRect==null?!1:o.useDirtyRect;var h=new painterCtors[c](r,u,o,a),f=o.ssr||h.ssrOnly;this.storage=u,this.painter=h;var v=!env$1.node&&!env$1.worker&&!f?new HandlerProxy(h.getViewportRoot(),h.root):null,d=o.useCoarsePointer,p=d==null||d==="auto"?env$1.touchEventsSupported:!!d,g=44,y;p&&(y=retrieve2(o.pointerSize,g)),this.handler=new Handler$1(u,h,v,h.root,y),this.animation=new Animation$1({stage:{update:f?null:function(){return l._flush(!0)}}}),f||this.animation.start()}return n.prototype.add=function(a){!a||(this.storage.addRoot(a),a.addSelfToZr(this),this.refresh())},n.prototype.remove=function(a){!a||(this.storage.delRoot(a),a.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(a,r){this.painter.configLayer&&this.painter.configLayer(a,r),this.refresh()},n.prototype.setBackgroundColor=function(a){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(a),this.refresh(),this._backgroundColor=a,this._darkMode=isDarkMode(a)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(a){this._darkMode=a},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(a){a||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(a){var r,o=getTime();this._needsRefresh&&(r=!0,this.refreshImmediately(a)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var l=getTime();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-o})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(a){this._sleepAfterStill=a},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},n.prototype.resize=function(a){a=a||{},this.painter.resize(a.width,a.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(a){this.handler.setCursorStyle(a)},n.prototype.findHover=function(a,r){return this.handler.findHover(a,r)},n.prototype.on=function(a,r,o){return this.handler.on(a,r,o),this},n.prototype.off=function(a,r){this.handler.off(a,r)},n.prototype.trigger=function(a,r){this.handler.trigger(a,r)},n.prototype.clear=function(){for(var a=this.storage.getRoots(),r=0;r<a.length;r++)a[r]instanceof Group$4&&a[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,delInstance(this.id)},n}();function init$2(n,a){var r=new ZRender(guid(),n,a);return instances$1[r.id]=r,r}function dispose$1(n){n.dispose()}function disposeAll(){for(var n in instances$1)instances$1.hasOwnProperty(n)&&instances$1[n].dispose();instances$1={}}function getInstance(n){return instances$1[n]}function registerPainter(n,a){painterCtors[n]=a}var version$1="5.4.4";const zrender=Object.freeze(Object.defineProperty({__proto__:null,init:init$2,dispose:dispose$1,disposeAll,getInstance,registerPainter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(n){return n.replace(/^\s+|\s+$/g,"")}function linearMap$2(n,a,r,o){var l=a[0],u=a[1],c=r[0],h=r[1],f=u-l,v=h-c;if(f===0)return v===0?c:(c+h)/2;if(o)if(f>0){if(n<=l)return c;if(n>=u)return h}else{if(n>=l)return c;if(n<=u)return h}else{if(n===l)return c;if(n===u)return h}return(n-l)/f*v+c}function parsePercent(n,a){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return isString(n)?_trim(n).match(/%$/)?parseFloat(n)/100*a:parseFloat(n):n==null?NaN:+n}function round$3(n,a,r){return a==null&&(a=10),a=Math.min(Math.max(0,a),ROUND_SUPPORTED_PRECISION_MAX),n=(+n).toFixed(a),r?n:+n}function asc$2(n){return n.sort(function(a,r){return a-r}),n}function getPrecision(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var a=1,r=0;r<15;r++,a*=10)if(Math.round(n*a)/a===n)return r}return getPrecisionSafe(n)}function getPrecisionSafe(n){var a=n.toString().toLowerCase(),r=a.indexOf("e"),o=r>0?+a.slice(r+1):0,l=r>0?r:a.length,u=a.indexOf("."),c=u<0?0:l-1-u;return Math.max(0,c-o)}function getPixelPrecision(n,a){var r=Math.log,o=Math.LN10,l=Math.floor(r(n[1]-n[0])/o),u=Math.round(r(Math.abs(a[1]-a[0]))/o),c=Math.min(Math.max(-l+u,0),20);return isFinite(c)?c:20}function getPercentWithPrecision(n,a,r){if(!n[a])return 0;var o=getPercentSeats(n,r);return o[a]||0}function getPercentSeats(n,a){var r=reduce(n,function(y,_){return y+(isNaN(_)?0:_)},0);if(r===0)return[];for(var o=Math.pow(10,a),l=map$1(n,function(y){return(isNaN(y)?0:y)/r*o*100}),u=o*100,c=map$1(l,function(y){return Math.floor(y)}),h=reduce(c,function(y,_){return y+_},0),f=map$1(l,function(y,_){return y-c[_]});h<u;){for(var v=Number.NEGATIVE_INFINITY,d=null,p=0,g=f.length;p<g;++p)f[p]>v&&(v=f[p],d=p);++c[d],f[d]=0,++h}return map$1(c,function(y){return y/o})}function addSafe(n,a){var r=Math.max(getPrecision(n),getPrecision(a)),o=n+a;return r>ROUND_SUPPORTED_PRECISION_MAX?o:round$3(o,r)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(n){var a=Math.PI*2;return(n%a+a)%a}function isRadianAroundZero(n){return n>-RADIAN_EPSILON&&n<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(n){if(n instanceof Date)return n;if(isString(n)){var a=TIME_REG.exec(n);if(!a)return new Date(NaN);if(a[8]){var r=+a[4]||0;return a[8].toUpperCase()!=="Z"&&(r-=+a[8].slice(0,3)),new Date(Date.UTC(+a[1],+(a[2]||1)-1,+a[3]||1,r,+(a[5]||0),+a[6]||0,a[7]?+a[7].substring(0,3):0))}else return new Date(+a[1],+(a[2]||1)-1,+a[3]||1,+a[4]||0,+(a[5]||0),+a[6]||0,a[7]?+a[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function quantity(n){return Math.pow(10,quantityExponent(n))}function quantityExponent(n){if(n===0)return 0;var a=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,a)>=10&&a++,a}function nice(n,a){var r=quantityExponent(n),o=Math.pow(10,r),l=n/o,u;return a?l<1.5?u=1:l<2.5?u=2:l<4?u=3:l<7?u=5:u=10:l<1?u=1:l<2?u=2:l<3?u=3:l<5?u=5:u=10,n=u*o,r>=-20?+n.toFixed(r<0?-r:0):n}function quantile(n,a){var r=(n.length-1)*a+1,o=Math.floor(r),l=+n[o-1],u=r-o;return u?l+u*(n[o]-l):l}function reformIntervals(n){n.sort(function(f,v){return h(f,v,0)?-1:1});for(var a=-1/0,r=1,o=0;o<n.length;){for(var l=n[o].interval,u=n[o].close,c=0;c<2;c++)l[c]<=a&&(l[c]=a,u[c]=c?1:1-r),a=l[c],r=u[c];l[0]===l[1]&&u[0]*u[1]!==1?n.splice(o,1):o++}return n;function h(f,v,d){return f.interval[d]<v.interval[d]||f.interval[d]===v.interval[d]&&(f.close[d]-v.close[d]===(d?-1:1)||!d&&h(f,v,1))}}function numericToNumber(n){var a=parseFloat(n);return a==n&&(a!==0||!isString(n)||n.indexOf("x")<=0)?a:NaN}function isNumeric(n){return!isNaN(numericToNumber(n))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(n,a){return a===0?n:getGreatestCommonDividor(a,n%a)}function getLeastCommonMultiple(n,a){return n==null?a:a==null?n:n*a/getGreatestCommonDividor(n,a)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console!="undefined"&&console.warn&&console.log;function outputLog(n,a,r){if(hasConsole){if(r){if(storedLogs[a])return;storedLogs[a]=!0}console[n](ECHARTS_PREFIX+a)}}function log(n,a){outputLog("log",n,a)}function warn(n,a){outputLog("warn",n,a)}function error(n,a){outputLog("error",n,a)}function deprecateLog(n){({}).NODE_ENV!=="production"&&outputLog("warn","DEPRECATED: "+n,!0)}function deprecateReplaceLog(n,a,r){({}).NODE_ENV!=="production"&&deprecateLog((r?"["+r+"]":"")+(n+" is deprecated, use "+a+" instead."))}function makePrintable(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var r="";if({}.NODE_ENV!=="production"){var o=function(l){return l===void 0?"undefined":l===1/0?"Infinity":l===-1/0?"-Infinity":eqNaN(l)?"NaN":l instanceof Date?"Date("+l.toISOString()+")":isFunction(l)?"function () { ... }":isRegExp(l)?l+"":null};r=map$1(n,function(l){if(isString(l))return l;var u=o(l);if(u!=null)return u;if(typeof JSON!="undefined"&&JSON.stringify)try{return JSON.stringify(l,function(c,h){var f=o(h);return f==null?h:f})}catch(c){return"?"}else return"?"}).join(" ")}return r}function throwError(n){throw new Error(n)}function interpolateNumber(n,a,r){return(a-n)*r+n}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(n){return n instanceof Array?n:n==null?[]:[n]}function defaultEmphasis(n,a,r){if(n){n[a]=n[a]||{},n.emphasis=n.emphasis||{},n.emphasis[a]=n.emphasis[a]||{};for(var o=0,l=r.length;o<l;o++){var u=r[o];!n.emphasis[a].hasOwnProperty(u)&&n[a].hasOwnProperty(u)&&(n.emphasis[a][u]=n[a][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(n){return isObject$3(n)&&!isArray$1(n)&&!(n instanceof Date)?n.value:n}function isDataItemOption(n){return isObject$3(n)&&!(n instanceof Array)}function mappingToExists(n,a,r){var o=r==="normalMerge",l=r==="replaceMerge",u=r==="replaceAll";n=n||[],a=(a||[]).slice();var c=createHashMap();each$f(a,function(f,v){if(!isObject$3(f)){a[v]=null;return}({}).NODE_ENV!=="production"&&(f.id!=null&&!isValidIdOrName(f.id)&&warnInvalidateIdOrName(f.id),f.name!=null&&!isValidIdOrName(f.name)&&warnInvalidateIdOrName(f.name))});var h=prepareResult(n,c,r);return(o||l)&&mappingById(h,n,c,a),o&&mappingByName(h,a),o||l?mappingByIndex(h,a,l):u&&mappingInReplaceAllMode(h,a),makeIdAndName(h),h}function prepareResult(n,a,r){var o=[];if(r==="replaceAll")return o;for(var l=0;l<n.length;l++){var u=n[l];u&&u.id!=null&&a.set(u.id,l),o.push({existing:r==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return o}function mappingById(n,a,r,o){each$f(o,function(l,u){if(!(!l||l.id==null)){var c=makeComparableKey(l.id),h=r.get(c);if(h!=null){var f=n[h];assert(!f.newOption,'Duplicated option on id "'+c+'".'),f.newOption=l,f.existing=a[h],o[u]=null}}})}function mappingByName(n,a){each$f(a,function(r,o){if(!(!r||r.name==null))for(var l=0;l<n.length;l++){var u=n[l].existing;if(!n[l].newOption&&u&&(u.id==null||r.id==null)&&!isComponentIdInternal(r)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,r)){n[l].newOption=r,a[o]=null;return}}})}function mappingByIndex(n,a,r){each$f(a,function(o){if(!!o){for(var l,u=0;(l=n[u])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&o.id!=null&&!keyExistAndEqual("id",o,l.existing));)u++;l?(l.newOption=o,l.brandNew=r):n.push({newOption:o,brandNew:r,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(n,a){each$f(a,function(r){n.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(n){var a=createHashMap();each$f(n,function(r){var o=r.existing;o&&a.set(o.id,r)}),each$f(n,function(r){var o=r.newOption;assert(!o||o.id==null||!a.get(o.id)||a.get(o.id)===r,"id duplicates: "+(o&&o.id)),o&&o.id!=null&&a.set(o.id,r),!r.keyInfo&&(r.keyInfo={})}),each$f(n,function(r,o){var l=r.existing,u=r.newOption,c=r.keyInfo;if(!!isObject$3(u)){if(c.name=u.name!=null?makeComparableKey(u.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+o,l)c.id=makeComparableKey(l.id);else if(u.id!=null)c.id=makeComparableKey(u.id);else{var h=0;do c.id="\0"+c.name+"\0"+h++;while(a.get(c.id))}a.set(c.id,r)}})}function keyExistAndEqual(n,a,r){var o=convertOptionIdName(a[n],null),l=convertOptionIdName(r[n],null);return o!=null&&l!=null&&o===l}function makeComparableKey(n){if({}.NODE_ENV!=="production"&&n==null)throw new Error;return convertOptionIdName(n,"")}function convertOptionIdName(n,a){return n==null?a:isString(n)?n:isNumber(n)||isStringSafe(n)?n+"":a}function warnInvalidateIdOrName(n){({}).NODE_ENV!=="production"&&warn("`"+n+"` is invalid id or name. Must be a string or number.")}function isValidIdOrName(n){return isStringSafe(n)||isNumeric(n)}function isNameSpecified(n){var a=n.name;return!!(a&&a.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(n){return n&&n.id!=null&&makeComparableKey(n.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(n){return INTERNAL_COMPONENT_ID_PREFIX+n}function setComponentTypeToKeyInfo(n,a,r){each$f(n,function(o){var l=o.newOption;isObject$3(l)&&(o.keyInfo.mainType=a,o.keyInfo.subType=determineSubType(a,l,o.existing,r))})}function determineSubType(n,a,r,o){var l=a.type?a.type:r?r.subType:o.determineSubType(n,a);return l}function compressBatches(n,a){var r={},o={};return l(n||[],r),l(a||[],o,r),[u(r),u(o)];function l(c,h,f){for(var v=0,d=c.length;v<d;v++){var p=convertOptionIdName(c[v].seriesId,null);if(p==null)return;for(var g=normalizeToArray(c[v].dataIndex),y=f&&f[p],_=0,S=g.length;_<S;_++){var x=g[_];y&&y[x]?y[x]=null:(h[p]||(h[p]={}))[x]=1}}}function u(c,h){var f=[];for(var v in c)if(c.hasOwnProperty(v)&&c[v]!=null)if(h)f.push(+v);else{var d=u(c[v],!0);d.length&&f.push({seriesId:v,dataIndex:d})}return f}}function queryDataIndex(n,a){if(a.dataIndexInside!=null)return a.dataIndexInside;if(a.dataIndex!=null)return isArray$1(a.dataIndex)?map$1(a.dataIndex,function(r){return n.indexOfRawIndex(r)}):n.indexOfRawIndex(a.dataIndex);if(a.name!=null)return isArray$1(a.name)?map$1(a.name,function(r){return n.indexOfName(r)}):n.indexOfName(a.name)}function makeInner(){var n="__ec_inner_"+innerUniqueIndex++;return function(a){return a[n]||(a[n]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(n,a,r){var o=preParseFinder(a,r),l=o.mainTypeSpecified,u=o.queryOptionMap,c=o.others,h=c,f=r?r.defaultMainType:null;return!l&&f&&u.set(f,{}),u.each(function(v,d){var p=queryReferringComponents(n,d,v,{useDefault:f===d,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});h[d+"Models"]=p.models,h[d+"Model"]=p.models[0]}),h}function preParseFinder(n,a){var r;if(isString(n)){var o={};o[n+"Index"]=0,r=o}else r=n;var l=createHashMap(),u={},c=!1;return each$f(r,function(h,f){if(f==="dataIndex"||f==="dataIndexInside"){u[f]=h;return}var v=f.match(/^(\w+)(Index|Id|Name)$/)||[],d=v[1],p=(v[2]||"").toLowerCase();if(!(!d||!p||a&&a.includeMainTypes&&indexOf(a.includeMainTypes,d)<0)){c=c||!!d;var g=l.get(d)||l.set(d,{});g[p]=h}}),{mainTypeSpecified:c,queryOptionMap:l,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(n,a,r,o){o=o||SINGLE_REFERRING;var l=r.index,u=r.id,c=r.name,h={models:null,specified:l!=null||u!=null||c!=null};if(!h.specified){var f=void 0;return h.models=o.useDefault&&(f=n.getComponent(a))?[f]:[],h}return l==="none"||l===!1?(assert(o.enableNone,'`"none"` or `false` is not a valid value on index option.'),h.models=[],h):(l==="all"&&(assert(o.enableAll,'`"all"` is not a valid value on index option.'),l=u=c=null),h.models=n.queryComponents({mainType:a,index:l,id:u,name:c}),h)}function setAttribute(n,a,r){n.setAttribute?n.setAttribute(a,r):n[a]=r}function getAttribute(n,a){return n.getAttribute?n.getAttribute(a):n[a]}function getTooltipRenderMode(n){return n==="auto"?env$1.domSupported?"html":"richText":n||"html"}function groupData(n,a){var r=createHashMap(),o=[];return each$f(n,function(l){var u=a(l);(r.get(u)||(o.push(u),r.set(u,[]))).push(l)}),{keys:o,buckets:r}}function interpolateRawValues(n,a,r,o,l){var u=a==null||a==="auto";if(o==null)return o;if(isNumber(o)){var c=interpolateNumber(r||0,o,l);return round$3(c,u?Math.max(getPrecision(r||0),getPrecision(o)):a)}else{if(isString(o))return l<1?r:o;for(var h=[],f=r,v=o,d=Math.max(f?f.length:0,v.length),p=0;p<d;++p){var g=n.getDimensionInfo(p);if(g&&g.type==="ordinal")h[p]=(l<1&&f?f:v)[p];else{var y=f&&f[p]?f[p]:0,_=v[p],c=interpolateNumber(y,_,l);h[p]=round$3(c,u?Math.max(getPrecision(y),getPrecision(_)):a)}}return h}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(n){var a={main:"",sub:""};if(n){var r=n.split(TYPE_DELIMITER);a.main=r[0]||"",a.sub=r[1]||""}return a}function checkClassType(n){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function isExtendedClass(n){return!!(n&&n[IS_EXTENDED_CLASS])}function enableClassExtend(n,a){n.$constructor=n,n.extend=function(r){({}).NODE_ENV!=="production"&&each$f(a,function(u){r[u]||console.warn("Method `"+u+"` should be implemented"+(r.type?" in "+r.type:"")+".")});var o=this,l;return isESClass(o)?l=function(u){__extends(c,u);function c(){return u.apply(this,arguments)||this}return c}(o):(l=function(){(r.$constructor||o).apply(this,arguments)},inherits(l,this)),extend(l.prototype,r),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=o,l}}function isESClass(n){return isFunction(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function mountExtend(n,a){n.extend=a.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(n){var a=["__\0is_clz",classBase++].join("_");n.prototype[a]=!0,{}.NODE_ENV!=="production"&&assert(!n.isInstance,'The method "is" can not be defined.'),n.isInstance=function(r){return!!(r&&r[a])}}function superCall(n,a){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return this.superClass.prototype[a].apply(n,r)}function superApply(n,a,r){return this.superClass.prototype[a].apply(n,r)}function enableClassManagement(n){var a={};n.registerClass=function(o){var l=o.type||o.prototype.type;if(l){checkClassType(l),o.prototype.type=l;var u=parseClassType(l);if(!u.sub)({}).NODE_ENV!=="production"&&a[u.main]&&console.warn(u.main+" exists."),a[u.main]=o;else if(u.sub!==IS_CONTAINER){var c=r(u);c[u.sub]=o}}return o},n.getClass=function(o,l,u){var c=a[o];if(c&&c[IS_CONTAINER]&&(c=l?c[l]:null),u&&!c)throw new Error(l?"Component "+o+"."+(l||"")+" is used but not imported.":o+".type should be specified.");return c},n.getClassesByMainType=function(o){var l=parseClassType(o),u=[],c=a[l.main];return c&&c[IS_CONTAINER]?each$f(c,function(h,f){f!==IS_CONTAINER&&u.push(h)}):u.push(c),u},n.hasClass=function(o){var l=parseClassType(o);return!!a[l.main]},n.getAllClassMainTypes=function(){var o=[];return each$f(a,function(l,u){o.push(u)}),o},n.hasSubTypes=function(o){var l=parseClassType(o),u=a[l.main];return u&&u[IS_CONTAINER]};function r(o){var l=a[o.main];return(!l||!l[IS_CONTAINER])&&(l=a[o.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(n,a){for(var r=0;r<n.length;r++)n[r][1]||(n[r][1]=n[r][0]);return a=a||!1,function(o,l,u){for(var c={},h=0;h<n.length;h++){var f=n[h][1];if(!(l&&indexOf(l,f)>=0||u&&indexOf(u,f)<0)){var v=o.getShallow(f,a);v!=null&&(c[n[h][0]]=v)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function n(){}return n.prototype.getAreaStyle=function(a,r){return getAreaStyle(this,a,r)},n}(),globalImageCache=new LRU$1(50);function findExistImage(n){if(typeof n=="string"){var a=globalImageCache.get(n);return a&&a.image}else return n}function createOrUpdateImage(n,a,r,o,l){if(n)if(typeof n=="string"){if(a&&a.__zrImageSrc===n||!r)return a;var u=globalImageCache.get(n),c={hostEl:r,cb:o,cbPayload:l};return u?(a=u.image,!isImageReady(a)&&u.pending.push(c)):(a=platformApi.loadImage(n,imageOnLoad,imageOnLoad),a.__zrImageSrc=n,globalImageCache.put(n,a.__cachedImgObj={image:a,pending:[c]})),a}else return n;else return a}function imageOnLoad(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var a=0;a<n.pending.length;a++){var r=n.pending[a],o=r.cb;o&&o(this,r.cbPayload),r.hostEl.dirty()}n.pending.length=0}function isImageReady(n){return n&&n.width&&n.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(n,a,r,o,l){if(!a)return"";var u=(n+"").split(`
`);l=prepareTruncateOptions(a,r,o,l);for(var c=0,h=u.length;c<h;c++)u[c]=truncateSingleLine(u[c],l);return u.join(`
`)}function prepareTruncateOptions(n,a,r,o){o=o||{};var l=extend({},o);l.font=a,r=retrieve2(r,"..."),l.maxIterations=retrieve2(o.maxIterations,2);var u=l.minChar=retrieve2(o.minChar,0);l.cnCharWidth=getWidth("\u56FD",a);var c=l.ascCharWidth=getWidth("a",a);l.placeholder=retrieve2(o.placeholder,"");for(var h=n=Math.max(0,n-1),f=0;f<u&&h>=c;f++)h-=c;var v=getWidth(r,a);return v>h&&(r="",v=0),h=n-v,l.ellipsis=r,l.ellipsisWidth=v,l.contentWidth=h,l.containerWidth=n,l}function truncateSingleLine(n,a){var r=a.containerWidth,o=a.font,l=a.contentWidth;if(!r)return"";var u=getWidth(n,o);if(u<=r)return n;for(var c=0;;c++){if(u<=l||c>=a.maxIterations){n+=a.ellipsis;break}var h=c===0?estimateLength(n,l,a.ascCharWidth,a.cnCharWidth):u>0?Math.floor(n.length*l/u):0;n=n.substr(0,h),u=getWidth(n,o)}return n===""&&(n=a.placeholder),n}function estimateLength(n,a,r,o){for(var l=0,u=0,c=n.length;u<c&&l<a;u++){var h=n.charCodeAt(u);l+=0<=h&&h<=127?r:o}return u}function parsePlainText(n,a){n!=null&&(n+="");var r=a.overflow,o=a.padding,l=a.font,u=r==="truncate",c=getLineHeight(l),h=retrieve2(a.lineHeight,c),f=!!a.backgroundColor,v=a.lineOverflow==="truncate",d=a.width,p;d!=null&&(r==="break"||r==="breakAll")?p=n?wrapText(n,a.font,d,r==="breakAll",0).lines:[]:p=n?n.split(`
`):[];var g=p.length*h,y=retrieve2(a.height,g);if(g>y&&v){var _=Math.floor(y/h);p=p.slice(0,_)}if(n&&u&&d!=null)for(var S=prepareTruncateOptions(d,l,a.ellipsis,{minChar:a.truncateMinChar,placeholder:a.placeholder}),x=0;x<p.length;x++)p[x]=truncateSingleLine(p[x],S);for(var T=y,A=0,x=0;x<p.length;x++)A=Math.max(getWidth(p[x],l),A);d==null&&(d=A);var b=A;return o&&(T+=o[0]+o[2],b+=o[1]+o[3],d+=o[1]+o[3]),f&&(b=d),{lines:p,height:y,outerWidth:b,outerHeight:T,lineHeight:h,calculatedLineHeight:c,contentWidth:A,contentHeight:g,width:d}}var RichTextToken=function(){function n(){}return n}(),RichTextLine=function(){function n(a){this.tokens=[],a&&(this.tokens=a)}return n}(),RichTextContentBlock=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function parseRichText(n,a){var r=new RichTextContentBlock;if(n!=null&&(n+=""),!n)return r;for(var o=a.width,l=a.height,u=a.overflow,c=(u==="break"||u==="breakAll")&&o!=null?{width:o,accumWidth:0,breakAll:u==="breakAll"}:null,h=STYLE_REG.lastIndex=0,f;(f=STYLE_REG.exec(n))!=null;){var v=f.index;v>h&&pushTokens(r,n.substring(h,v),a,c),pushTokens(r,f[2],a,c,f[1]),h=STYLE_REG.lastIndex}h<n.length&&pushTokens(r,n.substring(h,n.length),a,c);var d=[],p=0,g=0,y=a.padding,_=u==="truncate",S=a.lineOverflow==="truncate";function x(F,z,H){F.width=z,F.lineHeight=H,p+=H,g=Math.max(g,z)}e:for(var T=0;T<r.lines.length;T++){for(var A=r.lines[T],b=0,C=0,E=0;E<A.tokens.length;E++){var w=A.tokens[E],D=w.styleName&&a.rich[w.styleName]||{},M=w.textPadding=D.padding,P=M?M[1]+M[3]:0,L=w.font=D.font||a.font;w.contentHeight=getLineHeight(L);var I=retrieve2(D.height,w.contentHeight);if(w.innerHeight=I,M&&(I+=M[0]+M[2]),w.height=I,w.lineHeight=retrieve3(D.lineHeight,a.lineHeight,I),w.align=D&&D.align||a.align,w.verticalAlign=D&&D.verticalAlign||"middle",S&&l!=null&&p+w.lineHeight>l){E>0?(A.tokens=A.tokens.slice(0,E),x(A,C,b),r.lines=r.lines.slice(0,T+1)):r.lines=r.lines.slice(0,T);break e}var R=D.width,O=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")w.percentWidth=R,d.push(w),w.contentWidth=getWidth(w.text,L);else{if(O){var N=D.backgroundColor,V=N&&N.image;V&&(V=findExistImage(V),isImageReady(V)&&(w.width=Math.max(w.width,V.width*I/V.height)))}var B=_&&o!=null?o-C:null;B!=null&&B<w.width?!O||B<P?(w.text="",w.width=w.contentWidth=0):(w.text=truncateText(w.text,B-P,L,a.ellipsis,{minChar:a.truncateMinChar}),w.width=w.contentWidth=getWidth(w.text,L)):w.contentWidth=getWidth(w.text,L)}w.width+=P,C+=w.width,D&&(b=Math.max(b,w.lineHeight))}x(A,C,b)}r.outerWidth=r.width=retrieve2(o,g),r.outerHeight=r.height=retrieve2(l,p),r.contentHeight=p,r.contentWidth=g,y&&(r.outerWidth+=y[1]+y[3],r.outerHeight+=y[0]+y[2]);for(var T=0;T<d.length;T++){var w=d[T],G=w.percentWidth;w.width=parseInt(G,10)/100*r.width}return r}function pushTokens(n,a,r,o,l){var u=a==="",c=l&&r.rich[l]||{},h=n.lines,f=c.font||r.font,v=!1,d,p;if(o){var g=c.padding,y=g?g[1]+g[3]:0;if(c.width!=null&&c.width!=="auto"){var _=parsePercent$1(c.width,o.width)+y;h.length>0&&_+o.accumWidth>o.width&&(d=a.split(`
`),v=!0),o.accumWidth=_}else{var S=wrapText(a,f,o.width,o.breakAll,o.accumWidth);o.accumWidth=S.accumWidth+y,p=S.linesWidths,d=S.lines}}else d=a.split(`
`);for(var x=0;x<d.length;x++){var T=d[x],A=new RichTextToken;if(A.styleName=l,A.text=T,A.isLineHolder=!T&&!u,typeof c.width=="number"?A.width=c.width:A.width=p?p[x]:getWidth(T,f),!x&&!v){var b=(h[h.length-1]||(h[0]=new RichTextLine)).tokens,C=b.length;C===1&&b[0].isLineHolder?b[0]=A:(T||!C||u)&&b.push(A)}else h.push(new RichTextLine([A]))}}function isAlphabeticLetter(n){var a=n.charCodeAt(0);return a>=32&&a<=591||a>=880&&a<=4351||a>=4608&&a<=5119||a>=7680&&a<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(n,a){return n[a]=!0,n},{});function isWordBreakChar(n){return isAlphabeticLetter(n)?!!breakCharMap[n]:!0}function wrapText(n,a,r,o,l){for(var u=[],c=[],h="",f="",v=0,d=0,p=0;p<n.length;p++){var g=n.charAt(p);if(g===`
`){f&&(h+=f,d+=v),u.push(h),c.push(d),h="",f="",v=0,d=0;continue}var y=getWidth(g,a),_=o?!1:!isWordBreakChar(g);if(u.length?d+y>r:l+d+y>r){d?(h||f)&&(_?(h||(h=f,f="",v=0,d=v),u.push(h),c.push(d-v),f+=g,v+=y,h="",d=v):(f&&(h+=f,f="",v=0),u.push(h),c.push(d),h=g,d=y)):_?(u.push(f),c.push(v),f=g,v=y):(u.push(g),c.push(y));continue}d+=y,_?(f+=g,v+=y):(f&&(h+=f,f="",v=0),h+=g)}return!u.length&&!h&&(h=n,f="",v=0),f&&(h+=f),h&&(u.push(h),c.push(d)),u.length===1&&(d+=l),{accumWidth:d,lines:u,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype._init=function(r){for(var o=keys(r),l=0;l<o.length;l++){var u=o[l];u==="style"?this.useStyle(r[u]):n.prototype.attrKV.call(this,u,r[u])}this.style||this.useStyle({})},a.prototype.beforeBrush=function(){},a.prototype.afterBrush=function(){},a.prototype.innerBeforeBrush=function(){},a.prototype.innerAfterBrush=function(){},a.prototype.shouldBePainted=function(r,o,l,u){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,r,o)||c&&!c[0]&&!c[3])return!1;if(l&&this.__clipPaths){for(var h=0;h<this.__clipPaths.length;++h)if(this.__clipPaths[h].isZeroArea())return!1}if(u&&this.parent)for(var f=this.parent;f;){if(f.ignore)return!1;f=f.parent}return!0},a.prototype.contain=function(r,o){return this.rectContain(r,o)},a.prototype.traverse=function(r,o){r.call(o,this)},a.prototype.rectContain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();return u.contain(l[0],l[1])},a.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,l=this.getBoundingRect(),u=this.style,c=u.shadowBlur||0,h=u.shadowOffsetX||0,f=u.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new BoundingRect$1(0,0,0,0)),o?BoundingRect$1.applyTransform(r,l,o):r.copy(l),(c||h||f)&&(r.width+=c*2+Math.abs(h),r.height+=c*2+Math.abs(f),r.x=Math.min(r.x,r.x+h-c),r.y=Math.min(r.y,r.y+f-c));var v=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-v),r.y=Math.floor(r.y-v),r.width=Math.ceil(r.width+1+v*2),r.height=Math.ceil(r.height+1+v*2))}return r},a.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new BoundingRect$1(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},a.prototype.getPrevPaintRect=function(){return this._prevPaintRect},a.prototype.animateStyle=function(r){return this.animate("style",r)},a.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},a.prototype.attrKV=function(r,o){r!=="style"?n.prototype.attrKV.call(this,r,o):this.style?this.setStyle(o):this.useStyle(o)},a.prototype.setStyle=function(r,o){return typeof r=="string"?this.style[r]=o:extend(this.style,r),this.dirtyStyle(),this},a.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},a.prototype.dirty=function(){this.dirtyStyle()},a.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},a.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},a.prototype.createStyle=function(r){return createObject(DEFAULT_COMMON_STYLE,r)},a.prototype.useStyle=function(r){r[STYLE_MAGIC_KEY]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},a.prototype.isStyleObject=function(r){return r[STYLE_MAGIC_KEY]},a.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,o,PRIMARY_STATES_KEYS)},a.prototype._applyStateObj=function(r,o,l,u,c,h){n.prototype._applyStateObj.call(this,r,o,l,u,c,h);var f=!(o&&u),v;if(o&&o.style?c?u?v=o.style:(v=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(v,o.style)):(v=this._mergeStyle(this.createStyle(),u?this.style:l.style),this._mergeStyle(v,o.style)):f&&(v=l.style),v)if(c){var d=this.style;if(this.style=this.createStyle(f?{}:d),f)for(var p=keys(d),g=0;g<p.length;g++){var y=p[g];y in v&&(v[y]=v[y],this.style[y]=d[y])}for(var _=keys(v),g=0;g<_.length;g++){var y=_[g];this.style[y]=this.style[y]}this._transitionState(r,{style:v},h,this.getAnimationStyleProps())}else this.useStyle(v);for(var S=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,g=0;g<S.length;g++){var y=S[g];o&&o[y]!=null?this[y]=o[y]:f&&l[y]!=null&&(this[y]=l[y])}},a.prototype._mergeStates=function(r){for(var o=n.prototype._mergeStates.call(this,r),l,u=0;u<r.length;u++){var c=r[u];c.style&&(l=l||{},this._mergeStyle(l,c.style))}return l&&(o.style=l),o},a.prototype._mergeStyle=function(r,o){return extend(r,o),r},a.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},a.initDefaultProps=function(){var r=a.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),a}(Element$1),tmpRect=new BoundingRect$1(0,0,0,0),viewRect=new BoundingRect$1(0,0,0,0);function isDisplayableCulled(n,a,r){return tmpRect.copy(n.getBoundingRect()),n.transform&&tmpRect.applyTransform(n.transform),viewRect.width=a,viewRect.height=r,!tmpRect.intersect(viewRect)}const Displayable$1=Displayable;var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(n,a,r){if(n.length!==0){for(var o=n[0],l=o[0],u=o[0],c=o[1],h=o[1],f=1;f<n.length;f++)o=n[f],l=mathMin$9(l,o[0]),u=mathMax$9(u,o[0]),c=mathMin$9(c,o[1]),h=mathMax$9(h,o[1]);a[0]=l,a[1]=c,r[0]=u,r[1]=h}}function fromLine(n,a,r,o,l,u){l[0]=mathMin$9(n,r),l[1]=mathMin$9(a,o),u[0]=mathMax$9(n,r),u[1]=mathMax$9(a,o)}var xDim=[],yDim=[];function fromCubic(n,a,r,o,l,u,c,h,f,v){var d=cubicExtrema,p=cubicAt,g=d(n,r,l,c,xDim);f[0]=1/0,f[1]=1/0,v[0]=-1/0,v[1]=-1/0;for(var y=0;y<g;y++){var _=p(n,r,l,c,xDim[y]);f[0]=mathMin$9(_,f[0]),v[0]=mathMax$9(_,v[0])}g=d(a,o,u,h,yDim);for(var y=0;y<g;y++){var S=p(a,o,u,h,yDim[y]);f[1]=mathMin$9(S,f[1]),v[1]=mathMax$9(S,v[1])}f[0]=mathMin$9(n,f[0]),v[0]=mathMax$9(n,v[0]),f[0]=mathMin$9(c,f[0]),v[0]=mathMax$9(c,v[0]),f[1]=mathMin$9(a,f[1]),v[1]=mathMax$9(a,v[1]),f[1]=mathMin$9(h,f[1]),v[1]=mathMax$9(h,v[1])}function fromQuadratic(n,a,r,o,l,u,c,h){var f=quadraticExtremum,v=quadraticAt$1,d=mathMax$9(mathMin$9(f(n,r,l),1),0),p=mathMax$9(mathMin$9(f(a,o,u),1),0),g=v(n,r,l,d),y=v(a,o,u,p);c[0]=mathMin$9(n,l,g),c[1]=mathMin$9(a,u,y),h[0]=mathMax$9(n,l,g),h[1]=mathMax$9(a,u,y)}function fromArc(n,a,r,o,l,u,c,h,f){var v=min$1,d=max$1,p=Math.abs(l-u);if(p%PI2$8<1e-4&&p>1e-4){h[0]=n-r,h[1]=a-o,f[0]=n+r,f[1]=a+o;return}if(start[0]=mathCos$4(l)*r+n,start[1]=mathSin$4(l)*o+a,end[0]=mathCos$4(u)*r+n,end[1]=mathSin$4(u)*o+a,v(h,start,end),d(f,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),l>u&&!c?u+=PI2$8:l<u&&c&&(l+=PI2$8),c){var g=u;u=l,l=g}for(var y=0;y<u;y+=Math.PI/2)y>l&&(extremity[0]=mathCos$4(y)*r+n,extremity[1]=mathSin$4(y)*o+a,v(h,extremity,h),d(f,extremity,f))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array!="undefined",tmpAngles=[];function modPI2(n){var a=Math.round(n/PI$8*1e8)/1e8;return a%2*PI$8}function normalizeArcAngles(n,a){var r=modPI2(n[0]);r<0&&(r+=PI2$7);var o=r-n[0],l=n[1];l+=o,!a&&l-r>=PI2$7?l=r+PI2$7:a&&r-l>=PI2$7?l=r-PI2$7:!a&&r>l?l=r+(PI2$7-modPI2(r-l)):a&&r<l&&(l=r-(PI2$7-modPI2(l-r))),n[0]=r,n[1]=l}var PathProxy=function(){function n(a){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,a&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(a,r,o){o=o||0,o>0&&(this._ux=mathAbs$2(o/devicePixelRatio/a)||0,this._uy=mathAbs$2(o/devicePixelRatio/r)||0)},n.prototype.setDPR=function(a){this.dpr=a},n.prototype.setContext=function(a){this._ctx=a},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(a,r){return this._drawPendingPt(),this.addData(CMD$4.M,a,r),this._ctx&&this._ctx.moveTo(a,r),this._x0=a,this._y0=r,this._xi=a,this._yi=r,this},n.prototype.lineTo=function(a,r){var o=mathAbs$2(a-this._xi),l=mathAbs$2(r-this._yi),u=o>this._ux||l>this._uy;if(this.addData(CMD$4.L,a,r),this._ctx&&u&&this._ctx.lineTo(a,r),u)this._xi=a,this._yi=r,this._pendingPtDist=0;else{var c=o*o+l*l;c>this._pendingPtDist&&(this._pendingPtX=a,this._pendingPtY=r,this._pendingPtDist=c)}return this},n.prototype.bezierCurveTo=function(a,r,o,l,u,c){return this._drawPendingPt(),this.addData(CMD$4.C,a,r,o,l,u,c),this._ctx&&this._ctx.bezierCurveTo(a,r,o,l,u,c),this._xi=u,this._yi=c,this},n.prototype.quadraticCurveTo=function(a,r,o,l){return this._drawPendingPt(),this.addData(CMD$4.Q,a,r,o,l),this._ctx&&this._ctx.quadraticCurveTo(a,r,o,l),this._xi=o,this._yi=l,this},n.prototype.arc=function(a,r,o,l,u,c){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,c),l=tmpAngles[0],u=tmpAngles[1];var h=u-l;return this.addData(CMD$4.A,a,r,o,o,l,h,0,c?0:1),this._ctx&&this._ctx.arc(a,r,o,l,u,c),this._xi=mathCos$3(u)*o+a,this._yi=mathSin$3(u)*o+r,this},n.prototype.arcTo=function(a,r,o,l,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(a,r,o,l,u),this},n.prototype.rect=function(a,r,o,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(a,r,o,l),this.addData(CMD$4.R,a,r,o,l),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var a=this._ctx,r=this._x0,o=this._y0;return a&&a.closePath(),this._xi=r,this._yi=o,this},n.prototype.fill=function(a){a&&a.fill(),this.toStatic()},n.prototype.stroke=function(a){a&&a.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(a){var r=a.length;!(this.data&&this.data.length===r)&&hasTypedArray&&(this.data=new Float32Array(r));for(var o=0;o<r;o++)this.data[o]=a[o];this._len=r},n.prototype.appendPath=function(a){a instanceof Array||(a=[a]);for(var r=a.length,o=0,l=this._len,u=0;u<r;u++)o+=a[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+o));for(var u=0;u<r;u++)for(var c=a[u].data,h=0;h<c.length;h++)this.data[l++]=c[h];this._len=l},n.prototype.addData=function(a,r,o,l,u,c,h,f,v){if(!!this._saveData){var d=this.data;this._len+arguments.length>d.length&&(this._expandData(),d=this.data);for(var p=0;p<arguments.length;p++)d[this._len++]=arguments[p]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var a=[],r=0;r<this._len;r++)a[r]=this.data[r];this.data=a}},n.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var a=this.data;a instanceof Array&&(a.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(a)))}},n.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var a=this.data,r=0,o=0,l=0,u=0,c;for(c=0;c<this._len;){var h=a[c++],f=c===1;switch(f&&(r=a[c],o=a[c+1],l=r,u=o),h){case CMD$4.M:r=l=a[c++],o=u=a[c++],min2[0]=l,min2[1]=u,max2[0]=l,max2[1]=u;break;case CMD$4.L:fromLine(r,o,a[c],a[c+1],min2,max2),r=a[c++],o=a[c++];break;case CMD$4.C:fromCubic(r,o,a[c++],a[c++],a[c++],a[c++],a[c],a[c+1],min2,max2),r=a[c++],o=a[c++];break;case CMD$4.Q:fromQuadratic(r,o,a[c++],a[c++],a[c],a[c+1],min2,max2),r=a[c++],o=a[c++];break;case CMD$4.A:var v=a[c++],d=a[c++],p=a[c++],g=a[c++],y=a[c++],_=a[c++]+y;c+=1;var S=!a[c++];f&&(l=mathCos$3(y)*p+v,u=mathSin$3(y)*g+d),fromArc(v,d,p,g,y,_,S,min2,max2),r=mathCos$3(_)*p+v,o=mathSin$3(_)*g+d;break;case CMD$4.R:l=r=a[c++],u=o=a[c++];var x=a[c++],T=a[c++];fromLine(l,u,l+x,u+T,min2,max2);break;case CMD$4.Z:r=l,o=u;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect$1(min[0],min[1],max[0]-min[0],max[1]-min[1])},n.prototype._calculateLength=function(){var a=this.data,r=this._len,o=this._ux,l=this._uy,u=0,c=0,h=0,f=0;this._pathSegLen||(this._pathSegLen=[]);for(var v=this._pathSegLen,d=0,p=0,g=0;g<r;){var y=a[g++],_=g===1;_&&(u=a[g],c=a[g+1],h=u,f=c);var S=-1;switch(y){case CMD$4.M:u=h=a[g++],c=f=a[g++];break;case CMD$4.L:{var x=a[g++],T=a[g++],A=x-u,b=T-c;(mathAbs$2(A)>o||mathAbs$2(b)>l||g===r-1)&&(S=Math.sqrt(A*A+b*b),u=x,c=T);break}case CMD$4.C:{var C=a[g++],E=a[g++],x=a[g++],T=a[g++],w=a[g++],D=a[g++];S=cubicLength(u,c,C,E,x,T,w,D,10),u=w,c=D;break}case CMD$4.Q:{var C=a[g++],E=a[g++],x=a[g++],T=a[g++];S=quadraticLength(u,c,C,E,x,T,10),u=x,c=T;break}case CMD$4.A:var M=a[g++],P=a[g++],L=a[g++],I=a[g++],R=a[g++],O=a[g++],N=O+R;g+=1,a[g++],_&&(h=mathCos$3(R)*L+M,f=mathSin$3(R)*I+P),S=mathMax$8(L,I)*mathMin$8(PI2$7,Math.abs(O)),u=mathCos$3(N)*L+M,c=mathSin$3(N)*I+P;break;case CMD$4.R:{h=u=a[g++],f=c=a[g++];var V=a[g++],B=a[g++];S=V*2+B*2;break}case CMD$4.Z:{var A=h-u,b=f-c;S=Math.sqrt(A*A+b*b),u=h,c=f;break}}S>=0&&(v[p++]=S,d+=S)}return this._pathLen=d,d},n.prototype.rebuildPath=function(a,r){var o=this.data,l=this._ux,u=this._uy,c=this._len,h,f,v,d,p,g,y=r<1,_,S,x=0,T=0,A,b=0,C,E;if(y&&(this._pathSegLen||this._calculateLength(),_=this._pathSegLen,S=this._pathLen,A=r*S,!A))return;e:for(var w=0;w<c;){var D=o[w++],M=w===1;switch(M&&(v=o[w],d=o[w+1],h=v,f=d),D!==CMD$4.L&&b>0&&(a.lineTo(C,E),b=0),D){case CMD$4.M:h=v=o[w++],f=d=o[w++],a.moveTo(v,d);break;case CMD$4.L:{p=o[w++],g=o[w++];var P=mathAbs$2(p-v),L=mathAbs$2(g-d);if(P>l||L>u){if(y){var I=_[T++];if(x+I>A){var R=(A-x)/I;a.lineTo(v*(1-R)+p*R,d*(1-R)+g*R);break e}x+=I}a.lineTo(p,g),v=p,d=g,b=0}else{var O=P*P+L*L;O>b&&(C=p,E=g,b=O)}break}case CMD$4.C:{var N=o[w++],V=o[w++],B=o[w++],G=o[w++],F=o[w++],z=o[w++];if(y){var I=_[T++];if(x+I>A){var R=(A-x)/I;cubicSubdivide(v,N,B,F,R,tmpOutX),cubicSubdivide(d,V,G,z,R,tmpOutY),a.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}x+=I}a.bezierCurveTo(N,V,B,G,F,z),v=F,d=z;break}case CMD$4.Q:{var N=o[w++],V=o[w++],B=o[w++],G=o[w++];if(y){var I=_[T++];if(x+I>A){var R=(A-x)/I;quadraticSubdivide(v,N,B,R,tmpOutX),quadraticSubdivide(d,V,G,R,tmpOutY),a.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}x+=I}a.quadraticCurveTo(N,V,B,G),v=B,d=G;break}case CMD$4.A:var H=o[w++],U=o[w++],Y=o[w++],Z=o[w++],X=o[w++],J=o[w++],te=o[w++],Q=!o[w++],q=Y>Z?Y:Z,ee=mathAbs$2(Y-Z)>.001,K=X+J,W=!1;if(y){var I=_[T++];x+I>A&&(K=X+J*(A-x)/I,W=!0),x+=I}if(ee&&a.ellipse?a.ellipse(H,U,Y,Z,te,X,K,Q):a.arc(H,U,q,X,K,Q),W)break e;M&&(h=mathCos$3(X)*Y+H,f=mathSin$3(X)*Z+U),v=mathCos$3(K)*Y+H,d=mathSin$3(K)*Z+U;break;case CMD$4.R:h=v=o[w],f=d=o[w+1],p=o[w++],g=o[w++];var j=o[w++],ae=o[w++];if(y){var I=_[T++];if(x+I>A){var re=A-x;a.moveTo(p,g),a.lineTo(p+mathMin$8(re,j),g),re-=j,re>0&&a.lineTo(p+j,g+mathMin$8(re,ae)),re-=ae,re>0&&a.lineTo(p+mathMax$8(j-re,0),g+ae),re-=j,re>0&&a.lineTo(p,g+mathMax$8(ae-re,0));break e}x+=I}a.rect(p,g,j,ae);break;case CMD$4.Z:if(y){var I=_[T++];if(x+I>A){var R=(A-x)/I;a.lineTo(v*(1-R)+h*R,d*(1-R)+f*R);break e}x+=I}a.closePath(),v=h,d=f}}},n.prototype.clone=function(){var a=new n,r=this.data;return a.data=r.slice?r.slice():Array.prototype.slice.call(r),a._len=this._len,a},n.CMD=CMD$4,n.initDefaultProps=function(){var a=n.prototype;a._saveData=!0,a._ux=0,a._uy=0,a._pendingPtDist=0,a._version=0}(),n}();const PathProxy$1=PathProxy;function containStroke$4(n,a,r,o,l,u,c){if(l===0)return!1;var h=l,f=0,v=n;if(c>a+h&&c>o+h||c<a-h&&c<o-h||u>n+h&&u>r+h||u<n-h&&u<r-h)return!1;if(n!==r)f=(a-o)/(n-r),v=(n*o-r*a)/(n-r);else return Math.abs(u-n)<=h/2;var d=f*u-c+v,p=d*d/(f*f+1);return p<=h/2*h/2}function containStroke$3(n,a,r,o,l,u,c,h,f,v,d){if(f===0)return!1;var p=f;if(d>a+p&&d>o+p&&d>u+p&&d>h+p||d<a-p&&d<o-p&&d<u-p&&d<h-p||v>n+p&&v>r+p&&v>l+p&&v>c+p||v<n-p&&v<r-p&&v<l-p&&v<c-p)return!1;var g=cubicProjectPoint(n,a,r,o,l,u,c,h,v,d,null);return g<=p/2}function containStroke$2(n,a,r,o,l,u,c,h,f){if(c===0)return!1;var v=c;if(f>a+v&&f>o+v&&f>u+v||f<a-v&&f<o-v&&f<u-v||h>n+v&&h>r+v&&h>l+v||h<n-v&&h<r-v&&h<l-v)return!1;var d=quadraticProjectPoint(n,a,r,o,l,u,h,f,null);return d<=v/2}var PI2$6=Math.PI*2;function normalizeRadian(n){return n%=PI2$6,n<0&&(n+=PI2$6),n}var PI2$5=Math.PI*2;function containStroke$1(n,a,r,o,l,u,c,h,f){if(c===0)return!1;var v=c;h-=n,f-=a;var d=Math.sqrt(h*h+f*f);if(d-v>r||d+v<r)return!1;if(Math.abs(o-l)%PI2$5<1e-4)return!0;if(u){var p=o;o=normalizeRadian(l),l=normalizeRadian(p)}else o=normalizeRadian(o),l=normalizeRadian(l);o>l&&(l+=PI2$5);var g=Math.atan2(f,h);return g<0&&(g+=PI2$5),g>=o&&g<=l||g+PI2$5>=o&&g+PI2$5<=l}function windingLine(n,a,r,o,l,u){if(u>a&&u>o||u<a&&u<o||o===a)return 0;var c=(u-a)/(o-a),h=o<a?1:-1;(c===1||c===0)&&(h=o<a?.5:-.5);var f=c*(r-n)+n;return f===l?1/0:f>l?h:0}var CMD$3=PathProxy$1.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(n,a){return Math.abs(n-a)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var n=extrema[0];extrema[0]=extrema[1],extrema[1]=n}function windingCubic(n,a,r,o,l,u,c,h,f,v){if(v>a&&v>o&&v>u&&v>h||v<a&&v<o&&v<u&&v<h)return 0;var d=cubicRootAt(a,o,u,h,v,roots);if(d===0)return 0;for(var p=0,g=-1,y=void 0,_=void 0,S=0;S<d;S++){var x=roots[S],T=x===0||x===1?.5:1,A=cubicAt(n,r,l,c,x);A<f||(g<0&&(g=cubicExtrema(a,o,u,h,extrema),extrema[1]<extrema[0]&&g>1&&swapExtrema(),y=cubicAt(a,o,u,h,extrema[0]),g>1&&(_=cubicAt(a,o,u,h,extrema[1]))),g===2?x<extrema[0]?p+=y<a?T:-T:x<extrema[1]?p+=_<y?T:-T:p+=h<_?T:-T:x<extrema[0]?p+=y<a?T:-T:p+=h<y?T:-T)}return p}function windingQuadratic(n,a,r,o,l,u,c,h){if(h>a&&h>o&&h>u||h<a&&h<o&&h<u)return 0;var f=quadraticRootAt(a,o,u,h,roots);if(f===0)return 0;var v=quadraticExtremum(a,o,u);if(v>=0&&v<=1){for(var d=0,p=quadraticAt$1(a,o,u,v),g=0;g<f;g++){var y=roots[g]===0||roots[g]===1?.5:1,_=quadraticAt$1(n,r,l,roots[g]);_<c||(roots[g]<v?d+=p<a?y:-y:d+=u<p?y:-y)}return d}else{var y=roots[0]===0||roots[0]===1?.5:1,_=quadraticAt$1(n,r,l,roots[0]);return _<c?0:u<a?y:-y}}function windingArc(n,a,r,o,l,u,c,h){if(h-=a,h>r||h<-r)return 0;var f=Math.sqrt(r*r-h*h);roots[0]=-f,roots[1]=f;var v=Math.abs(o-l);if(v<1e-4)return 0;if(v>=PI2$4-1e-4){o=0,l=PI2$4;var d=u?1:-1;return c>=roots[0]+n&&c<=roots[1]+n?d:0}if(o>l){var p=o;o=l,l=p}o<0&&(o+=PI2$4,l+=PI2$4);for(var g=0,y=0;y<2;y++){var _=roots[y];if(_+n>c){var S=Math.atan2(h,_),d=u?1:-1;S<0&&(S=PI2$4+S),(S>=o&&S<=l||S+PI2$4>=o&&S+PI2$4<=l)&&(S>Math.PI/2&&S<Math.PI*1.5&&(d=-d),g+=d)}}return g}function containPath(n,a,r,o,l){for(var u=n.data,c=n.len(),h=0,f=0,v=0,d=0,p=0,g,y,_=0;_<c;){var S=u[_++],x=_===1;switch(S===CMD$3.M&&_>1&&(r||(h+=windingLine(f,v,d,p,o,l))),x&&(f=u[_],v=u[_+1],d=f,p=v),S){case CMD$3.M:d=u[_++],p=u[_++],f=d,v=p;break;case CMD$3.L:if(r){if(containStroke$4(f,v,u[_],u[_+1],a,o,l))return!0}else h+=windingLine(f,v,u[_],u[_+1],o,l)||0;f=u[_++],v=u[_++];break;case CMD$3.C:if(r){if(containStroke$3(f,v,u[_++],u[_++],u[_++],u[_++],u[_],u[_+1],a,o,l))return!0}else h+=windingCubic(f,v,u[_++],u[_++],u[_++],u[_++],u[_],u[_+1],o,l)||0;f=u[_++],v=u[_++];break;case CMD$3.Q:if(r){if(containStroke$2(f,v,u[_++],u[_++],u[_],u[_+1],a,o,l))return!0}else h+=windingQuadratic(f,v,u[_++],u[_++],u[_],u[_+1],o,l)||0;f=u[_++],v=u[_++];break;case CMD$3.A:var T=u[_++],A=u[_++],b=u[_++],C=u[_++],E=u[_++],w=u[_++];_+=1;var D=!!(1-u[_++]);g=Math.cos(E)*b+T,y=Math.sin(E)*C+A,x?(d=g,p=y):h+=windingLine(f,v,g,y,o,l);var M=(o-T)*C/b+T;if(r){if(containStroke$1(T,A,C,E,E+w,D,a,M,l))return!0}else h+=windingArc(T,A,C,E,E+w,D,M,l);f=Math.cos(E+w)*b+T,v=Math.sin(E+w)*C+A;break;case CMD$3.R:d=f=u[_++],p=v=u[_++];var P=u[_++],L=u[_++];if(g=d+P,y=p+L,r){if(containStroke$4(d,p,g,p,a,o,l)||containStroke$4(g,p,g,y,a,o,l)||containStroke$4(g,y,d,y,a,o,l)||containStroke$4(d,y,d,p,a,o,l))return!0}else h+=windingLine(g,p,g,y,o,l),h+=windingLine(d,y,d,p,o,l);break;case CMD$3.Z:if(r){if(containStroke$4(f,v,d,p,a,o,l))return!0}else h+=windingLine(f,v,d,p,o,l);f=d,v=p;break}}return!r&&!isAroundEqual$1(v,p)&&(h+=windingLine(f,v,d,p,o,l)||0),h!==0}function contain$2(n,a,r){return containPath(n,0,!1,a,r)}function containStroke(n,a,r,o){return containPath(n,a,!0,r,o)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.update=function(){var r=this;n.prototype.update.call(this);var o=this.style;if(o.decal){var l=this._decalEl=this._decalEl||new a;l.buildPath===a.prototype.buildPath&&(l.buildPath=function(f){r.buildPath(f,r.shape)}),l.silent=!0;var u=l.style;for(var c in o)u[c]!==o[c]&&(u[c]=o[c]);u.fill=o.fill?o.decal:null,u.decal=null,u.shadowColor=null,o.strokeFirst&&(u.stroke=null);for(var h=0;h<pathCopyParams.length;++h)l[pathCopyParams[h]]=this[pathCopyParams[h]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},a.prototype.getDecalElement=function(){return this._decalEl},a.prototype._init=function(r){var o=keys(r);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var u=0;u<o.length;u++){var c=o[u],h=r[c];c==="style"?this.style?extend(this.style,h):this.useStyle(h):c==="shape"?extend(this.shape,h):n.prototype.attrKV.call(this,c,h)}this.style||this.useStyle({})},a.prototype.getDefaultStyle=function(){return null},a.prototype.getDefaultShape=function(){return{}},a.prototype.canBeInsideText=function(){return this.hasFill()},a.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(isString(r)){var o=lum(r,0);return o>.5?DARK_LABEL_COLOR:o>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(r)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},a.prototype.getInsideTextStroke=function(r){var o=this.style.fill;if(isString(o)){var l=this.__zr,u=!!(l&&l.isDarkMode()),c=lum(r,0)<DARK_MODE_THRESHOLD;if(u===c)return o}},a.prototype.buildPath=function(r,o,l){},a.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},a.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},a.prototype.createPathProxy=function(){this.path=new PathProxy$1(!1)},a.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return!(o==null||o==="none"||!(r.lineWidth>0))},a.prototype.hasFill=function(){var r=this.style,o=r.fill;return o!=null&&o!=="none"},a.prototype.getBoundingRect=function(){var r=this._rect,o=this.style,l=!r;if(l){var u=!1;this.path||(u=!0,this.createPathProxy());var c=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),r=c.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var h=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||l){h.copy(r);var f=o.strokeNoScale?this.getLineScale():1,v=o.lineWidth;if(!this.hasFill()){var d=this.strokeContainThreshold;v=Math.max(v,d==null?4:d)}f>1e-10&&(h.width+=v/f,h.height+=v/f,h.x-=v/f/2,h.y-=v/f/2)}return h}return r},a.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect(),c=this.style;if(r=l[0],o=l[1],u.contain(r,o)){var h=this.path;if(this.hasStroke()){var f=c.lineWidth,v=c.strokeNoScale?this.getLineScale():1;if(v>1e-10&&(this.hasFill()||(f=Math.max(f,this.strokeContainThreshold)),containStroke(h,f/v,r,o)))return!0}if(this.hasFill())return contain$2(h,r,o)}return!1},a.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},a.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},a.prototype.animateShape=function(r){return this.animate("shape",r)},a.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},a.prototype.attrKV=function(r,o){r==="shape"?this.setShape(o):n.prototype.attrKV.call(this,r,o)},a.prototype.setShape=function(r,o){var l=this.shape;return l||(l=this.shape={}),typeof r=="string"?l[r]=o:extend(l,r),this.dirtyShape(),this},a.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},a.prototype.createStyle=function(r){return createObject(DEFAULT_PATH_STYLE,r)},a.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.shape&&!o.shape&&(o.shape=extend({},this.shape))},a.prototype._applyStateObj=function(r,o,l,u,c,h){n.prototype._applyStateObj.call(this,r,o,l,u,c,h);var f=!(o&&u),v;if(o&&o.shape?c?u?v=o.shape:(v=extend({},l.shape),extend(v,o.shape)):(v=extend({},u?this.shape:l.shape),extend(v,o.shape)):f&&(v=l.shape),v)if(c){this.shape=extend({},this.shape);for(var d={},p=keys(v),g=0;g<p.length;g++){var y=p[g];typeof v[y]=="object"?this.shape[y]=v[y]:d[y]=v[y]}this._transitionState(r,{shape:d},h)}else this.shape=v,this.dirtyShape()},a.prototype._mergeStates=function(r){for(var o=n.prototype._mergeStates.call(this,r),l,u=0;u<r.length;u++){var c=r[u];c.shape&&(l=l||{},this._mergeStyle(l,c.shape))}return l&&(o.shape=l),o},a.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},a.prototype.isZeroArea=function(){return!1},a.extend=function(r){var o=function(u){__extends(c,u);function c(h){var f=u.call(this,h)||this;return r.init&&r.init.call(f,h),f}return c.prototype.getDefaultStyle=function(){return clone$4(r.style)},c.prototype.getDefaultShape=function(){return clone$4(r.shape)},c}(a);for(var l in r)typeof r[l]=="function"&&(o.prototype[l]=r[l]);return o},a.initDefaultProps=function(){var r=a.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),a}(Displayable$1);const Path$1=Path;var DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return o!=null&&o!=="none"&&r.lineWidth>0},a.prototype.hasFill=function(){var r=this.style,o=r.fill;return o!=null&&o!=="none"},a.prototype.createStyle=function(r){return createObject(DEFAULT_TSPAN_STYLE,r)},a.prototype.setBoundingRect=function(r){this._rect=r},a.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var o=r.text;o!=null?o+="":o="";var l=getBoundingRect(o,r.font,r.textAlign,r.textBaseline);if(l.x+=r.x||0,l.y+=r.y||0,this.hasStroke()){var u=r.lineWidth;l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u}this._rect=l}return this._rect},a.initDefaultProps=function(){var r=a.prototype;r.dirtyRectTolerance=10}(),a}(Displayable$1);TSpan.prototype.type="tspan";const TSpan$1=TSpan;var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var ZRImage=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.createStyle=function(r){return createObject(DEFAULT_IMAGE_STYLE,r)},a.prototype._getSize=function(r){var o=this.style,l=o[r];if(l!=null)return l;var u=isImageLike$1(o.image)?o.image:this.__image;if(!u)return 0;var c=r==="width"?"height":"width",h=o[c];return h==null?u[r]:u[r]/u[c]*h},a.prototype.getWidth=function(){return this._getSize("width")},a.prototype.getHeight=function(){return this._getSize("height")},a.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},a.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new BoundingRect$1(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},a}(Displayable$1);ZRImage.prototype.type="image";const ZRImage$1=ZRImage;function buildPath$2(n,a){var r=a.x,o=a.y,l=a.width,u=a.height,c=a.r,h,f,v,d;l<0&&(r=r+l,l=-l),u<0&&(o=o+u,u=-u),typeof c=="number"?h=f=v=d=c:c instanceof Array?c.length===1?h=f=v=d=c[0]:c.length===2?(h=v=c[0],f=d=c[1]):c.length===3?(h=c[0],f=d=c[1],v=c[2]):(h=c[0],f=c[1],v=c[2],d=c[3]):h=f=v=d=0;var p;h+f>l&&(p=h+f,h*=l/p,f*=l/p),v+d>l&&(p=v+d,v*=l/p,d*=l/p),f+v>u&&(p=f+v,f*=u/p,v*=u/p),h+d>u&&(p=h+d,h*=u/p,d*=u/p),n.moveTo(r+h,o),n.lineTo(r+l-f,o),f!==0&&n.arc(r+l-f,o+f,f,-Math.PI/2,0),n.lineTo(r+l,o+u-v),v!==0&&n.arc(r+l-v,o+u-v,v,0,Math.PI/2),n.lineTo(r+d,o+u),d!==0&&n.arc(r+d,o+u-d,d,Math.PI/2,Math.PI),n.lineTo(r,o+h),h!==0&&n.arc(r+h,o+h,h,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(n,a,r){if(!!a){var o=a.x1,l=a.x2,u=a.y1,c=a.y2;n.x1=o,n.x2=l,n.y1=u,n.y2=c;var h=r&&r.lineWidth;return h&&(round$2(o*2)===round$2(l*2)&&(n.x1=n.x2=subPixelOptimize$1(o,h,!0)),round$2(u*2)===round$2(c*2)&&(n.y1=n.y2=subPixelOptimize$1(u,h,!0))),n}}function subPixelOptimizeRect$1(n,a,r){if(!!a){var o=a.x,l=a.y,u=a.width,c=a.height;n.x=o,n.y=l,n.width=u,n.height=c;var h=r&&r.lineWidth;return h&&(n.x=subPixelOptimize$1(o,h,!0),n.y=subPixelOptimize$1(l,h,!0),n.width=Math.max(subPixelOptimize$1(o+u,h,!1)-n.x,u===0?0:1),n.height=Math.max(subPixelOptimize$1(l+c,h,!1)-n.y,c===0?0:1)),n}}function subPixelOptimize$1(n,a,r){if(!a)return n;var o=round$2(n*2);return(o+round$2(a))%2===0?o/2:(o+(r?1:-1))/2}var RectShape=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),subPixelOptimizeOutputShape$1={},Rect$2=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new RectShape},a.prototype.buildPath=function(r,o){var l,u,c,h;if(this.subPixelOptimize){var f=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,o,this.style);l=f.x,u=f.y,c=f.width,h=f.height,f.r=o.r,o=f}else l=o.x,u=o.y,c=o.width,h=o.height;o.r?buildPath$2(r,o):r.rect(l,u,c,h)},a.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},a}(Path$1);Rect$2.prototype.type="rect";const Rect$3=Rect$2;var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(n){__extends(a,n);function a(r){var o=n.call(this)||this;return o.type="text",o._children=[],o._defaultStyle=DEFAULT_RICH_TEXT_COLOR,o.attr(r),o}return a.prototype.childrenRef=function(){return this._children},a.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var o=this._children[r];o.zlevel=this.zlevel,o.z=this.z,o.z2=this.z2,o.culling=this.culling,o.cursor=this.cursor,o.invisible=this.invisible}},a.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):n.prototype.updateTransform.call(this)},a.prototype.getLocalTransform=function(r){var o=this.innerTransformable;return o?o.getLocalTransform(r):n.prototype.getLocalTransform.call(this,r)},a.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},a.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},a.prototype.addSelfToZr=function(r){n.prototype.addSelfToZr.call(this,r);for(var o=0;o<this._children.length;o++)this._children[o].__zr=r},a.prototype.removeSelfFromZr=function(r){n.prototype.removeSelfFromZr.call(this,r);for(var o=0;o<this._children.length;o++)this._children[o].__zr=null},a.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new BoundingRect$1(0,0,0,0),o=this._children,l=[],u=null,c=0;c<o.length;c++){var h=o[c],f=h.getBoundingRect(),v=h.getLocalTransform(l);v?(r.copy(f),r.applyTransform(v),u=u||r.clone(),u.union(r)):(u=u||f.clone(),u.union(f))}this._rect=u||r}return this._rect},a.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||DEFAULT_RICH_TEXT_COLOR},a.prototype.setTextContent=function(r){if({}.NODE_ENV!=="production")throw new Error("Can't attach text on another text")},a.prototype._mergeStyle=function(r,o){if(!o)return r;var l=o.rich,u=r.rich||l&&{};return extend(r,o),l&&u?(this._mergeRich(u,l),r.rich=u):u&&(r.rich=u),r},a.prototype._mergeRich=function(r,o){for(var l=keys(o),u=0;u<l.length;u++){var c=l[u];r[c]=r[c]||{},extend(r[c],o[c])}},a.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},a.prototype._getOrCreateChild=function(r){var o=this._children[this._childCursor];return(!o||!(o instanceof r))&&(o=new r),this._children[this._childCursor++]=o,o.__zr=this.__zr,o.parent=this,o},a.prototype._updatePlainTexts=function(){var r=this.style,o=r.font||DEFAULT_FONT,l=r.padding,u=getStyleText(r),c=parsePlainText(u,r),h=needDrawBackground(r),f=!!r.backgroundColor,v=c.outerHeight,d=c.outerWidth,p=c.contentWidth,g=c.lines,y=c.lineHeight,_=this._defaultStyle,S=r.x||0,x=r.y||0,T=r.align||_.align||"left",A=r.verticalAlign||_.verticalAlign||"top",b=S,C=adjustTextY(x,c.contentHeight,A);if(h||l){var E=adjustTextX(S,d,T),w=adjustTextY(x,v,A);h&&this._renderBackground(r,r,E,w,d,v)}C+=y/2,l&&(b=getTextXForPadding(S,T,l),A==="top"?C+=l[0]:A==="bottom"&&(C-=l[2]));for(var D=0,M=!1,P=getFill("fill"in r?r.fill:(M=!0,_.fill)),L=getStroke("stroke"in r?r.stroke:!f&&(!_.autoStroke||M)?(D=DEFAULT_STROKE_LINE_WIDTH,_.stroke):null),I=r.textShadowBlur>0,R=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),O=c.calculatedLineHeight,N=0;N<g.length;N++){var V=this._getOrCreateChild(TSpan$1),B=V.createStyle();V.useStyle(B),B.text=g[N],B.x=b,B.y=C,T&&(B.textAlign=T),B.textBaseline="middle",B.opacity=r.opacity,B.strokeFirst=!0,I&&(B.shadowBlur=r.textShadowBlur||0,B.shadowColor=r.textShadowColor||"transparent",B.shadowOffsetX=r.textShadowOffsetX||0,B.shadowOffsetY=r.textShadowOffsetY||0),B.stroke=L,B.fill=P,L&&(B.lineWidth=r.lineWidth||D,B.lineDash=r.lineDash,B.lineDashOffset=r.lineDashOffset||0),B.font=o,setSeparateFont(B,r),C+=y,R&&V.setBoundingRect(new BoundingRect$1(adjustTextX(B.x,r.width,B.textAlign),adjustTextY(B.y,O,B.textBaseline),p,O))}},a.prototype._updateRichTexts=function(){var r=this.style,o=getStyleText(r),l=parseRichText(o,r),u=l.width,c=l.outerWidth,h=l.outerHeight,f=r.padding,v=r.x||0,d=r.y||0,p=this._defaultStyle,g=r.align||p.align,y=r.verticalAlign||p.verticalAlign,_=adjustTextX(v,c,g),S=adjustTextY(d,h,y),x=_,T=S;f&&(x+=f[3],T+=f[0]);var A=x+u;needDrawBackground(r)&&this._renderBackground(r,r,_,S,c,h);for(var b=!!r.backgroundColor,C=0;C<l.lines.length;C++){for(var E=l.lines[C],w=E.tokens,D=w.length,M=E.lineHeight,P=E.width,L=0,I=x,R=A,O=D-1,N=void 0;L<D&&(N=w[L],!N.align||N.align==="left");)this._placeToken(N,r,M,T,I,"left",b),P-=N.width,I+=N.width,L++;for(;O>=0&&(N=w[O],N.align==="right");)this._placeToken(N,r,M,T,R,"right",b),P-=N.width,R-=N.width,O--;for(I+=(u-(I-x)-(A-R)-P)/2;L<=O;)N=w[L],this._placeToken(N,r,M,T,I+N.width/2,"center",b),I+=N.width,L++;T+=M}},a.prototype._placeToken=function(r,o,l,u,c,h,f){var v=o.rich[r.styleName]||{};v.text=r.text;var d=r.verticalAlign,p=u+l/2;d==="top"?p=u+r.height/2:d==="bottom"&&(p=u+l-r.height/2);var g=!r.isLineHolder&&needDrawBackground(v);g&&this._renderBackground(v,o,h==="right"?c-r.width:h==="center"?c-r.width/2:c,p-r.height/2,r.width,r.height);var y=!!v.backgroundColor,_=r.textPadding;_&&(c=getTextXForPadding(c,h,_),p-=r.height/2-_[0]-r.innerHeight/2);var S=this._getOrCreateChild(TSpan$1),x=S.createStyle();S.useStyle(x);var T=this._defaultStyle,A=!1,b=0,C=getFill("fill"in v?v.fill:"fill"in o?o.fill:(A=!0,T.fill)),E=getStroke("stroke"in v?v.stroke:"stroke"in o?o.stroke:!y&&!f&&(!T.autoStroke||A)?(b=DEFAULT_STROKE_LINE_WIDTH,T.stroke):null),w=v.textShadowBlur>0||o.textShadowBlur>0;x.text=r.text,x.x=c,x.y=p,w&&(x.shadowBlur=v.textShadowBlur||o.textShadowBlur||0,x.shadowColor=v.textShadowColor||o.textShadowColor||"transparent",x.shadowOffsetX=v.textShadowOffsetX||o.textShadowOffsetX||0,x.shadowOffsetY=v.textShadowOffsetY||o.textShadowOffsetY||0),x.textAlign=h,x.textBaseline="middle",x.font=r.font||DEFAULT_FONT,x.opacity=retrieve3(v.opacity,o.opacity,1),setSeparateFont(x,v),E&&(x.lineWidth=retrieve3(v.lineWidth,o.lineWidth,b),x.lineDash=retrieve2(v.lineDash,o.lineDash),x.lineDashOffset=o.lineDashOffset||0,x.stroke=E),C&&(x.fill=C);var D=r.contentWidth,M=r.contentHeight;S.setBoundingRect(new BoundingRect$1(adjustTextX(x.x,D,x.textAlign),adjustTextY(x.y,M,x.textBaseline),D,M))},a.prototype._renderBackground=function(r,o,l,u,c,h){var f=r.backgroundColor,v=r.borderWidth,d=r.borderColor,p=f&&f.image,g=f&&!p,y=r.borderRadius,_=this,S,x;if(g||r.lineHeight||v&&d){S=this._getOrCreateChild(Rect$3),S.useStyle(S.createStyle()),S.style.fill=null;var T=S.shape;T.x=l,T.y=u,T.width=c,T.height=h,T.r=y,S.dirtyShape()}if(g){var A=S.style;A.fill=f||null,A.fillOpacity=retrieve2(r.fillOpacity,1)}else if(p){x=this._getOrCreateChild(ZRImage$1),x.onload=function(){_.dirtyStyle()};var b=x.style;b.image=f.image,b.x=l,b.y=u,b.width=c,b.height=h}if(v&&d){var A=S.style;A.lineWidth=v,A.stroke=d,A.strokeOpacity=retrieve2(r.strokeOpacity,1),A.lineDash=r.borderDash,A.lineDashOffset=r.borderDashOffset||0,S.strokeContainThreshold=0,S.hasFill()&&S.hasStroke()&&(A.strokeFirst=!0,A.lineWidth*=2)}var C=(S||x).style;C.shadowBlur=r.shadowBlur||0,C.shadowColor=r.shadowColor||"transparent",C.shadowOffsetX=r.shadowOffsetX||0,C.shadowOffsetY=r.shadowOffsetY||0,C.opacity=retrieve3(r.opacity,o.opacity,1)},a.makeFont=function(r){var o="";return hasSeparateFont(r)&&(o=[r.fontStyle,r.fontWeight,parseFontSize(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),o&&trim$1(o)||r.textFont||r.font},a}(Displayable$1),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?DEFAULT_FONT_SIZE+"px":n+"px"}function setSeparateFont(n,a){for(var r=0;r<FONT_PARTS.length;r++){var o=FONT_PARTS[r],l=a[o];l!=null&&(n[o]=l)}}function hasSeparateFont(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function normalizeTextStyle(n){return normalizeStyle(n),each$f(n.rich,normalizeStyle),n}function normalizeStyle(n){if(n){n.font=ZRText.makeFont(n);var a=n.align;a==="middle"&&(a="center"),n.align=a==null||VALID_TEXT_ALIGN[a]?a:"left";var r=n.verticalAlign;r==="center"&&(r="middle"),n.verticalAlign=r==null||VALID_TEXT_VERTICAL_ALIGN[r]?r:"top";var o=n.padding;o&&(n.padding=normalizeCssArray$1(n.padding))}}function getStroke(n,a){return n==null||a<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function getFill(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function getTextXForPadding(n,a,r){return a==="right"?n-r[1]:a==="center"?n+r[3]/2-r[1]/2:n+r[3]}function getStyleText(n){var a=n.text;return a!=null&&(a+=""),a}function needDrawBackground(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const ZRText$1=ZRText;var getECData=makeInner(),setCommonECData=function(n,a,r,o){if(o){var l=getECData(o);l.dataIndex=r,l.dataType=a,l.seriesIndex=n,o.type==="group"&&o.traverse(function(u){var c=getECData(u);c.seriesIndex=n,c.dataIndex=r,c.dataType=a})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(n){return n!=null&&n!=="none"}var liftedColorCache=new LRU$1(100);function liftColor(n){if(isString(n)){var a=liftedColorCache.get(n);return a||(a=lift(n,-.1),liftedColorCache.put(n,a)),a}else if(isGradientObject(n)){var r=extend({},n);return r.colorStops=map$1(n.colorStops,function(o){return{offset:o.offset,color:lift(o.color,-.1)}}),r}return n}function doChangeHoverState(n,a,r){n.onHoverStateChange&&(n.hoverState||0)!==r&&n.onHoverStateChange(a),n.hoverState=r}function singleEnterEmphasis(n){doChangeHoverState(n,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(n){n.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(n,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(n){doChangeHoverState(n,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(n){n.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(n,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(n){n.selected=!0}function singleLeaveSelect(n){n.selected=!1}function updateElementState(n,a,r){a(n,r)}function traverseUpdateState(n,a,r){updateElementState(n,a,r),n.isGroup&&n.traverse(function(o){updateElementState(o,a,r)})}function setStatesFlag(n,a){switch(a){case"emphasis":n.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":n.hoverState=HOVER_STATE_NORMAL;break;case"blur":n.hoverState=HOVER_STATE_BLUR;break;case"select":n.selected=!0}}function getFromStateStyle(n,a,r,o){for(var l=n.style,u={},c=0;c<a.length;c++){var h=a[c],f=l[h];u[h]=f==null?o&&o[h]:f}for(var c=0;c<n.animators.length;c++){var v=n.animators[c];v.__fromStateTransition&&v.__fromStateTransition.indexOf(r)<0&&v.targetName==="style"&&v.saveTo(u,a)}return u}function createEmphasisDefaultState(n,a,r,o){var l=r&&indexOf(r,"select")>=0,u=!1;if(n instanceof Path$1){var c=getSavedStates(n),h=l&&c.selectFill||c.normalFill,f=l&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(h)||hasFillOrStroke(f)){o=o||{};var v=o.style||{};v.fill==="inherit"?(u=!0,o=extend({},o),v=extend({},v),v.fill=h):!hasFillOrStroke(v.fill)&&hasFillOrStroke(h)?(u=!0,o=extend({},o),v=extend({},v),v.fill=liftColor(h)):!hasFillOrStroke(v.stroke)&&hasFillOrStroke(f)&&(u||(o=extend({},o),v=extend({},v)),v.stroke=liftColor(f)),o.style=v}}if(o&&o.z2==null){u||(o=extend({},o));var d=n.z2EmphasisLift;o.z2=n.z2+(d!=null?d:Z2_EMPHASIS_LIFT)}return o}function createSelectDefaultState(n,a,r){if(r&&r.z2==null){r=extend({},r);var o=n.z2SelectLift;r.z2=n.z2+(o!=null?o:Z2_SELECT_LIFT)}return r}function createBlurDefaultState(n,a,r){var o=indexOf(n.currentStates,a)>=0,l=n.style.opacity,u=o?null:getFromStateStyle(n,["opacity"],a,{opacity:1});r=r||{};var c=r.style||{};return c.opacity==null&&(r=extend({},r),c=extend({opacity:o?l:u.opacity*.1},c),r.style=c),r}function elementStateProxy(n,a){var r=this.states[n];if(this.style){if(n==="emphasis")return createEmphasisDefaultState(this,n,a,r);if(n==="blur")return createBlurDefaultState(this,n,r);if(n==="select")return createSelectDefaultState(this,n,r)}return r}function setDefaultStateProxy(n){n.stateProxy=elementStateProxy;var a=n.getTextContent(),r=n.getTextGuideLine();a&&(a.stateProxy=elementStateProxy),r&&(r.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(n,a){!shouldSilent(n,a)&&!n.__highByOuter&&traverseUpdateState(n,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(n,a){!shouldSilent(n,a)&&!n.__highByOuter&&traverseUpdateState(n,singleLeaveEmphasis)}function enterEmphasis(n,a){n.__highByOuter|=1<<(a||0),traverseUpdateState(n,singleEnterEmphasis)}function leaveEmphasis(n,a){!(n.__highByOuter&=~(1<<(a||0)))&&traverseUpdateState(n,singleLeaveEmphasis)}function enterBlur(n){traverseUpdateState(n,singleEnterBlur)}function leaveBlur(n){traverseUpdateState(n,singleLeaveBlur)}function enterSelect(n){traverseUpdateState(n,singleEnterSelect)}function leaveSelect(n){traverseUpdateState(n,singleLeaveSelect)}function shouldSilent(n,a){return n.__highDownSilentOnTouch&&a.zrByTouch}function allLeaveBlur(n){var a=n.getModel(),r=[],o=[];a.eachComponent(function(l,u){var c=getComponentStates(u),h=l==="series",f=h?n.getViewOfSeriesModel(u):n.getViewOfComponentModel(u);!h&&o.push(f),c.isBlured&&(f.group.traverse(function(v){singleLeaveBlur(v)}),h&&r.push(u)),c.isBlured=!1}),each$f(o,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(r,!1,a)})}function blurSeries(n,a,r,o){var l=o.getModel();r=r||"coordinateSystem";function u(v,d){for(var p=0;p<d.length;p++){var g=v.getItemGraphicEl(d[p]);g&&leaveBlur(g)}}if(n!=null&&!(!a||a==="none")){var c=l.getSeriesByIndex(n),h=c.coordinateSystem;h&&h.master&&(h=h.master);var f=[];l.eachSeries(function(v){var d=c===v,p=v.coordinateSystem;p&&p.master&&(p=p.master);var g=p&&h?p===h:d;if(!(r==="series"&&!d||r==="coordinateSystem"&&!g||a==="series"&&d)){var y=o.getViewOfSeriesModel(v);if(y.group.traverse(function(x){x.__highByOuter&&d&&a==="self"||singleEnterBlur(x)}),isArrayLike(a))u(v.getData(),a);else if(isObject$3(a))for(var _=keys(a),S=0;S<_.length;S++)u(v.getData(_[S]),a[_[S]]);f.push(v),getComponentStates(v).isBlured=!0}}),l.eachComponent(function(v,d){if(v!=="series"){var p=o.getViewOfComponentModel(d);p&&p.toggleBlurSeries&&p.toggleBlurSeries(f,!0,l)}})}}function blurComponent(n,a,r){if(!(n==null||a==null)){var o=r.getModel().getComponent(n,a);if(!!o){getComponentStates(o).isBlured=!0;var l=r.getViewOfComponentModel(o);!l||!l.focusBlurEnabled||l.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(n,a,r){var o=n.seriesIndex,l=n.getData(a.dataType);if(!l){({}).NODE_ENV!=="production"&&error("Unknown dataType "+a.dataType);return}var u=queryDataIndex(l,a);u=(isArray$1(u)?u[0]:u)||0;var c=l.getItemGraphicEl(u);if(!c)for(var h=l.count(),f=0;!c&&f<h;)c=l.getItemGraphicEl(f++);if(c){var v=getECData(c);blurSeries(o,v.focus,v.blurScope,r)}else{var d=n.get(["emphasis","focus"]),p=n.get(["emphasis","blurScope"]);d!=null&&blurSeries(o,d,p,r)}}function findComponentHighDownDispatchers(n,a,r,o){var l={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||a==null||r==null)return l;var u=o.getModel().getComponent(n,a);if(!u)return l;var c=o.getViewOfComponentModel(u);if(!c||!c.findHighDownDispatchers)return l;for(var h=c.findHighDownDispatchers(r),f,v=0;v<h.length;v++)if({}.NODE_ENV!=="production"&&!isHighDownDispatcher(h[v])&&error("param should be highDownDispatcher"),getECData(h[v]).focus==="self"){f=!0;break}return{focusSelf:f,dispatchers:h}}function handleGlobalMouseOverForHighDown(n,a,r){({}).NODE_ENV!=="production"&&!isHighDownDispatcher(n)&&error("param should be highDownDispatcher");var o=getECData(n),l=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,r),u=l.dispatchers,c=l.focusSelf;u?(c&&blurComponent(o.componentMainType,o.componentIndex,r),each$f(u,function(h){return enterEmphasisWhenMouseOver(h,a)})):(blurSeries(o.seriesIndex,o.focus,o.blurScope,r),o.focus==="self"&&blurComponent(o.componentMainType,o.componentIndex,r),enterEmphasisWhenMouseOver(n,a))}function handleGlobalMouseOutForHighDown(n,a,r){({}).NODE_ENV!=="production"&&!isHighDownDispatcher(n)&&error("param should be highDownDispatcher"),allLeaveBlur(r);var o=getECData(n),l=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,r).dispatchers;l?each$f(l,function(u){return leaveEmphasisWhenMouseOut(u,a)}):leaveEmphasisWhenMouseOut(n,a)}function toggleSelectionFromPayload(n,a,r){if(!!isSelectChangePayload(a)){var o=a.dataType,l=n.getData(o),u=queryDataIndex(l,a);isArray$1(u)||(u=[u]),n[a.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":a.type===SELECT_ACTION_TYPE?"select":"unselect"](u,o)}}function updateSeriesElementSelection(n){var a=n.getAllData();each$f(a,function(r){var o=r.data,l=r.type;o.eachItemGraphicEl(function(u,c){n.isSelected(c,l)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(n){var a=[];return n.eachSeries(function(r){var o=r.getAllData();each$f(o,function(l){l.data;var u=l.type,c=r.getSelectedDataIndices();if(c.length>0){var h={dataIndex:c,seriesIndex:r.seriesIndex};u!=null&&(h.dataType=u),a.push(h)}})}),a}function enableHoverEmphasis(n,a,r){setAsHighDownDispatcher(n,!0),traverseUpdateState(n,setDefaultStateProxy),enableHoverFocus(n,a,r)}function disableHoverEmphasis(n){setAsHighDownDispatcher(n,!1)}function toggleHoverEmphasis(n,a,r,o){o?disableHoverEmphasis(n):enableHoverEmphasis(n,a,r)}function enableHoverFocus(n,a,r){var o=getECData(n);a!=null?(o.focus=a,o.blurScope=r):o.focus&&(o.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(n,a,r,o){r=r||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var u=OTHER_STATES[l],c=a.getModel([u,r]),h=n.ensureState(u);h.style=o?o(c):c[defaultStyleGetterMap[r]]()}}function setAsHighDownDispatcher(n,a){var r=a===!1,o=n;n.highDownSilentOnTouch&&(o.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!r||o.__highDownDispatcher)&&(o.__highByOuter=o.__highByOuter||0,o.__highDownDispatcher=!r)}function isHighDownDispatcher(n){return!!(n&&n.__highDownDispatcher)}function enableComponentHighDownFeatures(n,a,r){var o=getECData(n);o.componentMainType=a.mainType,o.componentIndex=a.componentIndex,o.componentHighDownName=r}function getHighlightDigit(n){var a=_highlightKeyMap[n];return a==null&&_highlightNextDigit<=32&&(a=_highlightKeyMap[n]=_highlightNextDigit++),a}function isSelectChangePayload(n){var a=n.type;return a===SELECT_ACTION_TYPE||a===UNSELECT_ACTION_TYPE||a===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(n){var a=n.type;return a===HIGHLIGHT_ACTION_TYPE||a===DOWNPLAY_ACTION_TYPE}function savePathStates(n){var a=getSavedStates(n);a.normalFill=n.style.fill,a.normalStroke=n.style.stroke;var r=n.states.select||{};a.selectFill=r.style&&r.style.fill||null,a.selectStroke=r.style&&r.style.stroke||null}var CMD$2=PathProxy$1.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(n,a){if(!!a){var r=n.data,o=n.len(),l,u,c,h,f,v,d=CMD$2.M,p=CMD$2.C,g=CMD$2.L,y=CMD$2.R,_=CMD$2.A,S=CMD$2.Q;for(c=0,h=0;c<o;){switch(l=r[c++],h=c,u=0,l){case d:u=1;break;case g:u=1;break;case p:u=3;break;case S:u=2;break;case _:var x=a[4],T=a[5],A=mathSqrt$2(a[0]*a[0]+a[1]*a[1]),b=mathSqrt$2(a[2]*a[2]+a[3]*a[3]),C=mathAtan2(-a[1]/b,a[0]/A);r[c]*=A,r[c++]+=x,r[c]*=b,r[c++]+=T,r[c++]*=A,r[c++]*=b,r[c++]+=C,r[c++]+=C,c+=2,h=c;break;case y:v[0]=r[c++],v[1]=r[c++],applyTransform$1(v,v,a),r[h++]=v[0],r[h++]=v[1],v[0]+=r[c++],v[1]+=r[c++],applyTransform$1(v,v,a),r[h++]=v[0],r[h++]=v[1]}for(f=0;f<u;f++){var E=points$2[f];E[0]=r[c++],E[1]=r[c++],applyTransform$1(E,E,a),r[h++]=E[0],r[h++]=E[1]}}n.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vRatio(n,a){return(n[0]*a[0]+n[1]*a[1])/(vMag(n)*vMag(a))}function vAngle(n,a){return(n[0]*a[1]<n[1]*a[0]?-1:1)*Math.acos(vRatio(n,a))}function processArc(n,a,r,o,l,u,c,h,f,v,d){var p=f*(PI$7/180),g=mathCos$2(p)*(n-r)/2+mathSin$2(p)*(a-o)/2,y=-1*mathSin$2(p)*(n-r)/2+mathCos$2(p)*(a-o)/2,_=g*g/(c*c)+y*y/(h*h);_>1&&(c*=mathSqrt$1(_),h*=mathSqrt$1(_));var S=(l===u?-1:1)*mathSqrt$1((c*c*(h*h)-c*c*(y*y)-h*h*(g*g))/(c*c*(y*y)+h*h*(g*g)))||0,x=S*c*y/h,T=S*-h*g/c,A=(n+r)/2+mathCos$2(p)*x-mathSin$2(p)*T,b=(a+o)/2+mathSin$2(p)*x+mathCos$2(p)*T,C=vAngle([1,0],[(g-x)/c,(y-T)/h]),E=[(g-x)/c,(y-T)/h],w=[(-1*g-x)/c,(-1*y-T)/h],D=vAngle(E,w);if(vRatio(E,w)<=-1&&(D=PI$7),vRatio(E,w)>=1&&(D=0),D<0){var M=Math.round(D/PI$7*1e6)/1e6;D=PI$7*2+M%2*PI$7}d.addData(v,A,b,c,h,C,D,p,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(n){var a=new PathProxy$1;if(!n)return a;var r=0,o=0,l=r,u=o,c,h=PathProxy$1.CMD,f=n.match(commandReg);if(!f)return a;for(var v=0;v<f.length;v++){for(var d=f[v],p=d.charAt(0),g=void 0,y=d.match(numberReg$1)||[],_=y.length,S=0;S<_;S++)y[S]=parseFloat(y[S]);for(var x=0;x<_;){var T=void 0,A=void 0,b=void 0,C=void 0,E=void 0,w=void 0,D=void 0,M=r,P=o,L=void 0,I=void 0;switch(p){case"l":r+=y[x++],o+=y[x++],g=h.L,a.addData(g,r,o);break;case"L":r=y[x++],o=y[x++],g=h.L,a.addData(g,r,o);break;case"m":r+=y[x++],o+=y[x++],g=h.M,a.addData(g,r,o),l=r,u=o,p="l";break;case"M":r=y[x++],o=y[x++],g=h.M,a.addData(g,r,o),l=r,u=o,p="L";break;case"h":r+=y[x++],g=h.L,a.addData(g,r,o);break;case"H":r=y[x++],g=h.L,a.addData(g,r,o);break;case"v":o+=y[x++],g=h.L,a.addData(g,r,o);break;case"V":o=y[x++],g=h.L,a.addData(g,r,o);break;case"C":g=h.C,a.addData(g,y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]),r=y[x-2],o=y[x-1];break;case"c":g=h.C,a.addData(g,y[x++]+r,y[x++]+o,y[x++]+r,y[x++]+o,y[x++]+r,y[x++]+o),r+=y[x-2],o+=y[x-1];break;case"S":T=r,A=o,L=a.len(),I=a.data,c===h.C&&(T+=r-I[L-4],A+=o-I[L-3]),g=h.C,M=y[x++],P=y[x++],r=y[x++],o=y[x++],a.addData(g,T,A,M,P,r,o);break;case"s":T=r,A=o,L=a.len(),I=a.data,c===h.C&&(T+=r-I[L-4],A+=o-I[L-3]),g=h.C,M=r+y[x++],P=o+y[x++],r+=y[x++],o+=y[x++],a.addData(g,T,A,M,P,r,o);break;case"Q":M=y[x++],P=y[x++],r=y[x++],o=y[x++],g=h.Q,a.addData(g,M,P,r,o);break;case"q":M=y[x++]+r,P=y[x++]+o,r+=y[x++],o+=y[x++],g=h.Q,a.addData(g,M,P,r,o);break;case"T":T=r,A=o,L=a.len(),I=a.data,c===h.Q&&(T+=r-I[L-4],A+=o-I[L-3]),r=y[x++],o=y[x++],g=h.Q,a.addData(g,T,A,r,o);break;case"t":T=r,A=o,L=a.len(),I=a.data,c===h.Q&&(T+=r-I[L-4],A+=o-I[L-3]),r+=y[x++],o+=y[x++],g=h.Q,a.addData(g,T,A,r,o);break;case"A":b=y[x++],C=y[x++],E=y[x++],w=y[x++],D=y[x++],M=r,P=o,r=y[x++],o=y[x++],g=h.A,processArc(M,P,r,o,w,D,b,C,E,g,a);break;case"a":b=y[x++],C=y[x++],E=y[x++],w=y[x++],D=y[x++],M=r,P=o,r+=y[x++],o+=y[x++],g=h.A,processArc(M,P,r,o,w,D,b,C,E,g,a);break}}(p==="z"||p==="Z")&&(g=h.Z,a.addData(g),r=l,o=u),c=g}return a.toStatic(),a}var SVGPath=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.applyTransform=function(r){},a}(Path$1);function isPathProxy(n){return n.setData!=null}function createPathOptions(n,a){var r=createPathProxyFromString(n),o=extend({},a);return o.buildPath=function(l){if(isPathProxy(l)){l.setData(r.data);var u=l.getContext();u&&l.rebuildPath(u,1)}else{var u=l;r.rebuildPath(u,1)}},o.applyTransform=function(l){transformPath(r,l),this.dirtyShape()},o}function createFromString(n,a){return new SVGPath(createPathOptions(n,a))}function extendFromString(n,a){var r=createPathOptions(n,a),o=function(l){__extends(u,l);function u(c){var h=l.call(this,c)||this;return h.applyTransform=r.applyTransform,h.buildPath=r.buildPath,h}return u}(SVGPath);return o}function mergePath$1(n,a){for(var r=[],o=n.length,l=0;l<o;l++){var u=n[l];r.push(u.getUpdatedPathProxy(!0))}var c=new Path$1(a);return c.createPathProxy(),c.buildPath=function(h){if(isPathProxy(h)){h.appendPath(r);var f=h.getContext();f&&h.rebuildPath(f,1)}},c}function clonePath(n,a){a=a||{};var r=new Path$1;return n.shape&&r.setShape(n.shape),r.setStyle(n.style),a.bakeTransform?transformPath(r.path,n.getComputedTransform()):a.toLocal?r.setLocalTransform(n.getComputedTransform()):r.copyTransform(n),r.buildPath=n.buildPath,r.applyTransform=r.applyTransform,r.z=n.z,r.z2=n.z2,r.zlevel=n.zlevel,r}var CircleShape=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Circle=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new CircleShape},a.prototype.buildPath=function(r,o){r.moveTo(o.cx+o.r,o.cy),r.arc(o.cx,o.cy,o.r,0,Math.PI*2)},a}(Path$1);Circle.prototype.type="circle";const Circle$1=Circle;var EllipseShape=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Ellipse=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new EllipseShape},a.prototype.buildPath=function(r,o){var l=.5522848,u=o.cx,c=o.cy,h=o.rx,f=o.ry,v=h*l,d=f*l;r.moveTo(u-h,c),r.bezierCurveTo(u-h,c-d,u-v,c-f,u,c-f),r.bezierCurveTo(u+v,c-f,u+h,c-d,u+h,c),r.bezierCurveTo(u+h,c+d,u+v,c+f,u,c+f),r.bezierCurveTo(u-v,c+f,u-h,c+d,u-h,c),r.closePath()},a}(Path$1);Ellipse.prototype.type="ellipse";const Ellipse$1=Ellipse;var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(n,a,r,o,l,u,c,h){var f=r-n,v=o-a,d=c-l,p=h-u,g=p*f-d*v;if(!(g*g<e))return g=(d*(a-u)-p*(n-l))/g,[n+g*f,a+g*v]}function computeCornerTangents(n,a,r,o,l,u,c){var h=n-r,f=a-o,v=(c?u:-u)/mathSqrt(h*h+f*f),d=v*f,p=-v*h,g=n+d,y=a+p,_=r+d,S=o+p,x=(g+_)/2,T=(y+S)/2,A=_-g,b=S-y,C=A*A+b*b,E=l-u,w=g*S-_*y,D=(b<0?-1:1)*mathSqrt(mathMax$7(0,E*E*C-w*w)),M=(w*b-A*D)/C,P=(-w*A-b*D)/C,L=(w*b+A*D)/C,I=(-w*A+b*D)/C,R=M-x,O=P-T,N=L-x,V=I-T;return R*R+O*O>N*N+V*V&&(M=L,P=I),{cx:M,cy:P,x0:-d,y0:-p,x1:M*(l/E-1),y1:P*(l/E-1)}}function normalizeCornerRadius(n){var a;if(isArray$1(n)){var r=n.length;if(!r)return n;r===1?a=[n[0],n[0],0,0]:r===2?a=[n[0],n[0],n[1],n[1]]:r===3?a=n.concat(n[2]):a=n}else a=[n,n,n,n];return a}function buildPath$1(n,a){var r,o=mathMax$7(a.r,0),l=mathMax$7(a.r0||0,0),u=o>0,c=l>0;if(!(!u&&!c)){if(u||(o=l,l=0),l>o){var h=o;o=l,l=h}var f=a.startAngle,v=a.endAngle;if(!(isNaN(f)||isNaN(v))){var d=a.cx,p=a.cy,g=!!a.clockwise,y=mathAbs$1(v-f),_=y>PI2$3&&y%PI2$3;if(_>e&&(y=_),!(o>e))n.moveTo(d,p);else if(y>PI2$3-e)n.moveTo(d+o*mathCos$1(f),p+o*mathSin$1(f)),n.arc(d,p,o,f,v,!g),l>e&&(n.moveTo(d+l*mathCos$1(v),p+l*mathSin$1(v)),n.arc(d,p,l,v,f,g));else{var S=void 0,x=void 0,T=void 0,A=void 0,b=void 0,C=void 0,E=void 0,w=void 0,D=void 0,M=void 0,P=void 0,L=void 0,I=void 0,R=void 0,O=void 0,N=void 0,V=o*mathCos$1(f),B=o*mathSin$1(f),G=l*mathCos$1(v),F=l*mathSin$1(v),z=y>e;if(z){var H=a.cornerRadius;H&&(r=normalizeCornerRadius(H),S=r[0],x=r[1],T=r[2],A=r[3]);var U=mathAbs$1(o-l)/2;if(b=mathMin$7(U,T),C=mathMin$7(U,A),E=mathMin$7(U,S),w=mathMin$7(U,x),P=D=mathMax$7(b,C),L=M=mathMax$7(E,w),(D>e||M>e)&&(I=o*mathCos$1(v),R=o*mathSin$1(v),O=l*mathCos$1(f),N=l*mathSin$1(f),y<PI$6)){var Y=intersect(V,B,O,N,I,R,G,F);if(Y){var Z=V-Y[0],X=B-Y[1],J=I-Y[0],te=R-Y[1],Q=1/mathSin$1(mathACos((Z*J+X*te)/(mathSqrt(Z*Z+X*X)*mathSqrt(J*J+te*te)))/2),q=mathSqrt(Y[0]*Y[0]+Y[1]*Y[1]);P=mathMin$7(D,(o-q)/(Q+1)),L=mathMin$7(M,(l-q)/(Q-1))}}}if(!z)n.moveTo(d+V,p+B);else if(P>e){var ee=mathMin$7(T,P),K=mathMin$7(A,P),W=computeCornerTangents(O,N,V,B,o,ee,g),j=computeCornerTangents(I,R,G,F,o,K,g);n.moveTo(d+W.cx+W.x0,p+W.cy+W.y0),P<D&&ee===K?n.arc(d+W.cx,p+W.cy,P,mathATan2(W.y0,W.x0),mathATan2(j.y0,j.x0),!g):(ee>0&&n.arc(d+W.cx,p+W.cy,ee,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!g),n.arc(d,p,o,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(j.cy+j.y1,j.cx+j.x1),!g),K>0&&n.arc(d+j.cx,p+j.cy,K,mathATan2(j.y1,j.x1),mathATan2(j.y0,j.x0),!g))}else n.moveTo(d+V,p+B),n.arc(d,p,o,f,v,!g);if(!(l>e)||!z)n.lineTo(d+G,p+F);else if(L>e){var ee=mathMin$7(S,L),K=mathMin$7(x,L),W=computeCornerTangents(G,F,I,R,l,-K,g),j=computeCornerTangents(V,B,O,N,l,-ee,g);n.lineTo(d+W.cx+W.x0,p+W.cy+W.y0),L<M&&ee===K?n.arc(d+W.cx,p+W.cy,L,mathATan2(W.y0,W.x0),mathATan2(j.y0,j.x0),!g):(K>0&&n.arc(d+W.cx,p+W.cy,K,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!g),n.arc(d,p,l,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(j.cy+j.y1,j.cx+j.x1),g),ee>0&&n.arc(d+j.cx,p+j.cy,ee,mathATan2(j.y1,j.x1),mathATan2(j.y0,j.x0),!g))}else n.lineTo(d+G,p+F),n.arc(d,p,l,v,f,g)}n.closePath()}}}var SectorShape=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),Sector=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new SectorShape},a.prototype.buildPath=function(r,o){buildPath$1(r,o)},a.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},a}(Path$1);Sector.prototype.type="sector";const Sector$1=Sector;var RingShape=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),Ring=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new RingShape},a.prototype.buildPath=function(r,o){var l=o.cx,u=o.cy,c=Math.PI*2;r.moveTo(l+o.r,u),r.arc(l,u,o.r,0,c,!1),r.moveTo(l+o.r0,u),r.arc(l,u,o.r0,0,c,!0)},a}(Path$1);Ring.prototype.type="ring";const Ring$1=Ring;function smoothBezier(n,a,r,o){var l=[],u=[],c=[],h=[],f,v,d,p;if(o){d=[1/0,1/0],p=[-1/0,-1/0];for(var g=0,y=n.length;g<y;g++)min$1(d,d,n[g]),max$1(p,p,n[g]);min$1(d,d,o[0]),max$1(p,p,o[1])}for(var g=0,y=n.length;g<y;g++){var _=n[g];if(r)f=n[g?g-1:y-1],v=n[(g+1)%y];else if(g===0||g===y-1){l.push(clone$3(n[g]));continue}else f=n[g-1],v=n[g+1];sub(u,v,f),scale$2(u,u,a);var S=distance(_,f),x=distance(_,v),T=S+x;T!==0&&(S/=T,x/=T),scale$2(c,u,-S),scale$2(h,u,x);var A=add([],_,c),b=add([],_,h);o&&(max$1(A,A,d),min$1(A,A,p),max$1(b,b,d),min$1(b,b,p)),l.push(A),l.push(b)}return r&&l.push(l.shift()),l}function buildPath(n,a,r){var o=a.smooth,l=a.points;if(l&&l.length>=2){if(o){var u=smoothBezier(l,o,r,a.smoothConstraint);n.moveTo(l[0][0],l[0][1]);for(var c=l.length,h=0;h<(r?c:c-1);h++){var f=u[h*2],v=u[h*2+1],d=l[(h+1)%c];n.bezierCurveTo(f[0],f[1],v[0],v[1],d[0],d[1])}}else{n.moveTo(l[0][0],l[0][1]);for(var h=1,p=l.length;h<p;h++)n.lineTo(l[h][0],l[h][1])}r&&n.closePath()}}var PolygonShape=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),Polygon=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new PolygonShape},a.prototype.buildPath=function(r,o){buildPath(r,o,!0)},a}(Path$1);Polygon.prototype.type="polygon";const Polygon$1=Polygon;var PolylineShape=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),Polyline$2=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new PolylineShape},a.prototype.buildPath=function(r,o){buildPath(r,o,!1)},a}(Path$1);Polyline$2.prototype.type="polyline";const Polyline$3=Polyline$2;var subPixelOptimizeOutputShape={},LineShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),Line$2=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new LineShape},a.prototype.buildPath=function(r,o){var l,u,c,h;if(this.subPixelOptimize){var f=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,o,this.style);l=f.x1,u=f.y1,c=f.x2,h=f.y2}else l=o.x1,u=o.y1,c=o.x2,h=o.y2;var v=o.percent;v!==0&&(r.moveTo(l,u),v<1&&(c=l*(1-v)+c*v,h=u*(1-v)+h*v),r.lineTo(c,h))},a.prototype.pointAt=function(r){var o=this.shape;return[o.x1*(1-r)+o.x2*r,o.y1*(1-r)+o.y2*r]},a}(Path$1);Line$2.prototype.type="line";const Line$3=Line$2;var out=[],BezierCurveShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function someVectorAt(n,a,r){var o=n.cpx2,l=n.cpy2;return o!=null||l!=null?[(r?cubicDerivativeAt:cubicAt)(n.x1,n.cpx1,n.cpx2,n.x2,a),(r?cubicDerivativeAt:cubicAt)(n.y1,n.cpy1,n.cpy2,n.y2,a)]:[(r?quadraticDerivativeAt:quadraticAt$1)(n.x1,n.cpx1,n.x2,a),(r?quadraticDerivativeAt:quadraticAt$1)(n.y1,n.cpy1,n.y2,a)]}var BezierCurve=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new BezierCurveShape},a.prototype.buildPath=function(r,o){var l=o.x1,u=o.y1,c=o.x2,h=o.y2,f=o.cpx1,v=o.cpy1,d=o.cpx2,p=o.cpy2,g=o.percent;g!==0&&(r.moveTo(l,u),d==null||p==null?(g<1&&(quadraticSubdivide(l,f,c,g,out),f=out[1],c=out[2],quadraticSubdivide(u,v,h,g,out),v=out[1],h=out[2]),r.quadraticCurveTo(f,v,c,h)):(g<1&&(cubicSubdivide(l,f,d,c,g,out),f=out[1],d=out[2],c=out[3],cubicSubdivide(u,v,p,h,g,out),v=out[1],p=out[2],h=out[3]),r.bezierCurveTo(f,v,d,p,c,h)))},a.prototype.pointAt=function(r){return someVectorAt(this.shape,r,!1)},a.prototype.tangentAt=function(r){var o=someVectorAt(this.shape,r,!0);return normalize$3(o,o)},a}(Path$1);BezierCurve.prototype.type="bezier-curve";const BezierCurve$1=BezierCurve;var ArcShape=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Arc=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new ArcShape},a.prototype.buildPath=function(r,o){var l=o.cx,u=o.cy,c=Math.max(o.r,0),h=o.startAngle,f=o.endAngle,v=o.clockwise,d=Math.cos(h),p=Math.sin(h);r.moveTo(d*c+l,p*c+u),r.arc(l,u,c,h,f,!v)},a}(Path$1);Arc.prototype.type="arc";const Arc$1=Arc;var CompoundPath=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="compound",r}return a.prototype._updatePathDirty=function(){for(var r=this.shape.paths,o=this.shapeChanged(),l=0;l<r.length;l++)o=o||r[l].shapeChanged();o&&this.dirtyShape()},a.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],o=this.getGlobalScale(),l=0;l<r.length;l++)r[l].path||r[l].createPathProxy(),r[l].path.setScale(o[0],o[1],r[l].segmentIgnoreThreshold)},a.prototype.buildPath=function(r,o){for(var l=o.paths||[],u=0;u<l.length;u++)l[u].buildPath(r,l[u].shape,!0)},a.prototype.afterBrush=function(){for(var r=this.shape.paths||[],o=0;o<r.length;o++)r[o].pathUpdated()},a.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path$1.prototype.getBoundingRect.call(this)},a}(Path$1);const CompoundPath$1=CompoundPath;var Gradient=function(){function n(a){this.colorStops=a||[]}return n.prototype.addColorStop=function(a,r){this.colorStops.push({offset:a,color:r})},n}();const Gradient$1=Gradient;var LinearGradient=function(n){__extends(a,n);function a(r,o,l,u,c,h){var f=n.call(this,c)||this;return f.x=r==null?0:r,f.y=o==null?0:o,f.x2=l==null?1:l,f.y2=u==null?0:u,f.type="linear",f.global=h||!1,f}return a}(Gradient$1);const LinearGradient$1=LinearGradient;var RadialGradient=function(n){__extends(a,n);function a(r,o,l,u,c){var h=n.call(this,u)||this;return h.x=r==null?.5:r,h.y=o==null?.5:o,h.r=l==null?.5:l,h.type="radial",h.global=c||!1,h}return a}(Gradient$1);const RadialGradient$1=RadialGradient;var extent=[0,0],extent2=[0,0],minTv=new Point$1,maxTv=new Point$1,OrientedBoundingRect=function(){function n(a,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var o=0;o<4;o++)this._corners[o]=new Point$1;for(var o=0;o<2;o++)this._axes[o]=new Point$1;a&&this.fromBoundingRect(a,r)}return n.prototype.fromBoundingRect=function(a,r){var o=this._corners,l=this._axes,u=a.x,c=a.y,h=u+a.width,f=c+a.height;if(o[0].set(u,c),o[1].set(h,c),o[2].set(h,f),o[3].set(u,f),r)for(var v=0;v<4;v++)o[v].transform(r);Point$1.sub(l[0],o[1],o[0]),Point$1.sub(l[1],o[3],o[0]),l[0].normalize(),l[1].normalize();for(var v=0;v<2;v++)this._origin[v]=l[v].dot(o[0])},n.prototype.intersect=function(a,r){var o=!0,l=!r;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,a,minTv,maxTv,l,1)&&(o=!1,l)||!this._intersectCheckOneSide(a,this,minTv,maxTv,l,-1)&&(o=!1,l)||l||Point$1.copy(r,o?minTv:maxTv),o},n.prototype._intersectCheckOneSide=function(a,r,o,l,u,c){for(var h=!0,f=0;f<2;f++){var v=this._axes[f];if(this._getProjMinMaxOnAxis(f,a._corners,extent),this._getProjMinMaxOnAxis(f,r._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(h=!1,u)return h;var d=Math.abs(extent2[0]-extent[1]),p=Math.abs(extent[0]-extent2[1]);Math.min(d,p)>l.len()&&(d<p?Point$1.scale(l,v,-d*c):Point$1.scale(l,v,p*c))}else if(o){var d=Math.abs(extent2[0]-extent[1]),p=Math.abs(extent[0]-extent2[1]);Math.min(d,p)<o.len()&&(d<p?Point$1.scale(o,v,d*c):Point$1.scale(o,v,-p*c))}}return h},n.prototype._getProjMinMaxOnAxis=function(a,r,o){for(var l=this._axes[a],u=this._origin,c=r[0].dot(l)+u[a],h=c,f=c,v=1;v<r.length;v++){var d=r[v].dot(l)+u[a];h=Math.min(d,h),f=Math.max(d,f)}o[0]=h,o[1]=f},n}();const OrientedBoundingRect$1=OrientedBoundingRect;var m=[],IncrementalDisplayable=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return a.prototype.traverse=function(r,o){r.call(o,this)},a.prototype.useStyle=function(){this.style={}},a.prototype.getCursor=function(){return this._cursor},a.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},a.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},a.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},a.prototype.addDisplayable=function(r,o){o?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},a.prototype.addDisplayables=function(r,o){o=o||!1;for(var l=0;l<r.length;l++)this.addDisplayable(r[l],o)},a.prototype.getDisplayables=function(){return this._displayables},a.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},a.prototype.eachPendingDisplayable=function(r){for(var o=this._cursor;o<this._displayables.length;o++)r&&r(this._displayables[o]);for(var o=0;o<this._temporaryDisplayables.length;o++)r&&r(this._temporaryDisplayables[o])},a.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var o=this._displayables[r];o.parent=this,o.update(),o.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var o=this._temporaryDisplayables[r];o.parent=this,o.update(),o.parent=null}},a.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new BoundingRect$1(1/0,1/0,-1/0,-1/0),o=0;o<this._displayables.length;o++){var l=this._displayables[o],u=l.getBoundingRect().clone();l.needLocalTransform()&&u.applyTransform(l.getLocalTransform(m)),r.union(u)}this._rect=r}return this._rect},a.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();if(u.contain(l[0],l[1]))for(var c=0;c<this._displayables.length;c++){var h=this._displayables[c];if(h.contain(r,o))return!0}return!1},a}(Displayable$1);const IncrementalDisplayable$1=IncrementalDisplayable;var transitionStore=makeInner();function getAnimationConfig(n,a,r,o,l){var u;if(a&&a.ecModel){var c=a.ecModel.getUpdatePayload();u=c&&c.animation}var h=a&&a.isAnimationEnabled(),f=n==="update";if(h){var v=void 0,d=void 0,p=void 0;o?(v=retrieve2(o.duration,200),d=retrieve2(o.easing,"cubicOut"),p=0):(v=a.getShallow(f?"animationDurationUpdate":"animationDuration"),d=a.getShallow(f?"animationEasingUpdate":"animationEasing"),p=a.getShallow(f?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(v=u.duration),u.easing!=null&&(d=u.easing),u.delay!=null&&(p=u.delay)),isFunction(p)&&(p=p(r,l)),isFunction(v)&&(v=v(r));var g={duration:v||0,delay:p,easing:d};return g}else return null}function animateOrSetProps(n,a,r,o,l,u,c){var h=!1,f;isFunction(l)?(c=u,u=l,l=null):isObject$3(l)&&(u=l.cb,c=l.during,h=l.isFrom,f=l.removeOpt,l=l.dataIndex);var v=n==="leave";v||a.stopAnimation("leave");var d=getAnimationConfig(n,o,l,v?f||{}:null,o&&o.getAnimationDelayParams?o.getAnimationDelayParams(a,l):null);if(d&&d.duration>0){var p=d.duration,g=d.delay,y=d.easing,_={duration:p,delay:g||0,easing:y,done:u,force:!!u||!!c,setToFinal:!v,scope:n,during:c};h?a.animateFrom(r,_):a.animateTo(r,_)}else a.stopAnimation(),!h&&a.attr(r),c&&c(1),u&&u()}function updateProps$1(n,a,r,o,l,u){animateOrSetProps("update",n,a,r,o,l,u)}function initProps(n,a,r,o,l,u){animateOrSetProps("enter",n,a,r,o,l,u)}function isElementRemoved(n){if(!n.__zr)return!0;for(var a=0;a<n.animators.length;a++){var r=n.animators[a];if(r.scope==="leave")return!0}return!1}function removeElement(n,a,r,o,l,u){isElementRemoved(n)||animateOrSetProps("leave",n,a,r,o,l,u)}function fadeOutDisplayable(n,a,r,o){n.removeTextContent(),n.removeTextGuideLine(),removeElement(n,{style:{opacity:0}},a,r,o)}function removeElementWithFadeOut(n,a,r){function o(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(l){l.isGroup||fadeOutDisplayable(l,a,r,o)}):fadeOutDisplayable(n,a,r,o)}function saveOldStyle(n){transitionStore(n).oldStyle=n.style}function getOldStyle(n){return transitionStore(n).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(n){return Path$1.extend(n)}var extendPathFromString=extendFromString;function extendPath(n,a){return extendPathFromString(n,a)}function registerShape(n,a){_customShapeMap[n]=a}function getShapeClass(n){if(_customShapeMap.hasOwnProperty(n))return _customShapeMap[n]}function makePath(n,a,r,o){var l=createFromString(n,a);return r&&(o==="center"&&(r=centerGraphic(r,l.getBoundingRect())),resizePath(l,r)),l}function makeImage(n,a,r){var o=new ZRImage$1({style:{image:n,x:a.x,y:a.y,width:a.width,height:a.height},onload:function(l){if(r==="center"){var u={width:l.width,height:l.height};o.setStyle(centerGraphic(a,u))}}});return o}function centerGraphic(n,a){var r=a.width/a.height,o=n.height*r,l;o<=n.width?l=n.height:(o=n.width,l=o/r);var u=n.x+n.width/2,c=n.y+n.height/2;return{x:u-o/2,y:c-l/2,width:o,height:l}}var mergePath=mergePath$1;function resizePath(n,a){if(!!n.applyTransform){var r=n.getBoundingRect(),o=r.calculateTransform(a);n.applyTransform(o)}}function subPixelOptimizeLine(n,a){return subPixelOptimizeLine$1(n,n,{lineWidth:a}),n}function subPixelOptimizeRect(n){return subPixelOptimizeRect$1(n.shape,n.shape,n.style),n}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(n,a){for(var r=identity([]);n&&n!==a;)mul(r,n.getLocalTransform(),r),n=n.parent;return r}function applyTransform(n,a,r){return a&&!isArrayLike(a)&&(a=Transformable$1.getLocalTransform(a)),r&&(a=invert([],a)),applyTransform$1([],n,a)}function transformDirection(n,a,r){var o=a[4]===0||a[5]===0||a[0]===0?1:Math.abs(2*a[4]/a[0]),l=a[4]===0||a[5]===0||a[2]===0?1:Math.abs(2*a[4]/a[2]),u=[n==="left"?-o:n==="right"?o:0,n==="top"?-l:n==="bottom"?l:0];return u=applyTransform(u,a,r),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(n){return!n.isGroup}function isPath$1(n){return n.shape!=null}function groupTransition(n,a,r){if(!n||!a)return;function o(c){var h={};return c.traverse(function(f){isNotGroup(f)&&f.anid&&(h[f.anid]=f)}),h}function l(c){var h={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(h.shape=extend({},c.shape)),h}var u=o(n);a.traverse(function(c){if(isNotGroup(c)&&c.anid){var h=u[c.anid];if(h){var f=l(c);c.attr(l(h)),updateProps$1(c,f,r,getECData(c).dataIndex)}}})}function clipPointsByRect(n,a){return map$1(n,function(r){var o=r[0];o=mathMax$6(o,a.x),o=mathMin$6(o,a.x+a.width);var l=r[1];return l=mathMax$6(l,a.y),l=mathMin$6(l,a.y+a.height),[o,l]})}function clipRectByRect(n,a){var r=mathMax$6(n.x,a.x),o=mathMin$6(n.x+n.width,a.x+a.width),l=mathMax$6(n.y,a.y),u=mathMin$6(n.y+n.height,a.y+a.height);if(o>=r&&u>=l)return{x:r,y:l,width:o-r,height:u-l}}function createIcon(n,a,r){var o=extend({rectHover:!0},a),l=o.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(l.image=n.slice(8),defaults(l,r),new ZRImage$1(o)):makePath(n.replace("path://",""),o,r,"center")}function linePolygonIntersect(n,a,r,o,l){for(var u=0,c=l[l.length-1];u<l.length;u++){var h=l[u];if(lineLineIntersect$1(n,a,r,o,h[0],h[1],c[0],c[1]))return!0;c=h}}function lineLineIntersect$1(n,a,r,o,l,u,c,h){var f=r-n,v=o-a,d=c-l,p=h-u,g=crossProduct2d$1(d,p,f,v);if(nearZero(g))return!1;var y=n-l,_=a-u,S=crossProduct2d$1(y,_,f,v)/g;if(S<0||S>1)return!1;var x=crossProduct2d$1(y,_,d,p)/g;return!(x<0||x>1)}function crossProduct2d$1(n,a,r,o){return n*o-r*a}function nearZero(n){return n<=1e-6&&n>=-1e-6}function setTooltipConfig(n){var a=n.itemTooltipOption,r=n.componentModel,o=n.itemName,l=isString(a)?{formatter:a}:a,u=r.mainType,c=r.componentIndex,h={componentType:u,name:o,$vars:["name"]};h[u+"Index"]=c;var f=n.formatterParamsExtra;f&&each$f(keys(f),function(d){hasOwn(h,d)||(h[d]=f[d],h.$vars.push(d))});var v=getECData(n.el);v.componentMainType=u,v.componentIndex=c,v.tooltipConfig={name:o,option:defaults({content:o,formatterParams:h},l)}}function traverseElement(n,a){var r;n.isGroup&&(r=a(n)),r||n.traverse(a)}function traverseElements(n,a){if(n)if(isArray$1(n))for(var r=0;r<n.length;r++)traverseElement(n[r],a);else traverseElement(n,a)}registerShape("circle",Circle$1),registerShape("ellipse",Ellipse$1),registerShape("sector",Sector$1),registerShape("ring",Ring$1),registerShape("polygon",Polygon$1),registerShape("polyline",Polyline$3),registerShape("rect",Rect$3),registerShape("line",Line$3),registerShape("bezierCurve",BezierCurve$1),registerShape("arc",Arc$1);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,updateProps:updateProps$1,initProps,removeElement,removeElementWithFadeOut,isElementRemoved,extendShape,extendPath,registerShape,getShapeClass,makePath,makeImage,mergePath,resizePath,subPixelOptimizeLine,subPixelOptimizeRect,subPixelOptimize,getTransform:getTransform$1,applyTransform,transformDirection,groupTransition,clipPointsByRect,clipRectByRect,createIcon,linePolygonIntersect,lineLineIntersect:lineLineIntersect$1,setTooltipConfig,traverseElements,Group:Group$4,Image:ZRImage$1,Text:ZRText$1,Circle:Circle$1,Ellipse:Ellipse$1,Sector:Sector$1,Ring:Ring$1,Polygon:Polygon$1,Polyline:Polyline$3,Rect:Rect$3,Line:Line$3,BezierCurve:BezierCurve$1,Arc:Arc$1,IncrementalDisplayable:IncrementalDisplayable$1,CompoundPath:CompoundPath$1,LinearGradient:LinearGradient$1,RadialGradient:RadialGradient$1,BoundingRect:BoundingRect$1,OrientedBoundingRect:OrientedBoundingRect$1,Point:Point$1,Path:Path$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(n,a){for(var r=0;r<SPECIAL_STATES.length;r++){var o=SPECIAL_STATES[r],l=a[o],u=n.ensureState(o);u.style=u.style||{},u.style.text=l}var c=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:a.normal}),n.useStates(c,!0)}function getLabelText(n,a,r){var o=n.labelFetcher,l=n.labelDataIndex,u=n.labelDimIndex,c=a.normal,h;o&&(h=o.getFormattedLabel(l,"normal",null,u,c&&c.get("formatter"),r!=null?{interpolatedValue:r}:null)),h==null&&(h=isFunction(n.defaultText)?n.defaultText(l,n,r):n.defaultText);for(var f={normal:h},v=0;v<SPECIAL_STATES.length;v++){var d=SPECIAL_STATES[v],p=a[d];f[d]=retrieve2(o?o.getFormattedLabel(l,d,null,u,p&&p.get("formatter")):null,h)}return f}function setLabelStyle(n,a,r,o){r=r||EMPTY_OBJ;for(var l=n instanceof ZRText$1,u=!1,c=0;c<DISPLAY_STATES.length;c++){var h=a[DISPLAY_STATES[c]];if(h&&h.getShallow("show")){u=!0;break}}var f=l?n:n.getTextContent();if(u){l||(f||(f=new ZRText$1,n.setTextContent(f)),n.stateProxy&&(f.stateProxy=n.stateProxy));var v=getLabelText(r,a),d=a.normal,p=!!d.getShallow("show"),g=createTextStyle$1(d,o&&o.normal,r,!1,!l);g.text=v.normal,l||n.setTextConfig(createTextConfig(d,r,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var y=SPECIAL_STATES[c],h=a[y];if(h){var _=f.ensureState(y),S=!!retrieve2(h.getShallow("show"),p);if(S!==p&&(_.ignore=!S),_.style=createTextStyle$1(h,o&&o[y],r,!0,!l),_.style.text=v[y],!l){var x=n.ensureState(y);x.textConfig=createTextConfig(h,r,!0)}}}f.silent=!!d.getShallow("silent"),f.style.x!=null&&(g.x=f.style.x),f.style.y!=null&&(g.y=f.style.y),f.ignore=!p,f.useStyle(g),f.dirty(),r.enableTextSetter&&(labelInner(f).setLabelText=function(T){var A=getLabelText(r,a,T);setLabelText(f,A)})}else f&&(f.ignore=!0);n.dirty()}function getLabelStatesModels(n,a){a=a||"label";for(var r={normal:n.getModel(a)},o=0;o<SPECIAL_STATES.length;o++){var l=SPECIAL_STATES[o];r[l]=n.getModel([l,a])}return r}function createTextStyle$1(n,a,r,o,l){var u={};return setTextStyleCommon(u,n,r,o,l),a&&extend(u,a),u}function createTextConfig(n,a,r){a=a||{};var o={},l,u=n.getShallow("rotate"),c=retrieve2(n.getShallow("distance"),r?null:5),h=n.getShallow("offset");return l=n.getShallow("position")||(r?null:"inside"),l==="outside"&&(l=a.defaultOutsidePosition||"top"),l!=null&&(o.position=l),h!=null&&(o.offset=h),u!=null&&(u*=Math.PI/180,o.rotation=u),c!=null&&(o.distance=c),o.outsideFill=n.get("color")==="inherit"?a.inheritColor||null:"auto",o}function setTextStyleCommon(n,a,r,o,l){r=r||EMPTY_OBJ;var u=a.ecModel,c=u&&u.option.textStyle,h=getRichItemNames(a),f;if(h){f={};for(var v in h)if(h.hasOwnProperty(v)){var d=a.getModel(["rich",v]);setTokenTextStyle(f[v]={},d,c,r,o,l,!1,!0)}}f&&(n.rich=f);var p=a.get("overflow");p&&(n.overflow=p);var g=a.get("minMargin");g!=null&&(n.margin=g),setTokenTextStyle(n,a,c,r,o,l,!0,!1)}function getRichItemNames(n){for(var a;n&&n!==n.ecModel;){var r=(n.option||EMPTY_OBJ).rich;if(r){a=a||{};for(var o=keys(r),l=0;l<o.length;l++){var u=o[l];a[u]=1}}n=n.parentModel}return a}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(n,a,r,o,l,u,c,h){r=!l&&r||EMPTY_OBJ;var f=o&&o.inheritColor,v=a.getShallow("color"),d=a.getShallow("textBorderColor"),p=retrieve2(a.getShallow("opacity"),r.opacity);(v==="inherit"||v==="auto")&&({}.NODE_ENV!=="production"&&v==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),f?v=f:v=null),(d==="inherit"||d==="auto")&&({}.NODE_ENV!=="production"&&d==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),f?d=f:d=null),u||(v=v||r.color,d=d||r.textBorderColor),v!=null&&(n.fill=v),d!=null&&(n.stroke=d);var g=retrieve2(a.getShallow("textBorderWidth"),r.textBorderWidth);g!=null&&(n.lineWidth=g);var y=retrieve2(a.getShallow("textBorderType"),r.textBorderType);y!=null&&(n.lineDash=y);var _=retrieve2(a.getShallow("textBorderDashOffset"),r.textBorderDashOffset);_!=null&&(n.lineDashOffset=_),!l&&p==null&&!h&&(p=o&&o.defaultOpacity),p!=null&&(n.opacity=p),!l&&!u&&n.fill==null&&o.inheritColor&&(n.fill=o.inheritColor);for(var S=0;S<TEXT_PROPS_WITH_GLOBAL.length;S++){var x=TEXT_PROPS_WITH_GLOBAL[S],T=retrieve2(a.getShallow(x),r[x]);T!=null&&(n[x]=T)}for(var S=0;S<TEXT_PROPS_SELF.length;S++){var x=TEXT_PROPS_SELF[S],T=a.getShallow(x);T!=null&&(n[x]=T)}if(n.verticalAlign==null){var A=a.getShallow("baseline");A!=null&&(n.verticalAlign=A)}if(!c||!o.disableBox){for(var S=0;S<TEXT_PROPS_BOX.length;S++){var x=TEXT_PROPS_BOX[S],T=a.getShallow(x);T!=null&&(n[x]=T)}var b=a.getShallow("borderType");b!=null&&(n.borderDash=b),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&f&&({}.NODE_ENV!=="production"&&n.backgroundColor==="auto"&&deprecateReplaceLog("backgroundColor: 'auto'","backgroundColor: 'inherit'"),n.backgroundColor=f),(n.borderColor==="auto"||n.borderColor==="inherit")&&f&&({}.NODE_ENV!=="production"&&n.borderColor==="auto"&&deprecateReplaceLog("borderColor: 'auto'","borderColor: 'inherit'"),n.borderColor=f)}}function getFont(n,a){var r=a&&a.getModel("textStyle");return trim$1([n.fontStyle||r&&r.getShallow("fontStyle")||"",n.fontWeight||r&&r.getShallow("fontWeight")||"",(n.fontSize||r&&r.getShallow("fontSize")||12)+"px",n.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(n,a,r,o){if(!!n){var l=labelInner(n);l.prevValue=l.value,l.value=r;var u=a.normal;l.valueAnimation=u.get("valueAnimation"),l.valueAnimation&&(l.precision=u.get("precision"),l.defaultInterpolatedText=o,l.statesModels=a)}}function animateLabelValue(n,a,r,o,l){var u=labelInner(n);if(!u.valueAnimation||u.prevValue===u.value)return;var c=u.defaultInterpolatedText,h=retrieve2(u.interpolatedValue,u.prevValue),f=u.value;function v(d){var p=interpolateRawValues(r,u.precision,h,f,d);u.interpolatedValue=d===1?null:p;var g=getLabelText({labelDataIndex:a,labelFetcher:l,defaultText:c?c(p):p+""},u.statesModels,p);setLabelText(n,g)}n.percent=0,(u.prevValue==null?initProps:updateProps$1)(n,{percent:1},o,a,null,v)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText$1,TextStyleMixin=function(){function n(){}return n.prototype.getTextColor=function(a){var r=this.ecModel;return this.getShallow("color")||(!a&&r?r.get(PATH_COLOR):null)},n.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(a){for(var r={text:a,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},o=0;o<textStyleParams.length;o++)r[textStyleParams[o]]=this.getShallow(textStyleParams[o]);return tmpText.useStyle(r),tmpText.update(),tmpText.getBoundingRect()},n}();const TextStyleMixin$1=TextStyleMixin;var LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function n(){}return n.prototype.getLineStyle=function(a){return getLineStyle(this,a)},n}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function n(){}return n.prototype.getItemStyle=function(a,r){return getItemStyle(this,a,r)},n}(),Model=function(){function n(a,r,o){this.parentModel=r,this.ecModel=o,this.option=a}return n.prototype.init=function(a,r,o){},n.prototype.mergeOption=function(a,r){merge(this.option,a,!0)},n.prototype.get=function(a,r){return a==null?this.option:this._doGet(this.parsePath(a),!r&&this.parentModel)},n.prototype.getShallow=function(a,r){var o=this.option,l=o==null?o:o[a];if(l==null&&!r){var u=this.parentModel;u&&(l=u.getShallow(a))}return l},n.prototype.getModel=function(a,r){var o=a!=null,l=o?this.parsePath(a):null,u=o?this._doGet(l):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new n(u,r,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var a=this.constructor;return new a(clone$4(this.option))},n.prototype.parsePath=function(a){return typeof a=="string"?a.split("."):a},n.prototype.resolveParentPath=function(a){return a},n.prototype.isAnimationEnabled=function(){if(!env$1.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(a,r){var o=this.option;if(!a)return o;for(var l=0;l<a.length&&!(!!a[l]&&(o=o&&typeof o=="object"?o[a[l]]:null,o==null));l++);return o==null&&r&&(o=r._doGet(this.resolveParentPath(a),r.parentModel)),o},n}();enableClassExtend(Model),enableClassCheck(Model),mixin(Model,LineStyleMixin),mixin(Model,ItemStyleMixin),mixin(Model,AreaStyleMixin),mixin(Model,TextStyleMixin$1);const Model$1=Model;var base=Math.round(Math.random()*10);function getUID(n){return[n||"",base++].join("_")}function enableSubTypeDefaulter(n){var a={};n.registerSubTypeDefaulter=function(r,o){var l=parseClassType(r);a[l.main]=o},n.determineSubType=function(r,o){var l=o.type;if(!l){var u=parseClassType(r).main;n.hasSubTypes(r)&&a[u]&&(l=a[u](o))}return l}}function enableTopologicalTravel(n,a){n.topologicalTravel=function(u,c,h,f){if(!u.length)return;var v=r(c),d=v.graph,p=v.noEntryList,g={};for(each$f(u,function(A){g[A]=!0});p.length;){var y=p.pop(),_=d[y],S=!!g[y];S&&(h.call(f,y,_.originalDeps.slice()),delete g[y]),each$f(_.successor,S?T:x)}each$f(g,function(){var A="";throw{}.NODE_ENV!=="production"&&(A=makePrintable("Circular dependency may exists: ",g,u,c)),new Error(A)});function x(A){d[A].entryCount--,d[A].entryCount===0&&p.push(A)}function T(A){g[A]=!0,x(A)}};function r(u){var c={},h=[];return each$f(u,function(f){var v=o(c,f),d=v.originalDeps=a(f),p=l(d,u);v.entryCount=p.length,v.entryCount===0&&h.push(f),each$f(p,function(g){indexOf(v.predecessor,g)<0&&v.predecessor.push(g);var y=o(c,g);indexOf(y.successor,g)<0&&y.successor.push(f)})}),{graph:c,noEntryList:h}}function o(u,c){return u[c]||(u[c]={predecessor:[],successor:[]}),u[c]}function l(u,c){var h=[];return each$f(u,function(f){indexOf(c,f)>=0&&h.push(f)}),h}}function inheritDefaultOption(n,a){return merge(merge({},n,!0),a,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env$1.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return n.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(n,a){n=n.toUpperCase(),localeModels[n]=new Model$1(a),localeStorage[n]=a}function createLocaleObject(n){if(isString(n)){var a=localeStorage[n.toUpperCase()]||{};return n===LOCALE_ZH||n===LOCALE_EN?clone$4(a):merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(n){return localeModels[n]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN),registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(n,a){return n+="","0000".substr(0,a-n.length)+n}function getPrimaryTimeUnit(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function isPrimaryTimeUnit(n){return n===getPrimaryTimeUnit(n)}function getDefaultFormatPrecisionOfInterval(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(n,a,r,o){var l=parseDate(n),u=l[fullYearGetterName(r)](),c=l[monthGetterName(r)]()+1,h=Math.floor((c-1)/3)+1,f=l[dateGetterName(r)](),v=l["get"+(r?"UTC":"")+"Day"](),d=l[hoursGetterName(r)](),p=(d-1)%12+1,g=l[minutesGetterName(r)](),y=l[secondsGetterName(r)](),_=l[millisecondsGetterName(r)](),S=o instanceof Model$1?o:getLocaleModel(o||SYSTEM_LANG)||getDefaultLocaleModel(),x=S.getModel("time"),T=x.get("month"),A=x.get("monthAbbr"),b=x.get("dayOfWeek"),C=x.get("dayOfWeekAbbr");return(a||"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,h+"").replace(/{MMMM}/g,T[c-1]).replace(/{MMM}/g,A[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(f,2)).replace(/{d}/g,f+"").replace(/{eeee}/g,b[v]).replace(/{ee}/g,C[v]).replace(/{e}/g,v+"").replace(/{HH}/g,pad(d,2)).replace(/{H}/g,d+"").replace(/{hh}/g,pad(p+"",2)).replace(/{h}/g,p+"").replace(/{mm}/g,pad(g,2)).replace(/{m}/g,g+"").replace(/{ss}/g,pad(y,2)).replace(/{s}/g,y+"").replace(/{SSS}/g,pad(_,3)).replace(/{S}/g,_+"")}function leveledFormat(n,a,r,o,l){var u=null;if(isString(r))u=r;else if(isFunction(r))u=r(n.value,a,{level:n.level});else{var c=extend({},defaultLeveledFormatter);if(n.level>0)for(var h=0;h<primaryTimeUnits.length;++h)c[primaryTimeUnits[h]]="{primary|"+c[primaryTimeUnits[h]]+"}";var f=r?r.inherit===!1?r:defaults(r,c):c,v=getUnitFromValue(n.value,l);if(f[v])u=f[v];else if(f.inherit){for(var d=timeUnits.indexOf(v),h=d-1;h>=0;--h)if(f[v]){u=f[v];break}u=u||c.none}if(isArray$1(u)){var p=n.level==null?0:n.level>=0?n.level:u.length+n.level;p=Math.min(p,u.length-1),u=u[p]}}return format$1(new Date(n.value),u,l,o)}function getUnitFromValue(n,a){var r=parseDate(n),o=r[monthGetterName(a)]()+1,l=r[dateGetterName(a)](),u=r[hoursGetterName(a)](),c=r[minutesGetterName(a)](),h=r[secondsGetterName(a)](),f=r[millisecondsGetterName(a)](),v=f===0,d=v&&h===0,p=d&&c===0,g=p&&u===0,y=g&&l===1,_=y&&o===1;return _?"year":y?"month":g?"day":p?"hour":d?"minute":v?"second":"millisecond"}function getUnitValue(n,a,r){var o=isNumber(n)?parseDate(n):n;switch(a=a||getUnitFromValue(n,r),a){case"year":return o[fullYearGetterName(r)]();case"half-year":return o[monthGetterName(r)]()>=6?1:0;case"quarter":return Math.floor((o[monthGetterName(r)]()+1)/4);case"month":return o[monthGetterName(r)]();case"day":return o[dateGetterName(r)]();case"half-day":return o[hoursGetterName(r)]()/24;case"hour":return o[hoursGetterName(r)]();case"minute":return o[minutesGetterName(r)]();case"second":return o[secondsGetterName(r)]();case"millisecond":return o[millisecondsGetterName(r)]()}}function fullYearGetterName(n){return n?"getUTCFullYear":"getFullYear"}function monthGetterName(n){return n?"getUTCMonth":"getMonth"}function dateGetterName(n){return n?"getUTCDate":"getDate"}function hoursGetterName(n){return n?"getUTCHours":"getHours"}function minutesGetterName(n){return n?"getUTCMinutes":"getMinutes"}function secondsGetterName(n){return n?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(n){return n?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(n){return n?"setUTCFullYear":"setFullYear"}function monthSetterName(n){return n?"setUTCMonth":"setMonth"}function dateSetterName(n){return n?"setUTCDate":"setDate"}function hoursSetterName(n){return n?"setUTCHours":"setHours"}function minutesSetterName(n){return n?"setUTCMinutes":"setMinutes"}function secondsSetterName(n){return n?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(n){return n?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(n,a,r,o,l,u,c,h){var f=new ZRText$1({style:{text:n,font:a,align:r,verticalAlign:o,padding:l,rich:u,overflow:c?"truncate":null,lineHeight:h}});return f.getBoundingRect()}function addCommas(n){if(!isNumeric(n))return isString(n)?n:"-";var a=(n+"").split(".");return a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(a.length>1?"."+a[1]:"")}function toCamelCase(n,a){return n=(n||"").toLowerCase().replace(/-(.)/g,function(r,o){return o.toUpperCase()}),a&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(n,a,r){var o="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(d){return d&&trim$1(d)?d:"-"}function u(d){return!!(d!=null&&!isNaN(d)&&isFinite(d))}var c=a==="time",h=n instanceof Date;if(c||h){var f=c?parseDate(n):n;if(isNaN(+f)){if(h)return"-"}else return format$1(f,o,r)}if(a==="ordinal")return isStringSafe(n)?l(n):isNumber(n)&&u(n)?n+"":"-";var v=numericToNumber(n);return u(v)?addCommas(v):isStringSafe(n)?l(n):typeof n=="boolean"?n+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(n,a){return"{"+n+(a==null?"":a)+"}"};function formatTpl(n,a,r){isArray$1(a)||(a=[a]);var o=a.length;if(!o)return"";for(var l=a[0].$vars||[],u=0;u<l.length;u++){var c=TPL_VAR_ALIAS[u];n=n.replace(wrapVar(c),wrapVar(c,0))}for(var h=0;h<o;h++)for(var f=0;f<l.length;f++){var v=a[h][l[f]];n=n.replace(wrapVar(TPL_VAR_ALIAS[f],h),r?encodeHTML(v):v)}return n}function formatTplSimple(n,a,r){return each$f(a,function(o,l){n=n.replace("{"+l+"}",r?encodeHTML(o):o)}),n}function getTooltipMarker(n,a){var r=isString(n)?{color:n,extraCssText:a}:n||{},o=r.color,l=r.type;a=r.extraCssText;var u=r.renderMode||"html";if(!o)return"";if(u==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(o)+";"+(a||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(o)+";"+(a||"")+'"></span>';var c=r.markerId||"markerX";return{renderMode:u,content:"{"+c+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:o}:{width:10,height:10,borderRadius:5,backgroundColor:o}}}function formatTime(n,a,r){({}).NODE_ENV!=="production"&&deprecateReplaceLog("echarts.format.formatTime","echarts.time.format"),(n==="week"||n==="month"||n==="quarter"||n==="half-year"||n==="year")&&(n=`MM-dd
yyyy`);var o=parseDate(a),l=r?"getUTC":"get",u=o[l+"FullYear"](),c=o[l+"Month"]()+1,h=o[l+"Date"](),f=o[l+"Hours"](),v=o[l+"Minutes"](),d=o[l+"Seconds"](),p=o[l+"Milliseconds"]();return n=n.replace("MM",pad(c,2)).replace("M",c).replace("yyyy",u).replace("yy",pad(u%100+"",2)).replace("dd",pad(h,2)).replace("d",h).replace("hh",pad(f,2)).replace("h",f).replace("mm",pad(v,2)).replace("m",v).replace("ss",pad(d,2)).replace("s",d).replace("SSS",pad(p,3)),n}function capitalFirst(n){return n&&n.charAt(0).toUpperCase()+n.substr(1)}function convertToColorString(n,a){return a=a||"transparent",isString(n)?n:isObject$3(n)&&n.colorStops&&(n.colorStops[0]||{}).color||a}function windowOpen(n,a){if(a==="_blank"||a==="blank"){var r=window.open();r.opener=null,r.location.href=n}else window.open(n,a)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(n,a,r,o,l){var u=0,c=0;o==null&&(o=1/0),l==null&&(l=1/0);var h=0;a.eachChild(function(f,v){var d=f.getBoundingRect(),p=a.childAt(v+1),g=p&&p.getBoundingRect(),y,_;if(n==="horizontal"){var S=d.width+(g?-g.x+d.x:0);y=u+S,y>o||f.newline?(u=0,y=S,c+=h+r,h=d.height):h=Math.max(h,d.height)}else{var x=d.height+(g?-g.y+d.y:0);_=c+x,_>l||f.newline?(u+=h+r,c=0,_=x,h=d.width):h=Math.max(h,d.width)}f.newline||(f.x=u,f.y=c,f.markRedraw(),n==="horizontal"?u=y+r:c=_+r)})}var box=boxLayout;curry$1(boxLayout,"vertical"),curry$1(boxLayout,"horizontal");function getAvailableSize(n,a,r){var o=a.width,l=a.height,u=parsePercent(n.left,o),c=parsePercent(n.top,l),h=parsePercent(n.right,o),f=parsePercent(n.bottom,l);return(isNaN(u)||isNaN(parseFloat(n.left)))&&(u=0),(isNaN(h)||isNaN(parseFloat(n.right)))&&(h=o),(isNaN(c)||isNaN(parseFloat(n.top)))&&(c=0),(isNaN(f)||isNaN(parseFloat(n.bottom)))&&(f=l),r=normalizeCssArray(r||0),{width:Math.max(h-u-r[1]-r[3],0),height:Math.max(f-c-r[0]-r[2],0)}}function getLayoutRect(n,a,r){r=normalizeCssArray(r||0);var o=a.width,l=a.height,u=parsePercent(n.left,o),c=parsePercent(n.top,l),h=parsePercent(n.right,o),f=parsePercent(n.bottom,l),v=parsePercent(n.width,o),d=parsePercent(n.height,l),p=r[2]+r[0],g=r[1]+r[3],y=n.aspect;switch(isNaN(v)&&(v=o-h-g-u),isNaN(d)&&(d=l-f-p-c),y!=null&&(isNaN(v)&&isNaN(d)&&(y>o/l?v=o*.8:d=l*.8),isNaN(v)&&(v=y*d),isNaN(d)&&(d=v/y)),isNaN(u)&&(u=o-h-v-g),isNaN(c)&&(c=l-f-d-p),n.left||n.right){case"center":u=o/2-v/2-r[3];break;case"right":u=o-v-g;break}switch(n.top||n.bottom){case"middle":case"center":c=l/2-d/2-r[0];break;case"bottom":c=l-d-p;break}u=u||0,c=c||0,isNaN(v)&&(v=o-g-u-(h||0)),isNaN(d)&&(d=l-p-c-(f||0));var _=new BoundingRect$1(u+r[3],c+r[0],v,d);return _.margin=r,_}function positionElement(n,a,r,o,l,u){var c=!l||!l.hv||l.hv[0],h=!l||!l.hv||l.hv[1],f=l&&l.boundingMode||"all";if(u=u||n,u.x=n.x,u.y=n.y,!c&&!h)return!1;var v;if(f==="raw")v=n.type==="group"?new BoundingRect$1(0,0,+a.width||0,+a.height||0):n.getBoundingRect();else if(v=n.getBoundingRect(),n.needLocalTransform()){var d=n.getLocalTransform();v=v.clone(),v.applyTransform(d)}var p=getLayoutRect(defaults({width:v.width,height:v.height},a),r,o),g=c?p.x-v.x:0,y=h?p.y-v.y:0;return f==="raw"?(u.x=g,u.y=y):(u.x+=g,u.y+=y),u===n&&n.markRedraw(),!0}function sizeCalculable(n,a){return n[HV_NAMES[a][0]]!=null||n[HV_NAMES[a][1]]!=null&&n[HV_NAMES[a][2]]!=null}function fetchLayoutMode(n){var a=n.layoutMode||n.constructor.layoutMode;return isObject$3(a)?a:a?{type:a}:null}function mergeLayoutParam(n,a,r){var o=r&&r.ignoreSize;!isArray$1(o)&&(o=[o,o]);var l=c(HV_NAMES[0],0),u=c(HV_NAMES[1],1);v(HV_NAMES[0],n,l),v(HV_NAMES[1],n,u);function c(d,p){var g={},y=0,_={},S=0,x=2;if(each$e(d,function(b){_[b]=n[b]}),each$e(d,function(b){h(a,b)&&(g[b]=_[b]=a[b]),f(g,b)&&y++,f(_,b)&&S++}),o[p])return f(a,d[1])?_[d[2]]=null:f(a,d[2])&&(_[d[1]]=null),_;if(S===x||!y)return _;if(y>=x)return g;for(var T=0;T<d.length;T++){var A=d[T];if(!h(g,A)&&h(n,A)){g[A]=n[A];break}}return g}function h(d,p){return d.hasOwnProperty(p)}function f(d,p){return d[p]!=null&&d[p]!=="auto"}function v(d,p,g){each$e(d,function(y){p[y]=g[y]})}}function getLayoutParams(n){return copyLayoutParams({},n)}function copyLayoutParams(n,a){return a&&n&&each$e(LOCATION_PARAMS,function(r){a.hasOwnProperty(r)&&(n[r]=a[r])}),n}var inner$l=makeInner(),ComponentModel=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this,r,o,l)||this;return u.uid=getUID("ec_cpt_model"),u}return a.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l)},a.prototype.mergeDefaultAndTheme=function(r,o){var l=fetchLayoutMode(this),u=l?getLayoutParams(r):{},c=o.getTheme();merge(r,c.get(this.mainType)),merge(r,this.getDefaultOption()),l&&mergeLayoutParam(r,u,l)},a.prototype.mergeOption=function(r,o){merge(this.option,r,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,r,l)},a.prototype.optionUpdated=function(r,o){},a.prototype.getDefaultOption=function(){var r=this.constructor;if(!isExtendedClass(r))return r.defaultOption;var o=inner$l(this);if(!o.defaultOption){for(var l=[],u=r;u;){var c=u.prototype.defaultOption;c&&l.push(c),u=u.superClass}for(var h={},f=l.length-1;f>=0;f--)h=merge(h,l[f],!0);o.defaultOption=h}return o.defaultOption},a.prototype.getReferringComponents=function(r,o){var l=r+"Index",u=r+"Id";return queryReferringComponents(this.ecModel,r,{index:this.get(l,!0),id:this.get(u,!0)},o)},a.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},a.prototype.getZLevelKey=function(){return""},a.prototype.setZLevel=function(r){this.option.zlevel=r},a.protoInitialize=function(){var r=a.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),a}(Model$1);mountExtend(ComponentModel,Model$1),enableClassManagement(ComponentModel),enableSubTypeDefaulter(ComponentModel),enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(n){var a=[];return each$f(ComponentModel.getClassesByMainType(n),function(r){a=a.concat(r.dependencies||r.prototype.dependencies||[])}),a=map$1(a,function(r){return parseClassType(r).main}),n!=="dataset"&&indexOf(a,"dataset")<=0&&a.unshift("dataset"),a}const ComponentModel$1=ComponentModel;var platform="";typeof navigator!="undefined"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(n){innerGlobalModel(n).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(n,a,r){var o={},l=querySeriesUpstreamDatasetModel(a);if(!l||!n)return o;var u=[],c=[],h=a.ecModel,f=innerGlobalModel(h).datasetMap,v=l.uid+"_"+r.seriesLayoutBy,d,p;n=n.slice(),each$f(n,function(S,x){var T=isObject$3(S)?S:n[x]={name:S};T.type==="ordinal"&&d==null&&(d=x,p=_(T)),o[T.name]=[]});var g=f.get(v)||f.set(v,{categoryWayDim:p,valueWayDim:0});each$f(n,function(S,x){var T=S.name,A=_(S);if(d==null){var b=g.valueWayDim;y(o[T],b,A),y(c,b,A),g.valueWayDim+=A}else if(d===x)y(o[T],0,A),y(u,0,A);else{var b=g.categoryWayDim;y(o[T],b,A),y(c,b,A),g.categoryWayDim+=A}});function y(S,x,T){for(var A=0;A<T;A++)S.push(x+A)}function _(S){var x=S.dimsDef;return x?x.length:1}return u.length&&(o.itemName=u),c.length&&(o.seriesName=c),o}function makeSeriesEncodeForNameBased(n,a,r){var o={},l=querySeriesUpstreamDatasetModel(n);if(!l)return o;var u=a.sourceFormat,c=a.dimensionsDefine,h;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(d,p){(isObject$3(d)?d.name:d)==="name"&&(h=p)});var f=function(){for(var d={},p={},g=[],y=0,_=Math.min(5,r);y<_;y++){var S=doGuessOrdinal(a.data,u,a.seriesLayoutBy,c,a.startIndex,y);g.push(S);var x=S===BE_ORDINAL.Not;if(x&&d.v==null&&y!==h&&(d.v=y),(d.n==null||d.n===d.v||!x&&g[d.n]===BE_ORDINAL.Not)&&(d.n=y),T(d)&&g[d.n]!==BE_ORDINAL.Not)return d;x||(S===BE_ORDINAL.Might&&p.v==null&&y!==h&&(p.v=y),(p.n==null||p.n===p.v)&&(p.n=y))}function T(A){return A.v!=null&&A.n!=null}return T(d)?d:T(p)?p:null}();if(f){o.value=[f.v];var v=h!=null?h:f.n;o.itemName=[v],o.seriesName=[v]}return o}function querySeriesUpstreamDatasetModel(n){var a=n.get("data",!0);if(!a)return queryReferringComponents(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:queryReferringComponents(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(n,a){return doGuessOrdinal(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,a)}function doGuessOrdinal(n,a,r,o,l,u){var c,h=5;if(isTypedArray(n))return BE_ORDINAL.Not;var f,v;if(o){var d=o[u];isObject$3(d)?(f=d.name,v=d.type):isString(d)&&(f=d)}if(v!=null)return v==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(a===SOURCE_FORMAT_ARRAY_ROWS){var p=n;if(r===SERIES_LAYOUT_BY_ROW){for(var g=p[u],y=0;y<(g||[]).length&&y<h;y++)if((c=C(g[l+y]))!=null)return c}else for(var y=0;y<p.length&&y<h;y++){var _=p[l+y];if(_&&(c=C(_[u]))!=null)return c}}else if(a===SOURCE_FORMAT_OBJECT_ROWS){var S=n;if(!f)return BE_ORDINAL.Not;for(var y=0;y<S.length&&y<h;y++){var x=S[y];if(x&&(c=C(x[f]))!=null)return c}}else if(a===SOURCE_FORMAT_KEYED_COLUMNS){var T=n;if(!f)return BE_ORDINAL.Not;var g=T[f];if(!g||isTypedArray(g))return BE_ORDINAL.Not;for(var y=0;y<g.length&&y<h;y++)if((c=C(g[y]))!=null)return c}else if(a===SOURCE_FORMAT_ORIGINAL)for(var A=n,y=0;y<A.length&&y<h;y++){var x=A[y],b=getDataItemValue(x);if(!isArray$1(b))return BE_ORDINAL.Not;if((c=C(b[u]))!=null)return c}function C(E){var w=isString(E);if(E!=null&&isFinite(E)&&E!=="")return w?BE_ORDINAL.Might:BE_ORDINAL.Not;if(w&&E!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(n,a){assert(internalOptionCreatorMap.get(n)==null&&a),internalOptionCreatorMap.set(n,a)}function concatInternalOptions(n,a,r){var o=internalOptionCreatorMap.get(a);if(!o)return r;var l=o(n);if(!l)return r;if({}.NODE_ENV!=="production")for(var u=0;u<l.length;u++)assert(isComponentIdInternal(l[u]));return r.concat(l)}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function n(){}return n.prototype.getColorFromPalette=function(a,r,o){var l=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,u,a,r,o)},n.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},n}();function getDecalFromPalette(n,a,r,o){var l=normalizeToArray(n.get(["aria","decal","decals"]));return getFromPalette(n,innerDecal,l,null,a,r,o)}function getNearestPalette(n,a){for(var r=n.length,o=0;o<r;o++)if(n[o].length>a)return n[o];return n[r-1]}function getFromPalette(n,a,r,o,l,u,c){u=u||n;var h=a(u),f=h.paletteIdx||0,v=h.paletteNameMap=h.paletteNameMap||{};if(v.hasOwnProperty(l))return v[l];var d=c==null||!o?r:getNearestPalette(o,c);if(d=d||r,!(!d||!d.length)){var p=d[f];return l&&(v[l]=p),h.paletteIdx=(f+1)%d.length,p}}function clearPalette(n,a){a(n).paletteIdx=0,a(n).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,BUITIN_COMPONENTS_MAP={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},BUILTIN_CHARTS_MAP={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},componetsMissingLogPrinted={};function checkMissingComponents(n){each$f(n,function(a,r){if(!ComponentModel$1.hasClass(r)){var o=BUITIN_COMPONENTS_MAP[r];o&&!componetsMissingLogPrinted[o]&&(error("Component "+r+` is used but not imported.
import { `+o+` } from 'echarts/components';
echarts.use([`+o+"]);"),componetsMissingLogPrinted[o]=!0)}})}var GlobalModel=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.init=function(r,o,l,u,c,h){u=u||{},this.option=null,this._theme=new Model$1(u),this._locale=new Model$1(c),this._optionManager=h},a.prototype.setOption=function(r,o,l){({}).NODE_ENV!=="production"&&(assert(r!=null,"option is null/undefined"),assert(r[OPTION_INNER_KEY]!==OPTION_INNER_VALUE,"please use chart.getOption()"));var u=normalizeSetOptionInput(o);this._optionManager.setOption(r,l,u),this._resetOption(null,u)},a.prototype.resetOption=function(r,o){return this._resetOption(r,normalizeSetOptionInput(o))},a.prototype._resetOption=function(r,o){var l=!1,u=this._optionManager;if(!r||r==="recreate"){var c=u.mountOption(r==="recreate");({}).NODE_ENV!=="production"&&checkMissingComponents(c),!this.option||r==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,o)),l=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var h=u.getTimelineOption(this);h&&(l=!0,this._mergeOption(h,o))}if(!r||r==="recreate"||r==="media"){var f=u.getMediaOption(this);f.length&&each$f(f,function(v){l=!0,this._mergeOption(v,o)},this)}return l},a.prototype.mergeOption=function(r){this._mergeOption(r,null)},a.prototype._mergeOption=function(r,o){var l=this.option,u=this._componentsMap,c=this._componentsCount,h=[],f=createHashMap(),v=o&&o.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(r,function(p,g){p!=null&&(ComponentModel$1.hasClass(g)?g&&(h.push(g),f.set(g,!0)):l[g]=l[g]==null?clone$4(p):merge(l[g],p,!0))}),v&&v.each(function(p,g){ComponentModel$1.hasClass(g)&&!f.get(g)&&(h.push(g),f.set(g,!0))}),ComponentModel$1.topologicalTravel(h,ComponentModel$1.getAllClassMainTypes(),d,this);function d(p){var g=concatInternalOptions(this,p,normalizeToArray(r[p])),y=u.get(p),_=y?v&&v.get(p)?"replaceMerge":"normalMerge":"replaceAll",S=mappingToExists(y,g,_);setComponentTypeToKeyInfo(S,p,ComponentModel$1),l[p]=null,u.set(p,null),c.set(p,0);var x=[],T=[],A=0,b,C;each$f(S,function(E,w){var D=E.existing,M=E.newOption;if(!M)D&&(D.mergeOption({},this),D.optionUpdated({},!1));else{var P=p==="series",L=ComponentModel$1.getClass(p,E.keyInfo.subType,!P);if(!L){if({}.NODE_ENV!=="production"){var I=E.keyInfo.subType,R=BUILTIN_CHARTS_MAP[I];componetsMissingLogPrinted[I]||(componetsMissingLogPrinted[I]=!0,error(R?"Series "+I+` is used but not imported.
import { `+R+` } from 'echarts/charts';
echarts.use([`+R+"]);":"Unknown series "+I))}return}if(p==="tooltip"){if(b){({}).NODE_ENV!=="production"&&(C||(warn("Currently only one tooltip component is allowed."),C=!0));return}b=!0}if(D&&D.constructor===L)D.name=E.keyInfo.name,D.mergeOption(M,this),D.optionUpdated(M,!1);else{var O=extend({componentIndex:w},E.keyInfo);D=new L(M,this,this,O),extend(D,O),E.brandNew&&(D.__requireNewView=!0),D.init(M,this,this),D.optionUpdated(null,!0)}}D?(x.push(D.option),T.push(D),A++):(x.push(void 0),T.push(void 0))},this),l[p]=x,u.set(p,T),c.set(p,A),p==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},a.prototype.getOption=function(){var r=clone$4(this.option);return each$f(r,function(o,l){if(ComponentModel$1.hasClass(l)){for(var u=normalizeToArray(o),c=u.length,h=!1,f=c-1;f>=0;f--)u[f]&&!isComponentIdInternal(u[f])?h=!0:(u[f]=null,!h&&c--);u.length=c,r[l]=u}}),delete r[OPTION_INNER_KEY],r},a.prototype.getTheme=function(){return this._theme},a.prototype.getLocaleModel=function(){return this._locale},a.prototype.setUpdatePayload=function(r){this._payload=r},a.prototype.getUpdatePayload=function(){return this._payload},a.prototype.getComponent=function(r,o){var l=this._componentsMap.get(r);if(l){var u=l[o||0];if(u)return u;if(o==null){for(var c=0;c<l.length;c++)if(l[c])return l[c]}}},a.prototype.queryComponents=function(r){var o=r.mainType;if(!o)return[];var l=r.index,u=r.id,c=r.name,h=this._componentsMap.get(o);if(!h||!h.length)return[];var f;return l!=null?(f=[],each$f(normalizeToArray(l),function(v){h[v]&&f.push(h[v])})):u!=null?f=queryByIdOrName("id",u,h):c!=null?f=queryByIdOrName("name",c,h):f=filter(h,function(v){return!!v}),filterBySubType(f,r)},a.prototype.findComponents=function(r){var o=r.query,l=r.mainType,u=h(o),c=u?this.queryComponents(u):filter(this._componentsMap.get(l),function(v){return!!v});return f(filterBySubType(c,r));function h(v){var d=l+"Index",p=l+"Id",g=l+"Name";return v&&(v[d]!=null||v[p]!=null||v[g]!=null)?{mainType:l,index:v[d],id:v[p],name:v[g]}:null}function f(v){return r.filter?filter(v,r.filter):v}},a.prototype.eachComponent=function(r,o,l){var u=this._componentsMap;if(isFunction(r)){var c=o,h=r;u.each(function(p,g){for(var y=0;p&&y<p.length;y++){var _=p[y];_&&h.call(c,g,_,_.componentIndex)}})}else for(var f=isString(r)?u.get(r):isObject$3(r)?this.findComponents(r):null,v=0;f&&v<f.length;v++){var d=f[v];d&&o.call(l,d,d.componentIndex)}},a.prototype.getSeriesByName=function(r){var o=convertOptionIdName(r,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&o!=null&&l.name===o})},a.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},a.prototype.getSeriesByType=function(r){return filter(this._componentsMap.get("series"),function(o){return!!o&&o.subType===r})},a.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(r){return!!r})},a.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},a.prototype.eachSeries=function(r,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];r.call(o,u,l)},this)},a.prototype.eachRawSeries=function(r,o){each$f(this._componentsMap.get("series"),function(l){l&&r.call(o,l,l.componentIndex)})},a.prototype.eachSeriesByType=function(r,o,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];c.subType===r&&o.call(l,c,u)},this)},a.prototype.eachRawSeriesByType=function(r,o,l){return each$f(this.getSeriesByType(r),o,l)},a.prototype.isSeriesFiltered=function(r){return assertSeriesInitialized(this),this._seriesIndicesMap.get(r.componentIndex)==null},a.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},a.prototype.filterSeries=function(r,o){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];r.call(o,c,u)&&l.push(u)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},a.prototype.restoreData=function(r){reCreateSeriesIndices(this);var o=this._componentsMap,l=[];o.each(function(u,c){ComponentModel$1.hasClass(c)&&l.push(c)}),ComponentModel$1.topologicalTravel(l,ComponentModel$1.getAllClassMainTypes(),function(u){each$f(o.get(u),function(c){c&&(u!=="series"||!isNotTargetSeries(c,r))&&c.restoreData()})})},a.internalField=function(){reCreateSeriesIndices=function(r){var o=r._seriesIndices=[];each$f(r._componentsMap.get("series"),function(l){l&&o.push(l.componentIndex)}),r._seriesIndicesMap=createHashMap(o)},assertSeriesInitialized=function(r){if({}.NODE_ENV!=="production"&&!r._seriesIndices)throw new Error("Option should contains series.")},initBase=function(r,o){r.option={},r.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,r._componentsMap=createHashMap({series:[]}),r._componentsCount=createHashMap();var l=o.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(o,r._theme.option),merge(o,globalDefault,!1),r._mergeOption(o,null)}}(),a}(Model$1);function isNotTargetSeries(n,a){if(a){var r=a.seriesIndex,o=a.seriesId,l=a.seriesName;return r!=null&&n.componentIndex!==r||o!=null&&n.id!==o||l!=null&&n.name!==l}}function mergeTheme(n,a){var r=n.color&&!n.colorLayer;each$f(a,function(o,l){l==="colorLayer"&&r||ComponentModel$1.hasClass(l)||(typeof o=="object"?n[l]=n[l]?merge(n[l],o,!1):clone$4(o):n[l]==null&&(n[l]=o))})}function queryByIdOrName(n,a,r){if(isArray$1(a)){var o=createHashMap();return each$f(a,function(u){if(u!=null){var c=convertOptionIdName(u,null);c!=null&&o.set(u,!0)}}),filter(r,function(u){return u&&o.get(u[n])})}else{var l=convertOptionIdName(a,null);return filter(r,function(u){return u&&l!=null&&u[n]===l})}}function filterBySubType(n,a){return a.hasOwnProperty("subType")?filter(n,function(r){return r&&r.subType===a.subType}):n}function normalizeSetOptionInput(n){var a=createHashMap();return n&&each$f(normalizeToArray(n.replaceMerge),function(r){({}).NODE_ENV!=="production"&&assert(ComponentModel$1.hasClass(r),'"'+r+'" is not valid component main type in "replaceMerge"'),a.set(r,!0)}),{replaceMergeMainTypeMap:a}}mixin(GlobalModel,PaletteMixin);const GlobalModel$1=GlobalModel;var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function n(a){each$f(availableMethods,function(r){this[r]=bind$1(a[r],a)},this)}return n}();const ExtensionAPI$1=ExtensionAPI;var coordinateSystemCreators={},CoordinateSystemManager=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(a,r){var o=[];each$f(coordinateSystemCreators,function(l,u){var c=l.create(a,r);o=o.concat(c||[])}),this._coordinateSystems=o},n.prototype.update=function(a,r){each$f(this._coordinateSystems,function(o){o.update&&o.update(a,r)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(a,r){coordinateSystemCreators[a]=r},n.get=function(a){return coordinateSystemCreators[a]},n}();const CoordinateSystem=CoordinateSystemManager;var QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function n(a){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=a}return n.prototype.setOption=function(a,r,o){a&&(each$f(normalizeToArray(a.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(a.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),a=clone$4(a);var l=this._optionBackup,u=parseRawOption(a,r,!l);this._newBaseOption=u.baseOption,l?(u.timelineOptions.length&&(l.timelineOptions=u.timelineOptions),u.mediaList.length&&(l.mediaList=u.mediaList),u.mediaDefault&&(l.mediaDefault=u.mediaDefault)):this._optionBackup=u},n.prototype.mountOption=function(a){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],clone$4(a?r.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(a){var r,o=this._timelineOptions;if(o.length){var l=a.getComponent("timeline");l&&(r=clone$4(o[l.getCurrentIndex()]))}return r},n.prototype.getMediaOption=function(a){var r=this._api.getWidth(),o=this._api.getHeight(),l=this._mediaList,u=this._mediaDefault,c=[],h=[];if(!l.length&&!u)return h;for(var f=0,v=l.length;f<v;f++)applyMediaQuery(l[f].query,r,o)&&c.push(f);return!c.length&&u&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(h=map$1(c,function(d){return clone$4(d===-1?u.option:l[d].option)})),this._currentMediaIndices=c,h},n}();function parseRawOption(n,a,r){var o=[],l,u,c=n.baseOption,h=n.timeline,f=n.options,v=n.media,d=!!n.media,p=!!(f||h||c&&c.timeline);c?(u=c,u.timeline||(u.timeline=h)):((p||d)&&(n.options=n.media=null),u=n),d&&(isArray$1(v)?each$f(v,function(y){({}).NODE_ENV!=="production"&&y&&!y.option&&isObject$3(y.query)&&isObject$3(y.query.option)&&error("Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }"),y&&y.option&&(y.query?o.push(y):l||(l=y))}):{}.NODE_ENV!=="production"&&error("Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }")),g(u),each$f(f,function(y){return g(y)}),each$f(o,function(y){return g(y.option)});function g(y){each$f(a,function(_){_(y,r)})}return{baseOption:u,timelineOptions:f||[],mediaDefault:l,mediaList:o}}function applyMediaQuery(n,a,r){var o={width:a,height:r,aspectratio:a/r},l=!0;return each$f(n,function(u,c){var h=c.match(QUERY_REG);if(!(!h||!h[1]||!h[2])){var f=h[1],v=h[2].toLowerCase();compare(o[v],u,f)||(l=!1)}}),l}function compare(n,a,r){return r==="min"?n>=a:r==="max"?n<=a:n===a}function indicesEquals(n,a){return n.join(",")===a.join(",")}const OptionManager$1=OptionManager;var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(n){var a=n&&n.itemStyle;if(!!a)for(var r=0,o=POSSIBLE_STYLES.length;r<o;r++){var l=POSSIBLE_STYLES[r],u=a.normal,c=a.emphasis;u&&u[l]&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("itemStyle.normal."+l,l),n[l]=n[l]||{},n[l].normal?merge(n[l].normal,u[l]):n[l].normal=u[l],u[l]=null),c&&c[l]&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("itemStyle.emphasis."+l,"emphasis."+l),n[l]=n[l]||{},n[l].emphasis?merge(n[l].emphasis,c[l]):n[l].emphasis=c[l],c[l]=null)}}function convertNormalEmphasis(n,a,r){if(n&&n[a]&&(n[a].normal||n[a].emphasis)){var o=n[a].normal,l=n[a].emphasis;o&&({}.NODE_ENV!=="production"&&deprecateLog("'normal' hierarchy in "+a+" has been removed since 4.0. All style properties are configured in "+a+" directly now."),r?(n[a].normal=n[a].emphasis=null,defaults(n[a],o)):n[a]=o),l&&({}.NODE_ENV!=="production"&&deprecateLog(a+".emphasis has been changed to emphasis."+a+" since 4.0"),n.emphasis=n.emphasis||{},n.emphasis[a]=l,l.focus&&(n.emphasis.focus=l.focus),l.blurScope&&(n.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(n){convertNormalEmphasis(n,"itemStyle"),convertNormalEmphasis(n,"lineStyle"),convertNormalEmphasis(n,"areaStyle"),convertNormalEmphasis(n,"label"),convertNormalEmphasis(n,"labelLine"),convertNormalEmphasis(n,"upperLabel"),convertNormalEmphasis(n,"edgeLabel")}function compatTextStyle(n,a){var r=isObject$2(n)&&n[a],o=isObject$2(r)&&r.textStyle;if(o){({}).NODE_ENV!=="production"&&deprecateLog("textStyle hierarchy in "+a+" has been removed since 4.0. All textStyle properties are configured in "+a+" directly now.");for(var l=0,u=TEXT_STYLE_OPTIONS.length;l<u;l++){var c=TEXT_STYLE_OPTIONS[l];o.hasOwnProperty(c)&&(r[c]=o[c])}}}function compatEC3CommonStyles(n){n&&(removeEC3NormalStatus(n),compatTextStyle(n,"label"),n.emphasis&&compatTextStyle(n.emphasis,"label"))}function processSeries(n){if(!!isObject$2(n)){compatEC2ItemStyle(n),removeEC3NormalStatus(n),compatTextStyle(n,"label"),compatTextStyle(n,"upperLabel"),compatTextStyle(n,"edgeLabel"),n.emphasis&&(compatTextStyle(n.emphasis,"label"),compatTextStyle(n.emphasis,"upperLabel"),compatTextStyle(n.emphasis,"edgeLabel"));var a=n.markPoint;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var r=n.markLine;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var o=n.markArea;o&&compatEC3CommonStyles(o);var l=n.data;if(n.type==="graph"){l=l||n.nodes;var u=n.links||n.edges;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);each$f(n.categories,function(v){removeEC3NormalStatus(v)})}if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatEC3CommonStyles(l[c]);if(a=n.markPoint,a&&a.data)for(var h=a.data,c=0;c<h.length;c++)compatEC3CommonStyles(h[c]);if(r=n.markLine,r&&r.data)for(var f=r.data,c=0;c<f.length;c++)isArray$1(f[c])?(compatEC3CommonStyles(f[c][0]),compatEC3CommonStyles(f[c][1])):compatEC3CommonStyles(f[c]);n.type==="gauge"?(compatTextStyle(n,"axisLabel"),compatTextStyle(n,"title"),compatTextStyle(n,"detail")):n.type==="treemap"?(convertNormalEmphasis(n.breadcrumb,"itemStyle"),each$f(n.levels,function(v){removeEC3NormalStatus(v)})):n.type==="tree"&&removeEC3NormalStatus(n.leaves)}}function toArr(n){return isArray$1(n)?n:n?[n]:[]}function toObj(n){return(isArray$1(n)?n[0]:n)||{}}function globalCompatStyle(n,a){each$d(toArr(n.series),function(o){isObject$2(o)&&processSeries(o)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];a&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(r,function(o){each$d(toArr(n[o]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(n.parallel),function(o){var l=o&&o.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(n.calendar),function(o){convertNormalEmphasis(o,"itemStyle"),compatTextStyle(o,"dayLabel"),compatTextStyle(o,"monthLabel"),compatTextStyle(o,"yearLabel")}),each$d(toArr(n.radar),function(o){compatTextStyle(o,"name"),o.name&&o.axisName==null&&(o.axisName=o.name,delete o.name,{}.NODE_ENV!=="production"&&deprecateLog("name property in radar component has been changed to axisName")),o.nameGap!=null&&o.axisNameGap==null&&(o.axisNameGap=o.nameGap,delete o.nameGap,{}.NODE_ENV!=="production"&&deprecateLog("nameGap property in radar component has been changed to axisNameGap")),{}.NODE_ENV!=="production"&&each$d(o.indicator,function(l){l.text&&deprecateReplaceLog("text","name","radar.indicator")})}),each$d(toArr(n.geo),function(o){isObject$2(o)&&(compatEC3CommonStyles(o),each$d(toArr(o.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(n.timeline),function(o){compatEC3CommonStyles(o),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"controlStyle",!0);var l=o.data;isArray$1(l)&&each$f(l,function(u){isObject$3(u)&&(convertNormalEmphasis(u,"label"),convertNormalEmphasis(u,"itemStyle"))})}),each$d(toArr(n.toolbox),function(o){convertNormalEmphasis(o,"iconStyle"),each$d(o.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(n.axisPointer),"label"),compatTextStyle(toObj(n.tooltip).axisPointer,"label")}function get(n,a){for(var r=a.split(","),o=n,l=0;l<r.length&&(o=o&&o[r[l]],o!=null);l++);return o}function set(n,a,r,o){for(var l=a.split(","),u=n,c,h=0;h<l.length-1;h++)c=l[h],u[c]==null&&(u[c]={}),u=u[c];(o||u[l[h]]==null)&&(u[l[h]]=r)}function compatLayoutProperties(n){n&&each$f(LAYOUT_PROPERTIES,function(a){a[0]in n&&!(a[1]in n)&&(n[a[1]]=n[a[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(n){var a=n&&n.itemStyle;if(a)for(var r=0;r<BAR_ITEM_STYLE_MAP.length;r++){var o=BAR_ITEM_STYLE_MAP[r][1],l=BAR_ITEM_STYLE_MAP[r][0];a[o]!=null&&(a[l]=a[o],{}.NODE_ENV!=="production"&&deprecateReplaceLog(o,l))}}function compatPieLabel(n){!n||n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("label.margin","label.edgeDistance","pie"),n.edgeDistance=n.margin)}function compatSunburstState(n){!n||n.downplay&&!n.blur&&(n.blur=n.downplay,{}.NODE_ENV!=="production"&&deprecateReplaceLog("downplay","blur","sunburst"))}function compatGraphFocus(n){!n||n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("focusNodeAdjacency","emphasis: { focus: 'adjacency'}","graph/sankey"),n.emphasis.focus="adjacency"))}function traverseTree(n,a){if(n)for(var r=0;r<n.length;r++)a(n[r]),n[r]&&traverseTree(n[r].children,a)}function globalBackwardCompat(n,a){globalCompatStyle(n,a),n.series=normalizeToArray(n.series),each$f(n.series,function(r){if(!!isObject$3(r)){var o=r.type;if(o==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow,{}.NODE_ENV!=="production"&&deprecateReplaceLog("clipOverflow","clip","line"));else if(o==="pie"||o==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise,{}.NODE_ENV!=="production"&&deprecateReplaceLog("clockWise","clockwise")),compatPieLabel(r.label);var l=r.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatPieLabel(l[u]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("hoverOffset","emphasis.scaleSize"),r.emphasis.scaleSize=r.hoverOffset))}else if(o==="gauge"){var c=get(r,"pointer.color");c!=null&&set(r,"itemStyle.color",c)}else if(o==="bar"){compatBarItemStyle(r),compatBarItemStyle(r.backgroundStyle),compatBarItemStyle(r.emphasis);var l=r.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)typeof l[u]=="object"&&(compatBarItemStyle(l[u]),compatBarItemStyle(l[u]&&l[u].emphasis))}else if(o==="sunburst"){var h=r.highlightPolicy;h&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=h,{}.NODE_ENV!=="production"&&deprecateReplaceLog("highlightPolicy","emphasis.focus","sunburst"))),compatSunburstState(r),traverseTree(r.data,compatSunburstState)}else o==="graph"||o==="sankey"?compatGraphFocus(r):o==="map"&&(r.mapType&&!r.map&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("mapType","map","map"),r.map=r.mapType),r.mapLocation&&({}.NODE_ENV!=="production"&&deprecateLog("`mapLocation` is not used anymore."),defaults(r,r.mapLocation)));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&({}.NODE_ENV!=="production"&&deprecateReplaceLog("hoverAnimation","emphasis.scale"),r.emphasis.scale=r.hoverAnimation)),compatLayoutProperties(r)}}),n.dataRange&&(n.visualMap=n.dataRange),each$f(COMPATITABLE_COMPONENTS,function(r){var o=n[r];o&&(isArray$1(o)||(o=[o]),each$f(o,function(l){compatLayoutProperties(l)}))})}function dataStack$1(n){var a=createHashMap();n.eachSeries(function(r){var o=r.get("stack");if(o){var l=a.get(o)||a.set(o,[]),u=r.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:r};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;l.length&&u.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(c)}}),a.each(calculateStack)}function calculateStack(n){each$f(n,function(a,r){var o=[],l=[NaN,NaN],u=[a.stackResultDimension,a.stackedOverDimension],c=a.data,h=a.isStackedByIndex,f=a.seriesModel.get("stackStrategy")||"samesign";c.modify(u,function(v,d,p){var g=c.get(a.stackedDimension,p);if(isNaN(g))return l;var y,_;h?_=c.getRawIndex(p):y=c.get(a.stackedByDimension,p);for(var S=NaN,x=r-1;x>=0;x--){var T=n[x];if(h||(_=T.data.rawIndexOf(T.stackedByDimension,y)),_>=0){var A=T.data.getByRawIndex(T.stackResultDimension,_);if(f==="all"||f==="positive"&&A>0||f==="negative"&&A<0||f==="samesign"&&g>=0&&A>0||f==="samesign"&&g<=0&&A<0){g=addSafe(g,A),S=A;break}}}return o[0]=g,o[1]=S,o})})}var SourceImpl=function(){function n(a){this.data=a.data||(a.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=a.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=a.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=a.startIndex||0,this.dimensionsDetectedCount=a.dimensionsDetectedCount,this.metaRawOption=a.metaRawOption;var r=this.dimensionsDefine=a.dimensionsDefine;if(r)for(var o=0;o<r.length;o++){var l=r[o];l.type==null&&guessOrdinal(this,o)===BE_ORDINAL.Must&&(l.type="ordinal")}}return n}();function isSourceInstance(n){return n instanceof SourceImpl}function createSource(n,a,r){r=r||detectSourceFormat(n);var o=a.seriesLayoutBy,l=determineSourceDimensions(n,r,o,a.sourceHeader,a.dimensions),u=new SourceImpl({data:n,sourceFormat:r,seriesLayoutBy:o,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(a)});return u}function createSourceFromSeriesDataOption(n){return new SourceImpl({data:n,sourceFormat:isTypedArray(n)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(n){return new SourceImpl({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:clone$4(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function detectSourceFormat(n){var a=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(n))a=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(n)){n.length===0&&(a=SOURCE_FORMAT_ARRAY_ROWS);for(var r=0,o=n.length;r<o;r++){var l=n[r];if(l!=null){if(isArray$1(l)){a=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){a=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(n)){for(var u in n)if(hasOwn(n,u)&&isArrayLike(n[u])){a=SOURCE_FORMAT_KEYED_COLUMNS;break}}return a}function determineSourceDimensions(n,a,r,o,l){var u,c;if(!n)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:c,dimensionsDetectedCount:u};if(a===SOURCE_FORMAT_ARRAY_ROWS){var h=n;o==="auto"||o==null?arrayRowsTravelFirst(function(v){v!=null&&v!=="-"&&(isString(v)?c==null&&(c=1):c=0)},r,h,10):c=isNumber(o)?o:o?1:0,!l&&c===1&&(l=[],arrayRowsTravelFirst(function(v,d){l[d]=v!=null?v+"":""},r,h,1/0)),u=l?l.length:r===SERIES_LAYOUT_BY_ROW?h.length:h[0]?h[0].length:null}else if(a===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(n));else if(a===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(n,function(v,d){l.push(d)}));else if(a===SOURCE_FORMAT_ORIGINAL){var f=getDataItemValue(n[0]);u=isArray$1(f)&&f.length||1}else a===SOURCE_FORMAT_TYPED_ARRAY&&{}.NODE_ENV!=="production"&&assert(!!l,"dimensions must be given if data is TypedArray.");return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(n){for(var a=0,r;a<n.length&&!(r=n[a++]););if(r)return keys(r)}function normalizeDimensionsOption(n){if(!!n){var a=createHashMap();return map$1(n,function(r,o){r=isObject$3(r)?r:{name:r};var l={name:r.name,displayName:r.displayName,type:r.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var u=a.get(l.name);return u?l.name+="-"+u.count++:a.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(n,a,r,o){if(a===SERIES_LAYOUT_BY_ROW)for(var l=0;l<r.length&&l<o;l++)n(r[l]?r[l][0]:null,l);else for(var u=r[0]||[],l=0;l<u.length&&l<o;l++)n(u[l],l)}function shouldRetrieveDataByName(n){var a=n.sourceFormat;return a===SOURCE_FORMAT_OBJECT_ROWS||a===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function n(a,r){var o=isSourceInstance(a)?a:createSourceFromSeriesDataOption(a);this._source=o;var l=this._data=o.data;if(o.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY){if({}.NODE_ENV!=="production"&&r==null)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=r,this._data=l}mountMethods(this,l,o)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(a,r){},n.prototype.appendData=function(a){},n.prototype.clean=function(){},n.protoInitialize=function(){var a=n.prototype;a.pure=!1,a.persistent=!0}(),n.internalField=function(){var a;mountMethods=function(c,h,f){var v=f.sourceFormat,d=f.seriesLayoutBy,p=f.startIndex,g=f.dimensionsDefine,y=providerMethods[getMethodMapKey(v,d)];if({}.NODE_ENV!=="production"&&assert(y,"Invalide sourceFormat: "+v),extend(c,y),v===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=r,c.count=l,c.fillStorage=o;else{var _=getRawSourceItemGetter(v,d);c.getItem=bind$1(_,null,h,p,g);var S=getRawSourceDataCounter(v,d);c.count=bind$1(S,null,h,p,g)}};var r=function(c,h){c=c-this._offset,h=h||[];for(var f=this._data,v=this._dimSize,d=v*c,p=0;p<v;p++)h[p]=f[d+p];return h},o=function(c,h,f,v){for(var d=this._data,p=this._dimSize,g=0;g<p;g++){for(var y=v[g],_=y[0]==null?1/0:y[0],S=y[1]==null?-1/0:y[1],x=h-c,T=f[g],A=0;A<x;A++){var b=d[A*p+g];T[c+A]=b,b<_&&(_=b),b>S&&(S=b)}y[0]=_,y[1]=S}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(a={},a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},a[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},a[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var h=this._data;each$f(c,function(f,v){for(var d=h[v]||(h[v]=[]),p=0;p<(f||[]).length;p++)d.push(f[p])})}},a[SOURCE_FORMAT_ORIGINAL]={appendData:u},a[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){({}).NODE_ENV!=="production"&&assert(isTypedArray(c),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},a);function u(c){for(var h=0;h<c.length;h++)this._data.push(c[h])}}(),n}(),getItemSimply=function(n,a,r,o){return n[o]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(n,a,r,o){return n[o+a]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(n,a,r,o,l){o+=a;for(var u=l||[],c=n,h=0;h<c.length;h++){var f=c[h];u[h]=f?f[o]:null}return u},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(n,a,r,o,l){for(var u=l||[],c=0;c<r.length;c++){var h=r[c].name;if({}.NODE_ENV!=="production"&&h==null)throw new Error;var f=n[h];u[c]=f?f[o]:null}return u},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(n,a){var r=rawSourceItemGetterMap[getMethodMapKey(n,a)];return{}.NODE_ENV!=="production"&&assert(r,'Do not support get item on "'+n+'", "'+a+'".'),r}var countSimply=function(n,a,r){return n.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(n,a,r){return Math.max(0,n.length-a)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(n,a,r){var o=n[0];return o?Math.max(0,o.length-a):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(n,a,r){var o=r[0].name;if({}.NODE_ENV!=="production"&&o==null)throw new Error;var l=n[o];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(n,a){var r=rawSourceDataCounterMap[getMethodMapKey(n,a)];return{}.NODE_ENV!=="production"&&assert(r,'Do not support count on "'+n+'", "'+a+'".'),r}var getRawValueSimply=function(n,a,r){return n[a]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(n,a,r){return n[r]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(n,a,r){var o=getDataItemValue(n);return o instanceof Array?o[a]:o},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(n){var a=rawSourceValueGetterMap[n];return{}.NODE_ENV!=="production"&&assert(a,'Do not support get value on "'+n+'".'),a}function getMethodMapKey(n,a){return n===SOURCE_FORMAT_ARRAY_ROWS?n+"_"+a:n}function retrieveRawValue(n,a,r){if(!!n){var o=n.getRawDataItem(a);if(o!=null){var l=n.getStore(),u=l.getSource().sourceFormat;if(r!=null){var c=n.getDimensionIndex(r),h=l.getDimensionProperty(c);return getRawSourceValueGetter(u)(o,c,h)}else{var f=o;return u===SOURCE_FORMAT_ORIGINAL&&(f=getDataItemValue(o)),f}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function n(){}return n.prototype.getDataParams=function(a,r){var o=this.getData(r),l=this.getRawValue(a,r),u=o.getRawIndex(a),c=o.getName(a),h=o.getRawDataItem(a),f=o.getItemVisual(a,"style"),v=f&&f[o.getItemVisual(a,"drawType")||"fill"],d=f&&f.stroke,p=this.mainType,g=p==="series",y=o.userOutput&&o.userOutput.get();return{componentType:p,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:g?this.subType:null,seriesIndex:this.seriesIndex,seriesId:g?this.id:null,seriesName:g?this.name:null,name:c,dataIndex:u,data:h,dataType:r,value:l,color:v,borderColor:d,dimensionNames:y?y.fullDimensions:null,encode:y?y.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(a,r,o,l,u,c){r=r||"normal";var h=this.getData(o),f=this.getDataParams(a,o);if(c&&(f.value=c.interpolatedValue),l!=null&&isArray$1(f.value)&&(f.value=f.value[l]),!u){var v=h.getItemModel(a);u=v.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(isFunction(u))return f.status=r,f.dimensionIndex=l,u(f);if(isString(u)){var d=formatTpl(u,f);return d.replace(DIMENSION_LABEL_REG,function(p,g){var y=g.length,_=g;_.charAt(0)==="["&&_.charAt(y-1)==="]"&&(_=+_.slice(1,y-1),{}.NODE_ENV!=="production"&&isNaN(_)&&error("Invalide label formatter: @"+g+", only support @[0], @[1], @[2], ..."));var S=retrieveRawValue(h,a,_);if(c&&isArray$1(c.interpolatedValue)){var x=h.getDimensionIndex(_);x>=0&&(S=c.interpolatedValue[x])}return S!=null?S+"":""})}},n.prototype.getRawValue=function(a,r){return retrieveRawValue(this.getData(r),a)},n.prototype.formatTooltip=function(a,r,o){},n}();function normalizeTooltipFormatResult(n){var a,r;return isObject$3(n)?n.type?r=n:{}.NODE_ENV!=="production"&&console.warn("The return type of `formatTooltip` is not supported: "+makePrintable(n)):a=n,{text:a,frag:r}}function createTask(n){return new Task(n)}var Task=function(){function n(a){a=a||{},this._reset=a.reset,this._plan=a.plan,this._count=a.count,this._onDirty=a.onDirty,this._dirty=!0}return n.prototype.perform=function(a){var r=this._upstream,o=a&&a.skip;if(this._dirty&&r){var l=this.context;l.data=l.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!o&&(u=this._plan(this.context));var c=d(this._modBy),h=this._modDataCount||0,f=d(a&&a.modBy),v=a&&a.modDataCount||0;(c!==f||h!==v)&&(u="reset");function d(A){return!(A>=1)&&(A=1),A}var p;(this._dirty||u==="reset")&&(this._dirty=!1,p=this._doReset(o)),this._modBy=f,this._modDataCount=v;var g=a&&a.step;if(r?({}.NODE_ENV!=="production"&&assert(r._outputDueEnd!=null),this._dueEnd=r._outputDueEnd):({}.NODE_ENV!=="production"&&assert(!this._progress||this._count),this._dueEnd=this._count?this._count(this.context):1/0),this._progress){var y=this._dueIndex,_=Math.min(g!=null?this._dueIndex+g:1/0,this._dueEnd);if(!o&&(p||y<_)){var S=this._progress;if(isArray$1(S))for(var x=0;x<S.length;x++)this._doProgress(S[x],y,_,f,v);else this._doProgress(S,y,_,f,v)}this._dueIndex=_;var T=this._settedOutputEnd!=null?this._settedOutputEnd:_;({}).NODE_ENV!=="production"&&assert(T>=this._outputDueEnd),this._outputDueEnd=T}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(a,r,o,l,u){iterator.reset(r,o,l,u),this._callingProgress=a,this._callingProgress({start:r,end:o,count:o-r,next:iterator.next},this.context)},n.prototype._doReset=function(a){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,o;!a&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(o=r.forceFirstProgress,r=r.progress),isArray$1(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),o},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(a){({}).NODE_ENV!=="production"&&assert(a&&!a._disposed&&a!==this),(this._downstream!==a||this._dirty)&&(this._downstream=a,a._upstream=this,a.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(a){this._outputDueEnd=this._settedOutputEnd=a},n}(),iterator=function(){var n,a,r,o,l,u={reset:function(f,v,d,p){a=f,n=v,r=d,o=p,l=Math.ceil(o/r),u.next=r>1&&o>0?h:c}};return u;function c(){return a<n?a++:null}function h(){var f=a%l*r+Math.ceil(a/l),v=a>=n?null:f<o?f:a;return a++,v}}();function parseDataValue(n,a){var r=a&&a.type;return r==="ordinal"?n:(r==="time"&&!isNumber(n)&&n!=null&&n!=="-"&&(n=+parseDate(n)),n==null||n===""?NaN:+n)}var valueParserMap=createHashMap({number:function(n){return parseFloat(n)},time:function(n){return+parseDate(n)},trim:function(n){return isString(n)?trim$1(n):n}});function getRawValueParser(n){return valueParserMap.get(n)}var ORDER_COMPARISON_OP_MAP={lt:function(n,a){return n<a},lte:function(n,a){return n<=a},gt:function(n,a){return n>a},gte:function(n,a){return n>=a}},FilterOrderComparator=function(){function n(a,r){if(!isNumber(r)){var o="";({}).NODE_ENV!=="production"&&(o='rvalue of "<", ">", "<=", ">=" can only be number in filter.'),throwError(o)}this._opFn=ORDER_COMPARISON_OP_MAP[a],this._rvalFloat=numericToNumber(r)}return n.prototype.evaluate=function(a){return isNumber(a)?this._opFn(a,this._rvalFloat):this._opFn(numericToNumber(a),this._rvalFloat)},n}(),SortOrderComparator=function(){function n(a,r){var o=a==="desc";this._resultLT=o?1:-1,r==null&&(r=o?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return n.prototype.evaluate=function(a,r){var o=isNumber(a)?a:numericToNumber(a),l=isNumber(r)?r:numericToNumber(r),u=isNaN(o),c=isNaN(l);if(u&&(o=this._incomparable),c&&(l=this._incomparable),u&&c){var h=isString(a),f=isString(r);h&&(o=f?a:0),f&&(l=h?r:0)}return o<l?this._resultLT:o>l?-this._resultLT:0},n}(),FilterEqualityComparator=function(){function n(a,r){this._rval=r,this._isEQ=a,this._rvalTypeof=typeof r,this._rvalFloat=numericToNumber(r)}return n.prototype.evaluate=function(a){var r=a===this._rval;if(!r){var o=typeof a;o!==this._rvalTypeof&&(o==="number"||this._rvalTypeof==="number")&&(r=numericToNumber(a)===this._rvalFloat)}return this._isEQ?r:!r},n}();function createFilterComparator(n,a){return n==="eq"||n==="ne"?new FilterEqualityComparator(n==="eq",a):hasOwn(ORDER_COMPARISON_OP_MAP,n)?new FilterOrderComparator(n,a):null}var ExternalSource=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(a){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(a){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(a,r){},n.prototype.retrieveValueFromItem=function(a,r){},n.prototype.convertValue=function(a,r){return parseDataValue(a,r)},n}();function createExternalSource(n,a){var r=new ExternalSource,o=n.data,l=r.sourceFormat=n.sourceFormat,u=n.startIndex,c="";n.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&({}.NODE_ENV!=="production"&&(c='`seriesLayoutBy` of upstream dataset can only be "column" in data transform.'),throwError(c));var h=[],f={},v=n.dimensionsDefine;if(v)each$f(v,function(S,x){var T=S.name,A={index:x,name:T,displayName:S.displayName};if(h.push(A),T!=null){var b="";hasOwn(f,T)&&({}.NODE_ENV!=="production"&&(b='dimension name "'+T+'" duplicated.'),throwError(b)),f[T]=A}});else for(var d=0;d<n.dimensionsDetectedCount;d++)h.push({index:d});var p=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);a.__isBuiltIn&&(r.getRawDataItem=function(S){return p(o,u,h,S)},r.getRawData=bind$1(getRawData,null,n)),r.cloneRawData=bind$1(cloneRawData,null,n);var g=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);r.count=bind$1(g,null,o,u,h);var y=getRawSourceValueGetter(l);r.retrieveValue=function(S,x){var T=p(o,u,h,S);return _(T,x)};var _=r.retrieveValueFromItem=function(S,x){if(S!=null){var T=h[x];if(T)return y(S,x,T.name)}};return r.getDimensionInfo=bind$1(getDimensionInfo,null,h,f),r.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,h),r}function getRawData(n){var a=n.sourceFormat;if(!isSupportedSourceFormat(a)){var r="";({}).NODE_ENV!=="production"&&(r="`getRawData` is not supported in source format "+a),throwError(r)}return n.data}function cloneRawData(n){var a=n.sourceFormat,r=n.data;if(!isSupportedSourceFormat(a)){var o="";({}).NODE_ENV!=="production"&&(o="`cloneRawData` is not supported in source format "+a),throwError(o)}if(a===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],u=0,c=r.length;u<c;u++)l.push(r[u].slice());return l}else if(a===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],u=0,c=r.length;u<c;u++)l.push(extend({},r[u]));return l}}function getDimensionInfo(n,a,r){if(r!=null){if(isNumber(r)||!isNaN(r)&&!hasOwn(a,r))return n[r];if(hasOwn(a,r))return a[r]}}function cloneAllDimensionInfo(n){return clone$4(n)}var externalTransformMap=createHashMap();function registerExternalTransform(n){n=clone$4(n);var a=n.type,r="";a||({}.NODE_ENV!=="production"&&(r="Must have a `type` when `registerTransform`."),throwError(r));var o=a.split(":");o.length!==2&&({}.NODE_ENV!=="production"&&(r='Name must include namespace like "ns:regression".'),throwError(r));var l=!1;o[0]==="echarts"&&(a=o[1],l=!0),n.__isBuiltIn=l,externalTransformMap.set(a,n)}function applyDataTransform(n,a,r){var o=normalizeToArray(n),l=o.length,u="";l||({}.NODE_ENV!=="production"&&(u="If `transform` declared, it should at least contain one transform."),throwError(u));for(var c=0,h=l;c<h;c++){var f=o[c];a=applySingleDataTransform(f,a,r,l===1?null:c),c!==h-1&&(a.length=Math.max(a.length,1))}return a}function applySingleDataTransform(n,a,r,o){var l="";a.length||({}.NODE_ENV!=="production"&&(l="Must have at least one upstream dataset."),throwError(l)),isObject$3(n)||({}.NODE_ENV!=="production"&&(l="transform declaration must be an object rather than "+typeof n+"."),throwError(l));var u=n.type,c=externalTransformMap.get(u);c||({}.NODE_ENV!=="production"&&(l='Can not find transform on type "'+u+'".'),throwError(l));var h=map$1(a,function(d){return createExternalSource(d,c)}),f=normalizeToArray(c.transform({upstream:h[0],upstreamList:h,config:clone$4(n.config)}));if({}.NODE_ENV!=="production"&&n.print){var v=map$1(f,function(d){var p=o!=null?" === pipe index: "+o:"";return["=== dataset index: "+r.datasetIndex+p+" ===","- transform result data:",makePrintable(d.data),"- transform result dimensions:",makePrintable(d.dimensions)].join(`
`)}).join(`
`);log(v)}return map$1(f,function(d,p){var g="";isObject$3(d)||({}.NODE_ENV!=="production"&&(g="A transform should not return some empty results."),throwError(g)),d.data||({}.NODE_ENV!=="production"&&(g="Transform result data should be not be null or undefined"),throwError(g));var y=detectSourceFormat(d.data);isSupportedSourceFormat(y)||({}.NODE_ENV!=="production"&&(g="Transform result data should be array rows or object rows."),throwError(g));var _,S=a[0];if(S&&p===0&&!d.dimensions){var x=S.startIndex;x&&(d.data=S.data.slice(0,x).concat(d.data)),_={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:x,dimensions:S.metaRawOption.dimensions}}else _={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:d.dimensions};return createSource(d.data,_,null)})}function isSupportedSourceFormat(n){return n===SOURCE_FORMAT_ARRAY_ROWS||n===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(n){return n>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(n){var a=n.constructor;return a===Array?n.slice():new a(n)}function prepareStore(n,a,r,o,l){var u=dataCtors[r||"float"];if(l){var c=n[a],h=c&&c.length;if(h!==o){for(var f=new u(o),v=0;v<h;v++)f[v]=c[v];n[a]=f}}else n[a]=new u(o)}var DataStore=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return n.prototype.initData=function(a,r,o){({}).NODE_ENV!=="production"&&assert(isFunction(a.getItem)&&isFunction(a.count),"Invalid data provider."),this._provider=a,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=a.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=o||u,this._rawExtent=[];var c=shouldRetrieveDataByName(l);this._dimensions=map$1(r,function(h){return{}.NODE_ENV!=="production"&&c&&assert(h.property!=null),{type:h.type,property:h.property}}),this._initDataFromProvider(0,a.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(a,r){var o=this._calcDimNameToIdx,l=this._dimensions,u=o.get(a);if(u!=null){if(l[u].type===r)return u}else u=l.length;return l[u]={type:r},o.set(a,u),this._chunks[u]=new dataCtors[r||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},n.prototype.collectOrdinalMeta=function(a,r){var o=this._chunks[a],l=this._dimensions[a],u=this._rawExtent,c=l.ordinalOffset||0,h=o.length;c===0&&(u[a]=getInitialExtent());for(var f=u[a],v=c;v<h;v++){var d=o[v]=r.parseAndCollect(o[v]);isNaN(d)||(f[0]=Math.min(d,f[0]),f[1]=Math.max(d,f[1]))}l.ordinalMeta=r,l.ordinalOffset=h,l.type="ordinal"},n.prototype.getOrdinalMeta=function(a){var r=this._dimensions[a],o=r.ordinalMeta;return o},n.prototype.getDimensionProperty=function(a){var r=this._dimensions[a];return r&&r.property},n.prototype.appendData=function(a){({}).NODE_ENV!=="production"&&assert(!this._indices,"appendData can only be called on raw data.");var r=this._provider,o=this.count();r.appendData(a);var l=r.count();return r.persistent||(l+=o),o<l&&this._initDataFromProvider(o,l,!0),[o,l]},n.prototype.appendValues=function(a,r){for(var o=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,h=this.count(),f=h+Math.max(a.length,r||0),v=0;v<u;v++){var d=l[v];prepareStore(o,v,d.type,f,!0)}for(var p=[],g=h;g<f;g++)for(var y=g-h,_=0;_<u;_++){var d=l[_],S=defaultDimValueGetters.arrayRows.call(this,a[y]||p,d.property,y,_);o[_][g]=S;var x=c[_];S<x[0]&&(x[0]=S),S>x[1]&&(x[1]=S)}return this._rawCount=this._count=f,{start:h,end:f}},n.prototype._initDataFromProvider=function(a,r,o){for(var l=this._provider,u=this._chunks,c=this._dimensions,h=c.length,f=this._rawExtent,v=map$1(c,function(A){return A.property}),d=0;d<h;d++){var p=c[d];f[d]||(f[d]=getInitialExtent()),prepareStore(u,d,p.type,r,o)}if(l.fillStorage)l.fillStorage(a,r,u,f);else for(var g=[],y=a;y<r;y++){g=l.getItem(y,g);for(var _=0;_<h;_++){var S=u[_],x=this._dimValueGetter(g,v[_],y,_);S[y]=x;var T=f[_];x<T[0]&&(T[0]=x),x>T[1]&&(T[1]=x)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=r,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(a,r){if(!(r>=0&&r<this._count))return NaN;var o=this._chunks[a];return o?o[this.getRawIndex(r)]:NaN},n.prototype.getValues=function(a,r){var o=[],l=[];if(r==null){r=a,a=[];for(var u=0;u<this._dimensions.length;u++)l.push(u)}else l=a;for(var u=0,c=l.length;u<c;u++)o.push(this.get(l[u],r));return o},n.prototype.getByRawIndex=function(a,r){if(!(r>=0&&r<this._rawCount))return NaN;var o=this._chunks[a];return o?o[r]:NaN},n.prototype.getSum=function(a){var r=this._chunks[a],o=0;if(r)for(var l=0,u=this.count();l<u;l++){var c=this.get(a,l);isNaN(c)||(o+=c)}return o},n.prototype.getMedian=function(a){var r=[];this.each([a],function(u){isNaN(u)||r.push(u)});var o=r.sort(function(u,c){return u-c}),l=this.count();return l===0?0:l%2===1?o[(l-1)/2]:(o[l/2]+o[l/2-1])/2},n.prototype.indexOfRawIndex=function(a){if(a>=this._rawCount||a<0)return-1;if(!this._indices)return a;var r=this._indices,o=r[a];if(o!=null&&o<this._count&&o===a)return a;for(var l=0,u=this._count-1;l<=u;){var c=(l+u)/2|0;if(r[c]<a)l=c+1;else if(r[c]>a)u=c-1;else return c}return-1},n.prototype.indicesOfNearest=function(a,r,o){var l=this._chunks,u=l[a],c=[];if(!u)return c;o==null&&(o=1/0);for(var h=1/0,f=-1,v=0,d=0,p=this.count();d<p;d++){var g=this.getRawIndex(d),y=r-u[g],_=Math.abs(y);_<=o&&((_<h||_===h&&y>=0&&f<0)&&(h=_,f=y,v=0),y===f&&(c[v++]=d))}return c.length=v,c},n.prototype.getIndices=function(){var a,r=this._indices;if(r){var o=r.constructor,l=this._count;if(o===Array){a=new o(l);for(var u=0;u<l;u++)a[u]=r[u]}else a=new o(r.buffer,0,l)}else{var o=getIndicesCtor(this._rawCount);a=new o(this.count());for(var u=0;u<a.length;u++)a[u]=u}return a},n.prototype.filter=function(a,r){if(!this._count)return this;for(var o=this.clone(),l=o.count(),u=getIndicesCtor(o._rawCount),c=new u(l),h=[],f=a.length,v=0,d=a[0],p=o._chunks,g=0;g<l;g++){var y=void 0,_=o.getRawIndex(g);if(f===0)y=r(g);else if(f===1){var S=p[d][_];y=r(S,g)}else{for(var x=0;x<f;x++)h[x]=p[a[x]][_];h[x]=g,y=r.apply(null,h)}y&&(c[v++]=_)}return v<l&&(o._indices=c),o._count=v,o._extent=[],o._updateGetRawIdx(),o},n.prototype.selectRange=function(a){var r=this.clone(),o=r._count;if(!o)return this;var l=keys(a),u=l.length;if(!u)return this;var c=r.count(),h=getIndicesCtor(r._rawCount),f=new h(c),v=0,d=l[0],p=a[d][0],g=a[d][1],y=r._chunks,_=!1;if(!r._indices){var S=0;if(u===1){for(var x=y[l[0]],T=0;T<o;T++){var A=x[T];(A>=p&&A<=g||isNaN(A))&&(f[v++]=S),S++}_=!0}else if(u===2){for(var x=y[l[0]],b=y[l[1]],C=a[l[1]][0],E=a[l[1]][1],T=0;T<o;T++){var A=x[T],w=b[T];(A>=p&&A<=g||isNaN(A))&&(w>=C&&w<=E||isNaN(w))&&(f[v++]=S),S++}_=!0}}if(!_)if(u===1)for(var T=0;T<c;T++){var D=r.getRawIndex(T),A=y[l[0]][D];(A>=p&&A<=g||isNaN(A))&&(f[v++]=D)}else for(var T=0;T<c;T++){for(var M=!0,D=r.getRawIndex(T),P=0;P<u;P++){var L=l[P],A=y[L][D];(A<a[L][0]||A>a[L][1])&&(M=!1)}M&&(f[v++]=r.getRawIndex(T))}return v<c&&(r._indices=f),r._count=v,r._extent=[],r._updateGetRawIdx(),r},n.prototype.map=function(a,r){var o=this.clone(a);return this._updateDims(o,a,r),o},n.prototype.modify=function(a,r){this._updateDims(this,a,r)},n.prototype._updateDims=function(a,r,o){for(var l=a._chunks,u=[],c=r.length,h=a.count(),f=[],v=a._rawExtent,d=0;d<r.length;d++)v[r[d]]=getInitialExtent();for(var p=0;p<h;p++){for(var g=a.getRawIndex(p),y=0;y<c;y++)f[y]=l[r[y]][g];f[c]=p;var _=o&&o.apply(null,f);if(_!=null){typeof _!="object"&&(u[0]=_,_=u);for(var d=0;d<_.length;d++){var S=r[d],x=_[d],T=v[S],A=l[S];A&&(A[g]=x),x<T[0]&&(T[0]=x),x>T[1]&&(T[1]=x)}}}},n.prototype.lttbDownSample=function(a,r){var o=this.clone([a],!0),l=o._chunks,u=l[a],c=this.count(),h=0,f=Math.floor(1/r),v=this.getRawIndex(0),d,p,g,y=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/f)+2)*2,c));y[h++]=v;for(var _=1;_<c-1;_+=f){for(var S=Math.min(_+f,c-1),x=Math.min(_+f*2,c),T=(x+S)/2,A=0,b=S;b<x;b++){var C=this.getRawIndex(b),E=u[C];isNaN(E)||(A+=E)}A/=x-S;var w=_,D=Math.min(_+f,c),M=_-1,P=u[v];d=-1,g=w;for(var L=-1,I=0,b=w;b<D;b++){var C=this.getRawIndex(b),E=u[C];if(isNaN(E)){I++,L<0&&(L=C);continue}p=Math.abs((M-T)*(E-P)-(M-b)*(A-P)),p>d&&(d=p,g=C)}I>0&&I<D-w&&(y[h++]=Math.min(L,g),g=Math.max(L,g)),y[h++]=g,v=g}return y[h++]=this.getRawIndex(c-1),o._count=h,o._indices=y,o.getRawIndex=this._getRawIdx,o},n.prototype.downSample=function(a,r,o,l){for(var u=this.clone([a],!0),c=u._chunks,h=[],f=Math.floor(1/r),v=c[a],d=this.count(),p=u._rawExtent[a]=getInitialExtent(),g=new(getIndicesCtor(this._rawCount))(Math.ceil(d/f)),y=0,_=0;_<d;_+=f){f>d-_&&(f=d-_,h.length=f);for(var S=0;S<f;S++){var x=this.getRawIndex(_+S);h[S]=v[x]}var T=o(h),A=this.getRawIndex(Math.min(_+l(h,T)||0,d-1));v[A]=T,T<p[0]&&(p[0]=T),T>p[1]&&(p[1]=T),g[y++]=A}return u._count=y,u._indices=g,u._updateGetRawIdx(),u},n.prototype.each=function(a,r){if(!!this._count)for(var o=a.length,l=this._chunks,u=0,c=this.count();u<c;u++){var h=this.getRawIndex(u);switch(o){case 0:r(u);break;case 1:r(l[a[0]][h],u);break;case 2:r(l[a[0]][h],l[a[1]][h],u);break;default:for(var f=0,v=[];f<o;f++)v[f]=l[a[f]][h];v[f]=u,r.apply(null,v)}}},n.prototype.getDataExtent=function(a){var r=this._chunks[a],o=getInitialExtent();if(!r)return o;var l=this.count(),u=!this._indices,c;if(u)return this._rawExtent[a].slice();if(c=this._extent[a],c)return c.slice();c=o;for(var h=c[0],f=c[1],v=0;v<l;v++){var d=this.getRawIndex(v),p=r[d];p<h&&(h=p),p>f&&(f=p)}return c=[h,f],this._extent[a]=c,c},n.prototype.getRawDataItem=function(a){var r=this.getRawIndex(a);if(this._provider.persistent)return this._provider.getItem(r);for(var o=[],l=this._chunks,u=0;u<l.length;u++)o.push(l[u][r]);return o},n.prototype.clone=function(a,r){var o=new n,l=this._chunks,u=a&&reduce(a,function(h,f){return h[f]=!0,h},{});if(u)for(var c=0;c<l.length;c++)o._chunks[c]=u[c]?cloneChunk(l[c]):l[c];else o._chunks=l;return this._copyCommonProps(o),r||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},n.prototype._copyCommonProps=function(a){a._count=this._count,a._rawCount=this._rawCount,a._provider=this._provider,a._dimensions=this._dimensions,a._extent=clone$4(this._extent),a._rawExtent=clone$4(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var a=this._indices.constructor,r=void 0;if(a===Array){var o=this._indices.length;r=new a(o);for(var l=0;l<o;l++)r[l]=this._indices[l]}else r=new a(this._indices);return r}return null},n.prototype._getRawIdxIdentity=function(a){return a},n.prototype._getRawIdx=function(a){return a<this._count&&a>=0?this._indices[a]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function a(r,o,l,u){return parseDataValue(r[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:a,objectRows:function(r,o,l,u){return parseDataValue(r[o],this._dimensions[u])},keyedColumns:a,original:function(r,o,l,u){var c=r&&(r.value==null?r:r.value);return parseDataValue(c instanceof Array?c[u]:c,this._dimensions[u])},typedArray:function(r,o,l,u){return r[u]}}}(),n}();const DataStore$1=DataStore;var SourceManager=function(){function n(a){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=a}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(a,r){this._sourceList=a,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var a=this._sourceHost,r=this._getUpstreamSourceManagers(),o=!!r.length,l,u;if(isSeries(a)){var c=a,h=void 0,f=void 0,v=void 0;if(o){var d=r[0];d.prepareSource(),v=d.getSource(),h=v.data,f=v.sourceFormat,u=[d._getVersionSign()]}else h=c.get("data",!0),f=isTypedArray(h)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var p=this._getSourceMetaRawOption()||{},g=v&&v.metaRawOption||{},y=retrieve2(p.seriesLayoutBy,g.seriesLayoutBy)||null,_=retrieve2(p.sourceHeader,g.sourceHeader),S=retrieve2(p.dimensions,g.dimensions),x=y!==g.seriesLayoutBy||!!_!=!!g.sourceHeader||S;l=x?[createSource(h,{seriesLayoutBy:y,sourceHeader:_,dimensions:S},f)]:[]}else{var T=a;if(o){var A=this._applyTransform(r);l=A.sourceList,u=A.upstreamSignList}else{var b=T.get("source",!0);l=[createSource(b,this._getSourceMetaRawOption(),null)],u=[]}}({}).NODE_ENV!=="production"&&assert(l&&u),this._setLocalSource(l,u)},n.prototype._applyTransform=function(a){var r=this._sourceHost,o=r.get("transform",!0),l=r.get("fromTransformResult",!0);if({}.NODE_ENV!=="production"&&assert(l!=null||o!=null),l!=null){var u="";a.length!==1&&({}.NODE_ENV!=="production"&&(u="When using `fromTransformResult`, there should be only one upstream dataset"),doThrow(u))}var c,h=[],f=[];return each$f(a,function(v){v.prepareSource();var d=v.getSource(l||0),p="";l!=null&&!d&&({}.NODE_ENV!=="production"&&(p="Can not retrieve result by `fromTransformResult`: "+l),doThrow(p)),h.push(d),f.push(v._getVersionSign())}),o?c=applyDataTransform(o,h,{datasetIndex:r.componentIndex}):l!=null&&(c=[cloneSourceShallow(h[0])]),{sourceList:c,upstreamSignList:f}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var a=this._getUpstreamSourceManagers(),r=0;r<a.length;r++){var o=a[r];if(o._isDirty()||this._upstreamSignList[r]!==o._getVersionSign())return!0}},n.prototype.getSource=function(a){a=a||0;var r=this._sourceList[a];if(!r){var o=this._getUpstreamSourceManagers();return o[0]&&o[0].getSource(a)}return r},n.prototype.getSharedDataStore=function(a){({}).NODE_ENV!=="production"&&assert(isSeries(this._sourceHost),"Can only call getDataStore on series source manager.");var r=a.makeStoreSchema();return this._innerGetDataStore(r.dimensions,a.source,r.hash)},n.prototype._innerGetDataStore=function(a,r,o){var l=0,u=this._storeList,c=u[l];c||(c=u[l]={});var h=c[o];if(!h){var f=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&f?h=f._innerGetDataStore(a,r,o):(h=new DataStore$1,h.initData(new DefaultDataProvider(r,a.length),a)),c[o]=h}return h},n.prototype._getUpstreamSourceManagers=function(){var a=this._sourceHost;if(isSeries(a)){var r=querySeriesUpstreamDatasetModel(a);return r?[r.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(a),function(o){return o.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var a=this._sourceHost,r,o,l;if(isSeries(a))r=a.get("seriesLayoutBy",!0),o=a.get("sourceHeader",!0),l=a.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=a;r=u.get("seriesLayoutBy",!0),o=u.get("sourceHeader",!0),l=u.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:o,dimensions:l}},n}();function disableTransformOptionMerge(n){var a=n.option.transform;a&&setAsPrimitive(n.option.transform)}function isSeries(n){return n.mainType==="series"}function doThrow(n){throw new Error(n)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipTextStyle(n,a){var r=n.color||"#6e7079",o=n.fontSize||12,l=n.fontWeight||"400",u=n.color||"#464646",c=n.fontSize||14,h=n.fontWeight||"900";return a==="html"?{nameStyle:"font-size:"+encodeHTML(o+"")+"px;color:"+encodeHTML(r)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(h+"")}:{nameStyle:{fontSize:o,fill:r,fontWeight:l},valueStyle:{fontSize:c,fill:u,fontWeight:h}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(n,a){return a.type=n,a}function isSectionFragment(n){return n.type==="section"}function getBuilder(n){return isSectionFragment(n)?buildSection:buildNameValue}function getBlockGapLevel(n){if(isSectionFragment(n)){var a=0,r=n.blocks.length,o=r>1||r>0&&!n.noHeader;return each$f(n.blocks,function(l){var u=getBlockGapLevel(l);u>=a&&(a=u+ +(o&&(!u||isSectionFragment(l)&&!l.noHeader)))}),a}return 0}function buildSection(n,a,r,o){var l=a.noHeader,u=getGap(getBlockGapLevel(a)),c=[],h=a.blocks||[];assert(!h||isArray$1(h)),h=h||[];var f=n.orderMode;if(a.sortBlocks&&f){h=h.slice();var v={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(v,f)){var d=new SortOrderComparator(v[f],null);h.sort(function(_,S){return d.evaluate(_.sortParam,S.sortParam)})}else f==="seriesDesc"&&h.reverse()}each$f(h,function(_,S){var x=a.valueFormatter,T=getBuilder(_)(x?extend(extend({},n),{valueFormatter:x}):n,_,S>0?u.html:0,o);T!=null&&c.push(T)});var p=n.renderMode==="richText"?c.join(u.richText):wrapBlockHTML(c.join(""),l?r:u.html);if(l)return p;var g=makeValueReadable(a.header,"ordinal",n.useUTC),y=getTooltipTextStyle(o,n.renderMode).nameStyle;return n.renderMode==="richText"?wrapInlineNameRichText(n,g,y)+u.richText+p:wrapBlockHTML('<div style="'+y+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+encodeHTML(g)+"</div>"+p,r)}function buildNameValue(n,a,r,o){var l=n.renderMode,u=a.noName,c=a.noValue,h=!a.markerType,f=a.name,v=n.useUTC,d=a.valueFormatter||n.valueFormatter||function(C){return C=isArray$1(C)?C:[C],map$1(C,function(E,w){return makeValueReadable(E,isArray$1(y)?y[w]:y,v)})};if(!(u&&c)){var p=h?"":n.markupStyleCreator.makeTooltipMarker(a.markerType,a.markerColor||"#333",l),g=u?"":makeValueReadable(f,"ordinal",v),y=a.valueType,_=c?[]:d(a.value),S=!h||!u,x=!h&&u,T=getTooltipTextStyle(o,l),A=T.nameStyle,b=T.valueStyle;return l==="richText"?(h?"":p)+(u?"":wrapInlineNameRichText(n,g,A))+(c?"":wrapInlineValueRichText(n,_,S,x,b)):wrapBlockHTML((h?"":p)+(u?"":wrapInlineNameHTML(g,!h,A))+(c?"":wrapInlineValueHTML(_,S,x,b)),r)}}function buildTooltipMarkup(n,a,r,o,l,u){if(!!n){var c=getBuilder(n),h={useUTC:l,renderMode:r,orderMode:o,markupStyleCreator:a,valueFormatter:n.valueFormatter};return c(h,n,0,u)}}function getGap(n){return{html:HTML_GAPS[n],richText:RICH_TEXT_GAPS[n]}}function wrapBlockHTML(n,a){var r='<div style="clear:both"></div>',o="margin: "+a+"px 0 0";return'<div style="'+o+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+n+r+"</div>"}function wrapInlineNameHTML(n,a,r){var o=a?"margin-left:2px":"";return'<span style="'+r+";"+o+'">'+encodeHTML(n)+"</span>"}function wrapInlineValueHTML(n,a,r,o){var l=r?"10px":"20px",u=a?"float:right;margin-left:"+l:"";return n=isArray$1(n)?n:[n],'<span style="'+u+";"+o+'">'+map$1(n,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(n,a,r){return n.markupStyleCreator.wrapRichTextStyle(a,r)}function wrapInlineValueRichText(n,a,r,o,l){var u=[l],c=o?10:20;return r&&u.push({padding:[0,0,0,c],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(isArray$1(a)?a.join("  "):a,u)}function retrieveVisualColorForTooltipMarker(n,a){var r=n.getData().getItemVisual(a,"style"),o=r[n.visualDrawType];return convertToColorString(o)}function getPaddingFromTooltipModel(n,a){var r=n.get("padding");return r!=null?r:a==="richText"?[8,10]:10}var TooltipMarkupStyleCreator=function(){function n(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(a,r,o){var l=o==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:r,type:a,renderMode:o,markerId:l});return isString(u)?u:({}.NODE_ENV!=="production"&&assert(l),this.richTextStyles[l]=u.style,u.content)},n.prototype.wrapRichTextStyle=function(a,r){var o={};isArray$1(r)?each$f(r,function(u){return extend(o,u)}):extend(o,r);var l=this._generateStyleName();return this.richTextStyles[l]=o,"{"+l+"|"+a+"}"},n}();function defaultSeriesFormatTooltip(n){var a=n.series,r=n.dataIndex,o=n.multipleSeries,l=a.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,h=a.getRawValue(r),f=isArray$1(h),v=retrieveVisualColorForTooltipMarker(a,r),d,p,g,y;if(c>1||f&&!c){var _=formatTooltipArrayValue(h,a,r,u,v);d=_.inlineValues,p=_.inlineValueTypes,g=_.blocks,y=_.inlineValues[0]}else if(c){var S=l.getDimensionInfo(u[0]);y=d=retrieveRawValue(l,r,u[0]),p=S.type}else y=d=f?h[0]:h;var x=isNameSpecified(a),T=x&&a.name||"",A=l.getName(r),b=o?T:A;return createTooltipMarkup("section",{header:T,noHeader:o||!x,sortParam:y,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:v,name:b,noName:!trim$1(b),value:d,valueType:p})].concat(g||[])})}function formatTooltipArrayValue(n,a,r,o,l){var u=a.getData(),c=reduce(n,function(p,g,y){var _=u.getDimensionInfo(y);return p=p||_&&_.tooltip!==!1&&_.displayName!=null},!1),h=[],f=[],v=[];o.length?each$f(o,function(p){d(retrieveRawValue(u,r,p),p)}):each$f(n,d);function d(p,g){var y=u.getDimensionInfo(g);!y||y.otherDims.tooltip===!1||(c?v.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:y.displayName,value:p,valueType:y.type})):(h.push(p),f.push(y.type)))}return{inlineValues:h,inlineValueTypes:f,blocks:v}}var inner$k=makeInner();function getSelectionKey(n,a){return n.getName(a)||n.getId(a)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return a.prototype.init=function(r,o,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,l);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var c=this.getInitialData(r,l);wrapData(c,this),this.dataTask.context.data=c,{}.NODE_ENV!=="production"&&assert(c,"getInitialData returned invalid data."),inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},a.prototype.mergeDefaultAndTheme=function(r,o){var l=fetchLayoutMode(this),u=l?getLayoutParams(r):{},c=this.subType;ComponentModel$1.hasClass(c)&&(c+="Series"),merge(r,o.getTheme().get(this.subType)),merge(r,this.getDefaultOption()),defaultEmphasis(r,"label",["show"]),this.fillDataTextStyle(r.data),l&&mergeLayoutParam(r,u,l)},a.prototype.mergeOption=function(r,o){r=merge(this.option,r,!0),this.fillDataTextStyle(r.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,r,l);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var c=this.getInitialData(r,o);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},a.prototype.fillDataTextStyle=function(r){if(r&&!isTypedArray(r))for(var o=["show"],l=0;l<r.length;l++)r[l]&&r[l].label&&defaultEmphasis(r[l],"label",o)},a.prototype.getInitialData=function(r,o){},a.prototype.appendData=function(r){var o=this.getRawData();o.appendData(r.data)},a.prototype.getData=function(r){var o=getCurrentTask(this);if(o){var l=o.context.data;return r==null?l:l.getLinkedData(r)}else return inner$k(this).data},a.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},a.prototype.setData=function(r){var o=getCurrentTask(this);if(o){var l=o.context;l.outputData=r,o!==this.dataTask&&(l.data=r)}inner$k(this).data=r},a.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return createHashMap(r)},a.prototype.getSourceManager=function(){return inner$k(this).sourceManager},a.prototype.getSource=function(){return this.getSourceManager().getSource()},a.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},a.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},a.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},a.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},a.prototype.formatTooltip=function(r,o,l){return defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:o})},a.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(env$1.node&&!(r&&r.ssr))return!1;var o=this.getShallow("animation");return o&&this.getData().count()>this.getShallow("animationThreshold")&&(o=!1),!!o},a.prototype.restoreData=function(){this.dataTask.dirty()},a.prototype.getColorFromPalette=function(r,o,l){var u=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,r,o,l);return c||(c=u.getColorFromPalette(r,o,l)),c},a.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},a.prototype.getProgressive=function(){return this.get("progressive")},a.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},a.prototype.select=function(r,o){this._innerSelect(this.getData(o),r)},a.prototype.unselect=function(r,o){var l=this.option.selectedMap;if(!!l){var u=this.option.selectedMode,c=this.getData(o);if(u==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var h=0;h<r.length;h++){var f=r[h],v=getSelectionKey(c,f);l[v]=!1,this._selectedDataIndicesMap[v]=-1}}},a.prototype.toggleSelect=function(r,o){for(var l=[],u=0;u<r.length;u++)l[0]=r[u],this.isSelected(r[u],o)?this.unselect(l,o):this.select(l,o)},a.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,o=keys(r),l=[],u=0;u<o.length;u++){var c=r[o[u]];c>=0&&l.push(c)}return l},a.prototype.isSelected=function(r,o){var l=this.option.selectedMap;if(!l)return!1;var u=this.getData(o);return(l==="all"||l[getSelectionKey(u,r)])&&!u.getItemModel(r).get(["select","disabled"])},a.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},a.prototype._innerSelect=function(r,o){var l,u,c=this.option,h=c.selectedMode,f=o.length;if(!(!h||!f)){if(h==="series")c.selectedMap="all";else if(h==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var v=c.selectedMap,d=0;d<f;d++){var p=o[d],g=getSelectionKey(r,p);v[g]=!0,this._selectedDataIndicesMap[g]=r.getRawIndex(p)}}else if(h==="single"||h===!0){var y=o[f-1],g=getSelectionKey(r,y);c.selectedMap=(l={},l[g]=!0,l),this._selectedDataIndicesMap=(u={},u[g]=r.getRawIndex(y),u)}}},a.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var o=[];r.hasItemOption&&r.each(function(l){var u=r.getRawDataItem(l);u&&u.selected&&o.push(l)}),o.length>0&&this._innerSelect(r,o)}},a.registerClass=function(r){return ComponentModel$1.registerClass(r)},a.protoInitialize=function(){var r=a.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),a}(ComponentModel$1);mixin(SeriesModel,DataFormatMixin),mixin(SeriesModel,PaletteMixin),mountExtend(SeriesModel,ComponentModel$1);function autoSeriesName(n){var a=n.name;isNameSpecified(n)||(n.name=getSeriesAutoName(n)||a)}function getSeriesAutoName(n){var a=n.getRawData(),r=a.mapDimensionsAll("seriesName"),o=[];return each$f(r,function(l){var u=a.getDimensionInfo(l);u.displayName&&o.push(u.displayName)}),o.join(" ")}function dataTaskCount(n){return n.model.getRawData().count()}function dataTaskReset(n){var a=n.model;return a.setData(a.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(n,a){a.outputData&&n.end>a.outputData.count()&&a.model.getRawData().cloneShallow(a.outputData)}function wrapData(n,a){each$f(concatArray(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(r){n.wrapMethod(r,curry$1(onDataChange,a))})}function onDataChange(n,a){var r=getCurrentTask(n);return r&&r.setOutputEnd((a||this).count()),a}function getCurrentTask(n){var a=(n.ecModel||{}).scheduler,r=a&&a.getPipeline(n.uid);if(r){var o=r.currentTask;if(o){var l=o.agentStubMap;l&&(o=l.get(n.uid))}return o}}const SeriesModel$1=SeriesModel;var ComponentView=function(){function n(){this.group=new Group$4,this.uid=getUID("viewComponent")}return n.prototype.init=function(a,r){},n.prototype.render=function(a,r,o,l){},n.prototype.dispose=function(a,r){},n.prototype.updateView=function(a,r,o,l){},n.prototype.updateLayout=function(a,r,o,l){},n.prototype.updateVisual=function(a,r,o,l){},n.prototype.toggleBlurSeries=function(a,r,o){},n.prototype.eachRendered=function(a){var r=this.group;r&&r.traverse(a)},n}();enableClassExtend(ComponentView),enableClassManagement(ComponentView);const ComponentView$1=ComponentView;function createRenderPlanner(){var n=makeInner();return function(a){var r=n(a),o=a.pipelineContext,l=!!r.large,u=!!r.progressiveRender,c=r.large=!!(o&&o.large),h=r.progressiveRender=!!(o&&o.progressiveRender);return(l!==c||u!==h)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function n(){this.group=new Group$4,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return n.prototype.init=function(a,r){},n.prototype.render=function(a,r,o,l){if({}.NODE_ENV!=="production")throw new Error("render method must been implemented")},n.prototype.highlight=function(a,r,o,l){var u=a.getData(l&&l.dataType);if(!u){({}).NODE_ENV!=="production"&&error("Unknown dataType "+l.dataType);return}toggleHighlight(u,l,"emphasis")},n.prototype.downplay=function(a,r,o,l){var u=a.getData(l&&l.dataType);if(!u){({}).NODE_ENV!=="production"&&error("Unknown dataType "+l.dataType);return}toggleHighlight(u,l,"normal")},n.prototype.remove=function(a,r){this.group.removeAll()},n.prototype.dispose=function(a,r){},n.prototype.updateView=function(a,r,o,l){this.render(a,r,o,l)},n.prototype.updateLayout=function(a,r,o,l){this.render(a,r,o,l)},n.prototype.updateVisual=function(a,r,o,l){this.render(a,r,o,l)},n.prototype.eachRendered=function(a){traverseElements(this.group,a)},n.markUpdateMethod=function(a,r){inner$j(a).updateMethod=r},n.protoInitialize=function(){var a=n.prototype;a.type="chart"}(),n}();function elSetState(n,a,r){n&&isHighDownDispatcher(n)&&(a==="emphasis"?enterEmphasis:leaveEmphasis)(n,r)}function toggleHighlight(n,a,r){var o=queryDataIndex(n,a),l=a&&a.highlightKey!=null?getHighlightDigit(a.highlightKey):null;o!=null?each$f(normalizeToArray(o),function(u){elSetState(n.getItemGraphicEl(u),r,l)}):n.eachItemGraphicEl(function(u){elSetState(u,r,l)})}enableClassExtend(ChartView,["dispose"]),enableClassManagement(ChartView);function renderTaskPlan(n){return renderPlanner(n.model)}function renderTaskReset(n){var a=n.model,r=n.ecModel,o=n.api,l=n.payload,u=a.pipelineContext.progressiveRender,c=n.view,h=l&&inner$j(l).updateMethod,f=u?"incrementalPrepareRender":h&&c[h]?h:"render";return f!=="render"&&c[f](a,r,o,l),progressMethodMap[f]}var progressMethodMap={incrementalPrepareRender:{progress:function(n,a){a.view.incrementalRender(n,a.model,a.ecModel,a.api,a.payload)}},render:{forceFirstProgress:!0,progress:function(n,a){a.view.render(a.model,a.ecModel,a.api,a.payload)}}};const ChartView$1=ChartView;var ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(n,a,r){var o,l=0,u=0,c=null,h,f,v,d;a=a||0;function p(){u=new Date().getTime(),c=null,n.apply(f,v||[])}var g=function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];o=new Date().getTime(),f=this,v=y;var S=d||a,x=d||r;d=null,h=o-(x?l:u)-S,clearTimeout(c),x?c=setTimeout(p,S):h>=0?p():c=setTimeout(p,-h),l=o};return g.clear=function(){c&&(clearTimeout(c),c=null)},g.debounceNextCall=function(y){d=y},g}function createOrUpdate(n,a,r,o){var l=n[a];if(!!l){var u=l[ORIGIN_METHOD]||l,c=l[THROTTLE_TYPE],h=l[RATE];if(h!==r||c!==o){if(r==null||!o)return n[a]=u;l=n[a]=throttle(u,r,o==="debounce"),l[ORIGIN_METHOD]=u,l[THROTTLE_TYPE]=o,l[RATE]=r}return l}}function clear$1(n,a){var r=n[a];r&&r[ORIGIN_METHOD]&&(r.clear&&r.clear(),n[a]=r[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(n,a){var r=n.visualStyleMapper||defaultStyleMappers[a];return r||(console.warn("Unknown style type '"+a+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(n,a){var r=n.visualDrawType||defaultColorKey[a];return r||(console.warn("Unknown style type '"+a+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,a){var r=n.getData(),o=n.visualStyleAccessPath||"itemStyle",l=n.getModel(o),u=getStyleMapper(n,o),c=u(l),h=l.getShallow("decal");h&&(r.setVisual("decal",h),h.dirty=!0);var f=getDefaultColorKey(n,o),v=c[f],d=isFunction(v)?v:null,p=c.fill==="auto"||c.stroke==="auto";if(!c[f]||d||p){var g=n.getColorFromPalette(n.name,null,a.getSeriesCount());c[f]||(c[f]=g,r.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction(c.fill)?g:c.fill,c.stroke=c.stroke==="auto"||isFunction(c.stroke)?g:c.stroke}if(r.setVisual("style",c),r.setVisual("drawType",f),!a.isSeriesFiltered(n)&&d)return r.setVisual("colorFromPalette",!1),{dataEach:function(y,_){var S=n.getDataParams(_),x=extend({},c);x[f]=d(S),y.setItemVisual(_,"style",x)}}}},sharedModel=new Model$1,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,a){if(!(n.ignoreStyleOnData||a.isSeriesFiltered(n))){var r=n.getData(),o=n.visualStyleAccessPath||"itemStyle",l=getStyleMapper(n,o),u=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(c,h){var f=c.getRawDataItem(h);if(f&&f[o]){sharedModel.option=f[o];var v=l(sharedModel),d=c.ensureUniqueItemVisual(h,"style");extend(d,v),sharedModel.option.decal&&(c.setItemVisual(h,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in v&&c.setItemVisual(h,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(n){var a=createHashMap();n.eachSeries(function(r){var o=r.getColorBy();if(!r.isColorBySeries()){var l=r.type+"-"+o,u=a.get(l);u||(u={},a.set(l,u)),inner$i(r).scope=u}}),n.eachSeries(function(r){if(!(r.isColorBySeries()||n.isSeriesFiltered(r))){var o=r.getRawData(),l={},u=r.getData(),c=inner$i(r).scope,h=r.visualStyleAccessPath||"itemStyle",f=getDefaultColorKey(r,h);u.each(function(v){var d=u.getRawIndex(v);l[d]=v}),o.each(function(v){var d=l[v],p=u.getItemVisual(d,"colorFromPalette");if(p){var g=u.ensureUniqueItemVisual(d,"style"),y=o.getName(v)||v+"",_=o.count();g[f]=r.getColorFromPalette(y,c,_)}})}})}},PI$5=Math.PI;function defaultLoading(n,a){a=a||{},defaults(a,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Group$4,o=new Rect$3({style:{fill:a.maskColor},zlevel:a.zlevel,z:1e4});r.add(o);var l=new ZRText$1({style:{text:a.text,fill:a.textColor,fontSize:a.fontSize,fontWeight:a.fontWeight,fontStyle:a.fontStyle,fontFamily:a.fontFamily},zlevel:a.zlevel,z:10001}),u=new Rect$3({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:a.zlevel,z:10001});r.add(u);var c;return a.showSpinner&&(c=new Arc$1({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:a.spinnerRadius},style:{stroke:a.color,lineCap:"round",lineWidth:a.lineWidth},zlevel:a.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),r.add(c)),r.resize=function(){var h=l.getBoundingRect().width,f=a.showSpinner?a.spinnerRadius:0,v=(n.getWidth()-f*2-(a.showSpinner&&h?10:0)-h)/2-(a.showSpinner&&h?0:5+h/2)+(a.showSpinner?0:h/2)+(h?0:f),d=n.getHeight()/2;a.showSpinner&&c.setShape({cx:v,cy:d}),u.setShape({x:v-f,y:d-f,width:f*2,height:f*2}),o.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},r.resize(),r}var Scheduler=function(){function n(a,r,o,l){this._stageTaskMap=createHashMap(),this.ecInstance=a,this.api=r,o=this._dataProcessorHandlers=o.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=o.concat(l)}return n.prototype.restoreData=function(a,r){a.restoreData(r),this._stageTaskMap.each(function(o){var l=o.overallTask;l&&l.dirty()})},n.prototype.getPerformArgs=function(a,r){if(!!a.__pipeline){var o=this._pipelineMap.get(a.__pipeline.id),l=o.context,u=!r&&o.progressiveEnabled&&(!l||l.progressiveRender)&&a.__idxInPipeline>o.blockIndex,c=u?o.step:null,h=l&&l.modDataCount,f=h!=null?Math.ceil(h/c):null;return{step:c,modBy:f,modDataCount:h}}},n.prototype.getPipeline=function(a){return this._pipelineMap.get(a)},n.prototype.updateStreamModes=function(a,r){var o=this._pipelineMap.get(a.uid),l=a.getData(),u=l.count(),c=o.progressiveEnabled&&r.incrementalPrepareRender&&u>=o.threshold,h=a.get("large")&&u>=a.get("largeThreshold"),f=a.get("progressiveChunkMode")==="mod"?u:null;a.pipelineContext=o.context={progressiveRender:c,modDataCount:f,large:h}},n.prototype.restorePipelines=function(a){var r=this,o=r._pipelineMap=createHashMap();a.eachSeries(function(l){var u=l.getProgressive(),c=l.uid;o.set(c,{id:c,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:u&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),r._pipe(l,l.dataTask)})},n.prototype.prepareStageTasks=function(){var a=this._stageTaskMap,r=this.api.getModel(),o=this.api;each$f(this._allHandlers,function(l){var u=a.get(l.uid)||a.set(l.uid,{}),c="";({}).NODE_ENV!=="production"&&(c='"reset" and "overallReset" must not be both specified.'),assert(!(l.reset&&l.overallReset),c),l.reset&&this._createSeriesStageTask(l,u,r,o),l.overallReset&&this._createOverallStageTask(l,u,r,o)},this)},n.prototype.prepareView=function(a,r,o,l){var u=a.renderTask,c=u.context;c.model=r,c.ecModel=o,c.api=l,u.__block=!a.incrementalPrepareRender,this._pipe(r,u)},n.prototype.performDataProcessorTasks=function(a,r){this._performStageTasks(this._dataProcessorHandlers,a,r,{block:!0})},n.prototype.performVisualTasks=function(a,r,o){this._performStageTasks(this._visualHandlers,a,r,o)},n.prototype._performStageTasks=function(a,r,o,l){l=l||{};var u=!1,c=this;each$f(a,function(f,v){if(!(l.visualType&&l.visualType!==f.visualType)){var d=c._stageTaskMap.get(f.uid),p=d.seriesTaskMap,g=d.overallTask;if(g){var y,_=g.agentStubMap;_.each(function(x){h(l,x)&&(x.dirty(),y=!0)}),y&&g.dirty(),c.updatePayload(g,o);var S=c.getPerformArgs(g,l.block);_.each(function(x){x.perform(S)}),g.perform(S)&&(u=!0)}else p&&p.each(function(x,T){h(l,x)&&x.dirty();var A=c.getPerformArgs(x,l.block);A.skip=!f.performRawSeries&&r.isSeriesFiltered(x.context.model),c.updatePayload(x,o),x.perform(A)&&(u=!0)})}});function h(f,v){return f.setDirty&&(!f.dirtyMap||f.dirtyMap.get(v.__pipeline.id))}this.unfinished=u||this.unfinished},n.prototype.performSeriesTasks=function(a){var r;a.eachSeries(function(o){r=o.dataTask.perform()||r}),this.unfinished=r||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(a){var r=a.tail;do{if(r.__block){a.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},n.prototype.updatePayload=function(a,r){r!=="remain"&&(a.context.payload=r)},n.prototype._createSeriesStageTask=function(a,r,o,l){var u=this,c=r.seriesTaskMap,h=r.seriesTaskMap=createHashMap(),f=a.seriesType,v=a.getTargetSeries;a.createOnAllSeries?o.eachRawSeries(d):f?o.eachRawSeriesByType(f,d):v&&v(o,l).each(d);function d(p){var g=p.uid,y=h.set(g,c&&c.get(g)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));y.context={model:p,ecModel:o,api:l,useClearVisual:a.isVisual&&!a.isLayout,plan:a.plan,reset:a.reset,scheduler:u},u._pipe(p,y)}},n.prototype._createOverallStageTask=function(a,r,o,l){var u=this,c=r.overallTask=r.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:o,api:l,overallReset:a.overallReset,scheduler:u};var h=c.agentStubMap,f=c.agentStubMap=createHashMap(),v=a.seriesType,d=a.getTargetSeries,p=!0,g=!1,y="";({}).NODE_ENV!=="production"&&(y='"createOnAllSeries" is not supported for "overallReset", because it will block all streams.'),assert(!a.createOnAllSeries,y),v?o.eachRawSeriesByType(v,_):d?d(o,l).each(_):(p=!1,each$f(o.getSeries(),_));function _(S){var x=S.uid,T=f.set(x,h&&h.get(x)||(g=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));T.context={model:S,overallProgress:p},T.agent=c,T.__block=p,u._pipe(S,T)}g&&c.dirty()},n.prototype._pipe=function(a,r){var o=a.uid,l=this._pipelineMap.get(o);!l.head&&(l.head=r),l.tail&&l.tail.pipe(r),l.tail=r,r.__idxInPipeline=l.count++,r.__pipeline=l},n.wrapStageHandler=function(a,r){return isFunction(a)&&(a={overallReset:a,seriesType:detectSeriseType(a)}),a.uid=getUID("stageHandler"),r&&(a.visualType=r),a},n}();function overallTaskReset(n){n.overallReset(n.ecModel,n.api,n.payload)}function stubReset(n){return n.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function seriesTaskReset(n){n.useClearVisual&&n.data.clearAllVisual();var a=n.resetDefines=normalizeToArray(n.reset(n.model,n.ecModel,n.api,n.payload));return a.length>1?map$1(a,function(r,o){return makeSeriesTaskProgress(o)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(n){return function(a,r){var o=r.data,l=r.resetDefines[n];if(l&&l.dataEach)for(var u=a.start;u<a.end;u++)l.dataEach(o,u);else l&&l.progress&&l.progress(a,o)}}function seriesTaskCount(n){return n.data.count()}function detectSeriseType(n){seriesType=null;try{n(ecModelMock,apiMock)}catch(a){}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel$1),mockMethods(apiMock,ExtensionAPI$1),ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(n){seriesType=n},ecModelMock.eachComponent=function(n){n.mainType==="series"&&n.subType&&(seriesType=n.subType)};function mockMethods(n,a){for(var r in a.prototype)n[r]=noop}const Scheduler$1=Scheduler;var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;const darkTheme=theme;var ECEventProcessor=function(){function n(){}return n.prototype.normalizeQuery=function(a){var r={},o={},l={};if(isString(a)){var u=parseClassType(a);r.mainType=u.main||null,r.subType=u.sub||null}else{var c=["Index","Name","Id"],h={name:1,dataIndex:1,dataType:1};each$f(a,function(f,v){for(var d=!1,p=0;p<c.length;p++){var g=c[p],y=v.lastIndexOf(g);if(y>0&&y===v.length-g.length){var _=v.slice(0,y);_!=="data"&&(r.mainType=_,r[g.toLowerCase()]=f,d=!0)}}h.hasOwnProperty(v)&&(o[v]=f,d=!0),d||(l[v]=f)})}return{cptQuery:r,dataQuery:o,otherQuery:l}},n.prototype.filter=function(a,r){var o=this.eventInfo;if(!o)return!0;var l=o.targetEl,u=o.packedEvent,c=o.model,h=o.view;if(!c||!h)return!0;var f=r.cptQuery,v=r.dataQuery;return d(f,c,"mainType")&&d(f,c,"subType")&&d(f,c,"index","componentIndex")&&d(f,c,"name")&&d(f,c,"id")&&d(v,u,"name")&&d(v,u,"dataIndex")&&d(v,u,"dataType")&&(!h.filterForExposedEvent||h.filterForExposedEvent(a,r.otherQuery,l,u));function d(p,g,y,_){return p[y]==null||g[_||y]===p[y]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,a){var r=n.getData();if(n.legendIcon&&r.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var o={},l={},u=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var h=SYMBOL_PROPS_WITH_CB[c],f=n.get(h);isFunction(f)?(u=!0,l[h]=f):o[h]=f}if(o.symbol=o.symbol||n.defaultSymbol,r.setVisual(extend({legendIcon:n.legendIcon||o.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},o)),a.isSeriesFiltered(n))return;var v=keys(l);function d(p,g){for(var y=n.getRawValue(g),_=n.getDataParams(g),S=0;S<v.length;S++){var x=v[S];p.setItemVisual(g,x,l[x](y,_))}}return{dataEach:u?d:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,a){if(!n.hasSymbolVisual||a.isSeriesFiltered(n))return;var r=n.getData();function o(l,u){for(var c=l.getItemModel(u),h=0;h<SYMBOL_PROPS.length;h++){var f=SYMBOL_PROPS[h],v=c.getShallow(f,!0);v!=null&&l.setItemVisual(u,f,v)}}return{dataEach:r.hasItemOption?o:null}}};function getItemVisualFromData(n,a,r){switch(r){case"color":var o=n.getItemVisual(a,"style");return o[n.getVisual("drawType")];case"opacity":return n.getItemVisual(a,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(a,r);default:({}).NODE_ENV!=="production"&&console.warn("Unknown visual type "+r)}}function getVisualFromData(n,a){switch(a){case"color":var r=n.getVisual("style");return r[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(a);default:({}).NODE_ENV!=="production"&&console.warn("Unknown visual type "+a)}}function setItemVisualFromData(n,a,r,o){switch(r){case"color":var l=n.ensureUniqueItemVisual(a,"style");l[n.getVisual("drawType")]=o,n.setItemVisual(a,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(a,"style").opacity=o;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(a,r,o);break;default:({}).NODE_ENV!=="production"&&console.warn("Unknown visual type "+r)}}function createLegacyDataSelectAction(n,a){function r(o,l){var u=[];return o.eachComponent({mainType:"series",subType:n,query:l},function(c){u.push(c.seriesIndex)}),u}each$f([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(o){a(o[0],function(l,u,c){l=extend({},l),{}.NODE_ENV!=="production"&&deprecateReplaceLog(l.type,o[1]),c.dispatchAction(extend(l,{type:o[1],seriesIndex:r(u,l)}))})})}function handleSeriesLegacySelectEvents(n,a,r,o,l){var u=n+a;r.isSilent(u)||({}.NODE_ENV!=="production"&&deprecateLog("event "+u+" is deprecated."),o.eachComponent({mainType:"series",subType:"pie"},function(c){for(var h=c.seriesIndex,f=c.option.selectedMap,v=l.selected,d=0;d<v.length;d++)if(v[d].seriesIndex===h){var p=c.getData(),g=queryDataIndex(p,l.fromActionPayload);r.trigger(u,{type:u,seriesId:c.id,name:isArray$1(g)?p.getName(g[0]):p.getName(g),selected:isString(f)?f:extend({},f)})}}))}function handleLegacySelectEvents(n,a,r){n.on("selectchanged",function(o){var l=r.getModel();o.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",a,l,o),handleSeriesLegacySelectEvents("pie","selectchanged",a,l,o)):o.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",a,l,o),handleSeriesLegacySelectEvents("pie","selected",a,l,o)):o.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",a,l,o),handleSeriesLegacySelectEvents("pie","unselected",a,l,o))})}function findEventDispatcher(n,a,r){for(var o;n&&!(a(n)&&(o=n,r));)n=n.__hostTarget||n.parent;return o}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap=function(){function n(){this._id="__ec_inner_"+wmUniqueIndex++}return n.prototype.get=function(a){return this._guard(a)[this._id]},n.prototype.set=function(a,r){var o=this._guard(a);return supportDefineProperty?Object.defineProperty(o,this._id,{value:r,enumerable:!1,configurable:!0}):o[this._id]=r,this},n.prototype.delete=function(a){return this.has(a)?(delete this._guard(a)[this._id],!0):!1},n.prototype.has=function(a){return!!this._guard(a)[this._id]},n.prototype._guard=function(a){if(a!==Object(a))throw TypeError("Value of WeakMap is not a non-null object.");return a},n}();const WeakMap$1=WeakMap;var Triangle=Path$1.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,a){var r=a.cx,o=a.cy,l=a.width/2,u=a.height/2;n.moveTo(r,o-u),n.lineTo(r+l,o+u),n.lineTo(r-l,o+u),n.closePath()}}),Diamond=Path$1.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,a){var r=a.cx,o=a.cy,l=a.width/2,u=a.height/2;n.moveTo(r,o-u),n.lineTo(r+l,o),n.lineTo(r,o+u),n.lineTo(r-l,o),n.closePath()}}),Pin=Path$1.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,a){var r=a.x,o=a.y,l=a.width/5*3,u=Math.max(l,a.height),c=l/2,h=c*c/(u-c),f=o-u+c+h,v=Math.asin(h/c),d=Math.cos(v)*c,p=Math.sin(v),g=Math.cos(v),y=c*.6,_=c*.7;n.moveTo(r-d,f+h),n.arc(r,f,c,Math.PI-v,Math.PI*2+v),n.bezierCurveTo(r+d-p*y,f+h+g*y,r,o-_,r,o),n.bezierCurveTo(r,o-_,r-d+p*y,f+h+g*y,r-d,f+h),n.closePath()}}),Arrow=Path$1.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,a){var r=a.height,o=a.width,l=a.x,u=a.y,c=o/3*2;n.moveTo(l,u),n.lineTo(l+c,u+r),n.lineTo(l,u+r/4*3),n.lineTo(l-c,u+r),n.lineTo(l,u),n.closePath()}}),symbolCtors={line:Line$3,rect:Rect$3,roundRect:Rect$3,square:Rect$3,circle:Circle$1,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(n,a,r,o,l){l.x1=n,l.y1=a+o/2,l.x2=n+r,l.y2=a+o/2},rect:function(n,a,r,o,l){l.x=n,l.y=a,l.width=r,l.height=o},roundRect:function(n,a,r,o,l){l.x=n,l.y=a,l.width=r,l.height=o,l.r=Math.min(r,o)/4},square:function(n,a,r,o,l){var u=Math.min(r,o);l.x=n,l.y=a,l.width=u,l.height=u},circle:function(n,a,r,o,l){l.cx=n+r/2,l.cy=a+o/2,l.r=Math.min(r,o)/2},diamond:function(n,a,r,o,l){l.cx=n+r/2,l.cy=a+o/2,l.width=r,l.height=o},pin:function(n,a,r,o,l){l.x=n+r/2,l.y=a+o/2,l.width=r,l.height=o},arrow:function(n,a,r,o,l){l.x=n+r/2,l.y=a+o/2,l.width=r,l.height=o},triangle:function(n,a,r,o,l){l.cx=n+r/2,l.cy=a+o/2,l.width=r,l.height=o}},symbolBuildProxies={};each$f(symbolCtors,function(n,a){symbolBuildProxies[a]=new n});var SymbolClz$1=Path$1.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,a,r){var o=calculateTextPosition(n,a,r),l=this.shape;return l&&l.symbolType==="pin"&&a.position==="inside"&&(o.y=r.y+r.height*.4),o},buildPath:function(n,a,r){var o=a.symbolType;if(o!=="none"){var l=symbolBuildProxies[o];l||(o="rect",l=symbolBuildProxies[o]),symbolShapeMakers[o](a.x,a.y,a.width,a.height,l.shape),l.buildPath(n,l.shape,r)}}});function symbolPathSetColor(n,a){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=n,r.fill=a||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=n:r.fill=n,this.markRedraw()}}function createSymbol$1(n,a,r,o,l,u,c){var h=n.indexOf("empty")===0;h&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var f;return n.indexOf("image://")===0?f=makeImage(n.slice(8),new BoundingRect$1(a,r,o,l),c?"center":"cover"):n.indexOf("path://")===0?f=makePath(n.slice(7),{},new BoundingRect$1(a,r,o,l),c?"center":"cover"):f=new SymbolClz$1({shape:{symbolType:n,x:a,y:r,width:o,height:l}}),f.__isEmptyBrush=h,f.setColor=symbolPathSetColor,u&&f.setColor(u),f}function normalizeSymbolSize(n){return isArray$1(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function normalizeSymbolOffset(n,a){if(n!=null)return isArray$1(n)||(n=[n,n]),[parsePercent(n[0],a[0])||0,parsePercent(retrieve2(n[1],n[0]),a[1])||0]}function isSafeNum(n){return isFinite(n)}function createLinearGradient(n,a,r){var o=a.x==null?0:a.x,l=a.x2==null?1:a.x2,u=a.y==null?0:a.y,c=a.y2==null?0:a.y2;a.global||(o=o*r.width+r.x,l=l*r.width+r.x,u=u*r.height+r.y,c=c*r.height+r.y),o=isSafeNum(o)?o:0,l=isSafeNum(l)?l:1,u=isSafeNum(u)?u:0,c=isSafeNum(c)?c:0;var h=n.createLinearGradient(o,u,l,c);return h}function createRadialGradient(n,a,r){var o=r.width,l=r.height,u=Math.min(o,l),c=a.x==null?.5:a.x,h=a.y==null?.5:a.y,f=a.r==null?.5:a.r;a.global||(c=c*o+r.x,h=h*l+r.y,f=f*u),c=isSafeNum(c)?c:.5,h=isSafeNum(h)?h:.5,f=f>=0&&isSafeNum(f)?f:.5;var v=n.createRadialGradient(c,h,0,c,h,f);return v}function getCanvasGradient(n,a,r){for(var o=a.type==="radial"?createRadialGradient(n,a,r):createLinearGradient(n,a,r),l=a.colorStops,u=0;u<l.length;u++)o.addColorStop(l[u].offset,l[u].color);return o}function isClipPathChanged(n,a){if(n===a||!n&&!a)return!1;if(!n||!a||n.length!==a.length)return!0;for(var r=0;r<n.length;r++)if(n[r]!==a[r])return!0;return!1}function parseInt10(n){return parseInt(n,10)}function getSize$1(n,a,r){var o=["width","height"][a],l=["clientWidth","clientHeight"][a],u=["paddingLeft","paddingTop"][a],c=["paddingRight","paddingBottom"][a];if(r[o]!=null&&r[o]!=="auto")return parseFloat(r[o]);var h=document.defaultView.getComputedStyle(n);return(n[l]||parseInt10(h[o])||parseInt10(n.style[o]))-(parseInt10(h[u])||0)-(parseInt10(h[c])||0)|0}function normalizeLineDash(n,a){return!n||n==="solid"||!(a>0)?null:n==="dashed"?[4*a,2*a]:n==="dotted"?[a]:isNumber(n)?[n]:isArray$1(n)?n:null}function getLineDash(n){var a=n.style,r=a.lineDash&&a.lineWidth>0&&normalizeLineDash(a.lineDash,a.lineWidth),o=a.lineDashOffset;if(r){var l=a.strokeNoScale&&n.getLineScale?n.getLineScale():1;l&&l!==1&&(r=map$1(r,function(u){return u/l}),o/=l)}return[r,o]}var pathProxyForDraw=new PathProxy$1(!0);function styleHasStroke(n){var a=n.stroke;return!(a==null||a==="none"||!(n.lineWidth>0))}function isValidStrokeFillStyle(n){return typeof n=="string"&&n!=="none"}function styleHasFill(n){var a=n.fill;return a!=null&&a!=="none"}function doFillPath(n,a){if(a.fillOpacity!=null&&a.fillOpacity!==1){var r=n.globalAlpha;n.globalAlpha=a.fillOpacity*a.opacity,n.fill(),n.globalAlpha=r}else n.fill()}function doStrokePath(n,a){if(a.strokeOpacity!=null&&a.strokeOpacity!==1){var r=n.globalAlpha;n.globalAlpha=a.strokeOpacity*a.opacity,n.stroke(),n.globalAlpha=r}else n.stroke()}function createCanvasPattern(n,a,r){var o=createOrUpdateImage(a.image,a.__image,r);if(isImageReady(o)){var l=n.createPattern(o,a.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var u=new DOMMatrix;u.translateSelf(a.x||0,a.y||0),u.rotateSelf(0,0,(a.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(a.scaleX||1,a.scaleY||1),l.setTransform(u)}return l}}function brushPath(n,a,r,o){var l,u=styleHasStroke(r),c=styleHasFill(r),h=r.strokePercent,f=h<1,v=!a.path;(!a.silent||f)&&v&&a.createPathProxy();var d=a.path||pathProxyForDraw,p=a.__dirty;if(!o){var g=r.fill,y=r.stroke,_=c&&!!g.colorStops,S=u&&!!y.colorStops,x=c&&!!g.image,T=u&&!!y.image,A=void 0,b=void 0,C=void 0,E=void 0,w=void 0;(_||S)&&(w=a.getBoundingRect()),_&&(A=p?getCanvasGradient(n,g,w):a.__canvasFillGradient,a.__canvasFillGradient=A),S&&(b=p?getCanvasGradient(n,y,w):a.__canvasStrokeGradient,a.__canvasStrokeGradient=b),x&&(C=p||!a.__canvasFillPattern?createCanvasPattern(n,g,a):a.__canvasFillPattern,a.__canvasFillPattern=C),T&&(E=p||!a.__canvasStrokePattern?createCanvasPattern(n,y,a):a.__canvasStrokePattern,a.__canvasStrokePattern=C),_?n.fillStyle=A:x&&(C?n.fillStyle=C:c=!1),S?n.strokeStyle=b:T&&(E?n.strokeStyle=E:u=!1)}var D=a.getGlobalScale();d.setScale(D[0],D[1],a.segmentIgnoreThreshold);var M,P;n.setLineDash&&r.lineDash&&(l=getLineDash(a),M=l[0],P=l[1]);var L=!0;(v||p&SHAPE_CHANGED_BIT)&&(d.setDPR(n.dpr),f?d.setContext(null):(d.setContext(n),L=!1),d.reset(),a.buildPath(d,a.shape,o),d.toStatic(),a.pathUpdated()),L&&d.rebuildPath(n,f?h:1),M&&(n.setLineDash(M),n.lineDashOffset=P),o||(r.strokeFirst?(u&&doStrokePath(n,r),c&&doFillPath(n,r)):(c&&doFillPath(n,r),u&&doStrokePath(n,r))),M&&n.setLineDash([])}function brushImage(n,a,r){var o=a.__image=createOrUpdateImage(r.image,a.__image,a,a.onload);if(!(!o||!isImageReady(o))){var l=r.x||0,u=r.y||0,c=a.getWidth(),h=a.getHeight(),f=o.width/o.height;if(c==null&&h!=null?c=h*f:h==null&&c!=null?h=c/f:c==null&&h==null&&(c=o.width,h=o.height),r.sWidth&&r.sHeight){var v=r.sx||0,d=r.sy||0;n.drawImage(o,v,d,r.sWidth,r.sHeight,l,u,c,h)}else if(r.sx&&r.sy){var v=r.sx,d=r.sy,p=c-v,g=h-d;n.drawImage(o,v,d,p,g,l,u,c,h)}else n.drawImage(o,l,u,c,h)}}function brushText(n,a,r){var o,l=r.text;if(l!=null&&(l+=""),l){n.font=r.font||DEFAULT_FONT,n.textAlign=r.textAlign,n.textBaseline=r.textBaseline;var u=void 0,c=void 0;n.setLineDash&&r.lineDash&&(o=getLineDash(a),u=o[0],c=o[1]),u&&(n.setLineDash(u),n.lineDashOffset=c),r.strokeFirst?(styleHasStroke(r)&&n.strokeText(l,r.x,r.y),styleHasFill(r)&&n.fillText(l,r.x,r.y)):(styleHasFill(r)&&n.fillText(l,r.x,r.y),styleHasStroke(r)&&n.strokeText(l,r.x,r.y)),u&&n.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(n,a,r,o,l){var u=!1;if(!o&&(r=r||{},a===r))return!1;if(o||a.opacity!==r.opacity){flushPathDrawn(n,l),u=!0;var c=Math.max(Math.min(a.opacity,1),0);n.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(o||a.blend!==r.blend)&&(u||(flushPathDrawn(n,l),u=!0),n.globalCompositeOperation=a.blend||DEFAULT_COMMON_STYLE.blend);for(var h=0;h<SHADOW_NUMBER_PROPS.length;h++){var f=SHADOW_NUMBER_PROPS[h];(o||a[f]!==r[f])&&(u||(flushPathDrawn(n,l),u=!0),n[f]=n.dpr*(a[f]||0))}return(o||a.shadowColor!==r.shadowColor)&&(u||(flushPathDrawn(n,l),u=!0),n.shadowColor=a.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(n,a,r,o,l){var u=getStyle(a,l.inHover),c=o?null:r&&getStyle(r,l.inHover)||{};if(u===c)return!1;var h=bindCommonProps(n,u,c,o,l);if((o||u.fill!==c.fill)&&(h||(flushPathDrawn(n,l),h=!0),isValidStrokeFillStyle(u.fill)&&(n.fillStyle=u.fill)),(o||u.stroke!==c.stroke)&&(h||(flushPathDrawn(n,l),h=!0),isValidStrokeFillStyle(u.stroke)&&(n.strokeStyle=u.stroke)),(o||u.opacity!==c.opacity)&&(h||(flushPathDrawn(n,l),h=!0),n.globalAlpha=u.opacity==null?1:u.opacity),a.hasStroke()){var f=u.lineWidth,v=f/(u.strokeNoScale&&a.getLineScale?a.getLineScale():1);n.lineWidth!==v&&(h||(flushPathDrawn(n,l),h=!0),n.lineWidth=v)}for(var d=0;d<STROKE_PROPS.length;d++){var p=STROKE_PROPS[d],g=p[0];(o||u[g]!==c[g])&&(h||(flushPathDrawn(n,l),h=!0),n[g]=u[g]||p[1])}return h}function bindImageStyle(n,a,r,o,l){return bindCommonProps(n,getStyle(a,l.inHover),r&&getStyle(r,l.inHover),o,l)}function setContextTransform(n,a){var r=a.transform,o=n.dpr||1;r?n.setTransform(o*r[0],o*r[1],o*r[2],o*r[3],o*r[4],o*r[5]):n.setTransform(o,0,0,o,0,0)}function updateClipStatus(n,a,r){for(var o=!1,l=0;l<n.length;l++){var u=n[l];o=o||u.isZeroArea(),setContextTransform(a,u),a.beginPath(),u.buildPath(a,u.shape),a.clip()}r.allClipped=o}function isTransformChanged(n,a){return n&&a?n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||n[3]!==a[3]||n[4]!==a[4]||n[5]!==a[5]:!(!n&&!a)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(n){var a=styleHasFill(n),r=styleHasStroke(n);return!(n.lineDash||!(+a^+r)||a&&typeof n.fill!="string"||r&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function flushPathDrawn(n,a){a.batchFill&&n.fill(),a.batchStroke&&n.stroke(),a.batchFill="",a.batchStroke=""}function getStyle(n,a){return a&&n.__hoverStyle||n.style}function brushSingle(n,a){brush$1(n,a,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(n,a,r,o){var l=a.transform;if(!a.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){a.__dirty&=~REDRAW_BIT,a.__isRendered=!1;return}var u=a.__clipPaths,c=r.prevElClipPaths,h=!1,f=!1;if((!c||isClipPathChanged(u,c))&&(c&&c.length&&(flushPathDrawn(n,r),n.restore(),f=h=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),u&&u.length&&(flushPathDrawn(n,r),n.save(),updateClipStatus(u,n,r),h=!0),r.prevElClipPaths=u),r.allClipped){a.__isRendered=!1;return}a.beforeBrush&&a.beforeBrush(),a.innerBeforeBrush();var v=r.prevEl;v||(f=h=!0);var d=a instanceof Path$1&&a.autoBatch&&canPathBatch(a.style);h||isTransformChanged(l,v.transform)?(flushPathDrawn(n,r),setContextTransform(n,a)):d||flushPathDrawn(n,r);var p=getStyle(a,r.inHover);a instanceof Path$1?(r.lastDrawType!==DRAW_TYPE_PATH&&(f=!0,r.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(n,a,v,f,r),(!d||!r.batchFill&&!r.batchStroke)&&n.beginPath(),brushPath(n,a,p,d),d&&(r.batchFill=p.fill||"",r.batchStroke=p.stroke||"")):a instanceof TSpan$1?(r.lastDrawType!==DRAW_TYPE_TEXT&&(f=!0,r.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(n,a,v,f,r),brushText(n,a,p)):a instanceof ZRImage$1?(r.lastDrawType!==DRAW_TYPE_IMAGE&&(f=!0,r.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(n,a,v,f,r),brushImage(n,a,p)):a.getTemporalDisplayables&&(r.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(f=!0,r.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(n,a,r)),d&&o&&flushPathDrawn(n,r),a.innerAfterBrush(),a.afterBrush&&a.afterBrush(),r.prevEl=a,a.__dirty=0,a.__isRendered=!0}function brushIncremental(n,a,r){var o=a.getDisplayables(),l=a.getTemporalDisplayables();n.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},c,h;for(c=a.getCursor(),h=o.length;c<h;c++){var f=o[c];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),brush$1(n,f,u,c===h-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),u.prevEl=f}for(var v=0,d=l.length;v<d;v++){var f=l[v];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),brush$1(n,f,u,v===d-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),u.prevEl=f}a.clearTemporalDisplayables(),a.notClear=!0,n.restore()}var decalMap=new WeakMap$1,decalCache=new LRU$1(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(n,a){if(n==="none")return null;var r=a.getDevicePixelRatio(),o=a.getZr(),l=o.painter.type==="svg";n.dirty&&decalMap.delete(n);var u=decalMap.get(n);if(u)return u;var c=defaults(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var h={repeat:"repeat"};return f(h),h.rotation=c.rotation,h.scaleX=h.scaleY=l?1:1/r,decalMap.set(n,h),n.dirty=!1,h;function f(v){for(var d=[r],p=!0,g=0;g<decalKeys.length;++g){var y=c[decalKeys[g]];if(y!=null&&!isArray$1(y)&&!isString(y)&&!isNumber(y)&&typeof y!="boolean"){p=!1;break}d.push(y)}var _;if(p){_=d.join(",")+(l?"-svg":"");var S=decalCache.get(_);S&&(l?v.svgElement=S:v.image=S)}var x=normalizeDashArrayX(c.dashArrayX),T=normalizeDashArrayY(c.dashArrayY),A=normalizeSymbolArray(c.symbol),b=getLineBlockLengthX(x),C=getLineBlockLengthY(T),E=!l&&platformApi.createCanvas(),w=l&&{tag:"g",attrs:{},key:"dcl",children:[]},D=P(),M;E&&(E.width=D.width*r,E.height=D.height*r,M=E.getContext("2d")),L(),p&&decalCache.put(_,E||w),v.image=E,v.svgElement=w,v.svgWidth=D.width,v.svgHeight=D.height;function P(){for(var I=1,R=0,O=b.length;R<O;++R)I=getLeastCommonMultiple(I,b[R]);for(var N=1,R=0,O=A.length;R<O;++R)N=getLeastCommonMultiple(N,A[R].length);I*=N;var V=C*b.length*A.length;if({}.NODE_ENV!=="production"){var B=function(G){console.warn("Calculated decal size is greater than "+G+" due to decal option settings so "+G+" is used for the decal size. Please consider changing the decal option to make a smaller decal or set "+G+" to be larger to avoid incontinuity.")};I>c.maxTileWidth&&B("maxTileWidth"),V>c.maxTileHeight&&B("maxTileHeight")}return{width:Math.max(1,Math.min(I,c.maxTileWidth)),height:Math.max(1,Math.min(V,c.maxTileHeight))}}function L(){M&&(M.clearRect(0,0,E.width,E.height),c.backgroundColor&&(M.fillStyle=c.backgroundColor,M.fillRect(0,0,E.width,E.height)));for(var I=0,R=0;R<T.length;++R)I+=T[R];if(I<=0)return;for(var O=-C,N=0,V=0,B=0;O<D.height;){if(N%2===0){for(var G=V/2%A.length,F=0,z=0,H=0;F<D.width*2;){for(var U=0,R=0;R<x[B].length;++R)U+=x[B][R];if(U<=0)break;if(z%2===0){var Y=(1-c.symbolSize)*.5,Z=F+x[B][z]*Y,X=O+T[N]*Y,J=x[B][z]*c.symbolSize,te=T[N]*c.symbolSize,Q=H/2%A[G].length;q(Z,X,J,te,A[G][Q])}F+=x[B][z],++H,++z,z===x[B].length&&(z=0)}++B,B===x.length&&(B=0)}O+=T[N],++V,++N,N===T.length&&(N=0)}function q(ee,K,W,j,ae){var re=l?1:r,ne=createSymbol$1(ae,ee*re,K*re,W*re,j*re,c.color,c.symbolKeepAspect);if(l){var ie=o.painter.renderOneToVNode(ne);ie&&w.children.push(ie)}else brushSingle(M,ne)}}}}function normalizeSymbolArray(n){if(!n||n.length===0)return[["rect"]];if(isString(n))return[[n]];for(var a=!0,r=0;r<n.length;++r)if(!isString(n[r])){a=!1;break}if(a)return normalizeSymbolArray([n]);for(var o=[],r=0;r<n.length;++r)isString(n[r])?o.push([n[r]]):o.push(n[r]);return o}function normalizeDashArrayX(n){if(!n||n.length===0)return[[0,0]];if(isNumber(n)){var a=Math.ceil(n);return[[a,a]]}for(var r=!0,o=0;o<n.length;++o)if(!isNumber(n[o])){r=!1;break}if(r)return normalizeDashArrayX([n]);for(var l=[],o=0;o<n.length;++o)if(isNumber(n[o])){var a=Math.ceil(n[o]);l.push([a,a])}else{var a=map$1(n[o],function(h){return Math.ceil(h)});a.length%2===1?l.push(a.concat(a)):l.push(a)}return l}function normalizeDashArrayY(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(isNumber(n)){var a=Math.ceil(n);return[a,a]}var r=map$1(n,function(o){return Math.ceil(o)});return n.length%2?r.concat(r):r}function getLineBlockLengthX(n){return map$1(n,function(a){return getLineBlockLengthY(a)})}function getLineBlockLengthY(n){for(var a=0,r=0;r<n.length;++r)a+=n[r];return n.length%2===1?a*2:a}function decalVisual(n,a){n.eachRawSeries(function(r){if(!n.isSeriesFiltered(r)){var o=r.getData();o.hasItemVisual()&&o.each(function(c){var h=o.getItemVisual(c,"decal");if(h){var f=o.ensureUniqueItemVisual(c,"style");f.decal=createOrUpdatePatternFromDecal(h,a)}});var l=o.getVisual("decal");if(l){var u=o.getVisual("style");u.decal=createOrUpdatePatternFromDecal(l,a)}}})}var lifecycle=new Eventful$1;const lifecycle$1=lifecycle;var implsStore={};function registerImpl(n,a){({}).NODE_ENV!=="production"&&implsStore[n]&&error("Already has an implementation of "+n+"."),implsStore[n]=a}function getImpl(n){return{}.NODE_ENV!=="production"&&(implsStore[n]||error("Implementation of "+n+" doesn't exists.")),implsStore[n]}var version="5.4.3",dependencies={zrender:"5.4.4"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(n){return function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];if(this.isDisposed()){disposedWarning(this.id);return}return toLowercaseNameAndCallEventful(this,n,a)}}function createRegisterEventWithLowercaseMessageCenter(n){return function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return toLowercaseNameAndCallEventful(this,n,a)}}function toLowercaseNameAndCallEventful(n,a,r){return r[0]=r[0]&&r[0].toLowerCase(),Eventful$1.prototype[a].apply(n,r)}var MessageCenter=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a}(Eventful$1),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on"),messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],l=l||{},isString(o)&&(o=themeStorage[o]),u._dom=r;var c="canvas",h="auto",f=!1;if({}.NODE_ENV!=="production"){var v=env$1.hasGlobalWindow?window:global;c=v.__ECHARTS__DEFAULT__RENDERER__||c,h=retrieve2(v.__ECHARTS__DEFAULT__COARSE_POINTER,h);var d=v.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;f=d==null?f:d}var p=u._zr=init$2(r,{renderer:l.renderer||c,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,f),useCoarsePointer:retrieve2(l.useCoarsePointer,h),pointerSize:l.pointerSize});u._ssr=l.ssr,u._throttledZrFlush=throttle(bind$1(p.flush,p),17),o=clone$4(o),o&&globalBackwardCompat(o,!0),u._theme=o,u._locale=createLocaleObject(l.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystem;var g=u._api=createExtensionAPI(u);function y(_,S){return _.__prio-S.__prio}return sort$2(visualFuncs,y),sort$2(dataProcessorFuncs,y),u._scheduler=new Scheduler$1(u,g,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),p.animation.on("frame",u._onframe,u),bindRenderedEvent(p,u),bindMouseEvent(p,u),setAsPrimitive(u),u}return a.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var r=this._scheduler;if(this[PENDING_UPDATE]){var o=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(f){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,f}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}else if(r.unfinished){var l=TEST_FRAME_REMAIN_TIME,u=this._model,c=this._api;r.unfinished=!1;do{var h=+new Date;r.performSeriesTasks(u),r.performDataProcessorTasks(u),updateStreamModes(this,u),r.performVisualTasks(u),renderSeries(this,this._model,c,"remain",{}),l-=+new Date-h}while(l>0&&r.unfinished);r.unfinished||this._zr.flush()}}},a.prototype.getDom=function(){return this._dom},a.prototype.getId=function(){return this.id},a.prototype.getZr=function(){return this._zr},a.prototype.isSSR=function(){return this._ssr},a.prototype.setOption=function(r,o,l){if(this[IN_MAIN_PROCESS_KEY]){({}).NODE_ENV!=="production"&&error("`setOption` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}var u,c,h;if(isObject$3(o)&&(l=o.lazyUpdate,u=o.silent,c=o.replaceMerge,h=o.transition,o=o.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||o){var f=new OptionManager$1(this._api),v=this._theme,d=this._model=new GlobalModel$1;d.scheduler=this._scheduler,d.ssr=this._ssr,d.init(null,null,null,v,this._locale,f)}this._model.setOption(r,{replaceMerge:c},optionPreprocessorFuncs);var p={seriesTransition:h,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:u,updateParams:p},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,p)}catch(g){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,g}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}},a.prototype.setTheme=function(){deprecateLog("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},a.prototype.getModel=function(){return this._model},a.prototype.getOption=function(){return this._model&&this._model.getOption()},a.prototype.getWidth=function(){return this._zr.getWidth()},a.prototype.getHeight=function(){return this._zr.getHeight()},a.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env$1.hasGlobalWindow&&window.devicePixelRatio||1},a.prototype.getRenderedCanvas=function(r){return{}.NODE_ENV!=="production"&&deprecateReplaceLog("getRenderedCanvas","renderToCanvas"),this.renderToCanvas(r)},a.prototype.renderToCanvas=function(r){r=r||{};var o=this._zr.painter;if({}.NODE_ENV!=="production"&&o.type!=="canvas")throw new Error("renderToCanvas can only be used in the canvas renderer.");return o.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},a.prototype.renderToSVGString=function(r){r=r||{};var o=this._zr.painter;if({}.NODE_ENV!=="production"&&o.type!=="svg")throw new Error("renderToSVGString can only be used in the svg renderer.");return o.renderToString({useViewBox:r.useViewBox})},a.prototype.getSvgDataURL=function(){if(!!env$1.svgSupported){var r=this._zr,o=r.storage.getDisplayList();return each$f(o,function(l){l.stopAnimation(null,!0)}),r.painter.toDataURL()}},a.prototype.getDataURL=function(r){if(this._disposed){disposedWarning(this.id);return}r=r||{};var o=r.excludeComponents,l=this._model,u=[],c=this;each$f(o,function(f){l.eachComponent({mainType:f},function(v){var d=c._componentsMap[v.__viewId];d.group.ignore||(u.push(d),d.group.ignore=!0)})});var h=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return each$f(u,function(f){f.group.ignore=!1}),h},a.prototype.getConnectedDataURL=function(r){if(this._disposed){disposedWarning(this.id);return}var o=r.type==="svg",l=this.group,u=Math.min,c=Math.max,h=1/0;if(connectedGroups[l]){var f=h,v=h,d=-h,p=-h,g=[],y=r&&r.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(b,C){if(b.group===l){var E=o?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(clone$4(r)),w=b.getDom().getBoundingClientRect();f=u(w.left,f),v=u(w.top,v),d=c(w.right,d),p=c(w.bottom,p),g.push({dom:E,left:w.left,top:w.top})}}),f*=y,v*=y,d*=y,p*=y;var _=d-f,S=p-v,x=platformApi.createCanvas(),T=init$2(x,{renderer:o?"svg":"canvas"});if(T.resize({width:_,height:S}),o){var A="";return each$f(g,function(b){var C=b.left-f,E=b.top-v;A+='<g transform="translate('+C+","+E+')">'+b.dom+"</g>"}),T.painter.getSvgRoot().innerHTML=A,r.connectedBackgroundColor&&T.painter.setBackgroundColor(r.connectedBackgroundColor),T.refreshImmediately(),T.painter.toDataURL()}else return r.connectedBackgroundColor&&T.add(new Rect$3({shape:{x:0,y:0,width:_,height:S},style:{fill:r.connectedBackgroundColor}})),each$f(g,function(b){var C=new ZRImage$1({style:{x:b.left*y-f,y:b.top*y-v,image:b.dom}});T.add(C)}),T.refreshImmediately(),x.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},a.prototype.convertToPixel=function(r,o){return doConvertPixel(this,"convertToPixel",r,o)},a.prototype.convertFromPixel=function(r,o){return doConvertPixel(this,"convertFromPixel",r,o)},a.prototype.containPixel=function(r,o){if(this._disposed){disposedWarning(this.id);return}var l=this._model,u,c=parseFinder$1(l,r);return each$f(c,function(h,f){f.indexOf("Models")>=0&&each$f(h,function(v){var d=v.coordinateSystem;if(d&&d.containPoint)u=u||!!d.containPoint(o);else if(f==="seriesModels"){var p=this._chartsMap[v.__viewId];p&&p.containPoint?u=u||p.containPoint(o,v):{}.NODE_ENV!=="production"&&warn(f+": "+(p?"The found component do not support containPoint.":"No view mapping to the found component."))}else({}).NODE_ENV!=="production"&&warn(f+": containPoint is not supported")},this)},this),!!u},a.prototype.getVisual=function(r,o){var l=this._model,u=parseFinder$1(l,r,{defaultMainType:"series"}),c=u.seriesModel;({}).NODE_ENV!=="production"&&(c||warn("There is no specified series model"));var h=c.getData(),f=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?h.indexOfRawIndex(u.dataIndex):null;return f!=null?getItemVisualFromData(h,f,o):getVisualFromData(h,o)},a.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},a.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},a.prototype._initEvents=function(){var r=this;each$f(MOUSE_EVENT_NAMES,function(o){var l=function(u){var c=r.getModel(),h=u.target,f,v=o==="globalout";if(v?f={}:h&&findEventDispatcher(h,function(_){var S=getECData(_);if(S&&S.dataIndex!=null){var x=S.dataModel||c.getSeriesByIndex(S.seriesIndex);return f=x&&x.getDataParams(S.dataIndex,S.dataType,h)||{},!0}else if(S.eventData)return f=extend({},S.eventData),!0},!0),f){var d=f.componentType,p=f.componentIndex;(d==="markLine"||d==="markPoint"||d==="markArea")&&(d="series",p=f.seriesIndex);var g=d&&p!=null&&c.getComponent(d,p),y=g&&r[g.mainType==="series"?"_chartsMap":"_componentsMap"][g.__viewId];({}).NODE_ENV!=="production"&&!v&&!(g&&y)&&warn("model or view can not be found by params"),f.event=u,f.type=o,r._$eventProcessor.eventInfo={targetEl:h,packedEvent:f,model:g,view:y},r.trigger(o,f)}};l.zrEventfulCallAtLast=!0,r._zr.on(o,l,r)}),each$f(eventActionMap,function(o,l){r._messageCenter.on(l,function(u){this.trigger(l,u)},r)}),each$f(["selectchanged"],function(o){r._messageCenter.on(o,function(l){this.trigger(o,l)},r)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},a.prototype.isDisposed=function(){return this._disposed},a.prototype.clear=function(){if(this._disposed){disposedWarning(this.id);return}this.setOption({series:[]},!0)},a.prototype.dispose=function(){if(this._disposed){disposedWarning(this.id);return}this._disposed=!0;var r=this.getDom();r&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var o=this,l=o._api,u=o._model;each$f(o._componentsViews,function(c){c.dispose(u,l)}),each$f(o._chartsViews,function(c){c.dispose(u,l)}),o._zr.dispose(),o._dom=o._model=o._chartsMap=o._componentsMap=o._chartsViews=o._componentsViews=o._scheduler=o._api=o._zr=o._throttledZrFlush=o._theme=o._coordSysMgr=o._messageCenter=null,delete instances[o.id]},a.prototype.resize=function(r){if(this[IN_MAIN_PROCESS_KEY]){({}).NODE_ENV!=="production"&&error("`resize` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}this._zr.resize(r);var o=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!o){var l=o.resetOption("media"),u=r&&r.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},r&&r.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}},a.prototype.showLoading=function(r,o){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(r)&&(o=r,r=""),r=r||"default",this.hideLoading(),!loadingEffects[r]){({}).NODE_ENV!=="production"&&warn("Loading effects "+r+" not exists.");return}var l=loadingEffects[r](this._api,o),u=this._zr;this._loadingFX=l,u.add(l)},a.prototype.hideLoading=function(){if(this._disposed){disposedWarning(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},a.prototype.makeActionFromEvent=function(r){var o=extend({},r);return o.type=eventActionMap[r.type],o},a.prototype.dispatchAction=function(r,o){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(o)||(o={silent:!!o}),!!actions[r.type]&&!!this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(r);return}var l=o.silent;doDispatchAction.call(this,r,l);var u=o.flush;u?this._zr.flush():u!==!1&&env$1.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},a.prototype.updateLabelLayout=function(){lifecycle$1.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},a.prototype.appendData=function(r){if(this._disposed){disposedWarning(this.id);return}var o=r.seriesIndex,l=this.getModel(),u=l.getSeriesByIndex(o);({}).NODE_ENV!=="production"&&assert(r.data&&u),u.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},a.internalField=function(){prepare=function(p){var g=p._scheduler;g.restorePipelines(p._model),g.prepareStageTasks(),prepareView(p,!0),prepareView(p,!1),g.plan()},prepareView=function(p,g){for(var y=p._model,_=p._scheduler,S=g?p._componentsViews:p._chartsViews,x=g?p._componentsMap:p._chartsMap,T=p._zr,A=p._api,b=0;b<S.length;b++)S[b].__alive=!1;g?y.eachComponent(function(w,D){w!=="series"&&C(D)}):y.eachSeries(C);function C(w){var D=w.__requireNewView;w.__requireNewView=!1;var M="_ec_"+w.id+"_"+w.type,P=!D&&x[M];if(!P){var L=parseClassType(w.type),I=g?ComponentView$1.getClass(L.main,L.sub):ChartView$1.getClass(L.sub);({}).NODE_ENV!=="production"&&assert(I,L.sub+" does not exist."),P=new I,P.init(y,A),x[M]=P,S.push(P),T.add(P.group)}w.__viewId=P.__id=M,P.__alive=!0,P.__model=w,P.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!g&&_.prepareView(P,w,y,A)}for(var b=0;b<S.length;){var E=S[b];E.__alive?b++:(!g&&E.renderTask.dispose(),T.remove(E.group),E.dispose(y,A),S.splice(b,1),x[E.__id]===E&&delete x[E.__id],E.__id=E.group.__ecComponentInfo=null)}},updateDirectly=function(p,g,y,_,S){var x=p._model;if(x.setUpdatePayload(y),!_){each$f([].concat(p._componentsViews).concat(p._chartsViews),E);return}var T={};T[_+"Id"]=y[_+"Id"],T[_+"Index"]=y[_+"Index"],T[_+"Name"]=y[_+"Name"];var A={mainType:_,query:T};S&&(A.subType=S);var b=y.excludeSeriesId,C;b!=null&&(C=createHashMap(),each$f(normalizeToArray(b),function(w){var D=convertOptionIdName(w,null);D!=null&&C.set(D,!0)})),x&&x.eachComponent(A,function(w){var D=C&&C.get(w.id)!=null;if(!D)if(isHighDownPayload(y))if(w instanceof SeriesModel$1)y.type===HIGHLIGHT_ACTION_TYPE&&!y.notBlur&&!w.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(w,y,p._api);else{var M=findComponentHighDownDispatchers(w.mainType,w.componentIndex,y.name,p._api),P=M.focusSelf,L=M.dispatchers;y.type===HIGHLIGHT_ACTION_TYPE&&P&&!y.notBlur&&blurComponent(w.mainType,w.componentIndex,p._api),L&&each$f(L,function(I){y.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(I):leaveEmphasis(I)})}else isSelectChangePayload(y)&&w instanceof SeriesModel$1&&(toggleSelectionFromPayload(w,y,p._api),updateSeriesElementSelection(w),markStatusToUpdate(p))},p),x&&x.eachComponent(A,function(w){var D=C&&C.get(w.id)!=null;D||E(p[_==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},p);function E(w){w&&w.__alive&&w[g]&&w[g](w.__model,x,p._api,y)}},updateMethods={prepareAndUpdate:function(p){prepare(this),updateMethods.update.call(this,p,{optionChanged:p.newOption!=null})},update:function(p,g){var y=this._model,_=this._api,S=this._zr,x=this._coordSysMgr,T=this._scheduler;if(!!y){y.setUpdatePayload(p),T.restoreData(y,p),T.performSeriesTasks(y),x.create(y,_),T.performDataProcessorTasks(y,p),updateStreamModes(this,y),x.update(y,_),r(y),T.performVisualTasks(y,p),render(this,y,_,p,g);var A=y.get("backgroundColor")||"transparent",b=y.get("darkMode");S.setBackgroundColor(A),b!=null&&b!=="auto"&&S.setDarkMode(b),lifecycle$1.trigger("afterupdate",y,_)}},updateTransform:function(p){var g=this,y=this._model,_=this._api;if(!!y){y.setUpdatePayload(p);var S=[];y.eachComponent(function(T,A){if(T!=="series"){var b=g.getViewOfComponentModel(A);if(b&&b.__alive)if(b.updateTransform){var C=b.updateTransform(A,y,_,p);C&&C.update&&S.push(b)}else S.push(b)}});var x=createHashMap();y.eachSeries(function(T){var A=g._chartsMap[T.__viewId];if(A.updateTransform){var b=A.updateTransform(T,y,_,p);b&&b.update&&x.set(T.uid,1)}else x.set(T.uid,1)}),r(y),this._scheduler.performVisualTasks(y,p,{setDirty:!0,dirtyMap:x}),renderSeries(this,y,_,p,{},x),lifecycle$1.trigger("afterupdate",y,_)}},updateView:function(p){var g=this._model;!g||(g.setUpdatePayload(p),ChartView$1.markUpdateMethod(p,"updateView"),r(g),this._scheduler.performVisualTasks(g,p,{setDirty:!0}),render(this,g,this._api,p,{}),lifecycle$1.trigger("afterupdate",g,this._api))},updateVisual:function(p){var g=this,y=this._model;!y||(y.setUpdatePayload(p),y.eachSeries(function(_){_.getData().clearAllVisual()}),ChartView$1.markUpdateMethod(p,"updateVisual"),r(y),this._scheduler.performVisualTasks(y,p,{visualType:"visual",setDirty:!0}),y.eachComponent(function(_,S){if(_!=="series"){var x=g.getViewOfComponentModel(S);x&&x.__alive&&x.updateVisual(S,y,g._api,p)}}),y.eachSeries(function(_){var S=g._chartsMap[_.__viewId];S.updateVisual(_,y,g._api,p)}),lifecycle$1.trigger("afterupdate",y,this._api))},updateLayout:function(p){updateMethods.update.call(this,p)}},doConvertPixel=function(p,g,y,_){if(p._disposed){disposedWarning(p.id);return}for(var S=p._model,x=p._coordSysMgr.getCoordinateSystems(),T,A=parseFinder$1(S,y),b=0;b<x.length;b++){var C=x[b];if(C[g]&&(T=C[g](S,A,_))!=null)return T}({}).NODE_ENV!=="production"&&warn("No coordinate system that supports "+g+" found by the given finder.")},updateStreamModes=function(p,g){var y=p._chartsMap,_=p._scheduler;g.eachSeries(function(S){_.updateStreamModes(S,y[S.__viewId])})},doDispatchAction=function(p,g){var y=this,_=this.getModel(),S=p.type,x=p.escapeConnect,T=actions[S],A=T.actionInfo,b=(A.update||"update").split(":"),C=b.pop(),E=b[0]!=null&&parseClassType(b[0]);this[IN_MAIN_PROCESS_KEY]=!0;var w=[p],D=!1;p.batch&&(D=!0,w=map$1(p.batch,function(N){return N=defaults(extend({},N),p),N.batch=null,N}));var M=[],P,L=isSelectChangePayload(p),I=isHighDownPayload(p);if(I&&allLeaveBlur(this._api),each$f(w,function(N){if(P=T.action(N,y._model,y._api),P=P||extend({},N),P.type=A.event||P.type,M.push(P),I){var V=preParseFinder(p),B=V.queryOptionMap,G=V.mainTypeSpecified,F=G?B.keys()[0]:"series";updateDirectly(y,C,N,F),markStatusToUpdate(y)}else L?(updateDirectly(y,C,N,"series"),markStatusToUpdate(y)):E&&updateDirectly(y,C,N,E.main,E.sub)}),C!=="none"&&!I&&!L&&!E)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,p),this[PENDING_UPDATE]=null):updateMethods[C].call(this,p)}catch(N){throw this[IN_MAIN_PROCESS_KEY]=!1,N}if(D?P={type:A.event||S,escapeConnect:x,batch:M}:P=M[0],this[IN_MAIN_PROCESS_KEY]=!1,!g){var R=this._messageCenter;if(R.trigger(P.type,P),L){var O={type:"selectchanged",escapeConnect:x,selected:getAllSelectedIndices(_),isFromClick:p.isFromClick||!1,fromAction:p.type,fromActionPayload:p};R.trigger(O.type,O)}}},flushPendingActions=function(p){for(var g=this._pendingActions;g.length;){var y=g.shift();doDispatchAction.call(this,y,p)}},triggerUpdatedEvent=function(p){!p&&this.trigger("updated")},bindRenderedEvent=function(p,g){p.on("rendered",function(y){g.trigger("rendered",y),p.animation.isFinished()&&!g[PENDING_UPDATE]&&!g._scheduler.unfinished&&!g._pendingActions.length&&g.trigger("finished")})},bindMouseEvent=function(p,g){p.on("mouseover",function(y){var _=y.target,S=findEventDispatcher(_,isHighDownDispatcher);S&&(handleGlobalMouseOverForHighDown(S,y,g._api),markStatusToUpdate(g))}).on("mouseout",function(y){var _=y.target,S=findEventDispatcher(_,isHighDownDispatcher);S&&(handleGlobalMouseOutForHighDown(S,y,g._api),markStatusToUpdate(g))}).on("click",function(y){var _=y.target,S=findEventDispatcher(_,function(A){return getECData(A).dataIndex!=null},!0);if(S){var x=S.selected?"unselect":"select",T=getECData(S);g._api.dispatchAction({type:x,dataType:T.dataType,dataIndexInside:T.dataIndex,seriesIndex:T.seriesIndex,isFromClick:!0})}})};function r(p){p.clearColorPalette(),p.eachSeries(function(g){g.clearColorPalette()})}function o(p){var g=[],y=[],_=!1;if(p.eachComponent(function(A,b){var C=b.get("zlevel")||0,E=b.get("z")||0,w=b.getZLevelKey();_=_||!!w,(A==="series"?y:g).push({zlevel:C,z:E,idx:b.componentIndex,type:A,key:w})}),_){var S=g.concat(y),x,T;sort$2(S,function(A,b){return A.zlevel===b.zlevel?A.z-b.z:A.zlevel-b.zlevel}),each$f(S,function(A){var b=p.getComponent(A.type,A.idx),C=A.zlevel,E=A.key;x!=null&&(C=Math.max(x,C)),E?(C===x&&E!==T&&C++,T=E):T&&(C===x&&C++,T=""),x=C,b.setZLevel(C)})}}render=function(p,g,y,_,S){o(g),renderComponents(p,g,y,_,S),each$f(p._chartsViews,function(x){x.__alive=!1}),renderSeries(p,g,y,_,S),each$f(p._chartsViews,function(x){x.__alive||x.remove(g,y)})},renderComponents=function(p,g,y,_,S,x){each$f(x||p._componentsViews,function(T){var A=T.__model;v(A,T),T.render(A,g,y,_),h(A,T),d(A,T)})},renderSeries=function(p,g,y,_,S,x){var T=p._scheduler;S=extend(S||{},{updatedSeries:g.getSeries()}),lifecycle$1.trigger("series:beforeupdate",g,y,S);var A=!1;g.eachSeries(function(b){var C=p._chartsMap[b.__viewId];C.__alive=!0;var E=C.renderTask;T.updatePayload(E,_),v(b,C),x&&x.get(b.uid)&&E.dirty(),E.perform(T.getPerformArgs(E))&&(A=!0),C.group.silent=!!b.get("silent"),c(b,C),updateSeriesElementSelection(b)}),T.unfinished=A||T.unfinished,lifecycle$1.trigger("series:layoutlabels",g,y,S),lifecycle$1.trigger("series:transition",g,y,S),g.eachSeries(function(b){var C=p._chartsMap[b.__viewId];h(b,C),d(b,C)}),u(p,g),lifecycle$1.trigger("series:afterupdate",g,y,S)},markStatusToUpdate=function(p){p[STATUS_NEEDS_UPDATE_KEY]=!0,p.getZr().wakeUp()},applyChangedStates=function(p){!p[STATUS_NEEDS_UPDATE_KEY]||(p.getZr().storage.traverse(function(g){isElementRemoved(g)||l(g)}),p[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(p){for(var g=[],y=p.currentStates,_=0;_<y.length;_++){var S=y[_];S==="emphasis"||S==="blur"||S==="select"||g.push(S)}p.selected&&p.states.select&&g.push("select"),p.hoverState===HOVER_STATE_EMPHASIS&&p.states.emphasis?g.push("emphasis"):p.hoverState===HOVER_STATE_BLUR&&p.states.blur&&g.push("blur"),p.useStates(g)}function u(p,g){var y=p._zr,_=y.storage,S=0;_.traverse(function(x){x.isGroup||S++}),S>g.get("hoverLayerThreshold")&&!env$1.node&&!env$1.worker&&g.eachSeries(function(x){if(!x.preventUsingHoverLayer){var T=p._chartsMap[x.__viewId];T.__alive&&T.eachRendered(function(A){A.states.emphasis&&(A.states.emphasis.hoverLayer=!0)})}})}function c(p,g){var y=p.get("blendMode")||null;g.eachRendered(function(_){_.isGroup||(_.style.blend=y)})}function h(p,g){if(!p.preventAutoZ){var y=p.get("z")||0,_=p.get("zlevel")||0;g.eachRendered(function(S){return f(S,y,_,-1/0),!0})}}function f(p,g,y,_){var S=p.getTextContent(),x=p.getTextGuideLine(),T=p.isGroup;if(T)for(var A=p.childrenRef(),b=0;b<A.length;b++)_=Math.max(f(A[b],g,y,_),_);else p.z=g,p.zlevel=y,_=Math.max(p.z2,_);if(S&&(S.z=g,S.zlevel=y,isFinite(_)&&(S.z2=_+2)),x){var C=p.textGuideLineConfig;x.z=g,x.zlevel=y,isFinite(_)&&(x.z2=_+(C&&C.showAbove?1:-1))}return _}function v(p,g){g.eachRendered(function(y){if(!isElementRemoved(y)){var _=y.getTextContent(),S=y.getTextGuideLine();y.stateTransition&&(y.stateTransition=null),_&&_.stateTransition&&(_.stateTransition=null),S&&S.stateTransition&&(S.stateTransition=null),y.hasState()?(y.prevStates=y.currentStates,y.clearStates()):y.prevStates&&(y.prevStates=null)}})}function d(p,g){var y=p.getModel("stateAnimation"),_=p.isAnimationEnabled(),S=y.get("duration"),x=S>0?{duration:S,delay:y.get("delay"),easing:y.get("easing")}:null;g.eachRendered(function(T){if(T.states&&T.states.emphasis){if(isElementRemoved(T))return;if(T instanceof Path$1&&savePathStates(T),T.__dirty){var A=T.prevStates;A&&T.useStates(A)}if(_){T.stateTransition=x;var b=T.getTextContent(),C=T.getTextGuideLine();b&&(b.stateTransition=x),C&&(C.stateTransition=x)}T.__dirty&&l(T)}})}createExtensionAPI=function(p){return new(function(g){__extends(y,g);function y(){return g!==null&&g.apply(this,arguments)||this}return y.prototype.getCoordinateSystems=function(){return p._coordSysMgr.getCoordinateSystems()},y.prototype.getComponentByElement=function(_){for(;_;){var S=_.__ecComponentInfo;if(S!=null)return p._model.getComponent(S.mainType,S.index);_=_.parent}},y.prototype.enterEmphasis=function(_,S){enterEmphasis(_,S),markStatusToUpdate(p)},y.prototype.leaveEmphasis=function(_,S){leaveEmphasis(_,S),markStatusToUpdate(p)},y.prototype.enterBlur=function(_){enterBlur(_),markStatusToUpdate(p)},y.prototype.leaveBlur=function(_){leaveBlur(_),markStatusToUpdate(p)},y.prototype.enterSelect=function(_){enterSelect(_),markStatusToUpdate(p)},y.prototype.leaveSelect=function(_){leaveSelect(_),markStatusToUpdate(p)},y.prototype.getModel=function(){return p.getModel()},y.prototype.getViewOfComponentModel=function(_){return p.getViewOfComponentModel(_)},y.prototype.getViewOfSeriesModel=function(_){return p.getViewOfSeriesModel(_)},y}(ExtensionAPI$1))(p)},enableConnect=function(p){function g(y,_){for(var S=0;S<y.length;S++){var x=y[S];x[CONNECT_STATUS_KEY]=_}}each$f(eventActionMap,function(y,_){p._messageCenter.on(_,function(S){if(connectedGroups[p.group]&&p[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(S&&S.escapeConnect)return;var x=p.makeActionFromEvent(S),T=[];each$f(instances,function(A){A!==p&&A.group===p.group&&T.push(A)}),g(T,CONNECT_STATUS_PENDING),each$f(T,function(A){A[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&A.dispatchAction(x)}),g(T,CONNECT_STATUS_UPDATED)}})})}}(),a}(Eventful$1),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on"),echartsProto.off=createRegisterEventWithLowercaseECharts("off"),echartsProto.one=function(n,a,r){var o=this;deprecateLog("ECharts#one is deprecated.");function l(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];a&&a.apply&&a.apply(this,u),o.off(n,l)}this.on.call(this,n,l,r)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(n){({}).NODE_ENV!=="production"&&warn("Instance "+n+" has been disposed")}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(n,a,r){var o=!(r&&r.ssr);if(o){if({}.NODE_ENV!=="production"&&!n)throw new Error("Initialize failed: invalid dom.");var l=getInstanceByDom(n);if(l)return{}.NODE_ENV!=="production"&&warn("There is a chart instance already initialized on the dom."),l;({}).NODE_ENV!=="production"&&isDom(n)&&n.nodeName.toUpperCase()!=="CANVAS"&&(!n.clientWidth&&(!r||r.width==null)||!n.clientHeight&&(!r||r.height==null))&&warn("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload.")}var u=new ECharts(n,a,r);return u.id="ec_"+idBase++,instances[u.id]=u,o&&setAttribute(n,DOM_ATTRIBUTE_KEY,u.id),enableConnect(u),lifecycle$1.trigger("afterinit",u),u}function connect(n){if(isArray$1(n)){var a=n;n=null,each$f(a,function(r){r.group!=null&&(n=r.group)}),n=n||"g_"+groupIdBase++,each$f(a,function(r){r.group=n})}return connectedGroups[n]=!0,n}function disconnect(n){connectedGroups[n]=!1}var disConnect=disconnect;function dispose(n){isString(n)?n=instances[n]:n instanceof ECharts||(n=getInstanceByDom(n)),n instanceof ECharts&&!n.isDisposed()&&n.dispose()}function getInstanceByDom(n){return instances[getAttribute(n,DOM_ATTRIBUTE_KEY)]}function getInstanceById(n){return instances[n]}function registerTheme(n,a){themeStorage[n]=a}function registerPreprocessor(n){indexOf(optionPreprocessorFuncs,n)<0&&optionPreprocessorFuncs.push(n)}function registerProcessor(n,a){normalizeRegister(dataProcessorFuncs,n,a,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(n){registerUpdateLifecycle("afterinit",n)}function registerPostUpdate(n){registerUpdateLifecycle("afterupdate",n)}function registerUpdateLifecycle(n,a){lifecycle$1.on(n,a)}function registerAction(n,a,r){isFunction(a)&&(r=a,a="");var o=isObject$3(n)?n.type:[n,n={event:a}][0];n.event=(n.event||o).toLowerCase(),a=n.event,!eventActionMap[a]&&(assert(ACTION_REG.test(o)&&ACTION_REG.test(a)),actions[o]||(actions[o]={action:r,actionInfo:n}),eventActionMap[a]=o)}function registerCoordinateSystem(n,a){CoordinateSystem.register(n,a)}function getCoordinateSystemDimensions(n){var a=CoordinateSystem.get(n);if(a)return a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice()}function registerLayout(n,a){normalizeRegister(visualFuncs,n,a,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(n,a){normalizeRegister(visualFuncs,n,a,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(n,a,r,o,l){if((isFunction(a)||isObject$3(a))&&(r=a,a=o),{}.NODE_ENV!=="production"){if(isNaN(a)||a==null)throw new Error("Illegal priority");each$f(n,function(c){assert(c.__raw!==r)})}if(!(indexOf(registeredTasks,r)>=0)){registeredTasks.push(r);var u=Scheduler$1.wrapStageHandler(r,l);u.__prio=a,u.__raw=r,n.push(u)}}function registerLoading(n,a){loadingEffects[n]=a}function setCanvasCreator(n){({}).NODE_ENV!=="production"&&deprecateLog("setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead."),setPlatformAPI({createCanvas:n})}function registerMap$1(n,a,r){var o=getImpl("registerMap");o&&o(n,a,r)}function getMap(n){var a=getImpl("getMap");return a&&a(n)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask),registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask),registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask),registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask),registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask),registerVisual(PRIORITY_VISUAL_DECAL,decalVisual),registerPreprocessor(globalBackwardCompat),registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1),registerLoading("default",defaultLoading),registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop),registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop),registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop),registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop),registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop),registerTheme("light",lightTheme),registerTheme("dark",darkTheme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,SeriesModel:SeriesModel$1,ChartView:ChartView$1,registerComponentModel:function(n){ComponentModel$1.registerClass(n)},registerComponentView:function(n){ComponentView$1.registerClass(n)},registerSeriesModel:function(n){SeriesModel$1.registerClass(n)},registerChartView:function(n){ChartView$1.registerClass(n)},registerSubTypeDefaulter:function(n,a){ComponentModel$1.registerSubTypeDefaulter(n,a)},registerPainter:function(n,a){registerPainter(n,a)}};function use(n){if(isArray$1(n)){each$f(n,function(a){use(a)});return}indexOf(extensions,n)>=0||(extensions.push(n),isFunction(n)&&(n={install:n}),n.install(extensionRegisters))}function dataIndexMapValueLength(n){return n==null?0:n.length||1}function defaultKeyGetter(n){return n}var DataDiffer=function(){function n(a,r,o,l,u,c){this._old=a,this._new=r,this._oldKeyGetter=o||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=u,this._diffModeMultiple=c==="multiple"}return n.prototype.add=function(a){return this._add=a,this},n.prototype.update=function(a){return this._update=a,this},n.prototype.updateManyToOne=function(a){return this._updateManyToOne=a,this},n.prototype.updateOneToMany=function(a){return this._updateOneToMany=a,this},n.prototype.updateManyToMany=function(a){return this._updateManyToMany=a,this},n.prototype.remove=function(a){return this._remove=a,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var a=this._old,r=this._new,o={},l=new Array(a.length),u=new Array(r.length);this._initIndexMap(a,null,l,"_oldKeyGetter"),this._initIndexMap(r,o,u,"_newKeyGetter");for(var c=0;c<a.length;c++){var h=l[c],f=o[h],v=dataIndexMapValueLength(f);if(v>1){var d=f.shift();f.length===1&&(o[h]=f[0]),this._update&&this._update(d,c)}else v===1?(o[h]=null,this._update&&this._update(f,c)):this._remove&&this._remove(c)}this._performRestAdd(u,o)},n.prototype._executeMultiple=function(){var a=this._old,r=this._new,o={},l={},u=[],c=[];this._initIndexMap(a,o,u,"_oldKeyGetter"),this._initIndexMap(r,l,c,"_newKeyGetter");for(var h=0;h<u.length;h++){var f=u[h],v=o[f],d=l[f],p=dataIndexMapValueLength(v),g=dataIndexMapValueLength(d);if(p>1&&g===1)this._updateManyToOne&&this._updateManyToOne(d,v),l[f]=null;else if(p===1&&g>1)this._updateOneToMany&&this._updateOneToMany(d,v),l[f]=null;else if(p===1&&g===1)this._update&&this._update(d,v),l[f]=null;else if(p>1&&g>1)this._updateManyToMany&&this._updateManyToMany(d,v),l[f]=null;else if(p>1)for(var y=0;y<p;y++)this._remove&&this._remove(v[y]);else this._remove&&this._remove(v)}this._performRestAdd(c,l)},n.prototype._performRestAdd=function(a,r){for(var o=0;o<a.length;o++){var l=a[o],u=r[l],c=dataIndexMapValueLength(u);if(c>1)for(var h=0;h<c;h++)this._add&&this._add(u[h]);else c===1&&this._add&&this._add(u);r[l]=null}},n.prototype._initIndexMap=function(a,r,o,l){for(var u=this._diffModeMultiple,c=0;c<a.length;c++){var h="_ec_"+this[l](a[c],c);if(u||(o[c]=h),!!r){var f=r[h],v=dataIndexMapValueLength(f);v===0?(r[h]=c,u&&o.push(h)):v===1?r[h]=[f,c]:f.push(c)}}},n}();const DataDiffer$1=DataDiffer;var DimensionUserOuput=function(){function n(a,r){this._encode=a,this._schema=r}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function summarizeDimensions(n,a){var r={},o=r.encode={},l=createHashMap(),u=[],c=[],h={};each$f(n.dimensions,function(g){var y=n.getDimensionInfo(g),_=y.coordDim;if(_){({}).NODE_ENV!=="production"&&assert(VISUAL_DIMENSIONS.get(_)==null);var S=y.coordDimIndex;getOrCreateEncodeArr(o,_)[S]=g,y.isExtraCoord||(l.set(_,1),mayLabelDimType(y.type)&&(u[0]=g),getOrCreateEncodeArr(h,_)[S]=n.getDimensionIndex(y.name)),y.defaultTooltip&&c.push(g)}VISUAL_DIMENSIONS.each(function(x,T){var A=getOrCreateEncodeArr(o,T),b=y.otherDims[T];b!=null&&b!==!1&&(A[b]=y.name)})});var f=[],v={};l.each(function(g,y){var _=o[y];v[y]=_[0],f=f.concat(_)}),r.dataDimsOnCoord=f,r.dataDimIndicesOnCoord=map$1(f,function(g){return n.getDimensionInfo(g).storeDimIndex}),r.encodeFirstDimNotExtra=v;var d=o.label;d&&d.length&&(u=d.slice());var p=o.tooltip;return p&&p.length?c=p.slice():c.length||(c=u.slice()),o.defaultedLabel=u,o.defaultedTooltip=c,r.userOutput=new DimensionUserOuput(h,a),r}function getOrCreateEncodeArr(n,a){return n.hasOwnProperty(a)||(n[a]=[]),n[a]}function getDimensionTypeByAxis(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function mayLabelDimType(n){return!(n==="ordinal"||n==="time")}var SeriesDimensionDefine=function(){function n(a){this.otherDims={},a!=null&&extend(this,a)}return n}();const SeriesDimensionDefine$1=SeriesDimensionDefine;var inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function n(a){this.dimensions=a.dimensions,this._dimOmitted=a.dimensionOmitted,this.source=a.source,this._fullDimCount=a.fullDimensionCount,this._updateDimOmitted(a.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(a){this._dimOmitted=a,a&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},n.prototype.getSourceDimensionIndex=function(a){return retrieve2(this._dimNameMap.get(a),-1)},n.prototype.getSourceDimension=function(a){var r=this.source.dimensionsDefine;if(r)return r[a]},n.prototype.makeStoreSchema=function(){for(var a=this._fullDimCount,r=shouldRetrieveDataByName(this.source),o=!shouldOmitUnusedDimensions(a),l="",u=[],c=0,h=0;c<a;c++){var f=void 0,v=void 0,d=void 0,p=this.dimensions[h];if(p&&p.storeDimIndex===c)f=r?p.name:null,v=p.type,d=p.ordinalMeta,h++;else{var g=this.getSourceDimension(c);g&&(f=r?g.name:null,v=g.type)}u.push({property:f,type:v,ordinalMeta:d}),r&&f!=null&&(!p||!p.isCalculationCoord)&&(l+=o?f.replace(/\`/g,"`1").replace(/\$/g,"`2"):f),l+="$",l+=dimTypeShort[v]||"f",d&&(l+=d.uid),l+="$"}var y=this.source,_=[y.seriesLayoutBy,y.startIndex,l].join("$$");return{dimensions:u,hash:_}},n.prototype.makeOutputDimensionNames=function(){for(var a=[],r=0,o=0;r<this._fullDimCount;r++){var l=void 0,u=this.dimensions[o];if(u&&u.storeDimIndex===r)u.isCalculationCoord||(l=u.name),o++;else{var c=this.getSourceDimension(r);c&&(l=c.name)}a.push(l)}return a},n.prototype.appendCalculationDimension=function(a){this.dimensions.push(a),a.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function isSeriesDataSchema(n){return n instanceof SeriesDataSchema}function createDimNameMap(n){for(var a=createHashMap(),r=0;r<(n||[]).length;r++){var o=n[r],l=isObject$3(o)?o.name:o;l!=null&&a.get(l)==null&&a.set(l,r)}return a}function ensureSourceDimNameMap(n){var a=inner$h(n);return a.dimNameMap||(a.dimNameMap=createDimNameMap(n.dimensionsDefine))}function shouldOmitUnusedDimensions(n){return n>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array=="undefined"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function n(a,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var o,l=!1;isSeriesDataSchema(a)?(o=a.dimensions,this._dimOmitted=a.isDimensionOmitted(),this._schema=a):(l=!0,o=a),o=o||["x","y"];for(var u={},c=[],h={},f=!1,v={},d=0;d<o.length;d++){var p=o[d],g=isString(p)?new SeriesDimensionDefine$1({name:p}):p instanceof SeriesDimensionDefine$1?p:new SeriesDimensionDefine$1(p),y=g.name;g.type=g.type||"float",g.coordDim||(g.coordDim=y,g.coordDimIndex=0);var _=g.otherDims=g.otherDims||{};c.push(y),u[y]=g,v[y]!=null&&(f=!0),g.createInvertedIndices&&(h[y]=[]),_.itemName===0&&(this._nameDimIdx=d),_.itemId===0&&(this._idDimIdx=d),{}.NODE_ENV!=="production"&&assert(l||g.storeDimIndex>=0),l&&(g.storeDimIndex=d)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(f),this.hostModel=r,this._invertedIndicesMap=h,this._dimOmitted){var S=this._dimIdxToName=createHashMap();each$f(c,function(x){S.set(u[x].storeDimIndex,x)})}}return n.prototype.getDimension=function(a){var r=this._recognizeDimIndex(a);if(r==null)return a;if(r=a,!this._dimOmitted)return this.dimensions[r];var o=this._dimIdxToName.get(r);if(o!=null)return o;var l=this._schema.getSourceDimension(r);if(l)return l.name},n.prototype.getDimensionIndex=function(a){var r=this._recognizeDimIndex(a);if(r!=null)return r;if(a==null)return-1;var o=this._getDimInfo(a);return o?o.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(a):-1},n.prototype._recognizeDimIndex=function(a){if(isNumber(a)||a!=null&&!isNaN(a)&&!this._getDimInfo(a)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(a)<0))return+a},n.prototype._getStoreDimIndex=function(a){var r=this.getDimensionIndex(a);if({}.NODE_ENV!=="production"&&r==null)throw new Error("Unknown dimension "+a);return r},n.prototype.getDimensionInfo=function(a){return this._getDimInfo(this.getDimension(a))},n.prototype._initGetDimensionInfo=function(a){var r=this._dimInfos;this._getDimInfo=a?function(o){return r.hasOwnProperty(o)?r[o]:void 0}:function(o){return r[o]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(a,r){var o=this._dimSummary;if(r==null)return o.encodeFirstDimNotExtra[a];var l=o.encode[a];return l?l[r]:null},n.prototype.mapDimensionsAll=function(a){var r=this._dimSummary,o=r.encode[a];return(o||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(a,r,o){var l=this,u;if(a instanceof DataStore$1&&(u=a),!u){var c=this.dimensions,h=isSourceInstance(a)||isArrayLike(a)?new DefaultDataProvider(a,c.length):a;u=new DataStore$1;var f=map(c,function(v){return{type:l._dimInfos[v].type,property:v}});u.initData(h,f,o)}this._store=u,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(a){var r=this._store.appendData(a);this._doInit(r[0],r[1])},n.prototype.appendValues=function(a,r){var o=this._store.appendValues(a,r.length),l=o.start,u=o.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var h=l;h<u;h++){var f=h-l;this._nameList[h]=r[f],c&&makeIdFromName(this,h)}},n.prototype._updateOrdinalMeta=function(){for(var a=this._store,r=this.dimensions,o=0;o<r.length;o++){var l=this._dimInfos[r[o]];l.ordinalMeta&&a.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var a=this._store.getProvider();return this._idDimIdx==null&&a.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!a.fillStorage},n.prototype._doInit=function(a,r){if(!(a>=r)){var o=this._store,l=o.getProvider();this._updateOrdinalMeta();var u=this._nameList,c=this._idList,h=l.getSource().sourceFormat,f=h===SOURCE_FORMAT_ORIGINAL;if(f&&!l.pure)for(var v=[],d=a;d<r;d++){var p=l.getItem(d,v);if(!this.hasItemOption&&isDataItemOption(p)&&(this.hasItemOption=!0),p){var g=p.name;u[d]==null&&g!=null&&(u[d]=convertOptionIdName(g,null));var y=p.id;c[d]==null&&y!=null&&(c[d]=convertOptionIdName(y,null))}}if(this._shouldMakeIdFromName())for(var d=a;d<r;d++)makeIdFromName(this,d);prepareInvertedIndex(this)}},n.prototype.getApproximateExtent=function(a){return this._approximateExtent[a]||this._store.getDataExtent(this._getStoreDimIndex(a))},n.prototype.setApproximateExtent=function(a,r){r=this.getDimension(r),this._approximateExtent[r]=a.slice()},n.prototype.getCalculationInfo=function(a){return this._calculationInfo[a]},n.prototype.setCalculationInfo=function(a,r){isObject$1(a)?extend(this._calculationInfo,a):this._calculationInfo[a]=r},n.prototype.getName=function(a){var r=this.getRawIndex(a),o=this._nameList[r];return o==null&&this._nameDimIdx!=null&&(o=getIdNameFromStore(this,this._nameDimIdx,r)),o==null&&(o=""),o},n.prototype._getCategory=function(a,r){var o=this._store.get(a,r),l=this._store.getOrdinalMeta(a);return l?l.categories[o]:o},n.prototype.getId=function(a){return getId(this,this.getRawIndex(a))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(a,r){var o=this._store,l=this._dimInfos[a];if(l)return o.get(l.storeDimIndex,r)},n.prototype.getByRawIndex=function(a,r){var o=this._store,l=this._dimInfos[a];if(l)return o.getByRawIndex(l.storeDimIndex,r)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(a){return this._store.getDataExtent(this._getStoreDimIndex(a))},n.prototype.getSum=function(a){return this._store.getSum(this._getStoreDimIndex(a))},n.prototype.getMedian=function(a){return this._store.getMedian(this._getStoreDimIndex(a))},n.prototype.getValues=function(a,r){var o=this,l=this._store;return isArray$1(a)?l.getValues(map(a,function(u){return o._getStoreDimIndex(u)}),r):l.getValues(a)},n.prototype.hasValue=function(a){for(var r=this._dimSummary.dataDimIndicesOnCoord,o=0,l=r.length;o<l;o++)if(isNaN(this._store.get(r[o],a)))return!1;return!0},n.prototype.indexOfName=function(a){for(var r=0,o=this._store.count();r<o;r++)if(this.getName(r)===a)return r;return-1},n.prototype.getRawIndex=function(a){return this._store.getRawIndex(a)},n.prototype.indexOfRawIndex=function(a){return this._store.indexOfRawIndex(a)},n.prototype.rawIndexOf=function(a,r){var o=a&&this._invertedIndicesMap[a];if({}.NODE_ENV!=="production"&&!o)throw new Error("Do not supported yet");var l=o[r];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},n.prototype.indicesOfNearest=function(a,r,o){return this._store.indicesOfNearest(this._getStoreDimIndex(a),r,o)},n.prototype.each=function(a,r,o){isFunction(a)&&(o=r,r=a,a=[]);var l=o||this,u=map(normalizeDimensions(a),this._getStoreDimIndex,this);this._store.each(u,l?bind$1(r,l):r)},n.prototype.filterSelf=function(a,r,o){isFunction(a)&&(o=r,r=a,a=[]);var l=o||this,u=map(normalizeDimensions(a),this._getStoreDimIndex,this);return this._store=this._store.filter(u,l?bind$1(r,l):r),this},n.prototype.selectRange=function(a){var r=this,o={},l=keys(a);return each$f(l,function(u){var c=r._getStoreDimIndex(u);o[c]=a[u]}),this._store=this._store.selectRange(o),this},n.prototype.mapArray=function(a,r,o){isFunction(a)&&(o=r,r=a,a=[]),o=o||this;var l=[];return this.each(a,function(){l.push(r&&r.apply(this,arguments))},o),l},n.prototype.map=function(a,r,o,l){var u=o||l||this,c=map(normalizeDimensions(a),this._getStoreDimIndex,this),h=cloneListForMapAndSample(this);return h._store=this._store.map(c,u?bind$1(r,u):r),h},n.prototype.modify=function(a,r,o,l){var u=this,c=o||l||this;({}).NODE_ENV!=="production"&&each$f(normalizeDimensions(a),function(f){var v=u.getDimensionInfo(f);v.isCalculationCoord||console.error("Danger: only stack dimension can be modified")});var h=map(normalizeDimensions(a),this._getStoreDimIndex,this);this._store.modify(h,c?bind$1(r,c):r)},n.prototype.downSample=function(a,r,o,l){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(a),r,o,l),u},n.prototype.lttbDownSample=function(a,r){var o=cloneListForMapAndSample(this);return o._store=this._store.lttbDownSample(this._getStoreDimIndex(a),r),o},n.prototype.getRawDataItem=function(a){return this._store.getRawDataItem(a)},n.prototype.getItemModel=function(a){var r=this.hostModel,o=this.getRawDataItem(a);return new Model$1(o,r,r&&r.ecModel)},n.prototype.diff=function(a){var r=this;return new DataDiffer$1(a?a.getStore().getIndices():[],this.getStore().getIndices(),function(o){return getId(a,o)},function(o){return getId(r,o)})},n.prototype.getVisual=function(a){var r=this._visual;return r&&r[a]},n.prototype.setVisual=function(a,r){this._visual=this._visual||{},isObject$1(a)?extend(this._visual,a):this._visual[a]=r},n.prototype.getItemVisual=function(a,r){var o=this._itemVisuals[a],l=o&&o[r];return l==null?this.getVisual(r):l},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(a,r){var o=this._itemVisuals,l=o[a];l||(l=o[a]={});var u=l[r];return u==null&&(u=this.getVisual(r),isArray$1(u)?u=u.slice():isObject$1(u)&&(u=extend({},u)),l[r]=u),u},n.prototype.setItemVisual=function(a,r,o){var l=this._itemVisuals[a]||{};this._itemVisuals[a]=l,isObject$1(r)?extend(l,r):l[r]=o},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(a,r){isObject$1(a)?extend(this._layout,a):this._layout[a]=r},n.prototype.getLayout=function(a){return this._layout[a]},n.prototype.getItemLayout=function(a){return this._itemLayouts[a]},n.prototype.setItemLayout=function(a,r,o){this._itemLayouts[a]=o?extend(this._itemLayouts[a]||{},r):r},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(a,r){var o=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(o,this.dataType,a,r),this._graphicEls[a]=r},n.prototype.getItemGraphicEl=function(a){return this._graphicEls[a]},n.prototype.eachItemGraphicEl=function(a,r){each$f(this._graphicEls,function(o,l){o&&a&&a.call(r,o,l)})},n.prototype.cloneShallow=function(a){return a||(a=new n(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(a,this),a._store=this._store,a},n.prototype.wrapMethod=function(a,r){var o=this[a];!isFunction(o)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(a),this[a]=function(){var l=o.apply(this,arguments);return r.apply(this,[l].concat(slice(arguments)))})},n.internalField=function(){prepareInvertedIndex=function(a){var r=a._invertedIndicesMap;each$f(r,function(o,l){var u=a._dimInfos[l],c=u.ordinalMeta,h=a._store;if(c){o=r[l]=new CtorInt32Array(c.categories.length);for(var f=0;f<o.length;f++)o[f]=INDEX_NOT_FOUND;for(var f=0;f<h.count();f++)o[h.get(u.storeDimIndex,f)]=f}})},getIdNameFromStore=function(a,r,o){return convertOptionIdName(a._getCategory(r,o),null)},getId=function(a,r){var o=a._idList[r];return o==null&&a._idDimIdx!=null&&(o=getIdNameFromStore(a,a._idDimIdx,r)),o==null&&(o=ID_PREFIX+r),o},normalizeDimensions=function(a){return isArray$1(a)||(a=a!=null?[a]:[]),a},cloneListForMapAndSample=function(a){var r=new n(a._schema?a._schema:map(a.dimensions,a._getDimInfo,a),a.hostModel);return transferProperties(r,a),r},transferProperties=function(a,r){each$f(TRANSFERABLE_PROPERTIES.concat(r.__wrappedMethods||[]),function(o){r.hasOwnProperty(o)&&(a[o]=r[o])}),a.__wrappedMethods=r.__wrappedMethods,each$f(CLONE_PROPERTIES,function(o){a[o]=clone$4(r[o])}),a._calculationInfo=extend({},r._calculationInfo)},makeIdFromName=function(a,r){var o=a._nameList,l=a._idList,u=a._nameDimIdx,c=a._idDimIdx,h=o[r],f=l[r];if(h==null&&u!=null&&(o[r]=h=getIdNameFromStore(a,u,r)),f==null&&c!=null&&(l[r]=f=getIdNameFromStore(a,c,r)),f==null&&h!=null){var v=a._nameRepeatCount,d=v[h]=(v[h]||0)+1;f=h,d>1&&(f+="__ec__"+d),l[r]=f}}}(),n}();const SeriesData$1=SeriesData;function createDimensions(n,a){return prepareSeriesDataSchema(n,a).dimensions}function prepareSeriesDataSchema(n,a){isSourceInstance(n)||(n=createSourceFromSeriesDataOption(n)),a=a||{};var r=a.coordDimensions||[],o=a.dimensionsDefine||n.dimensionsDefine||[],l=createHashMap(),u=[],c=getDimCount(n,r,o,a.dimensionsCount),h=a.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),f=o===n.dimensionsDefine,v=f?ensureSourceDimNameMap(n):createDimNameMap(o),d=a.encodeDefine;!d&&a.encodeDefaulter&&(d=a.encodeDefaulter(n,c));for(var p=createHashMap(d),g=new CtorInt32Array$1(c),y=0;y<g.length;y++)g[y]=-1;function _(P){var L=g[P];if(L<0){var I=o[P],R=isObject$3(I)?I:{name:I},O=new SeriesDimensionDefine$1,N=R.name;N!=null&&v.get(N)!=null&&(O.name=O.displayName=N),R.type!=null&&(O.type=R.type),R.displayName!=null&&(O.displayName=R.displayName);var V=u.length;return g[P]=V,O.storeDimIndex=P,u.push(O),O}return u[L]}if(!h)for(var y=0;y<c;y++)_(y);p.each(function(P,L){var I=normalizeToArray(P).slice();if(I.length===1&&!isString(I[0])&&I[0]<0){p.set(L,!1);return}var R=p.set(L,[]);each$f(I,function(O,N){var V=isString(O)?v.get(O):O;V!=null&&V<c&&(R[N]=V,x(_(V),L,N))})});var S=0;each$f(r,function(P){var L,I,R,O;if(isString(P))L=P,O={};else{O=P,L=O.name;var N=O.ordinalMeta;O.ordinalMeta=null,O=extend({},O),O.ordinalMeta=N,I=O.dimsDef,R=O.otherDims,O.name=O.coordDim=O.coordDimIndex=O.dimsDef=O.otherDims=null}var V=p.get(L);if(V!==!1){if(V=normalizeToArray(V),!V.length)for(var B=0;B<(I&&I.length||1);B++){for(;S<c&&_(S).coordDim!=null;)S++;S<c&&V.push(S++)}each$f(V,function(G,F){var z=_(G);if(f&&O.type!=null&&(z.type=O.type),x(defaults(z,O),L,F),z.name==null&&I){var H=I[F];!isObject$3(H)&&(H={name:H}),z.name=z.displayName=H.name,z.defaultTooltip=H.defaultTooltip}R&&defaults(z.otherDims,R)})}});function x(P,L,I){VISUAL_DIMENSIONS.get(L)!=null?P.otherDims[L]=I:(P.coordDim=L,P.coordDimIndex=I,l.set(L,!0))}var T=a.generateCoord,A=a.generateCoordCount,b=A!=null;A=T?A||1:0;var C=T||"value";function E(P){P.name==null&&(P.name=P.coordDim)}if(h)each$f(u,function(P){E(P)}),u.sort(function(P,L){return P.storeDimIndex-L.storeDimIndex});else for(var w=0;w<c;w++){var D=_(w),M=D.coordDim;M==null&&(D.coordDim=genCoordDimName(C,l,b),D.coordDimIndex=0,(!T||A<=0)&&(D.isExtraCoord=!0),A--),E(D),D.type==null&&(guessOrdinal(n,w)===BE_ORDINAL.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:n,dimensions:u,fullDimensionCount:c,dimensionOmitted:h})}function removeDuplication(n){for(var a=createHashMap(),r=0;r<n.length;r++){var o=n[r],l=o.name,u=a.get(l)||0;u>0&&(o.name=l+(u-1)),u++,a.set(l,u)}}function getDimCount(n,a,r,o){var l=Math.max(n.dimensionsDetectedCount||1,a.length,r.length,o||0);return each$f(a,function(u){var c;isObject$3(u)&&(c=u.dimsDef)&&(l=Math.max(l,c.length))}),l}function genCoordDimName(n,a,r){if(r||a.hasKey(n)){for(var o=0;a.hasKey(n+o);)o++;n+=o}return a.set(n,!0),n}var CoordSysInfo=function(){function n(a){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=a}return n}();function getCoordSysInfoBySeries(n){var a=n.get("coordinateSystem"),r=new CoordSysInfo(a),o=fetchers[a];if(o)return o(n,r,r.axisMap,r.categoryAxisMap),r}var fetchers={cartesian2d:function(n,a,r,o){var l=n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];if({}.NODE_ENV!=="production"){if(!l)throw new Error('xAxis "'+retrieve(n.get("xAxisIndex"),n.get("xAxisId"),0)+'" not found');if(!u)throw new Error('yAxis "'+retrieve(n.get("xAxisIndex"),n.get("yAxisId"),0)+'" not found')}a.coordSysDims=["x","y"],r.set("x",l),r.set("y",u),isCategory(l)&&(o.set("x",l),a.firstCategoryDimIndex=0),isCategory(u)&&(o.set("y",u),a.firstCategoryDimIndex==null&&(a.firstCategoryDimIndex=1))},singleAxis:function(n,a,r,o){var l=n.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];if({}.NODE_ENV!=="production"&&!l)throw new Error("singleAxis should be specified.");a.coordSysDims=["single"],r.set("single",l),isCategory(l)&&(o.set("single",l),a.firstCategoryDimIndex=0)},polar:function(n,a,r,o){var l=n.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=l.findAxisModel("radiusAxis"),c=l.findAxisModel("angleAxis");if({}.NODE_ENV!=="production"){if(!c)throw new Error("angleAxis option not found");if(!u)throw new Error("radiusAxis option not found")}a.coordSysDims=["radius","angle"],r.set("radius",u),r.set("angle",c),isCategory(u)&&(o.set("radius",u),a.firstCategoryDimIndex=0),isCategory(c)&&(o.set("angle",c),a.firstCategoryDimIndex==null&&(a.firstCategoryDimIndex=1))},geo:function(n,a,r,o){a.coordSysDims=["lng","lat"]},parallel:function(n,a,r,o){var l=n.ecModel,u=l.getComponent("parallel",n.get("parallelIndex")),c=a.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(h,f){var v=l.getComponent("parallelAxis",h),d=c[f];r.set(d,v),isCategory(v)&&(o.set(d,v),a.firstCategoryDimIndex==null&&(a.firstCategoryDimIndex=f))})}};function isCategory(n){return n.get("type")==="category"}function enableDataStack(n,a,r){r=r||{};var o=r.byIndex,l=r.stackedCoordDimension,u,c,h;isLegacyDimensionsInput(a)?u=a:(c=a.schema,u=c.dimensions,h=a.store);var f=!!(n&&n.get("stack")),v,d,p,g;if(each$f(u,function(A,b){isString(A)&&(u[b]=A={name:A}),f&&!A.isExtraCoord&&(!o&&!v&&A.ordinalMeta&&(v=A),!d&&A.type!=="ordinal"&&A.type!=="time"&&(!l||l===A.coordDim)&&(d=A))}),d&&!o&&!v&&(o=!0),d){p="__\0ecstackresult_"+n.id,g="__\0ecstackedover_"+n.id,v&&(v.createInvertedIndices=!0);var y=d.coordDim,_=d.type,S=0;each$f(u,function(A){A.coordDim===y&&S++});var x={name:p,coordDim:y,coordDimIndex:S,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},T={name:g,coordDim:g,coordDimIndex:S+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};c?(h&&(x.storeDimIndex=h.ensureCalculationDimension(g,_),T.storeDimIndex=h.ensureCalculationDimension(p,_)),c.appendCalculationDimension(x),c.appendCalculationDimension(T)):(u.push(x),u.push(T))}return{stackedDimension:d&&d.name,stackedByDimension:v&&v.name,isStackedByIndex:o,stackedOverDimension:g,stackResultDimension:p}}function isLegacyDimensionsInput(n){return!isSeriesDataSchema(n.schema)}function isDimensionStacked(n,a){return!!a&&a===n.getCalculationInfo("stackedDimension")}function getStackedDimension(n,a){return isDimensionStacked(n,a)?n.getCalculationInfo("stackResultDimension"):a}function getCoordSysDimDefs(n,a){var r=n.get("coordinateSystem"),o=CoordinateSystem.get(r),l;return a&&a.coordSysDims&&(l=map$1(a.coordSysDims,function(u){var c={name:u},h=a.axisMap.get(u);if(h){var f=h.get("type");c.type=getDimensionTypeByAxis(f)}return c})),l||(l=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(n,a,r){var o,l;return r&&each$f(n,function(u,c){var h=u.coordDim,f=r.categoryAxisMap.get(h);f&&(o==null&&(o=c),u.ordinalMeta=f.getOrdinalMeta(),a&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(l=!0)}),!l&&o!=null&&(n[o].otherDims.itemName=0),o}function createSeriesData(n,a,r){r=r||{};var o=a.getSourceManager(),l,u=!1;n?(u=!0,l=createSourceFromSeriesDataOption(n)):(l=o.getSource(),u=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(a),h=getCoordSysDimDefs(a,c),f=r.useEncodeDefaulter,v=isFunction(f)?f:f?curry$1(makeSeriesEncodeForAxisCoordSys,h,a):null,d={coordDimensions:h,generateCoord:r.generateCoord,encodeDefine:a.getEncode(),encodeDefaulter:v,canOmitUnusedDimensions:!u},p=prepareSeriesDataSchema(l,d),g=injectOrdinalMeta(p.dimensions,r.createInvertedIndices,c),y=u?null:o.getSharedDataStore(p),_=enableDataStack(a,{schema:p,store:y}),S=new SeriesData$1(p,a);S.setCalculationInfo(_);var x=g!=null&&isNeedCompleteOrdinalData(l)?function(T,A,b,C){return C===g?b:this.defaultDimValueGetter(T,A,b,C)}:null;return S.hasItemOption=!1,S.initData(u?l:y,null,x),S}function isNeedCompleteOrdinalData(n){if(n.sourceFormat===SOURCE_FORMAT_ORIGINAL){var a=firstDataNotNull(n.data||[]);return!isArray$1(getDataItemValue(a))}}function firstDataNotNull(n){for(var a=0;a<n.length&&n[a]==null;)a++;return n[a]}var Scale=function(){function n(a){this._setting=a||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(a){return this._setting[a]},n.prototype.unionExtent=function(a){var r=this._extent;a[0]<r[0]&&(r[0]=a[0]),a[1]>r[1]&&(r[1]=a[1])},n.prototype.unionExtentFromData=function(a,r){this.unionExtent(a.getApproximateExtent(r))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(a,r){var o=this._extent;isNaN(a)||(o[0]=a),isNaN(r)||(o[1]=r)},n.prototype.isInExtentRange=function(a){return this._extent[0]<=a&&this._extent[1]>=a},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(a){this._isBlank=a},n}();enableClassManagement(Scale);const Scale$1=Scale;var uidBase=0,OrdinalMeta=function(){function n(a){this.categories=a.categories||[],this._needCollect=a.needCollect,this._deduplication=a.deduplication,this.uid=++uidBase}return n.createByAxisModel=function(a){var r=a.option,o=r.data,l=o&&map$1(o,getName);return new n({categories:l,needCollect:!l,deduplication:r.dedplication!==!1})},n.prototype.getOrdinal=function(a){return this._getOrCreateMap().get(a)},n.prototype.parseAndCollect=function(a){var r,o=this._needCollect;if(!isString(a)&&!o)return a;if(o&&!this._deduplication)return r=this.categories.length,this.categories[r]=a,r;var l=this._getOrCreateMap();return r=l.get(a),r==null&&(o?(r=this.categories.length,this.categories[r]=a,l.set(a,r)):r=NaN),r},n.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},n}();function getName(n){return isObject$3(n)&&n.value!=null?n.value:n+""}const OrdinalMeta$1=OrdinalMeta;function isValueNice(n){var a=Math.pow(10,quantityExponent(Math.abs(n))),r=Math.abs(n/a);return r===0||r===1||r===2||r===3||r===5}function isIntervalOrLogScale(n){return n.type==="interval"||n.type==="log"}function intervalScaleNiceTicks(n,a,r,o){var l={},u=n[1]-n[0],c=l.interval=nice(u/a,!0);r!=null&&c<r&&(c=l.interval=r),o!=null&&c>o&&(c=l.interval=o);var h=l.intervalPrecision=getIntervalPrecision(c),f=l.niceTickExtent=[round$3(Math.ceil(n[0]/c)*c,h),round$3(Math.floor(n[1]/c)*c,h)];return fixExtent(f,n),l}function increaseInterval(n){var a=Math.pow(10,quantityExponent(n)),r=n/a;return r?r===2?r=3:r===3?r=5:r*=2:r=1,round$3(r*a)}function getIntervalPrecision(n){return getPrecision(n)+2}function clamp(n,a,r){n[a]=Math.max(Math.min(n[a],r[1]),r[0])}function fixExtent(n,a){!isFinite(n[0])&&(n[0]=a[0]),!isFinite(n[1])&&(n[1]=a[1]),clamp(n,0,a),clamp(n,1,a),n[0]>n[1]&&(n[0]=n[1])}function contain$1(n,a){return n>=a[0]&&n<=a[1]}function normalize$2(n,a){return a[1]===a[0]?.5:(n-a[0])/(a[1]-a[0])}function scale(n,a){return n*(a[1]-a[0])+a[0]}var OrdinalScale=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;o.type="ordinal";var l=o.getSetting("ordinalMeta");return l||(l=new OrdinalMeta$1({})),isArray$1(l)&&(l=new OrdinalMeta$1({categories:map$1(l,function(u){return isObject$3(u)?u.value:u})})),o._ordinalMeta=l,o._extent=o.getSetting("extent")||[0,l.categories.length-1],o}return a.prototype.parse=function(r){return r==null?NaN:isString(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},a.prototype.contain=function(r){return r=this.parse(r),contain$1(r,this._extent)&&this._ordinalMeta.categories[r]!=null},a.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),normalize$2(r,this._extent)},a.prototype.scale=function(r){return r=Math.round(scale(r,this._extent)),this.getRawOrdinalNumber(r)},a.prototype.getTicks=function(){for(var r=[],o=this._extent,l=o[0];l<=o[1];)r.push({value:l}),l++;return r},a.prototype.getMinorTicks=function(r){},a.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var o=r.ordinalNumbers,l=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],c=0,h=this._ordinalMeta.categories.length,f=Math.min(h,o.length);c<f;++c){var v=o[c];l[c]=v,u[v]=c}for(var d=0;c<h;++c){for(;u[d]!=null;)d++;l.push(d),u[d]=c}},a.prototype._getTickNumber=function(r){var o=this._ticksByOrdinalNumber;return o&&r>=0&&r<o.length?o[r]:r},a.prototype.getRawOrdinalNumber=function(r){var o=this._ordinalNumbersByTick;return o&&r>=0&&r<o.length?o[r]:r},a.prototype.getLabel=function(r){if(!this.isBlank()){var o=this.getRawOrdinalNumber(r.value),l=this._ordinalMeta.categories[o];return l==null?"":l+""}},a.prototype.count=function(){return this._extent[1]-this._extent[0]+1},a.prototype.unionExtentFromData=function(r,o){this.unionExtent(r.getApproximateExtent(o))},a.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},a.prototype.getOrdinalMeta=function(){return this._ordinalMeta},a.prototype.calcNiceTicks=function(){},a.prototype.calcNiceExtent=function(){},a.type="ordinal",a}(Scale$1);Scale$1.registerClass(OrdinalScale);const OrdinalScale$1=OrdinalScale;var roundNumber=round$3,IntervalScale=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return a.prototype.parse=function(r){return r},a.prototype.contain=function(r){return contain$1(r,this._extent)},a.prototype.normalize=function(r){return normalize$2(r,this._extent)},a.prototype.scale=function(r){return scale(r,this._extent)},a.prototype.setExtent=function(r,o){var l=this._extent;isNaN(r)||(l[0]=parseFloat(r)),isNaN(o)||(l[1]=parseFloat(o))},a.prototype.unionExtent=function(r){var o=this._extent;r[0]<o[0]&&(o[0]=r[0]),r[1]>o[1]&&(o[1]=r[1]),this.setExtent(o[0],o[1])},a.prototype.getInterval=function(){return this._interval},a.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(r)},a.prototype.getTicks=function(r){var o=this._interval,l=this._extent,u=this._niceExtent,c=this._intervalPrecision,h=[];if(!o)return h;var f=1e4;l[0]<u[0]&&(r?h.push({value:roundNumber(u[0]-o,c)}):h.push({value:l[0]}));for(var v=u[0];v<=u[1]&&(h.push({value:v}),v=roundNumber(v+o,c),v!==h[h.length-1].value);)if(h.length>f)return[];var d=h.length?h[h.length-1].value:u[1];return l[1]>d&&(r?h.push({value:roundNumber(d+o,c)}):h.push({value:l[1]})),h},a.prototype.getMinorTicks=function(r){for(var o=this.getTicks(!0),l=[],u=this.getExtent(),c=1;c<o.length;c++){for(var h=o[c],f=o[c-1],v=0,d=[],p=h.value-f.value,g=p/r;v<r-1;){var y=roundNumber(f.value+(v+1)*g);y>u[0]&&y<u[1]&&d.push(y),v++}l.push(d)}return l},a.prototype.getLabel=function(r,o){if(r==null)return"";var l=o&&o.precision;l==null?l=getPrecision(r.value)||0:l==="auto"&&(l=this._intervalPrecision);var u=roundNumber(r.value,l,!0);return addCommas(u)},a.prototype.calcNiceTicks=function(r,o,l){r=r||5;var u=this._extent,c=u[1]-u[0];if(!!isFinite(c)){c<0&&(c=-c,u.reverse());var h=intervalScaleNiceTicks(u,r,o,l);this._intervalPrecision=h.intervalPrecision,this._interval=h.interval,this._niceExtent=h.niceTickExtent}},a.prototype.calcNiceExtent=function(r){var o=this._extent;if(o[0]===o[1])if(o[0]!==0){var l=Math.abs(o[0]);r.fixMax||(o[1]+=l/2),o[0]-=l/2}else o[1]=1;var u=o[1]-o[0];isFinite(u)||(o[0]=0,o[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var c=this._interval;r.fixMin||(o[0]=roundNumber(Math.floor(o[0]/c)*c)),r.fixMax||(o[1]=roundNumber(Math.ceil(o[1]/c)*c))},a.prototype.setNiceExtent=function(r,o){this._niceExtent=[r,o]},a.type="interval",a}(Scale$1);Scale$1.registerClass(IntervalScale);const IntervalScale$1=IntervalScale;var supportFloat32Array=typeof Float32Array!="undefined",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(n){return isArray$1(n)?supportFloat32Array?new Float32Array(n):n:new Float32ArrayCtor(n)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(n){return n.get("stack")||STACK_PREFIX+n.seriesIndex}function getAxisKey$1(n){return n.dim+n.index}function getLayoutOnAxis(n){var a=[],r=n.axis,o="axis0";if(r.type==="category"){for(var l=r.getBandWidth(),u=0;u<n.count;u++)a.push(defaults({bandWidth:l,axisKey:o,stackId:STACK_PREFIX+u},n));for(var c=doCalBarWidthAndOffset(a),h=[],u=0;u<n.count;u++){var f=c[o][STACK_PREFIX+u];f.offsetCenter=f.offset+f.width/2,h.push(f)}return h}}function prepareLayoutBarSeries(n,a){var r=[];return a.eachSeriesByType(n,function(o){isOnCartesian(o)&&r.push(o)}),r}function getValueAxesMinGaps(n){var a={};each$f(n,function(f){var v=f.coordinateSystem,d=v.getBaseAxis();if(!(d.type!=="time"&&d.type!=="value"))for(var p=f.getData(),g=d.dim+"_"+d.index,y=p.getDimensionIndex(p.mapDimension(d.dim)),_=p.getStore(),S=0,x=_.count();S<x;++S){var T=_.get(y,S);a[g]?a[g].push(T):a[g]=[T]}});var r={};for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];if(l){l.sort(function(f,v){return f-v});for(var u=null,c=1;c<l.length;++c){var h=l[c]-l[c-1];h>0&&(u=u===null?h:Math.min(u,h))}r[o]=u}}return r}function makeColumnLayout(n){var a=getValueAxesMinGaps(n),r=[];return each$f(n,function(o){var l=o.coordinateSystem,u=l.getBaseAxis(),c=u.getExtent(),h;if(u.type==="category")h=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var f=u.dim+"_"+u.index,v=a[f],d=Math.abs(c[1]-c[0]),p=u.scale.getExtent(),g=Math.abs(p[1]-p[0]);h=v?d/g*v:d}else{var y=o.getData();h=Math.abs(c[1]-c[0])/y.count()}var _=parsePercent(o.get("barWidth"),h),S=parsePercent(o.get("barMaxWidth"),h),x=parsePercent(o.get("barMinWidth")||(isInLargeMode(o)?.5:1),h),T=o.get("barGap"),A=o.get("barCategoryGap");r.push({bandWidth:h,barWidth:_,barMaxWidth:S,barMinWidth:x,barGap:T,barCategoryGap:A,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(o)})}),doCalBarWidthAndOffset(r)}function doCalBarWidthAndOffset(n){var a={};each$f(n,function(o,l){var u=o.axisKey,c=o.bandWidth,h=a[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},f=h.stacks;a[u]=h;var v=o.stackId;f[v]||h.autoWidthCount++,f[v]=f[v]||{width:0,maxWidth:0};var d=o.barWidth;d&&!f[v].width&&(f[v].width=d,d=Math.min(h.remainedWidth,d),h.remainedWidth-=d);var p=o.barMaxWidth;p&&(f[v].maxWidth=p);var g=o.barMinWidth;g&&(f[v].minWidth=g);var y=o.barGap;y!=null&&(h.gap=y);var _=o.barCategoryGap;_!=null&&(h.categoryGap=_)});var r={};return each$f(a,function(o,l){r[l]={};var u=o.stacks,c=o.bandWidth,h=o.categoryGap;if(h==null){var f=keys(u).length;h=Math.max(35-f*4,15)+"%"}var v=parsePercent(h,c),d=parsePercent(o.gap,1),p=o.remainedWidth,g=o.autoWidthCount,y=(p-v)/(g+(g-1)*d);y=Math.max(y,0),each$f(u,function(T){var A=T.maxWidth,b=T.minWidth;if(T.width){var C=T.width;A&&(C=Math.min(C,A)),b&&(C=Math.max(C,b)),T.width=C,p-=C+d*C,g--}else{var C=y;A&&A<C&&(C=Math.min(A,p)),b&&b>C&&(C=b),C!==y&&(T.width=C,p-=C+d*C,g--)}}),y=(p-v)/(g+(g-1)*d),y=Math.max(y,0);var _=0,S;each$f(u,function(T,A){T.width||(T.width=y),S=T,_+=T.width*(1+d)}),S&&(_-=S.width*d);var x=-_/2;each$f(u,function(T,A){r[l][A]=r[l][A]||{bandWidth:c,offset:x,width:T.width},x+=T.width*(1+d)})}),r}function retrieveColumnLayout(n,a,r){if(n&&a){var o=n[getAxisKey$1(a)];return o!=null&&r!=null?o[getSeriesStackId$1(r)]:o}}function layout$3(n,a){var r=prepareLayoutBarSeries(n,a),o=makeColumnLayout(r);each$f(r,function(l){var u=l.getData(),c=l.coordinateSystem,h=c.getBaseAxis(),f=getSeriesStackId$1(l),v=o[getAxisKey$1(h)][f],d=v.offset,p=v.width;u.setLayout({bandWidth:v.bandWidth,offset:d,size:p})})}function createProgressiveLayout(n){return{seriesType:n,plan:createRenderPlanner(),reset:function(a){if(!!isOnCartesian(a)){var r=a.getData(),o=a.coordinateSystem,l=o.getBaseAxis(),u=o.getOtherAxis(l),c=r.getDimensionIndex(r.mapDimension(u.dim)),h=r.getDimensionIndex(r.mapDimension(l.dim)),f=a.get("showBackground",!0),v=r.mapDimension(u.dim),d=r.getCalculationInfo("stackResultDimension"),p=isDimensionStacked(r,v)&&!!r.getCalculationInfo("stackedOnSeries"),g=u.isHorizontal(),y=getValueAxisStart(l,u),_=isInLargeMode(a),S=a.get("barMinHeight")||0,x=d&&r.getDimensionIndex(d),T=r.getLayout("size"),A=r.getLayout("offset");return{progress:function(b,C){for(var E=b.count,w=_&&createFloat32Array(E*3),D=_&&f&&createFloat32Array(E*3),M=_&&createFloat32Array(E),P=o.master.getRect(),L=g?P.width:P.height,I,R=C.getStore(),O=0;(I=b.next())!=null;){var N=R.get(p?x:c,I),V=R.get(h,I),B=y,G=void 0;p&&(G=+N-R.get(c,I));var F=void 0,z=void 0,H=void 0,U=void 0;if(g){var Y=o.dataToPoint([N,V]);if(p){var Z=o.dataToPoint([G,V]);B=Z[0]}F=B,z=Y[1]+A,H=Y[0]-B,U=T,Math.abs(H)<S&&(H=(H<0?-1:1)*S)}else{var Y=o.dataToPoint([V,N]);if(p){var Z=o.dataToPoint([V,G]);B=Z[1]}F=Y[0]+A,z=B,H=T,U=Y[1]-B,Math.abs(U)<S&&(U=(U<=0?-1:1)*S)}_?(w[O]=F,w[O+1]=z,w[O+2]=g?H:U,D&&(D[O]=g?P.x:F,D[O+1]=g?z:P.y,D[O+2]=L),M[I]=I):C.setItemLayout(I,{x:F,y:z,width:H,height:U}),O+=3}_&&C.setLayout({largePoints:w,largeDataIndices:M,largeBackgroundPoints:D,valueAxisHorizontal:g})}}}}}}function isOnCartesian(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function isInLargeMode(n){return n.pipelineContext&&n.pipelineContext.large}function getValueAxisStart(n,a){return a.toGlobalCoord(a.dataToCoord(a.type==="log"?1:0))}var bisect=function(n,a,r,o){for(;r<o;){var l=r+o>>>1;n[l][1]<a?r=l+1:o=l}return r},TimeScale=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="time",o}return a.prototype.getLabel=function(r){var o=this.getSetting("useUTC");return format$1(r.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,o,this.getSetting("locale"))},a.prototype.getFormattedLabel=function(r,o,l){var u=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(r,o,l,c,u)},a.prototype.getTicks=function(){var r=this._interval,o=this._extent,l=[];if(!r)return l;l.push({value:o[0],level:0});var u=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,o);return l=l.concat(c),l.push({value:o[1],level:0}),l},a.prototype.calcNiceExtent=function(r){var o=this._extent;if(o[0]===o[1]&&(o[0]-=ONE_DAY,o[1]+=ONE_DAY),o[1]===-1/0&&o[0]===1/0){var l=new Date;o[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),o[0]=o[1]-ONE_DAY}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},a.prototype.calcNiceTicks=function(r,o,l){r=r||10;var u=this._extent,c=u[1]-u[0];this._approxInterval=c/r,o!=null&&this._approxInterval<o&&(this._approxInterval=o),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var h=scaleIntervals.length,f=Math.min(bisect(scaleIntervals,this._approxInterval,0,h),h-1);this._interval=scaleIntervals[f][1],this._minLevelUnit=scaleIntervals[Math.max(f-1,0)][0]},a.prototype.parse=function(r){return isNumber(r)?r:+parseDate(r)},a.prototype.contain=function(r){return contain$1(this.parse(r),this._extent)},a.prototype.normalize=function(r){return normalize$2(this.parse(r),this._extent)},a.prototype.scale=function(r){return scale(r,this._extent)},a.type="time",a}(IntervalScale$1),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(n,a,r,o){var l=parseDate(a),u=parseDate(r),c=function(_){return getUnitValue(l,_,o)===getUnitValue(u,_,o)},h=function(){return c("year")},f=function(){return h()&&c("month")},v=function(){return f()&&c("day")},d=function(){return v()&&c("hour")},p=function(){return d()&&c("minute")},g=function(){return p()&&c("second")},y=function(){return g()&&c("millisecond")};switch(n){case"year":return h();case"month":return f();case"day":return v();case"hour":return d();case"minute":return p();case"second":return g();case"millisecond":return y()}}function getDateInterval(n,a){return n/=ONE_DAY,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function getMonthInterval(n){var a=30*ONE_DAY;return n/=a,n>6?6:n>3?3:n>2?2:1}function getHourInterval(n){return n/=ONE_HOUR,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function getMinutesAndSecondsInterval(n,a){return n/=a?ONE_MINUTE:ONE_SECOND,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function getMillisecondsInterval(n){return nice(n,!0)}function getFirstTimestampOfUnit(n,a,r){var o=new Date(n);switch(getPrimaryTimeUnit(a)){case"year":case"month":o[monthSetterName(r)](0);case"day":o[dateSetterName(r)](1);case"hour":o[hoursSetterName(r)](0);case"minute":o[minutesSetterName(r)](0);case"second":o[secondsSetterName(r)](0),o[millisecondsSetterName(r)](0)}return o.getTime()}function getIntervalTicks(n,a,r,o){var l=1e4,u=timeUnits,c=0;function h(L,I,R,O,N,V,B){for(var G=new Date(I),F=I,z=G[O]();F<R&&F<=o[1];)B.push({value:F}),z+=L,G[N](z),F=G.getTime();B.push({value:F,notAdd:!0})}function f(L,I,R){var O=[],N=!I.length;if(!isUnitValueSame(getPrimaryTimeUnit(L),o[0],o[1],r)){N&&(I=[{value:getFirstTimestampOfUnit(new Date(o[0]),L,r)},{value:o[1]}]);for(var V=0;V<I.length-1;V++){var B=I[V].value,G=I[V+1].value;if(B!==G){var F=void 0,z=void 0,H=void 0,U=!1;switch(L){case"year":F=Math.max(1,Math.round(a/ONE_DAY/365)),z=fullYearGetterName(r),H=fullYearSetterName(r);break;case"half-year":case"quarter":case"month":F=getMonthInterval(a),z=monthGetterName(r),H=monthSetterName(r);break;case"week":case"half-week":case"day":F=getDateInterval(a),z=dateGetterName(r),H=dateSetterName(r),U=!0;break;case"half-day":case"quarter-day":case"hour":F=getHourInterval(a),z=hoursGetterName(r),H=hoursSetterName(r);break;case"minute":F=getMinutesAndSecondsInterval(a,!0),z=minutesGetterName(r),H=minutesSetterName(r);break;case"second":F=getMinutesAndSecondsInterval(a,!1),z=secondsGetterName(r),H=secondsSetterName(r);break;case"millisecond":F=getMillisecondsInterval(a),z=millisecondsGetterName(r),H=millisecondsSetterName(r);break}h(F,B,G,z,H,U,O),L==="year"&&R.length>1&&V===0&&R.unshift({value:R[0].value-F})}}for(var V=0;V<O.length;V++)R.push(O[V]);return O}}for(var v=[],d=[],p=0,g=0,y=0;y<u.length&&c++<l;++y){var _=getPrimaryTimeUnit(u[y]);if(!!isPrimaryTimeUnit(u[y])){f(u[y],v[v.length-1]||[],d);var S=u[y+1]?getPrimaryTimeUnit(u[y+1]):null;if(_!==S){if(d.length){g=p,d.sort(function(L,I){return L.value-I.value});for(var x=[],T=0;T<d.length;++T){var A=d[T].value;(T===0||d[T-1].value!==A)&&(x.push(d[T]),A>=o[0]&&A<=o[1]&&p++)}var b=(o[1]-o[0])/a;if(p>b*1.5&&g>b/1.5||(v.push(x),p>b||n===u[y]))break}d=[]}}}({}).NODE_ENV!=="production"&&c>=l&&warn("Exceed safe limit.");for(var C=filter(map$1(v,function(L){return filter(L,function(I){return I.value>=o[0]&&I.value<=o[1]&&!I.notAdd})}),function(L){return L.length>0}),E=[],w=C.length-1,y=0;y<C.length;++y)for(var D=C[y],M=0;M<D.length;++M)E.push({value:D[M].value,level:w-y});E.sort(function(L,I){return L.value-I.value});for(var P=[],y=0;y<E.length;++y)(y===0||E[y].value!==E[y-1].value)&&P.push(E[y]);return P}Scale$1.registerClass(TimeScale);const TimeScale$1=TimeScale;var scaleProto=Scale$1.prototype,intervalScaleProto=IntervalScale$1.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new IntervalScale$1,r._interval=0,r}return a.prototype.getTicks=function(r){var o=this._originalScale,l=this._extent,u=o.getExtent(),c=intervalScaleProto.getTicks.call(this,r);return map$1(c,function(h){var f=h.value,v=round$3(mathPow$1(this.base,f));return v=f===l[0]&&this._fixMin?fixRoundingError(v,u[0]):v,v=f===l[1]&&this._fixMax?fixRoundingError(v,u[1]):v,{value:v}},this)},a.prototype.setExtent=function(r,o){var l=mathLog$1(this.base);r=mathLog$1(Math.max(0,r))/l,o=mathLog$1(Math.max(0,o))/l,intervalScaleProto.setExtent.call(this,r,o)},a.prototype.getExtent=function(){var r=this.base,o=scaleProto.getExtent.call(this);o[0]=mathPow$1(r,o[0]),o[1]=mathPow$1(r,o[1]);var l=this._originalScale,u=l.getExtent();return this._fixMin&&(o[0]=fixRoundingError(o[0],u[0])),this._fixMax&&(o[1]=fixRoundingError(o[1],u[1])),o},a.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var o=this.base;r[0]=mathLog$1(r[0])/mathLog$1(o),r[1]=mathLog$1(r[1])/mathLog$1(o),scaleProto.unionExtent.call(this,r)},a.prototype.unionExtentFromData=function(r,o){this.unionExtent(r.getApproximateExtent(o))},a.prototype.calcNiceTicks=function(r){r=r||10;var o=this._extent,l=o[1]-o[0];if(!(l===1/0||l<=0)){var u=quantity(l),c=r/l*u;for(c<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var h=[round$3(mathCeil$1(o[0]/u)*u),round$3(mathFloor$1(o[1]/u)*u)];this._interval=u,this._niceExtent=h}},a.prototype.calcNiceExtent=function(r){intervalScaleProto.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},a.prototype.parse=function(r){return r},a.prototype.contain=function(r){return r=mathLog$1(r)/mathLog$1(this.base),contain$1(r,this._extent)},a.prototype.normalize=function(r){return r=mathLog$1(r)/mathLog$1(this.base),normalize$2(r,this._extent)},a.prototype.scale=function(r){return r=scale(r,this._extent),mathPow$1(this.base,r)},a.type="log",a}(Scale$1),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks,proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(n,a){return roundingErrorFix(n,getPrecision(a))}Scale$1.registerClass(LogScale);const LogScale$1=LogScale;var ScaleRawExtentInfo=function(){function n(a,r,o){this._prepareParams(a,r,o)}return n.prototype._prepareParams=function(a,r,o){o[1]<o[0]&&(o=[NaN,NaN]),this._dataMin=o[0],this._dataMax=o[1];var l=this._isOrdinal=a.type==="ordinal";this._needCrossZero=a.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var u=this._modelMinRaw=r.get("min",!0);isFunction(u)?this._modelMinNum=parseAxisModelMinMax(a,u({min:o[0],max:o[1]})):u!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(a,u));var c=this._modelMaxRaw=r.get("max",!0);if(isFunction(c)?this._modelMaxNum=parseAxisModelMinMax(a,c({min:o[0],max:o[1]})):c!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(a,c)),l)this._axisDataLen=r.getCategories().length;else{var h=r.get("boundaryGap"),f=isArray$1(h)?h:[h||0,h||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?({}.NODE_ENV!=="production"&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),this._boundaryGapInner=[0,0]):this._boundaryGapInner=[parsePercent$1(f[0],1),parsePercent$1(f[1],1)]}},n.prototype.calculate=function(){var a=this._isOrdinal,r=this._dataMin,o=this._dataMax,l=this._axisDataLen,u=this._boundaryGapInner,c=a?null:o-r||Math.abs(r),h=this._modelMinRaw==="dataMin"?r:this._modelMinNum,f=this._modelMaxRaw==="dataMax"?o:this._modelMaxNum,v=h!=null,d=f!=null;h==null&&(h=a?l?0:NaN:r-u[0]*c),f==null&&(f=a?l?l-1:NaN:o+u[1]*c),(h==null||!isFinite(h))&&(h=NaN),(f==null||!isFinite(f))&&(f=NaN);var p=eqNaN(h)||eqNaN(f)||a&&!l;this._needCrossZero&&(h>0&&f>0&&!v&&(h=0),h<0&&f<0&&!d&&(f=0));var g=this._determinedMin,y=this._determinedMax;return g!=null&&(h=g,v=!0),y!=null&&(f=y,d=!0),{min:h,max:f,minFixed:v,maxFixed:d,isBlank:p}},n.prototype.modifyDataMinMax=function(a,r){({}).NODE_ENV!=="production"&&assert(!this.frozen),this[DATA_MIN_MAX_ATTR[a]]=r},n.prototype.setDeterminedMinMax=function(a,r){var o=DETERMINED_MIN_MAX_ATTR[a];({}).NODE_ENV!=="production"&&assert(!this.frozen&&this[o]==null),this[o]=r},n.prototype.freeze=function(){this.frozen=!0},n}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(n,a,r){var o=n.rawExtentInfo;return o||(o=new ScaleRawExtentInfo(n,a,r),n.rawExtentInfo=o,o)}function parseAxisModelMinMax(n,a){return a==null?null:eqNaN(a)?NaN:n.parse(a)}function getScaleExtent(n,a){var r=n.type,o=ensureScaleRawExtentInfo(n,a,n.getExtent()).calculate();n.setBlank(o.isBlank);var l=o.min,u=o.max,c=a.ecModel;if(c&&r==="time"){var h=prepareLayoutBarSeries("bar",c),f=!1;if(each$f(h,function(p){f=f||p.getBaseAxis()===a.axis}),f){var v=makeColumnLayout(h),d=adjustScaleForOverflow(l,u,a,v);l=d.min,u=d.max}}return{extent:[l,u],fixMin:o.minFixed,fixMax:o.maxFixed}}function adjustScaleForOverflow(n,a,r,o){var l=r.axis.getExtent(),u=l[1]-l[0],c=retrieveColumnLayout(o,r.axis);if(c===void 0)return{min:n,max:a};var h=1/0;each$f(c,function(y){h=Math.min(y.offset,h)});var f=-1/0;each$f(c,function(y){f=Math.max(y.offset+y.width,f)}),h=Math.abs(h),f=Math.abs(f);var v=h+f,d=a-n,p=1-(h+f)/u,g=d/p-d;return a+=g*(f/v),n-=g*(h/v),{min:n,max:a}}function niceScaleExtent(n,a){var r=a,o=getScaleExtent(n,r),l=o.extent,u=r.get("splitNumber");n instanceof LogScale$1&&(n.base=r.get("logBase"));var c=n.type,h=r.get("interval"),f=c==="interval"||c==="time";n.setExtent(l[0],l[1]),n.calcNiceExtent({splitNumber:u,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:f?r.get("minInterval"):null,maxInterval:f?r.get("maxInterval"):null}),h!=null&&n.setInterval&&n.setInterval(h)}function createScaleByModel$1(n,a){if(a=a||n.get("type"),a)switch(a){case"category":return new OrdinalScale$1({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Scale$1.getClass(a)||IntervalScale$1)}}function ifAxisCrossZero(n){var a=n.scale.getExtent(),r=a[0],o=a[1];return!(r>0&&o>0||r<0&&o<0)}function makeLabelFormatter(n){var a=n.getLabelModel().get("formatter"),r=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(o){return function(l,u){return n.scale.getFormattedLabel(l,u,o)}}(a):isString(a)?function(o){return function(l){var u=n.scale.getLabel(l),c=o.replace("{value}",u!=null?u:"");return c}}(a):isFunction(a)?function(o){return function(l,u){return r!=null&&(u=l.value-r),o(getAxisRawValue(n,l),u,l.level!=null?{level:l.level}:null)}}(a):function(o){return n.scale.getLabel(o)}}function getAxisRawValue(n,a){return n.type==="category"?n.scale.getLabel(a):a.value}function estimateLabelUnionRect(n){var a=n.model,r=n.scale;if(!(!a.get(["axisLabel","show"])||r.isBlank())){var o,l,u=r.getExtent();r instanceof OrdinalScale$1?l=r.count():(o=r.getTicks(),l=o.length);var c=n.getLabelModel(),h=makeLabelFormatter(n),f,v=1;l>40&&(v=Math.ceil(l/40));for(var d=0;d<l;d+=v){var p=o?o[d]:{value:u[0]+d},g=h(p,d),y=c.getTextRect(g),_=rotateTextRect(y,c.get("rotate")||0);f?f.union(_):f=_}return f}}function rotateTextRect(n,a){var r=a*Math.PI/180,o=n.width,l=n.height,u=o*Math.abs(Math.cos(r))+Math.abs(l*Math.sin(r)),c=o*Math.abs(Math.sin(r))+Math.abs(l*Math.cos(r)),h=new BoundingRect$1(n.x,n.y,u,c);return h}function getOptionCategoryInterval(n){var a=n.get("interval");return a==null?"auto":a}function shouldShowAllLabels(n){return n.type==="category"&&getOptionCategoryInterval(n.getLabelModel())===0}function getDataDimensionsOnAxis(n,a){var r={};return each$f(n.mapDimensionsAll(a),function(o){r[getStackedDimension(n,o)]=!0}),keys(r)}function unionAxisExtentFromData(n,a,r){a&&each$f(getDataDimensionsOnAxis(a,r),function(o){var l=a.getApproximateExtent(o);l[0]<n[0]&&(n[0]=l[0]),l[1]>n[1]&&(n[1]=l[1])})}var AxisModelCommonMixin=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var a=this.option;return!a.scale},n.prototype.getCoordSysModel=function(){},n}();function createList$2(n){return createSeriesData(null,n)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(n,a){var r=a;a instanceof Model$1||(r=new Model$1(a));var o=createScaleByModel$1(r);return o.setExtent(n[0],n[1]),niceScaleExtent(o,r),o}function mixinAxisModelCommonMethods(n){mixin(n,AxisModelCommonMixin)}function createTextStyle(n,a){return a=a||{},createTextStyle$1(n,null,null,a.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createList:createList$2,getLayoutRect,dataStack,createScale,mixinAxisModelCommonMethods,getECData,createTextStyle,createDimensions,createSymbol:createSymbol$1,enableHoverEmphasis},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(n,a){return Math.abs(n-a)<EPSILON}function contain(n,a,r){var o=0,l=n[0];if(!l)return!1;for(var u=1;u<n.length;u++){var c=n[u];o+=windingLine(l[0],l[1],c[0],c[1],a,r),l=c}var h=n[0];return(!isAroundEqual(l[0],h[0])||!isAroundEqual(l[1],h[1]))&&(o+=windingLine(l[0],l[1],h[0],h[1],a,r)),o!==0}var TMP_TRANSFORM=[];function transformPoints(n,a){for(var r=0;r<n.length;r++)applyTransform$1(n[r],n[r],a)}function updateBBoxFromPoints(n,a,r,o){for(var l=0;l<n.length;l++){var u=n[l];o&&(u=o.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(a,a,u),max$1(r,r,u))}}function centroid$1(n){for(var a=0,r=0,o=0,l=n.length,u=n[l-1][0],c=n[l-1][1],h=0;h<l;h++){var f=n[h][0],v=n[h][1],d=u*v-f*c;a+=d,r+=(u+f)*d,o+=(c+v)*d,u=f,c=v}return a?[r/a/3,o/a/3,a]:[n[0][0]||0,n[0][1]||0]}var Region=function(){function n(a){this.name=a}return n.prototype.setCenter=function(a){this._center=a},n.prototype.getCenter=function(){var a=this._center;return a||(a=this._center=this.calcCenter()),a},n}(),GeoJSONPolygonGeometry=function(){function n(a,r){this.type="polygon",this.exterior=a,this.interiors=r}return n}(),GeoJSONLineStringGeometry=function(){function n(a){this.type="linestring",this.points=a}return n}(),GeoJSONRegion=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this,r)||this;return u.type="geoJSON",u.geometries=o,u._center=l&&[l[0],l[1]],u}return a.prototype.calcCenter=function(){for(var r=this.geometries,o,l=0,u=0;u<r.length;u++){var c=r[u],h=c.exterior,f=h&&h.length;f>l&&(o=c,l=f)}if(o)return centroid$1(o.exterior);var v=this.getBoundingRect();return[v.x+v.width/2,v.y+v.height/2]},a.prototype.getBoundingRect=function(r){var o=this._rect;if(o&&!r)return o;var l=[1/0,1/0],u=[-1/0,-1/0],c=this.geometries;return each$f(c,function(h){h.type==="polygon"?updateBBoxFromPoints(h.exterior,l,u,r):each$f(h.points,function(f){updateBBoxFromPoints(f,l,u,r)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])||(l[0]=l[1]=u[0]=u[1]=0),o=new BoundingRect$1(l[0],l[1],u[0]-l[0],u[1]-l[1]),r||(this._rect=o),o},a.prototype.contain=function(r){var o=this.getBoundingRect(),l=this.geometries;if(!o.contain(r[0],r[1]))return!1;e:for(var u=0,c=l.length;u<c;u++){var h=l[u];if(h.type==="polygon"){var f=h.exterior,v=h.interiors;if(contain(f,r[0],r[1])){for(var d=0;d<(v?v.length:0);d++)if(contain(v[d],r[0],r[1]))continue e;return!0}}}return!1},a.prototype.transformTo=function(r,o,l,u){var c=this.getBoundingRect(),h=c.width/c.height;l?u||(u=l/h):l=h*u;for(var f=new BoundingRect$1(r,o,l,u),v=c.calculateTransform(f),d=this.geometries,p=0;p<d.length;p++){var g=d[p];g.type==="polygon"?(transformPoints(g.exterior,v),each$f(g.interiors,function(y){transformPoints(y,v)})):each$f(g.points,function(y){transformPoints(y,v)})}c=this._rect,c.copy(f),this._center=[c.x+c.width/2,c.y+c.height/2]},a.prototype.cloneShallow=function(r){r==null&&(r=this.name);var o=new a(r,this.geometries,this._center);return o._rect=this._rect,o.transformTo=null,o},a}(Region),GeoSVGRegion=function(n){__extends(a,n);function a(r,o){var l=n.call(this,r)||this;return l.type="geoSVG",l._elOnlyForCalculate=o,l}return a.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,o=r.getBoundingRect(),l=[o.x+o.width/2,o.y+o.height/2],u=identity(TMP_TRANSFORM),c=r;c&&!c.isGeoSVGGraphicRoot;)mul(u,c.getLocalTransform(),u),c=c.parent;return invert(u,u),applyTransform$1(l,l,u),l},a}(Region);function decode(n){if(!n.UTF8Encoding)return n;var a=n,r=a.UTF8Scale;r==null&&(r=1024);var o=a.features;return each$f(o,function(l){var u=l.geometry,c=u.encodeOffsets,h=u.coordinates;if(!!c)switch(u.type){case"LineString":u.coordinates=decodeRing(h,c,r);break;case"Polygon":decodeRings(h,c,r);break;case"MultiLineString":decodeRings(h,c,r);break;case"MultiPolygon":each$f(h,function(f,v){return decodeRings(f,c[v],r)})}}),a.UTF8Encoding=!1,a}function decodeRings(n,a,r){for(var o=0;o<n.length;o++)n[o]=decodeRing(n[o],a[o],r)}function decodeRing(n,a,r){for(var o=[],l=a[0],u=a[1],c=0;c<n.length;c+=2){var h=n.charCodeAt(c)-64,f=n.charCodeAt(c+1)-64;h=h>>1^-(h&1),f=f>>1^-(f&1),h+=l,f+=u,l=h,u=f,o.push([h/r,f/r])}return o}function parseGeoJSON(n,a){return n=decode(n),map$1(filter(n.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var o=r.properties,l=r.geometry,u=[];switch(l.type){case"Polygon":var c=l.coordinates;u.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(f){f[0]&&u.push(new GeoJSONPolygonGeometry(f[0],f.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(l.coordinates))}var h=new GeoJSONRegion(o[a||"name"],u,o.cp);return h.properties=o,h})}const number=Object.freeze(Object.defineProperty({__proto__:null,linearMap:linearMap$2,round:round$3,asc:asc$2,getPrecision,getPrecisionSafe,getPixelPrecision,getPercentWithPrecision,MAX_SAFE_INTEGER,remRadian,isRadianAroundZero,parseDate,quantity,quantityExponent,nice,quantile,reformIntervals,isNumeric,numericToNumber},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,parse:parseDate,format:format$1},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,extendShape,extendPath,makePath,makeImage,mergePath,resizePath,createIcon,updateProps:updateProps$1,initProps,getTransform:getTransform$1,clipPointsByRect,clipRectByRect,registerShape,getShapeClass,Group:Group$4,Image:ZRImage$1,Text:ZRText$1,Circle:Circle$1,Ellipse:Ellipse$1,Sector:Sector$1,Ring:Ring$1,Polygon:Polygon$1,Polyline:Polyline$3,Rect:Rect$3,Line:Line$3,BezierCurve:BezierCurve$1,Arc:Arc$1,IncrementalDisplayable:IncrementalDisplayable$1,CompoundPath:CompoundPath$1,LinearGradient:LinearGradient$1,RadialGradient:RadialGradient$1,BoundingRect:BoundingRect$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,toCamelCase,normalizeCssArray,encodeHTML,formatTpl,getTooltipMarker,formatTime,capitalFirst,truncateText,getTextRect},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,map:map$1,each:each$f,indexOf,inherits,reduce,filter,bind:bind$1,curry:curry$1,isArray:isArray$1,isString,isObject:isObject$3,isFunction,extend,defaults,clone:clone$4,merge},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function createAxisLabels(n){return n.type==="category"?makeCategoryLabels(n):makeRealNumberLabels(n)}function createAxisTicks(n,a){return n.type==="category"?makeCategoryTicks(n,a):{ticks:map$1(n.scale.getTicks(),function(r){return r.value})}}function makeCategoryLabels(n){var a=n.getLabelModel(),r=makeCategoryLabelsActually(n,a);return!a.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function makeCategoryLabelsActually(n,a){var r=getListCache(n,"labels"),o=getOptionCategoryInterval(a),l=listCacheGet(r,o);if(l)return l;var u,c;return isFunction(o)?u=makeLabelsByCustomizedCategoryInterval(n,o):(c=o==="auto"?makeAutoCategoryInterval(n):o,u=makeLabelsByNumericCategoryInterval(n,c)),listCacheSet(r,o,{labels:u,labelCategoryInterval:c})}function makeCategoryTicks(n,a){var r=getListCache(n,"ticks"),o=getOptionCategoryInterval(a),l=listCacheGet(r,o);if(l)return l;var u,c;if((!a.get("show")||n.scale.isBlank())&&(u=[]),isFunction(o))u=makeLabelsByCustomizedCategoryInterval(n,o,!0);else if(o==="auto"){var h=makeCategoryLabelsActually(n,n.getLabelModel());c=h.labelCategoryInterval,u=map$1(h.labels,function(f){return f.tickValue})}else c=o,u=makeLabelsByNumericCategoryInterval(n,c,!0);return listCacheSet(r,o,{ticks:u,tickCategoryInterval:c})}function makeRealNumberLabels(n){var a=n.scale.getTicks(),r=makeLabelFormatter(n);return{labels:map$1(a,function(o,l){return{level:o.level,formattedLabel:r(o,l),rawLabel:n.scale.getLabel(o),tickValue:o.value}})}}function getListCache(n,a){return inner$g(n)[a]||(inner$g(n)[a]=[])}function listCacheGet(n,a){for(var r=0;r<n.length;r++)if(n[r].key===a)return n[r].value}function listCacheSet(n,a,r){return n.push({key:a,value:r}),r}function makeAutoCategoryInterval(n){var a=inner$g(n).autoInterval;return a!=null?a:inner$g(n).autoInterval=n.calculateCategoryInterval()}function calculateCategoryInterval(n){var a=fetchAutoCategoryIntervalCalculationParams(n),r=makeLabelFormatter(n),o=(a.axisRotate-a.labelRotate)/180*Math.PI,l=n.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var h=1;c>40&&(h=Math.max(1,Math.floor(c/40)));for(var f=u[0],v=n.dataToCoord(f+1)-n.dataToCoord(f),d=Math.abs(v*Math.cos(o)),p=Math.abs(v*Math.sin(o)),g=0,y=0;f<=u[1];f+=h){var _=0,S=0,x=getBoundingRect(r({value:f}),a.font,"center","top");_=x.width*1.3,S=x.height*1.3,g=Math.max(g,_,7),y=Math.max(y,S,7)}var T=g/d,A=y/p;isNaN(T)&&(T=1/0),isNaN(A)&&(A=1/0);var b=Math.max(0,Math.floor(Math.min(T,A))),C=inner$g(n.model),E=n.getExtent(),w=C.lastAutoInterval,D=C.lastTickCount;return w!=null&&D!=null&&Math.abs(w-b)<=1&&Math.abs(D-c)<=1&&w>b&&C.axisExtent0===E[0]&&C.axisExtent1===E[1]?b=w:(C.lastTickCount=c,C.lastAutoInterval=b,C.axisExtent0=E[0],C.axisExtent1=E[1]),b}function fetchAutoCategoryIntervalCalculationParams(n){var a=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:a.get("rotate")||0,font:a.getFont()}}function makeLabelsByNumericCategoryInterval(n,a,r){var o=makeLabelFormatter(n),l=n.scale,u=l.getExtent(),c=n.getLabelModel(),h=[],f=Math.max((a||0)+1,1),v=u[0],d=l.count();v!==0&&f>1&&d/f>2&&(v=Math.round(Math.ceil(v/f)*f));var p=shouldShowAllLabels(n),g=c.get("showMinLabel")||p,y=c.get("showMaxLabel")||p;g&&v!==u[0]&&S(u[0]);for(var _=v;_<=u[1];_+=f)S(_);y&&_-f!==u[1]&&S(u[1]);function S(x){var T={value:x};h.push(r?x:{formattedLabel:o(T),rawLabel:l.getLabel(T),tickValue:x})}return h}function makeLabelsByCustomizedCategoryInterval(n,a,r){var o=n.scale,l=makeLabelFormatter(n),u=[];return each$f(o.getTicks(),function(c){var h=o.getLabel(c),f=c.value;a(c.value,h)&&u.push(r?f:{formattedLabel:l(c),rawLabel:h,tickValue:f})}),u}var NORMALIZED_EXTENT=[0,1],Axis=function(){function n(a,r,o){this.onBand=!1,this.inverse=!1,this.dim=a,this.scale=r,this._extent=o||[0,0]}return n.prototype.contain=function(a){var r=this._extent,o=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return a>=o&&a<=l},n.prototype.containData=function(a){return this.scale.contain(a)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(a){return getPixelPrecision(a||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(a,r){var o=this._extent;o[0]=a,o[1]=r},n.prototype.dataToCoord=function(a,r){var o=this._extent,l=this.scale;return a=l.normalize(a),this.onBand&&l.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,l.count())),linearMap$2(a,NORMALIZED_EXTENT,o,r)},n.prototype.coordToData=function(a,r){var o=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,l.count()));var u=linearMap$2(a,o,NORMALIZED_EXTENT,r);return this.scale.scale(u)},n.prototype.pointToData=function(a,r){},n.prototype.getTicksCoords=function(a){a=a||{};var r=a.tickModel||this.getTickModel(),o=createAxisTicks(this,r),l=o.ticks,u=map$1(l,function(h){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(h):h),tickValue:h}},this),c=r.get("alignWithLabel");return fixOnBandTicksCoords(this,u,c,a.clamp),u},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var a=this.model.getModel("minorTick"),r=a.get("splitNumber");r>0&&r<100||(r=5);var o=this.scale.getMinorTicks(r),l=map$1(o,function(u){return map$1(u,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return l},n.prototype.getViewLabels=function(){return createAxisLabels(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var a=this._extent,r=this.scale.getExtent(),o=r[1]-r[0]+(this.onBand?1:0);o===0&&(o=1);var l=Math.abs(a[1]-a[0]);return Math.abs(l)/o},n.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},n}();function fixExtentWithBands(n,a){var r=n[1]-n[0],o=a,l=r/o/2;n[0]+=l,n[1]-=l}function fixOnBandTicksCoords(n,a,r,o){var l=a.length;if(!n.onBand||r||!l)return;var u=n.getExtent(),c,h;if(l===1)a[0].coord=u[0],c=a[1]={coord:u[1]};else{var f=a[l-1].tickValue-a[0].tickValue,v=(a[l-1].coord-a[0].coord)/f;each$f(a,function(y){y.coord-=v/2});var d=n.scale.getExtent();h=1+d[1]-a[l-1].tickValue,c={coord:a[l-1].coord+v*h},a.push(c)}var p=u[0]>u[1];g(a[0].coord,u[0])&&(o?a[0].coord=u[0]:a.shift()),o&&g(u[0],a[0].coord)&&a.unshift({coord:u[0]}),g(u[1],c.coord)&&(o?c.coord=u[1]:a.pop()),o&&g(c.coord,u[1])&&a.push({coord:u[1]});function g(y,_){return y=round$3(y),_=round$3(_),p?y>_:y<_}}const Axis$1=Axis;function extendComponentModel(n){var a=ComponentModel$1.extend(n);return ComponentModel$1.registerClass(a),a}function extendComponentView(n){var a=ComponentView$1.extend(n);return ComponentView$1.registerClass(a),a}function extendSeriesModel(n){var a=SeriesModel$1.extend(n);return SeriesModel$1.registerClass(a),a}function extendChartView(n){var a=ChartView$1.extend(n);return ChartView$1.registerClass(a),a}var PI2$2=Math.PI*2,CMD$1=PathProxy$1.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(n,a,r,o,l){var u=r.width,c=r.height;switch(n){case"top":o.set(r.x+u/2,r.y-a),l.set(0,-1);break;case"bottom":o.set(r.x+u/2,r.y+c+a),l.set(0,1);break;case"left":o.set(r.x-a,r.y+c/2),l.set(-1,0);break;case"right":o.set(r.x+u+a,r.y+c/2),l.set(1,0);break}}function projectPointToArc(n,a,r,o,l,u,c,h,f){c-=n,h-=a;var v=Math.sqrt(c*c+h*h);c/=v,h/=v;var d=c*r+n,p=h*r+a;if(Math.abs(o-l)%PI2$2<1e-4)return f[0]=d,f[1]=p,v-r;if(u){var g=o;o=normalizeRadian(l),l=normalizeRadian(g)}else o=normalizeRadian(o),l=normalizeRadian(l);o>l&&(l+=PI2$2);var y=Math.atan2(h,c);if(y<0&&(y+=PI2$2),y>=o&&y<=l||y+PI2$2>=o&&y+PI2$2<=l)return f[0]=d,f[1]=p,v-r;var _=r*Math.cos(o)+n,S=r*Math.sin(o)+a,x=r*Math.cos(l)+n,T=r*Math.sin(l)+a,A=(_-c)*(_-c)+(S-h)*(S-h),b=(x-c)*(x-c)+(T-h)*(T-h);return A<b?(f[0]=_,f[1]=S,Math.sqrt(A)):(f[0]=x,f[1]=T,Math.sqrt(b))}function projectPointToLine(n,a,r,o,l,u,c,h){var f=l-n,v=u-a,d=r-n,p=o-a,g=Math.sqrt(d*d+p*p);d/=g,p/=g;var y=f*d+v*p,_=y/g;h&&(_=Math.min(Math.max(_,0),1)),_*=g;var S=c[0]=n+_*d,x=c[1]=a+_*p;return Math.sqrt((S-l)*(S-l)+(x-u)*(x-u))}function projectPointToRect(n,a,r,o,l,u,c){r<0&&(n=n+r,r=-r),o<0&&(a=a+o,o=-o);var h=n+r,f=a+o,v=c[0]=Math.min(Math.max(l,n),h),d=c[1]=Math.min(Math.max(u,a),f);return Math.sqrt((v-l)*(v-l)+(d-u)*(d-u))}var tmpPt=[];function nearestPointOnRect(n,a,r){var o=projectPointToRect(a.x,a.y,a.width,a.height,n.x,n.y,tmpPt);return r.set(tmpPt[0],tmpPt[1]),o}function nearestPointOnPath(n,a,r){for(var o=0,l=0,u=0,c=0,h,f,v=1/0,d=a.data,p=n.x,g=n.y,y=0;y<d.length;){var _=d[y++];y===1&&(o=d[y],l=d[y+1],u=o,c=l);var S=v;switch(_){case CMD$1.M:u=d[y++],c=d[y++],o=u,l=c;break;case CMD$1.L:S=projectPointToLine(o,l,d[y],d[y+1],p,g,tmpPt,!0),o=d[y++],l=d[y++];break;case CMD$1.C:S=cubicProjectPoint(o,l,d[y++],d[y++],d[y++],d[y++],d[y],d[y+1],p,g,tmpPt),o=d[y++],l=d[y++];break;case CMD$1.Q:S=quadraticProjectPoint(o,l,d[y++],d[y++],d[y],d[y+1],p,g,tmpPt),o=d[y++],l=d[y++];break;case CMD$1.A:var x=d[y++],T=d[y++],A=d[y++],b=d[y++],C=d[y++],E=d[y++];y+=1;var w=!!(1-d[y++]);h=Math.cos(C)*A+x,f=Math.sin(C)*b+T,y<=1&&(u=h,c=f);var D=(p-x)*b/A+x;S=projectPointToArc(x,T,b,C,C+E,w,D,g,tmpPt),o=Math.cos(C+E)*A+x,l=Math.sin(C+E)*b+T;break;case CMD$1.R:u=o=d[y++],c=l=d[y++];var M=d[y++],P=d[y++];S=projectPointToRect(u,c,M,P,p,g,tmpPt);break;case CMD$1.Z:S=projectPointToLine(o,l,u,c,p,g,tmpPt,!0),o=u,l=c;break}S<v&&(v=S,r.set(tmpPt[0],tmpPt[1]))}return v}var pt0=new Point$1,pt1=new Point$1,pt2=new Point$1,dir=new Point$1,dir2=new Point$1;function updateLabelLinePoints(n,a){if(!!n){var r=n.getTextGuideLine(),o=n.getTextContent();if(!!(o&&r)){var l=n.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],c=l.candidates||DEFAULT_SEARCH_SPACE,h=o.getBoundingRect().clone();h.applyTransform(o.getComputedTransform());var f=1/0,v=l.anchor,d=n.getComputedTransform(),p=d&&invert([],d),g=a.get("length2")||0;v&&pt2.copy(v);for(var y=0;y<c.length;y++){var _=c[y];getCandidateAnchor(_,0,h,pt0,dir),Point$1.scaleAndAdd(pt1,pt0,dir,g),pt1.transform(p);var S=n.getBoundingRect(),x=v?v.distance(pt1):n instanceof Path$1?nearestPointOnPath(pt1,n.path,pt2):nearestPointOnRect(pt1,S,pt2);x<f&&(f=x,pt1.transform(d),pt2.transform(d),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,a.get("minTurnAngle")),r.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point$1;function limitTurnAngle(n,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(n[0]),pt1.fromArray(n[1]),pt2.fromArray(n[2]),Point$1.sub(dir,pt0,pt1),Point$1.sub(dir2,pt2,pt1);var r=dir.len(),o=dir2.len();if(!(r<.001||o<.001)){dir.scale(1/r),dir2.scale(1/o);var l=dir.dot(dir2),u=Math.cos(a);if(u<l){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-a));var h=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(h))return;h<0?Point$1.copy(tmpProjPoint,pt1):h>1&&Point$1.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(n[1])}}}}function limitSurfaceAngle(n,a,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(n[0]),pt1.fromArray(n[1]),pt2.fromArray(n[2]),Point$1.sub(dir,pt1,pt0),Point$1.sub(dir2,pt2,pt1);var o=dir.len(),l=dir2.len();if(!(o<.001||l<.001)){dir.scale(1/o),dir2.scale(1/l);var u=dir.dot(a),c=Math.cos(r);if(u<c){var h=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var f=Math.PI/2,v=Math.acos(dir2.dot(a)),d=f+v-r;if(d>=f)Point$1.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,h/Math.tan(Math.PI/2-d));var p=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(p))return;p<0?Point$1.copy(tmpProjPoint,pt1):p>1&&Point$1.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(n[1])}}}}function setLabelLineState(n,a,r,o){var l=r==="normal",u=l?n:n.ensureState(r);u.ignore=a;var c=o.get("smooth");c&&c===!0&&(c=.3),u.shape=u.shape||{},c>0&&(u.shape.smooth=c);var h=o.getModel("lineStyle").getLineStyle();l?n.useStyle(h):u.style=h}function buildLabelLinePath(n,a){var r=a.smooth,o=a.points;if(!!o)if(n.moveTo(o[0][0],o[0][1]),r>0&&o.length>=3){var l=dist$1(o[0],o[1]),u=dist$1(o[1],o[2]);if(!l||!u){n.lineTo(o[1][0],o[1][1]),n.lineTo(o[2][0],o[2][1]);return}var c=Math.min(l,u)*r,h=lerp$1([],o[1],o[0],c/l),f=lerp$1([],o[1],o[2],c/u),v=lerp$1([],h,f,.5);n.bezierCurveTo(h[0],h[1],h[0],h[1],v[0],v[1]),n.bezierCurveTo(f[0],f[1],f[0],f[1],o[2][0],o[2][1])}else for(var d=1;d<o.length;d++)n.lineTo(o[d][0],o[d][1])}function setLabelLineStyle(n,a,r){var o=n.getTextGuideLine(),l=n.getTextContent();if(!l){o&&n.removeTextGuideLine();return}for(var u=a.normal,c=u.get("show"),h=l.ignore,f=0;f<DISPLAY_STATES.length;f++){var v=DISPLAY_STATES[f],d=a[v],p=v==="normal";if(d){var g=d.get("show"),y=p?h:retrieve2(l.states[v]&&l.states[v].ignore,h);if(y||!retrieve2(g,c)){var _=p?o:o&&o.states[v];_&&(_.ignore=!0);continue}o||(o=new Polyline$3,n.setTextGuideLine(o),!p&&(h||!c)&&setLabelLineState(o,!0,"normal",a.normal),n.stateProxy&&(o.stateProxy=n.stateProxy)),setLabelLineState(o,!1,v,d)}}if(o){defaults(o.style,r),o.style.fill=null;var S=u.get("showAbove"),x=n.textGuideLineConfig=n.textGuideLineConfig||{};x.showAbove=S||!1,o.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(n,a){a=a||"labelLine";for(var r={normal:n.getModel(a)},o=0;o<SPECIAL_STATES.length;o++){var l=SPECIAL_STATES[o];r[l]=n.getModel([l,a])}return r}function prepareLayoutList(n){for(var a=[],r=0;r<n.length;r++){var o=n[r];if(!o.defaultAttr.ignore){var l=o.label,u=l.getComputedTransform(),c=l.getBoundingRect(),h=!u||u[1]<1e-5&&u[2]<1e-5,f=l.style.margin||0,v=c.clone();v.applyTransform(u),v.x-=f/2,v.y-=f/2,v.width+=f,v.height+=f;var d=h?new OrientedBoundingRect$1(c,u):null;a.push({label:l,labelLine:o.labelLine,rect:v,localRect:c,obb:d,priority:o.priority,defaultAttr:o.defaultAttr,layoutOption:o.computedLayoutOption,axisAligned:h,transform:u})}}return a}function shiftLayout(n,a,r,o,l,u){var c=n.length;if(c<2)return;n.sort(function(M,P){return M.rect[a]-P.rect[a]});for(var h=0,f,v=!1,d=0,p=0;p<c;p++){var g=n[p],y=g.rect;f=y[a]-h,f<0&&(y[a]-=f,g.label[a]-=f,v=!0);var _=Math.max(-f,0);d+=_,h=y[a]+y[r]}d>0&&u&&E(-d/c,0,c);var S=n[0],x=n[c-1],T,A;b(),T<0&&w(-T,.8),A<0&&w(A,.8),b(),C(T,A,1),C(A,T,-1),b(),T<0&&D(-T),A<0&&D(A);function b(){T=S.rect[a]-o,A=l-x.rect[a]-x.rect[r]}function C(M,P,L){if(M<0){var I=Math.min(P,-M);if(I>0){E(I*L,0,c);var R=I+M;R<0&&w(-R*L,1)}else w(-M*L,1)}}function E(M,P,L){M!==0&&(v=!0);for(var I=P;I<L;I++){var R=n[I],O=R.rect;O[a]+=M,R.label[a]+=M}}function w(M,P){for(var L=[],I=0,R=1;R<c;R++){var O=n[R-1].rect,N=Math.max(n[R].rect[a]-O[a]-O[r],0);L.push(N),I+=N}if(!!I){var V=Math.min(Math.abs(M)/I,P);if(M>0)for(var R=0;R<c-1;R++){var B=L[R]*V;E(B,0,R+1)}else for(var R=c-1;R>0;R--){var B=L[R-1]*V;E(-B,R,c)}}}function D(M){var P=M<0?-1:1;M=Math.abs(M);for(var L=Math.ceil(M/(c-1)),I=0;I<c-1;I++)if(P>0?E(L,0,I+1):E(-L,c-I-1,c),M-=L,M<=0)return}return v}function shiftLayoutOnX(n,a,r,o){return shiftLayout(n,"x","width",a,r,o)}function shiftLayoutOnY(n,a,r,o){return shiftLayout(n,"y","height",a,r,o)}function hideOverlap(n){var a=[];n.sort(function(S,x){return x.priority-S.priority});var r=new BoundingRect$1(0,0,0,0);function o(S){if(!S.ignore){var x=S.ensureState("emphasis");x.ignore==null&&(x.ignore=!1)}S.ignore=!0}for(var l=0;l<n.length;l++){var u=n[l],c=u.axisAligned,h=u.localRect,f=u.transform,v=u.label,d=u.labelLine;r.copy(u.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var p=u.obb,g=!1,y=0;y<a.length;y++){var _=a[y];if(!!r.intersect(_.rect)){if(c&&_.axisAligned){g=!0;break}if(_.obb||(_.obb=new OrientedBoundingRect$1(_.localRect,_.transform)),p||(p=new OrientedBoundingRect$1(h,f)),p.intersect(_.obb)){g=!0;break}}}g?(o(v),d&&o(d)):(v.attr("ignore",u.defaultAttr.ignore),d&&d.attr("ignore",u.defaultAttr.labelGuideIgnore),a.push(u))}}function cloneArr(n){if(n){for(var a=[],r=0;r<n.length;r++)a.push(n[r].slice());return a}}function prepareLayoutCallbackParams(n,a){var r=n.label,o=a&&a.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:cloneArr(o&&o.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable$1,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(n,a,r){for(var o=0;o<r.length;o++){var l=r[o];a[l]!=null&&(n[l]=a[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(a,r,o,l,u){var c=l.style,h=l.__hostTarget,f=h.textConfig||{},v=l.getComputedTransform(),d=l.getBoundingRect().plain();BoundingRect$1.applyTransform(d,d,v),v?dummyTransformable.setLocalTransform(v):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var p=l.__hostTarget,g;if(p){g=p.getBoundingRect().plain();var y=p.getComputedTransform();BoundingRect$1.applyTransform(g,g,y)}var _=g&&p.getTextGuideLine();this._labelList.push({label:l,labelLine:_,seriesModel:o,dataIndex:a,dataType:r,layoutOption:u,computedLayoutOption:null,rect:d,hostRect:g,priority:g?g.width*g.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:_&&_.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:l.cursor,attachedPos:f.position,attachedRot:f.rotation}})},n.prototype.addLabelsOfSeries=function(a){var r=this;this._chartViewList.push(a);var o=a.__model,l=o.get("labelLayout");!(isFunction(l)||keys(l).length)||a.group.traverse(function(u){if(u.ignore)return!0;var c=u.getTextContent(),h=getECData(u);c&&!c.disableLabelLayout&&r._addLabel(h.dataIndex,h.dataType,o,c,l)})},n.prototype.updateLayoutConfig=function(a){var r=a.getWidth(),o=a.getHeight();function l(b,C){return function(){updateLabelLinePoints(b,C)}}for(var u=0;u<this._labelList.length;u++){var c=this._labelList[u],h=c.label,f=h.__hostTarget,v=c.defaultAttr,d=void 0;isFunction(c.layoutOption)?d=c.layoutOption(prepareLayoutCallbackParams(c,f)):d=c.layoutOption,d=d||{},c.computedLayoutOption=d;var p=Math.PI/180;f&&f.setTextConfig({local:!1,position:d.x!=null||d.y!=null?null:v.attachedPos,rotation:d.rotate!=null?d.rotate*p:v.attachedRot,offset:[d.dx||0,d.dy||0]});var g=!1;if(d.x!=null?(h.x=parsePercent(d.x,r),h.setStyle("x",0),g=!0):(h.x=v.x,h.setStyle("x",v.style.x)),d.y!=null?(h.y=parsePercent(d.y,o),h.setStyle("y",0),g=!0):(h.y=v.y,h.setStyle("y",v.style.y)),d.labelLinePoints){var y=f.getTextGuideLine();y&&(y.setShape({points:d.labelLinePoints}),g=!1)}var _=labelLayoutInnerStore(h);_.needsUpdateLabelLine=g,h.rotation=d.rotate!=null?d.rotate*p:v.rotation,h.scaleX=v.scaleX,h.scaleY=v.scaleY;for(var S=0;S<LABEL_OPTION_TO_STYLE_KEYS.length;S++){var x=LABEL_OPTION_TO_STYLE_KEYS[S];h.setStyle(x,d[x]!=null?d[x]:v.style[x])}if(d.draggable){if(h.draggable=!0,h.cursor="move",f){var T=c.seriesModel;if(c.dataIndex!=null){var A=c.seriesModel.getData(c.dataType);T=A.getItemModel(c.dataIndex)}h.on("drag",l(f,T.getModel("labelLine")))}}else h.off("drag"),h.cursor=v.cursor}},n.prototype.layout=function(a){var r=a.getWidth(),o=a.getHeight(),l=prepareLayoutList(this._labelList),u=filter(l,function(f){return f.layoutOption.moveOverlap==="shiftX"}),c=filter(l,function(f){return f.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,r),shiftLayoutOnY(c,0,o);var h=filter(l,function(f){return f.layoutOption.hideOverlap});hideOverlap(h)},n.prototype.processLabelsOverall=function(){var a=this;each$f(this._chartViewList,function(r){var o=r.__model,l=r.ignoreLabelLineUpdate,u=o.isAnimationEnabled();r.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var h=!l,f=c.getTextContent();!h&&f&&(h=labelLayoutInnerStore(f).needsUpdateLabelLine),h&&a._updateLabelLine(c,o),u&&a._animateLabels(c,o)})})},n.prototype._updateLabelLine=function(a,r){var o=a.getTextContent(),l=getECData(a),u=l.dataIndex;if(o&&u!=null){var c=r.getData(l.dataType),h=c.getItemModel(u),f={},v=c.getItemVisual(u,"style");if(v){var d=c.getVisual("drawType");f.stroke=v[d]}var p=h.getModel("labelLine");setLabelLineStyle(a,getLabelLineStatesModels(h),f),updateLabelLinePoints(a,p)}},n.prototype._animateLabels=function(a,r){var o=a.getTextContent(),l=a.getTextGuideLine();if(o&&(a.forceLabelAnimation||!o.ignore&&!o.invisible&&!a.disableLabelAnimation&&!isElementRemoved(a))){var u=labelLayoutInnerStore(o),c=u.oldLayout,h=getECData(a),f=h.dataIndex,v={x:o.x,y:o.y,rotation:o.rotation},d=r.getData(h.dataType);if(c){o.attr(c);var g=a.prevStates;g&&(indexOf(g,"select")>=0&&o.attr(u.oldLayoutSelect),indexOf(g,"emphasis")>=0&&o.attr(u.oldLayoutEmphasis)),updateProps$1(o,v,r,f)}else if(o.attr(v),!labelInner(o).valueAnimation){var p=retrieve2(o.style.opacity,1);o.style.opacity=0,initProps(o,{style:{opacity:p}},r,f)}if(u.oldLayout=v,o.states.select){var y=u.oldLayoutSelect={};extendWithKeys(y,v,LABEL_LAYOUT_PROPS),extendWithKeys(y,o.states.select,LABEL_LAYOUT_PROPS)}if(o.states.emphasis){var _=u.oldLayoutEmphasis={};extendWithKeys(_,v,LABEL_LAYOUT_PROPS),extendWithKeys(_,o.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(o,f,d,r,r)}if(l&&!l.ignore&&!l.invisible){var u=labelLineAnimationStore(l),c=u.oldLayout,S={points:l.shape.points};c?(l.attr({shape:c}),updateProps$1(l,{shape:S},r)):(l.setShape(S),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},r)),u.oldLayout=S}},n}();const LabelManager$1=LabelManager;var getLabelManager=makeInner();function installLabelLayout(n){n.registerUpdateLifecycle("series:beforeupdate",function(a,r,o){var l=getLabelManager(r).labelManager;l||(l=getLabelManager(r).labelManager=new LabelManager$1),l.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(a,r,o){var l=getLabelManager(r).labelManager;o.updatedSeries.forEach(function(u){l.addLabelsOfSeries(r.getViewOfSeriesModel(u))}),l.updateLayoutConfig(r),l.layout(r),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function n(){}return n.prototype.reset=function(a){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,a||4)},n.prototype.moveTo=function(a,r){this._add("M",a,r)},n.prototype.lineTo=function(a,r){this._add("L",a,r)},n.prototype.bezierCurveTo=function(a,r,o,l,u,c){this._add("C",a,r,o,l,u,c)},n.prototype.quadraticCurveTo=function(a,r,o,l){this._add("Q",a,r,o,l)},n.prototype.arc=function(a,r,o,l,u,c){this.ellipse(a,r,o,o,0,l,u,c)},n.prototype.ellipse=function(a,r,o,l,u,c,h,f){var v=h-c,d=!f,p=Math.abs(v),g=isAroundZero(p-PI2$1)||(d?v>=PI2$1:-v>=PI2$1),y=v>0?v%PI2$1:v%PI2$1+PI2$1,_=!1;g?_=!0:isAroundZero(p)?_=!1:_=y>=PI$4==!!d;var S=a+o*mathCos(c),x=r+l*mathSin(c);this._start&&this._add("M",S,x);var T=Math.round(u*degree);if(g){var A=1/this._p,b=(d?1:-1)*(PI2$1-A);this._add("A",o,l,T,1,+d,a+o*mathCos(c+b),r+l*mathSin(c+b)),A>.01&&this._add("A",o,l,T,0,+d,S,x)}else{var C=a+o*mathCos(h),E=r+l*mathSin(h);this._add("A",o,l,T,+_,+d,C,E)}},n.prototype.rect=function(a,r,o,l){this._add("M",a,r),this._add("l",o,0),this._add("l",0,l),this._add("l",-o,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(a,r,o,l,u,c,h,f,v){for(var d=[],p=this._p,g=1;g<arguments.length;g++){var y=arguments[g];if(isNaN(y)){this._invalid=!0;return}d.push(Math.round(y*p)/p)}this._d.push(a+d.join(" ")),this._start=a==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}();const SVGPathRebuilder$1=SVGPathRebuilder;var NONE="none",mathRound=Math.round;function pathHasFill(n){var a=n.fill;return a!=null&&a!==NONE}function pathHasStroke(n){var a=n.stroke;return a!=null&&a!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(n){return"stroke-"+n.toLowerCase()});function mapStyleToAttrs(n,a,r,o){var l=a.opacity==null?1:a.opacity;if(r instanceof ZRImage$1){n("opacity",l);return}if(pathHasFill(a)){var u=normalizeColor(a.fill);n("fill",u.color);var c=a.fillOpacity!=null?a.fillOpacity*u.opacity*l:u.opacity*l;(o||c<1)&&n("fill-opacity",c)}else n("fill",NONE);if(pathHasStroke(a)){var h=normalizeColor(a.stroke);n("stroke",h.color);var f=a.strokeNoScale?r.getLineScale():1,v=f?(a.lineWidth||0)/f:0,d=a.strokeOpacity!=null?a.strokeOpacity*h.opacity*l:h.opacity*l,p=a.strokeFirst;if((o||v!==1)&&n("stroke-width",v),(o||p)&&n("paint-order",p?"stroke":"fill"),(o||d<1)&&n("stroke-opacity",d),a.lineDash){var g=getLineDash(r),y=g[0],_=g[1];y&&(_=mathRound(_||0),n("stroke-dasharray",y.join(",")),(_||o)&&n("stroke-dashoffset",_))}else o&&n("stroke-dasharray",NONE);for(var S=0;S<strokeProps.length;S++){var x=strokeProps[S];if(o||a[x]!==DEFAULT_PATH_STYLE[x]){var T=a[x]||DEFAULT_PATH_STYLE[x];T&&n(svgStrokeProps[S],T)}}}else o&&n("stroke",NONE)}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace";function createElement(n){return document.createElementNS(SVGNS,n)}function createVNode(n,a,r,o,l){return{tag:n,attrs:r||{},children:o,text:l,key:a}}function createElementOpen(n,a){var r=[];if(a)for(var o in a){var l=a[o],u=o;l!==!1&&(l!==!0&&l!=null&&(u+='="'+l+'"'),r.push(u))}return"<"+n+" "+r.join(" ")+">"}function createElementClose(n){return"</"+n+">"}function vNodeToString(n,a){a=a||{};var r=a.newline?`
`:"";function o(l){var u=l.children,c=l.tag,h=l.attrs,f=l.text;return createElementOpen(c,h)+(c!=="style"?encodeHTML(f):f||"")+(u?""+r+map$1(u,function(v){return o(v)}).join(r)+r:"")+createElementClose(c)}return o(n)}function getCssString(n,a,r){r=r||{};var o=r.newline?`
`:"",l=" {"+o,u=o+"}",c=map$1(keys(n),function(f){return f+l+map$1(keys(n[f]),function(v){return v+":"+n[f][v]+";"}).join(o)+u}).join(o),h=map$1(keys(a),function(f){return"@keyframes "+f+l+map$1(keys(a[f]),function(v){return v+l+map$1(keys(a[f][v]),function(d){var p=a[f][v][d];return d==="d"&&(p='path("'+p+'")'),d+":"+p+";"}).join(o)+u}).join(o)+u}).join(o);return!c&&!h?"":["<![CDATA[",c,h,"]]>"].join(o)}function createBrushScope(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(n,a,r,o){return createVNode("svg","root",{width:n,height:a,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:o?"0 0 "+n+" "+a:!1},r)}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(n,a,r){var o=extend({},n.shape);extend(o,a),n.buildPath(r,o);var l=new SVGPathRebuilder$1;return l.reset(getPathPrecision(n)),r.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(n,a){var r=a.originX,o=a.originY;(r||o)&&(n[transformOriginKey]=r+"px "+o+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(n,a){var r=a.zrId+"-ani-"+a.cssAnimIdx++;return a.cssAnims[r]=n,r}function createCompoundPathCSSAnimation(n,a,r){var o=n.shape.paths,l={},u,c;if(each$f(o,function(f){var v=createBrushScope(r.zrId);v.animation=!0,createCSSAnimation(f,{},v,!0);var d=v.cssAnims,p=v.cssNodes,g=keys(d),y=g.length;if(!!y){c=g[y-1];var _=d[c];for(var S in _){var x=_[S];l[S]=l[S]||{d:""},l[S].d+=x.d||""}for(var T in p){var A=p[T].animation;A.indexOf(c)>=0&&(u=A)}}}),!!u){a.d=!1;var h=addAnimation(l,r);return u.replace(c,h)}}function getEasingFunc(n){return isString(n)?EASING_MAP[n]?"cubic-bezier("+EASING_MAP[n]+")":createCubicEasingFunc(n)?n:"":""}function createCSSAnimation(n,a,r,o){var l=n.animators,u=l.length,c=[];if(n instanceof CompoundPath$1){var h=createCompoundPathCSSAnimation(n,a,r);if(h)c.push(h);else if(!u)return}else if(!u)return;for(var f={},v=0;v<u;v++){var d=l[v],p=[d.getMaxTime()/1e3+"s"],g=getEasingFunc(d.getClip().easing),y=d.getDelay();g?p.push(g):p.push("linear"),y&&p.push(y/1e3+"s"),d.getLoop()&&p.push("infinite");var _=p.join(" ");f[_]=f[_]||[_,[]],f[_][1].push(d)}function S(A){var b=A[1],C=b.length,E={},w={},D={},M="animation-timing-function";function P(q,ee,K){for(var W=q.getTracks(),j=q.getMaxTime(),ae=0;ae<W.length;ae++){var re=W[ae];if(re.needsAnimate()){var ne=re.keyframes,ie=re.propName;if(K&&(ie=K(ie)),ie)for(var oe=0;oe<ne.length;oe++){var le=ne[oe],se=Math.round(le.time/j*100)+"%",ce=getEasingFunc(le.easing),ue=le.rawValue;(isString(ue)||isNumber(ue))&&(ee[se]=ee[se]||{},ee[se][ie]=le.rawValue,ce&&(ee[se][M]=ce))}}}}for(var L=0;L<C;L++){var I=b[L],R=I.targetName;R?R==="shape"&&P(I,w):!o&&P(I,E)}for(var O in E){var N={};copyTransform(N,n),extend(N,E[O]);var V=getSRTTransformString(N),B=E[O][M];D[O]=V?{transform:V}:{},setTransformOrigin(D[O],N),B&&(D[O][M]=B)}var G,F=!0;for(var O in w){D[O]=D[O]||{};var z=!G,B=w[O][M];z&&(G=new PathProxy$1);var H=G.len();G.reset(),D[O].d=buildPathString(n,w[O],G);var U=G.len();if(!z&&H!==U){F=!1;break}B&&(D[O][M]=B)}if(!F)for(var O in D)delete D[O].d;if(!o)for(var L=0;L<C;L++){var I=b[L],R=I.targetName;R==="style"&&P(I,D,function(W){return ANIMATE_STYLE_MAP[W]})}for(var Y=keys(D),Z=!0,X,L=1;L<Y.length;L++){var J=Y[L-1],te=Y[L];if(D[J][transformOriginKey]!==D[te][transformOriginKey]){Z=!1;break}X=D[J][transformOriginKey]}if(Z&&X){for(var O in D)D[O][transformOriginKey]&&delete D[O][transformOriginKey];a[transformOriginKey]=X}if(filter(Y,function(q){return keys(D[q]).length>0}).length){var Q=addAnimation(D,r);return Q+" "+A[0]+" both"}}for(var x in f){var h=S(f[x]);h&&c.push(h)}if(c.length){var T=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+T]={animation:c.join(",")},a.class=T}}var round$1=Math.round;function isImageLike(n){return n&&isString(n.src)}function isCanvasLike(n){return n&&isFunction(n.toDataURL)}function setStyleAttrs(n,a,r,o){mapStyleToAttrs(function(l,u){var c=l==="fill"||l==="stroke";c&&isGradient(u)?setGradient(a,n,l,o):c&&isPattern(u)?setPattern(r,n,l,o):n[l]=u},a,r,!1),setShadow(r,n,o)}function noRotateScale(n){return isAroundZero(n[0]-1)&&isAroundZero(n[1])&&isAroundZero(n[2])&&isAroundZero(n[3]-1)}function noTranslate(n){return isAroundZero(n[4])&&isAroundZero(n[5])}function setTransform(n,a,r){if(a&&!(noTranslate(a)&&noRotateScale(a))){var o=r?10:1e4;n.transform=noRotateScale(a)?"translate("+round$1(a[4]*o)/o+" "+round$1(a[5]*o)/o+")":getMatrixStr(a)}}function convertPolyShape(n,a,r){for(var o=n.points,l=[],u=0;u<o.length;u++)l.push(round$1(o[u][0]*r)/r),l.push(round$1(o[u][1]*r)/r);a.points=l.join(" ")}function validatePolyShape(n){return!n.smooth}function createAttrsConvert(n){var a=map$1(n,function(r){return typeof r=="string"?[r,r]:r});return function(r,o,l){for(var u=0;u<a.length;u++){var c=a[u],h=r[c[0]];h!=null&&(o[c[1]]=round$1(h*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(n){for(var a=n.animators,r=0;r<a.length;r++)if(a[r].targetName==="shape")return!0;return!1}function brushSVGPath(n,a){var r=n.style,o=n.shape,l=builtinShapesDef[n.type],u={},c=a.animation,h="path",f=n.style.strokePercent,v=a.compress&&getPathPrecision(n)||4;if(l&&!a.willUpdate&&!(l[1]&&!l[1](o))&&!(c&&hasShapeAnimation(n))&&!(f<1)){h=n.type;var d=Math.pow(10,v);l[0](o,u,d)}else{var p=!n.path||n.shapeChanged();n.path||n.createPathProxy();var g=n.path;p&&(g.beginPath(),n.buildPath(g,n.shape),n.pathUpdated());var y=g.getVersion(),_=n,S=_.__svgPathBuilder;(_.__svgPathVersion!==y||!S||f!==_.__svgPathStrokePercent)&&(S||(S=_.__svgPathBuilder=new SVGPathRebuilder$1),S.reset(v),g.rebuildPath(S,f),S.generateStr(),_.__svgPathVersion=y,_.__svgPathStrokePercent=f),u.d=S.getStr()}return setTransform(u,n.transform),setStyleAttrs(u,r,n,a),a.animation&&createCSSAnimation(n,u,a),createVNode(h,n.id+"",u)}function brushSVGImage(n,a){var r=n.style,o=r.image;if(o&&!isString(o)&&(isImageLike(o)?o=o.src:isCanvasLike(o)&&(o=o.toDataURL())),!!o){var l=r.x||0,u=r.y||0,c=r.width,h=r.height,f={href:o,width:c,height:h};return l&&(f.x=l),u&&(f.y=u),setTransform(f,n.transform),setStyleAttrs(f,r,n,a),a.animation&&createCSSAnimation(n,f,a),createVNode("image",n.id+"",f)}}function brushSVGTSpan(n,a){var r=n.style,o=r.text;if(o!=null&&(o+=""),!(!o||isNaN(r.x)||isNaN(r.y))){var l=r.font||DEFAULT_FONT,u=r.x||0,c=adjustTextY$1(r.y||0,getLineHeight(l),r.textBaseline),h=TEXT_ALIGN_TO_ANCHOR[r.textAlign]||r.textAlign,f={"dominant-baseline":"central","text-anchor":h};if(hasSeparateFont(r)){var v="",d=r.fontStyle,p=parseFontSize(r.fontSize);if(!parseFloat(p))return;var g=r.fontFamily||DEFAULT_FONT_FAMILY,y=r.fontWeight;v+="font-size:"+p+";font-family:"+g+";",d&&d!=="normal"&&(v+="font-style:"+d+";"),y&&y!=="normal"&&(v+="font-weight:"+y+";"),f.style=v}else f.style="font: "+l;return o.match(/\s/)&&(f["xml:space"]="preserve"),u&&(f.x=u),c&&(f.y=c),setTransform(f,n.transform),setStyleAttrs(f,r,n,a),a.animation&&createCSSAnimation(n,f,a),createVNode("text",n.id+"",f,void 0,o)}}function brush(n,a){if(n instanceof Path$1)return brushSVGPath(n,a);if(n instanceof ZRImage$1)return brushSVGImage(n,a);if(n instanceof TSpan$1)return brushSVGTSpan(n,a)}function setShadow(n,a,r){var o=n.style;if(hasShadow(o)){var l=getShadowKey(n),u=r.shadowCache,c=u[l];if(!c){var h=n.getGlobalScale(),f=h[0],v=h[1];if(!f||!v)return;var d=o.shadowOffsetX||0,p=o.shadowOffsetY||0,g=o.shadowBlur,y=normalizeColor(o.shadowColor),_=y.opacity,S=y.color,x=g/2/f,T=g/2/v,A=x+" "+T;c=r.zrId+"-s"+r.shadowIdx++,r.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:d/f,dy:p/v,stdDeviation:A,"flood-color":S,"flood-opacity":_})]),u[l]=c}a.filter=getIdURL(c)}}function setGradient(n,a,r,o){var l=n[r],u,c={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))u="linearGradient",c.x1=l.x,c.y1=l.y,c.x2=l.x2,c.y2=l.y2;else if(isRadialGradient(l))u="radialGradient",c.cx=retrieve2(l.x,.5),c.cy=retrieve2(l.y,.5),c.r=retrieve2(l.r,.5);else{({}).NODE_ENV!=="production"&&logError("Illegal gradient type.");return}for(var h=l.colorStops,f=[],v=0,d=h.length;v<d;++v){var p=round4(h[v].offset)*100+"%",g=h[v].color,y=normalizeColor(g),_=y.color,S=y.opacity,x={offset:p};x["stop-color"]=_,S<1&&(x["stop-opacity"]=S),f.push(createVNode("stop",v+"",x))}var T=createVNode(u,"",c,f),A=vNodeToString(T),b=o.gradientCache,C=b[A];C||(C=o.zrId+"-g"+o.gradientIdx++,b[A]=C,c.id=C,o.defs[C]=createVNode(u,C,c,f)),a[r]=getIdURL(C)}function setPattern(n,a,r,o){var l=n.style[r],u=n.getBoundingRect(),c={},h=l.repeat,f=h==="no-repeat",v=h==="repeat-x",d=h==="repeat-y",p;if(isImagePattern(l)){var g=l.imageWidth,y=l.imageHeight,_=void 0,S=l.image;if(isString(S)?_=S:isImageLike(S)?_=S.src:isCanvasLike(S)&&(_=S.toDataURL()),typeof Image=="undefined"){var x="Image width/height must been given explictly in svg-ssr renderer.";assert(g,x),assert(y,x)}else if(g==null||y==null){var T=function(L,I){if(L){var R=L.elm,O=g||I.width,N=y||I.height;L.tag==="pattern"&&(v?(N=1,O/=u.width):d&&(O=1,N/=u.height)),L.attrs.width=O,L.attrs.height=N,R&&(R.setAttribute("width",O),R.setAttribute("height",N))}},A=createOrUpdateImage(_,null,n,function(L){f||T(w,L),T(p,L)});A&&A.width&&A.height&&(g=g||A.width,y=y||A.height)}p=createVNode("image","img",{href:_,width:g,height:y}),c.width=g,c.height=y}else l.svgElement&&(p=clone$4(l.svgElement),c.width=l.svgWidth,c.height=l.svgHeight);if(!!p){var b,C;f?b=C=1:v?(C=1,b=c.width/u.width):d?(b=1,C=c.height/u.height):c.patternUnits="userSpaceOnUse",b!=null&&!isNaN(b)&&(c.width=b),C!=null&&!isNaN(C)&&(c.height=C);var E=getSRTTransformString(l);E&&(c.patternTransform=E);var w=createVNode("pattern","",c,[p]),D=vNodeToString(w),M=o.patternCache,P=M[D];P||(P=o.zrId+"-p"+o.patternIdx++,M[D]=P,c.id=P,w=o.defs[P]=createVNode("pattern",P,c,[p])),a[r]=getIdURL(P)}}function setClipPath(n,a,r){var o=r.clipPathCache,l=r.defs,u=o[n.id];if(!u){u=r.zrId+"-c"+r.clipPathIdx++;var c={id:u};o[n.id]=u,l[u]=createVNode("clipPath",u,c,[brushSVGPath(n,r)])}a["clip-path"]=getIdURL(u)}function createTextNode(n){return document.createTextNode(n)}function insertBefore(n,a,r){n.insertBefore(a,r)}function removeChild(n,a){n.removeChild(a)}function appendChild(n,a){n.appendChild(a)}function parentNode(n){return n.parentNode}function nextSibling(n){return n.nextSibling}function setTextContent(n,a){n.textContent=a}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(n){return n===void 0}function isDef(n){return n!==void 0}function createKeyToOldIdx(n,a,r){for(var o={},l=a;l<=r;++l){var u=n[l].key;u!==void 0&&({}.NODE_ENV!=="production"&&o[u]!=null&&console.error("Duplicate key "+u),o[u]=l)}return o}function sameVnode(n,a){var r=n.key===a.key,o=n.tag===a.tag;return o&&r}function createElm(n){var a,r=n.children,o=n.tag;if(isDef(o)){var l=n.elm=createElement(o);if(updateAttrs(emptyNode,n),isArray$1(r))for(a=0;a<r.length;++a){var u=r[a];u!=null&&appendChild(l,createElm(u))}else isDef(n.text)&&!isObject$3(n.text)&&appendChild(l,createTextNode(n.text))}else n.elm=createTextNode(n.text);return n.elm}function addVnodes(n,a,r,o,l){for(;o<=l;++o){var u=r[o];u!=null&&insertBefore(n,createElm(u),a)}}function removeVnodes(n,a,r,o){for(;r<=o;++r){var l=a[r];if(l!=null)if(isDef(l.tag)){var u=parentNode(l.elm);removeChild(u,l.elm)}else removeChild(n,l.elm)}}function updateAttrs(n,a){var r,o=a.elm,l=n&&n.attrs||{},u=a.attrs||{};if(l!==u){for(r in u){var c=u[r],h=l[r];h!==c&&(c===!0?o.setAttribute(r,""):c===!1?o.removeAttribute(r):r.charCodeAt(0)!==xChar?o.setAttribute(r,c):r==="xmlns:xlink"||r==="xmlns"?o.setAttributeNS(XMLNS,r,c):r.charCodeAt(3)===colonChar?o.setAttributeNS(XML_NAMESPACE,r,c):r.charCodeAt(5)===colonChar?o.setAttributeNS(XLINKNS,r,c):o.setAttribute(r,c))}for(r in l)r in u||o.removeAttribute(r)}}function updateChildren(n,a,r){for(var o=0,l=0,u=a.length-1,c=a[0],h=a[u],f=r.length-1,v=r[0],d=r[f],p,g,y,_;o<=u&&l<=f;)c==null?c=a[++o]:h==null?h=a[--u]:v==null?v=r[++l]:d==null?d=r[--f]:sameVnode(c,v)?(patchVnode(c,v),c=a[++o],v=r[++l]):sameVnode(h,d)?(patchVnode(h,d),h=a[--u],d=r[--f]):sameVnode(c,d)?(patchVnode(c,d),insertBefore(n,c.elm,nextSibling(h.elm)),c=a[++o],d=r[--f]):sameVnode(h,v)?(patchVnode(h,v),insertBefore(n,h.elm,c.elm),h=a[--u],v=r[++l]):(isUndef(p)&&(p=createKeyToOldIdx(a,o,u)),g=p[v.key],isUndef(g)?insertBefore(n,createElm(v),c.elm):(y=a[g],y.tag!==v.tag?insertBefore(n,createElm(v),c.elm):(patchVnode(y,v),a[g]=void 0,insertBefore(n,y.elm,c.elm))),v=r[++l]);(o<=u||l<=f)&&(o>u?(_=r[f+1]==null?null:r[f+1].elm,addVnodes(n,_,r,l,f)):removeVnodes(n,a,o,u))}function patchVnode(n,a){var r=a.elm=n.elm,o=n.children,l=a.children;n!==a&&(updateAttrs(n,a),isUndef(a.text)?isDef(o)&&isDef(l)?o!==l&&updateChildren(r,o,l):isDef(l)?(isDef(n.text)&&setTextContent(r,""),addVnodes(r,null,l,0,l.length-1)):isDef(o)?removeVnodes(r,o,0,o.length-1):isDef(n.text)&&setTextContent(r,""):n.text!==a.text&&(isDef(o)&&removeVnodes(r,o,0,o.length-1),setTextContent(r,a.text)))}function patch(n,a){if(sameVnode(n,a))patchVnode(n,a);else{var r=n.elm,o=parentNode(r);createElm(a),o!==null&&(insertBefore(o,a.elm,nextSibling(r)),removeVnodes(o,[n],0,0))}return a}var svgId=0,SVGPainter=function(){function n(a,r,o){if(this.type="svg",this.refreshHover=createMethodNotSupport("refreshHover"),this.configLayer=createMethodNotSupport("configLayer"),this.storage=r,this._opts=o=extend({},o),this.root=a,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(o.width,o.height),a&&!o.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(u),a.appendChild(l)}this.resize(o.width,o.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var a=this.renderToVNode({willUpdate:!0});a.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,a),this._oldVNode=a}},n.prototype.renderOneToVNode=function(a){return brush(a,createBrushScope(this._id))},n.prototype.renderToVNode=function(a){a=a||{};var r=this.storage.getDisplayList(!0),o=this._width,l=this._height,u=createBrushScope(this._id);u.animation=a.animation,u.willUpdate=a.willUpdate,u.compress=a.compress;var c=[],h=this._bgVNode=createBackgroundVNode(o,l,this._backgroundColor,u);h&&c.push(h);var f=a.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(r,u,f?f.children:c),f&&c.push(f);var v=map$1(keys(u.defs),function(g){return u.defs[g]});if(v.length&&c.push(createVNode("defs","defs",{},v)),a.animation){var d=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if(d){var p=createVNode("style","stl",{},[],d);c.push(p)}}return createSVGVNode(o,l,c,a.useViewBox)},n.prototype.renderToString=function(a){return a=a||{},vNodeToString(this.renderToVNode({animation:retrieve2(a.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(a.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(a){this._backgroundColor=a},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(a,r,o){for(var l=a.length,u=[],c=0,h,f,v=0,d=0;d<l;d++){var p=a[d];if(!p.invisible){var g=p.__clipPaths,y=g&&g.length||0,_=f&&f.length||0,S=void 0;for(S=Math.max(y-1,_-1);S>=0&&!(g&&f&&g[S]===f[S]);S--);for(var x=_-1;x>S;x--)c--,h=u[c-1];for(var T=S+1;T<y;T++){var A={};setClipPath(g[T],A,r);var b=createVNode("g","clip-g-"+v++,A,[]);(h?h.children:o).push(b),u[c++]=b,h=b}f=g;var C=brush(p,r);C&&(h?h.children:o).push(C)}}},n.prototype.resize=function(a,r){var o=this._opts,l=this.root,u=this._viewport;if(a!=null&&(o.width=a),r!=null&&(o.height=r),l&&u&&(u.style.display="none",a=getSize$1(l,0,o),r=getSize$1(l,1,o),u.style.display=""),this._width!==a||this._height!==r){if(this._width=a,this._height=r,u){var c=u.style;c.width=a+"px",c.height=r+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var h=this._svgDom;h&&(h.setAttribute("width",a),h.setAttribute("height",r));var f=this._bgVNode&&this._bgVNode.elm;f&&(f.setAttribute("width",a),f.setAttribute("height",r))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(a){var r=this.renderToString(),o="data:image/svg+xml;";return a?(r=encodeBase64(r),r&&o+"base64,"+r):o+"charset=UTF-8,"+encodeURIComponent(r)},n}();function createMethodNotSupport(n){return function(){({}).NODE_ENV!=="production"&&logError('In SVG mode painter not support method "'+n+'"')}}function createBackgroundVNode(n,a,r,o){var l;if(r&&r!=="none")if(l=createVNode("rect","bg",{width:n,height:a,x:"0",y:"0",id:"0"}),isGradient(r))setGradient({fill:r},l.attrs,"fill",o);else if(isPattern(r))setPattern({style:{fill:r},dirty:noop,getBoundingRect:function(){return{width:n,height:a}}},l.attrs,"fill",o);else{var u=normalizeColor(r),c=u.color,h=u.opacity;l.attrs.fill=c,h<1&&(l.attrs["fill-opacity"]=h)}return l}const SVGPainter$1=SVGPainter;function install$S(n){n.registerPainter("svg",SVGPainter$1)}function createDom(n,a,r){var o=platformApi.createCanvas(),l=a.getWidth(),u=a.getHeight(),c=o.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=l+"px",c.height=u+"px",o.setAttribute("data-zr-dom-id",n)),o.width=l*r,o.height=u*r,o}var Layer=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var c;l=l||devicePixelRatio,typeof r=="string"?c=createDom(r,o,l):isObject$3(r)&&(c=r,r=c.id),u.id=r,u.dom=c;var h=c.style;return h&&(disableUserSelect(c),c.onselectstart=function(){return!1},h.padding="0",h.margin="0",h.borderWidth="0"),u.painter=o,u.dpr=l,u}return a.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},a.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},a.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},a.prototype.setUnpainted=function(){this.__firstTimePaint=!0},a.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},a.prototype.createRepaintRects=function(r,o,l,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],h=this.maxRepaintRectCount,f=!1,v=new BoundingRect$1(0,0,0,0);function d(A){if(!(!A.isFinite()||A.isZero()))if(c.length===0){var b=new BoundingRect$1(0,0,0,0);b.copy(A),c.push(b)}else{for(var C=!1,E=1/0,w=0,D=0;D<c.length;++D){var M=c[D];if(M.intersect(A)){var P=new BoundingRect$1(0,0,0,0);P.copy(M),P.union(A),c[D]=P,C=!0;break}else if(f){v.copy(A),v.union(M);var L=A.width*A.height,I=M.width*M.height,R=v.width*v.height,O=R-L-I;O<E&&(E=O,w=D)}}if(f&&(c[w].union(A),C=!0),!C){var b=new BoundingRect$1(0,0,0,0);b.copy(A),c.push(b)}f||(f=c.length>=h)}}for(var p=this.__startIndex;p<this.__endIndex;++p){var g=r[p];if(g){var y=g.shouldBePainted(l,u,!0,!0),_=g.__isRendered&&(g.__dirty&REDRAW_BIT||!y)?g.getPrevPaintRect():null;_&&d(_);var S=y&&(g.__dirty&REDRAW_BIT||!g.__isRendered)?g.getPaintRect():null;S&&d(S)}}for(var p=this.__prevStartIndex;p<this.__prevEndIndex;++p){var g=o[p],y=g.shouldBePainted(l,u,!0,!0);if(g&&(!y||!g.__zr)&&g.__isRendered){var _=g.getPrevPaintRect();_&&d(_)}}var x;do{x=!1;for(var p=0;p<c.length;){if(c[p].isZero()){c.splice(p,1);continue}for(var T=p+1;T<c.length;)c[p].intersect(c[T])?(x=!0,c[p].union(c[T]),c.splice(T,1)):T++;p++}}while(x);return this._paintRects=c,c},a.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},a.prototype.resize=function(r,o){var l=this.dpr,u=this.dom,c=u.style,h=this.domBack;c&&(c.width=r+"px",c.height=o+"px"),u.width=r*l,u.height=o*l,h&&(h.width=r*l,h.height=o*l,l!==1&&this.ctxBack.scale(l,l))},a.prototype.clear=function(r,o,l){var u=this.dom,c=this.ctx,h=u.width,f=u.height;o=o||this.clearColor;var v=this.motionBlur&&!r,d=this.lastFrameAlpha,p=this.dpr,g=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,h/p,f/p));var y=this.domBack;function _(S,x,T,A){if(c.clearRect(S,x,T,A),o&&o!=="transparent"){var b=void 0;if(isGradientObject(o)){var C=o.global||o.__width===T&&o.__height===A;b=C&&o.__canvasGradient||getCanvasGradient(c,o,{x:0,y:0,width:T,height:A}),o.__canvasGradient=b,o.__width=T,o.__height=A}else isImagePatternObject(o)&&(o.scaleX=o.scaleX||p,o.scaleY=o.scaleY||p,b=createCanvasPattern(c,o,{dirty:function(){g.setUnpainted(),g.__painter.refresh()}}));c.save(),c.fillStyle=b||o,c.fillRect(S,x,T,A),c.restore()}v&&(c.save(),c.globalAlpha=d,c.drawImage(y,S,x,T,A),c.restore())}!l||v?_(0,0,h,f):l.length&&each$f(l,function(S){_(S.x*p,S.y*p,S.width*p,S.height*p)})},a}(Eventful$1);const Layer$1=Layer;var HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function createRoot(n,a){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+n+"px","height:"+a+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var CanvasPainter=function(){function n(a,r,o,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!a.nodeName||a.nodeName.toUpperCase()==="CANVAS";this._opts=o=extend({},o||{}),this.dpr=o.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=a;var c=a.style;c&&(disableUserSelect(a),a.innerHTML=""),this.storage=r;var h=this._zlevelList;this._prevDisplayList=[];var f=this._layers;if(u){var d=a,p=d.width,g=d.height;o.width!=null&&(p=o.width),o.height!=null&&(g=o.height),this.dpr=o.devicePixelRatio||1,d.width=p*this.dpr,d.height=g*this.dpr,this._width=p,this._height=g;var y=new Layer$1(d,this,this.dpr);y.__builtin__=!0,y.initContext(),f[CANVAS_ZLEVEL]=y,y.zlevel=CANVAS_ZLEVEL,h.push(CANVAS_ZLEVEL),this._domRoot=a}else{this._width=getSize$1(a,0,o),this._height=getSize$1(a,1,o);var v=this._domRoot=createRoot(this._width,this._height);a.appendChild(v)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},n.prototype.refresh=function(a){var r=this.storage.getDisplayList(!0),o=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,o,a,this._redrawId);for(var u=0;u<l.length;u++){var c=l[u],h=this._layers[c];if(!h.__builtin__&&h.refresh){var f=u===0?this._backgroundColor:null;h.refresh(f)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(a){var r=a.length,o=this._hoverlayer;if(o&&o.clear(),!!r){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,c=0;c<r;c++){var h=a[c];h.__inHover&&(o||(o=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=o.ctx,u.save()),brush$1(u,h,l,c===r-1))}u&&u.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},n.prototype.paintOne=function(a,r){brushSingle(a,r)},n.prototype._paintList=function(a,r,o,l){if(this._redrawId===l){o=o||!1,this._updateLayerStatus(a);var u=this._doPaintList(a,r,o),c=u.finished,h=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(a),c)this.eachLayer(function(v){v.afterBrush&&v.afterBrush()});else{var f=this;requestAnimationFrame$1(function(){f._paintList(a,r,o,l)})}}},n.prototype._compositeManually=function(){var a=this.getLayer(CANVAS_ZLEVEL).ctx,r=this._domRoot.width,o=this._domRoot.height;a.clearRect(0,0,r,o),this.eachBuiltinLayer(function(l){l.virtual&&a.drawImage(l.dom,0,0,r,o)})},n.prototype._doPaintList=function(a,r,o){for(var l=this,u=[],c=this._opts.useDirtyRect,h=0;h<this._zlevelList.length;h++){var f=this._zlevelList[h],v=this._layers[f];v.__builtin__&&v!==this._hoverlayer&&(v.__dirty||o)&&u.push(v)}for(var d=!0,p=!1,g=function(S){var x=u[S],T=x.ctx,A=c&&x.createRepaintRects(a,r,y._width,y._height),b=o?x.__startIndex:x.__drawIndex,C=!o&&x.incremental&&Date.now,E=C&&Date.now(),w=x.zlevel===y._zlevelList[0]?y._backgroundColor:null;if(x.__startIndex===x.__endIndex)x.clear(!1,w,A);else if(b===x.__startIndex){var D=a[b];(!D.incremental||!D.notClear||o)&&x.clear(!1,w,A)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=x.__startIndex);var M,P=function(O){var N={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(M=b;M<x.__endIndex;M++){var V=a[M];if(V.__inHover&&(p=!0),l._doPaintEl(V,x,c,O,N,M===x.__endIndex-1),C){var B=Date.now()-E;if(B>15)break}}N.prevElClipPaths&&T.restore()};if(A)if(A.length===0)M=x.__endIndex;else for(var L=y.dpr,I=0;I<A.length;++I){var R=A[I];T.save(),T.beginPath(),T.rect(R.x*L,R.y*L,R.width*L,R.height*L),T.clip(),P(R),T.restore()}else T.save(),P(),T.restore();x.__drawIndex=M,x.__drawIndex<x.__endIndex&&(d=!1)},y=this,_=0;_<u.length;_++)g(_);return env$1.wxa&&each$f(this._layers,function(S){S&&S.ctx&&S.ctx.draw&&S.ctx.draw()}),{finished:d,needsRefreshHover:p}},n.prototype._doPaintEl=function(a,r,o,l,u,c){var h=r.ctx;if(o){var f=a.getPaintRect();(!l||f&&f.intersect(l))&&(brush$1(h,a,u,c),a.setPrevPaintRect(f))}else brush$1(h,a,u,c)},n.prototype.getLayer=function(a,r){this._singleCanvas&&!this._needsManuallyCompositing&&(a=CANVAS_ZLEVEL);var o=this._layers[a];return o||(o=new Layer$1("zr_"+a,this,this.dpr),o.zlevel=a,o.__builtin__=!0,this._layerConfig[a]?merge(o,this._layerConfig[a],!0):this._layerConfig[a-EL_AFTER_INCREMENTAL_INC]&&merge(o,this._layerConfig[a-EL_AFTER_INCREMENTAL_INC],!0),r&&(o.virtual=r),this.insertLayer(a,o),o.initContext()),o},n.prototype.insertLayer=function(a,r){var o=this._layers,l=this._zlevelList,u=l.length,c=this._domRoot,h=null,f=-1;if(o[a]){({}).NODE_ENV!=="production"&&logError("ZLevel "+a+" has been used already");return}if(!isLayerValid(r)){({}).NODE_ENV!=="production"&&logError("Layer of zlevel "+a+" is not valid");return}if(u>0&&a>l[0]){for(f=0;f<u-1&&!(l[f]<a&&l[f+1]>a);f++);h=o[l[f]]}if(l.splice(f+1,0,a),o[a]=r,!r.virtual)if(h){var v=h.dom;v.nextSibling?c.insertBefore(r.dom,v.nextSibling):c.appendChild(r.dom)}else c.firstChild?c.insertBefore(r.dom,c.firstChild):c.appendChild(r.dom);r.__painter=this},n.prototype.eachLayer=function(a,r){for(var o=this._zlevelList,l=0;l<o.length;l++){var u=o[l];a.call(r,this._layers[u],u)}},n.prototype.eachBuiltinLayer=function(a,r){for(var o=this._zlevelList,l=0;l<o.length;l++){var u=o[l],c=this._layers[u];c.__builtin__&&a.call(r,c,u)}},n.prototype.eachOtherLayer=function(a,r){for(var o=this._zlevelList,l=0;l<o.length;l++){var u=o[l],c=this._layers[u];c.__builtin__||a.call(r,c,u)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(a){this.eachBuiltinLayer(function(p,g){p.__dirty=p.__used=!1});function r(p){u&&(u.__endIndex!==p&&(u.__dirty=!0),u.__endIndex=p)}if(this._singleCanvas)for(var o=1;o<a.length;o++){var l=a[o];if(l.zlevel!==a[o-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var u=null,c=0,h,f;for(f=0;f<a.length;f++){var l=a[f],v=l.zlevel,d=void 0;h!==v&&(h=v,c=0),l.incremental?(d=this.getLayer(v+INCREMENTAL_INC,this._needsManuallyCompositing),d.incremental=!0,c=1):d=this.getLayer(v+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),d.__builtin__||logError("ZLevel "+v+" has been used by unkown layer "+d.id),d!==u&&(d.__used=!0,d.__startIndex!==f&&(d.__dirty=!0),d.__startIndex=f,d.incremental?d.__drawIndex=-1:d.__drawIndex=f,r(f),u=d),l.__dirty&REDRAW_BIT&&!l.__inHover&&(d.__dirty=!0,d.incremental&&d.__drawIndex<0&&(d.__drawIndex=f))}r(f),this.eachBuiltinLayer(function(p,g){!p.__used&&p.getElementCount()>0&&(p.__dirty=!0,p.__startIndex=p.__endIndex=p.__drawIndex=0),p.__dirty&&p.__drawIndex<0&&(p.__drawIndex=p.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(a){a.clear()},n.prototype.setBackgroundColor=function(a){this._backgroundColor=a,each$f(this._layers,function(r){r.setUnpainted()})},n.prototype.configLayer=function(a,r){if(r){var o=this._layerConfig;o[a]?merge(o[a],r,!0):o[a]=r;for(var l=0;l<this._zlevelList.length;l++){var u=this._zlevelList[l];if(u===a||u===a+EL_AFTER_INCREMENTAL_INC){var c=this._layers[u];merge(c,o[a],!0)}}}},n.prototype.delLayer=function(a){var r=this._layers,o=this._zlevelList,l=r[a];!l||(l.dom.parentNode.removeChild(l.dom),delete r[a],o.splice(indexOf(o,a),1))},n.prototype.resize=function(a,r){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var l=this._opts,u=this.root;if(a!=null&&(l.width=a),r!=null&&(l.height=r),a=getSize$1(u,0,l),r=getSize$1(u,1,l),o.style.display="",this._width!==a||r!==this._height){o.style.width=a+"px",o.style.height=r+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(a,r);this.refresh(!0)}this._width=a,this._height=r}else{if(a==null||r==null)return;this._width=a,this._height=r,this.getLayer(CANVAS_ZLEVEL).resize(a,r)}return this},n.prototype.clearLayer=function(a){var r=this._layers[a];r&&r.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(a){if(a=a||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var r=new Layer$1("image",this,a.pixelRatio||this.dpr);r.initContext(),r.clear(!1,a.backgroundColor||this._backgroundColor);var o=r.ctx;if(a.pixelRatio<=this.dpr){this.refresh();var l=r.dom.width,u=r.dom.height;this.eachLayer(function(p){p.__builtin__?o.drawImage(p.dom,0,0,l,u):p.renderToCanvas&&(o.save(),p.renderToCanvas(o),o.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),f=0,v=h.length;f<v;f++){var d=h[f];brush$1(o,d,c,f===v-1)}return r.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const CanvasPainter$1=CanvasPainter;function install$R(n){n.registerPainter("canvas",CanvasPainter$1)}var LineSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.hasSymbolVisual=!0,r}return a.prototype.getInitialData=function(r){if({}.NODE_ENV!=="production"){var o=r.coordinateSystem;if(o!=="polar"&&o!=="cartesian2d")throw new Error("Line not support coordinateSystem besides cartesian and polar")}return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.getLegendIcon=function(r){var o=new Group$4,l=createSymbol$1("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);o.add(l),l.setStyle(r.lineStyle);var u=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),h=u==="none"?"circle":u,f=r.itemHeight*.8,v=createSymbol$1(h,(r.itemWidth-f)/2,(r.itemHeight-f)/2,f,f,r.itemStyle.fill);o.add(v),v.setStyle(r.itemStyle);var d=r.iconRotate==="inherit"?c:r.iconRotate||0;return v.rotation=d*Math.PI/180,v.setOrigin([r.itemWidth/2,r.itemHeight/2]),h.indexOf("empty")>-1&&(v.style.stroke=v.style.fill,v.style.fill="#fff",v.style.lineWidth=2),o},a.type="series.line",a.dependencies=["grid","polar"],a.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},a}(SeriesModel$1);const LineSeries=LineSeriesModel;function getDefaultLabel(n,a){var r=n.mapDimensionsAll("defaultedLabel"),o=r.length;if(o===1){var l=retrieveRawValue(n,a,r[0]);return l!=null?l+"":null}else if(o){for(var u=[],c=0;c<r.length;c++)u.push(retrieveRawValue(n,a,r[c]));return u.join(" ")}}function getDefaultInterpolatedLabel(n,a){var r=n.mapDimensionsAll("defaultedLabel");if(!isArray$1(a))return a+"";for(var o=[],l=0;l<r.length;l++){var u=n.getDimensionIndex(r[l]);u>=0&&o.push(a[u])}return o.join(" ")}var Symbol$1=function(n){__extends(a,n);function a(r,o,l,u){var c=n.call(this)||this;return c.updateData(r,o,l,u),c}return a.prototype._createSymbol=function(r,o,l,u,c){this.removeAll();var h=createSymbol$1(r,-1,-1,2,2,null,c);h.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),h.drift=driftSymbol,this._symbolType=r,this.add(h)},a.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},a.prototype.getSymbolType=function(){return this._symbolType},a.prototype.getSymbolPath=function(){return this.childAt(0)},a.prototype.highlight=function(){enterEmphasis(this.childAt(0))},a.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},a.prototype.setZ=function(r,o){var l=this.childAt(0);l.zlevel=r,l.z=o},a.prototype.setDraggable=function(r,o){var l=this.childAt(0);l.draggable=r,l.cursor=!o&&r?"move":l.cursor},a.prototype.updateData=function(r,o,l,u){this.silent=!1;var c=r.getItemVisual(o,"symbol")||"circle",h=r.hostModel,f=a.getSymbolSize(r,o),v=c!==this._symbolType,d=u&&u.disableAnimation;if(v){var p=r.getItemVisual(o,"symbolKeepAspect");this._createSymbol(c,r,o,f,p)}else{var g=this.childAt(0);g.silent=!1;var y={scaleX:f[0]/2,scaleY:f[1]/2};d?g.attr(y):updateProps$1(g,y,h,o),saveOldStyle(g)}if(this._updateCommon(r,o,f,l,u),v){var g=this.childAt(0);if(!d){var y={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:g.style.opacity}};g.scaleX=g.scaleY=0,g.style.opacity=0,initProps(g,y,h,o)}}d&&this.childAt(0).stopAnimation("leave")},a.prototype._updateCommon=function(r,o,l,u,c){var h=this.childAt(0),f=r.hostModel,v,d,p,g,y,_,S,x,T;if(u&&(v=u.emphasisItemStyle,d=u.blurItemStyle,p=u.selectItemStyle,g=u.focus,y=u.blurScope,S=u.labelStatesModels,x=u.hoverScale,T=u.cursorStyle,_=u.emphasisDisabled),!u||r.hasItemOption){var A=u&&u.itemModel?u.itemModel:r.getItemModel(o),b=A.getModel("emphasis");v=b.getModel("itemStyle").getItemStyle(),p=A.getModel(["select","itemStyle"]).getItemStyle(),d=A.getModel(["blur","itemStyle"]).getItemStyle(),g=b.get("focus"),y=b.get("blurScope"),_=b.get("disabled"),S=getLabelStatesModels(A),x=b.getShallow("scale"),T=A.getShallow("cursor")}var C=r.getItemVisual(o,"symbolRotate");h.attr("rotation",(C||0)*Math.PI/180||0);var E=normalizeSymbolOffset(r.getItemVisual(o,"symbolOffset"),l);E&&(h.x=E[0],h.y=E[1]),T&&h.attr("cursor",T);var w=r.getItemVisual(o,"style"),D=w.fill;if(h instanceof ZRImage$1){var M=h.style;h.useStyle(extend({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},w))}else h.__isEmptyBrush?h.useStyle(extend({},w)):h.useStyle(w),h.style.decal=null,h.setColor(D,c&&c.symbolInnerColor),h.style.strokeNoScale=!0;var P=r.getItemVisual(o,"liftZ"),L=this._z2;P!=null?L==null&&(this._z2=h.z2,h.z2+=P):L!=null&&(h.z2=L,this._z2=null);var I=c&&c.useNameLabel;setLabelStyle(h,S,{labelFetcher:f,labelDataIndex:o,defaultText:R,inheritColor:D,defaultOpacity:w.opacity});function R(V){return I?r.getName(V):getDefaultLabel(r,V)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var O=h.ensureState("emphasis");O.style=v,h.ensureState("select").style=p,h.ensureState("blur").style=d;var N=x==null||x===!0?Math.max(1.1,3/this._sizeY):isFinite(x)&&x>0?+x:1;O.scaleX=this._sizeX*N,O.scaleY=this._sizeY*N,this.setSymbolScale(1),toggleHoverEmphasis(this,g,y,_)},a.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},a.prototype.fadeOut=function(r,o,l){var u=this.childAt(0),c=getECData(this).dataIndex,h=l&&l.animation;if(this.silent=u.silent=!0,l&&l.fadeLabel){var f=u.getTextContent();f&&removeElement(f,{style:{opacity:0}},o,{dataIndex:c,removeOpt:h,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:c,cb:r,removeOpt:h})},a.getSymbolSize=function(r,o){return normalizeSymbolSize(r.getItemVisual(o,"symbolSize"))},a}(Group$4);function driftSymbol(n,a){this.parent.drift(n,a)}const SymbolClz=Symbol$1;function symbolNeedsDraw$1(n,a,r,o){return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(o.isIgnore&&o.isIgnore(r))&&!(o.clipShape&&!o.clipShape.contain(a[0],a[1]))&&n.getItemVisual(r,"symbol")!=="none"}function normalizeUpdateOpt(n){return n!=null&&!isObject$3(n)&&(n={isIgnore:n}),n||{}}function makeSeriesScope$2(n){var a=n.hostModel,r=a.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:a.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:a.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:getLabelStatesModels(a),cursorStyle:a.get("cursor")}}var SymbolDraw=function(){function n(a){this.group=new Group$4,this._SymbolCtor=a||SymbolClz}return n.prototype.updateData=function(a,r){this._progressiveEls=null,r=normalizeUpdateOpt(r);var o=this.group,l=a.hostModel,u=this._data,c=this._SymbolCtor,h=r.disableAnimation,f=makeSeriesScope$2(a),v={disableAnimation:h},d=r.getSymbolPoint||function(p){return a.getItemLayout(p)};u||o.removeAll(),a.diff(u).add(function(p){var g=d(p);if(symbolNeedsDraw$1(a,g,p,r)){var y=new c(a,p,f,v);y.setPosition(g),a.setItemGraphicEl(p,y),o.add(y)}}).update(function(p,g){var y=u.getItemGraphicEl(g),_=d(p);if(!symbolNeedsDraw$1(a,_,p,r)){o.remove(y);return}var S=a.getItemVisual(p,"symbol")||"circle",x=y&&y.getSymbolType&&y.getSymbolType();if(!y||x&&x!==S)o.remove(y),y=new c(a,p,f,v),y.setPosition(_);else{y.updateData(a,p,f,v);var T={x:_[0],y:_[1]};h?y.attr(T):updateProps$1(y,T,l)}o.add(y),a.setItemGraphicEl(p,y)}).remove(function(p){var g=u.getItemGraphicEl(p);g&&g.fadeOut(function(){o.remove(g)},l)}).execute(),this._getSymbolPoint=d,this._data=a},n.prototype.updateLayout=function(){var a=this,r=this._data;r&&r.eachItemGraphicEl(function(o,l){var u=a._getSymbolPoint(l);o.setPosition(u),o.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(a){this._seriesScope=makeSeriesScope$2(a),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(a,r,o){this._progressiveEls=[],o=normalizeUpdateOpt(o);function l(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var u=a.start;u<a.end;u++){var c=r.getItemLayout(u);if(symbolNeedsDraw$1(r,c,u,o)){var h=new this._SymbolCtor(r,u,this._seriesScope);h.traverse(l),h.setPosition(c),this.group.add(h),r.setItemGraphicEl(u,h),this._progressiveEls.push(h)}}},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype.remove=function(a){var r=this.group,o=this._data;o&&a?o.eachItemGraphicEl(function(l){l.fadeOut(function(){r.remove(l)},o.hostModel)}):r.removeAll()},n}();const SymbolDraw$1=SymbolDraw;function prepareDataCoordInfo(n,a,r){var o=n.getBaseAxis(),l=n.getOtherAxis(o),u=getValueStart(l,r),c=o.dim,h=l.dim,f=a.mapDimension(h),v=a.mapDimension(c),d=h==="x"||h==="radius"?1:0,p=map$1(n.dimensions,function(_){return a.mapDimension(_)}),g=!1,y=a.getCalculationInfo("stackResultDimension");return isDimensionStacked(a,p[0])&&(g=!0,p[0]=y),isDimensionStacked(a,p[1])&&(g=!0,p[1]=y),{dataDimsForPoint:p,valueStart:u,valueAxisDim:h,baseAxisDim:c,stacked:!!g,valueDim:f,baseDim:v,baseDataOffset:d,stackedOverDimension:a.getCalculationInfo("stackedOverDimension")}}function getValueStart(n,a){var r=0,o=n.scale.getExtent();return a==="start"?r=o[0]:a==="end"?r=o[1]:isNumber(a)&&!isNaN(a)?r=a:o[0]>0?r=o[0]:o[1]<0&&(r=o[1]),r}function getStackedOnPoint(n,a,r,o){var l=NaN;n.stacked&&(l=r.get(r.getCalculationInfo("stackedOverDimension"),o)),isNaN(l)&&(l=n.valueStart);var u=n.baseDataOffset,c=[];return c[u]=r.get(n.baseDim,o),c[1-u]=l,a.dataToPoint(c)}function diffData(n,a){var r=[];return a.diff(n).add(function(o){r.push({cmd:"+",idx:o})}).update(function(o,l){r.push({cmd:"=",idx:l,idx1:o})}).remove(function(o){r.push({cmd:"-",idx:o})}).execute(),r}function lineAnimationDiff(n,a,r,o,l,u,c,h){for(var f=diffData(n,a),v=[],d=[],p=[],g=[],y=[],_=[],S=[],x=prepareDataCoordInfo(l,a,c),T=n.getLayout("points")||[],A=a.getLayout("points")||[],b=0;b<f.length;b++){var C=f[b],E=!0,w=void 0,D=void 0;switch(C.cmd){case"=":w=C.idx*2,D=C.idx1*2;var M=T[w],P=T[w+1],L=A[D],I=A[D+1];(isNaN(M)||isNaN(P))&&(M=L,P=I),v.push(M,P),d.push(L,I),p.push(r[w],r[w+1]),g.push(o[D],o[D+1]),S.push(a.getRawIndex(C.idx1));break;case"+":var R=C.idx,O=x.dataDimsForPoint,N=l.dataToPoint([a.get(O[0],R),a.get(O[1],R)]);D=R*2,v.push(N[0],N[1]),d.push(A[D],A[D+1]);var V=getStackedOnPoint(x,l,a,R);p.push(V[0],V[1]),g.push(o[D],o[D+1]),S.push(a.getRawIndex(R));break;case"-":E=!1}E&&(y.push(C),_.push(_.length))}_.sort(function(J,te){return S[J]-S[te]});for(var B=v.length,G=createFloat32Array(B),F=createFloat32Array(B),z=createFloat32Array(B),H=createFloat32Array(B),U=[],b=0;b<_.length;b++){var Y=_[b],Z=b*2,X=Y*2;G[Z]=v[X],G[Z+1]=v[X+1],F[Z]=d[X],F[Z+1]=d[X+1],z[Z]=p[X],z[Z+1]=p[X+1],H[Z]=g[X],H[Z+1]=g[X+1],U[b]=y[Y]}return{current:G,next:F,stackedOnCurrent:z,stackedOnNext:H,status:U}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(n,a){return isNaN(n)||isNaN(a)}function drawSegment(n,a,r,o,l,u,c,h,f){for(var v,d,p,g,y,_,S=r,x=0;x<o;x++){var T=a[S*2],A=a[S*2+1];if(S>=l||S<0)break;if(isPointNull$1(T,A)){if(f){S+=u;continue}break}if(S===r)n[u>0?"moveTo":"lineTo"](T,A),p=T,g=A;else{var b=T-v,C=A-d;if(b*b+C*C<.5){S+=u;continue}if(c>0){for(var E=S+u,w=a[E*2],D=a[E*2+1];w===T&&D===A&&x<o;)x++,E+=u,S+=u,w=a[E*2],D=a[E*2+1],T=a[S*2],A=a[S*2+1],b=T-v,C=A-d;var M=x+1;if(f)for(;isPointNull$1(w,D)&&M<o;)M++,E+=u,w=a[E*2],D=a[E*2+1];var P=.5,L=0,I=0,R=void 0,O=void 0;if(M>=o||isPointNull$1(w,D))y=T,_=A;else{L=w-v,I=D-d;var N=T-v,V=w-T,B=A-d,G=D-A,F=void 0,z=void 0;if(h==="x"){F=Math.abs(N),z=Math.abs(V);var H=L>0?1:-1;y=T-H*F*c,_=A,R=T+H*z*c,O=A}else if(h==="y"){F=Math.abs(B),z=Math.abs(G);var U=I>0?1:-1;y=T,_=A-U*F*c,R=T,O=A+U*z*c}else F=Math.sqrt(N*N+B*B),z=Math.sqrt(V*V+G*G),P=z/(z+F),y=T-L*c*(1-P),_=A-I*c*(1-P),R=T+L*c*P,O=A+I*c*P,R=mathMin$5(R,mathMax$5(w,T)),O=mathMin$5(O,mathMax$5(D,A)),R=mathMax$5(R,mathMin$5(w,T)),O=mathMax$5(O,mathMin$5(D,A)),L=R-T,I=O-A,y=T-L*F/z,_=A-I*F/z,y=mathMin$5(y,mathMax$5(v,T)),_=mathMin$5(_,mathMax$5(d,A)),y=mathMax$5(y,mathMin$5(v,T)),_=mathMax$5(_,mathMin$5(d,A)),L=T-y,I=A-_,R=T+L*z/F,O=A+I*z/F}n.bezierCurveTo(p,g,y,_,T,A),p=R,g=O}else n.lineTo(T,A)}v=T,d=A,S+=u}return x}var ECPolylineShape=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),ECPolyline=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="ec-polyline",o}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new ECPolylineShape},a.prototype.buildPath=function(r,o){var l=o.points,u=0,c=l.length/2;if(o.connectNulls){for(;c>0&&isPointNull$1(l[c*2-2],l[c*2-1]);c--);for(;u<c&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<c;)u+=drawSegment(r,l,u,c,c,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},a.prototype.getPointOn=function(r,o){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,u=l.data,c=PathProxy$1.CMD,h,f,v=o==="x",d=[],p=0;p<u.length;){var g=u[p++],y=void 0,_=void 0,S=void 0,x=void 0,T=void 0,A=void 0,b=void 0;switch(g){case c.M:h=u[p++],f=u[p++];break;case c.L:if(y=u[p++],_=u[p++],b=v?(r-h)/(y-h):(r-f)/(_-f),b<=1&&b>=0){var C=v?(_-f)*b+f:(y-h)*b+h;return v?[r,C]:[C,r]}h=y,f=_;break;case c.C:y=u[p++],_=u[p++],S=u[p++],x=u[p++],T=u[p++],A=u[p++];var E=v?cubicRootAt(h,y,S,T,r,d):cubicRootAt(f,_,x,A,r,d);if(E>0)for(var w=0;w<E;w++){var D=d[w];if(D<=1&&D>=0){var C=v?cubicAt(f,_,x,A,D):cubicAt(h,y,S,T,D);return v?[r,C]:[C,r]}}h=T,f=A;break}}},a}(Path$1),ECPolygonShape=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a}(ECPolylineShape),ECPolygon=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="ec-polygon",o}return a.prototype.getDefaultShape=function(){return new ECPolygonShape},a.prototype.buildPath=function(r,o){var l=o.points,u=o.stackedOnPoints,c=0,h=l.length/2,f=o.smoothMonotone;if(o.connectNulls){for(;h>0&&isPointNull$1(l[h*2-2],l[h*2-1]);h--);for(;c<h&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<h;){var v=drawSegment(r,l,c,h,h,1,o.smooth,f,o.connectNulls);drawSegment(r,u,c+v-1,v,h,-1,o.stackedOnSmooth,f,o.connectNulls),c+=v+1,r.closePath()}},a}(Path$1);function createGridClipPath(n,a,r,o,l){var u=n.getArea(),c=u.x,h=u.y,f=u.width,v=u.height,d=r.get(["lineStyle","width"])||2;c-=d/2,h-=d/2,f+=d,v+=d,c=Math.floor(c),f=Math.round(f);var p=new Rect$3({shape:{x:c,y:h,width:f,height:v}});if(a){var g=n.getBaseAxis(),y=g.isHorizontal(),_=g.inverse;y?(_&&(p.shape.x+=f),p.shape.width=0):(_||(p.shape.y+=v),p.shape.height=0);var S=isFunction(l)?function(x){l(x,p)}:null;initProps(p,{shape:{width:f,height:v,x:c,y:h}},r,null,o,S)}return p}function createPolarClipPath(n,a,r){var o=n.getArea(),l=round$3(o.r0,1),u=round$3(o.r,1),c=new Sector$1({shape:{cx:round$3(n.cx,1),cy:round$3(n.cy,1),r0:l,r:u,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});if(a){var h=n.getBaseAxis().dim==="angle";h?c.shape.endAngle=o.startAngle:c.shape.r=l,initProps(c,{shape:{endAngle:o.endAngle,r:u}},r)}return c}function createClipPath(n,a,r,o,l){if(n){if(n.type==="polar")return createPolarClipPath(n,a,r);if(n.type==="cartesian2d")return createGridClipPath(n,a,r,o,l)}else return null;return null}function isCoordinateSystemType(n,a){return n.type===a}function isPointsSame(n,a){if(n.length===a.length){for(var r=0;r<n.length;r++)if(n[r]!==a[r])return;return!0}}function bboxFromPoints(n){for(var a=1/0,r=1/0,o=-1/0,l=-1/0,u=0;u<n.length;){var c=n[u++],h=n[u++];isNaN(c)||(a=Math.min(c,a),o=Math.max(c,o)),isNaN(h)||(r=Math.min(h,r),l=Math.max(h,l))}return[[a,r],[o,l]]}function getBoundingDiff(n,a){var r=bboxFromPoints(n),o=r[0],l=r[1],u=bboxFromPoints(a),c=u[0],h=u[1];return Math.max(Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]),Math.abs(l[0]-h[0]),Math.abs(l[1]-h[1]))}function getSmooth(n){return isNumber(n)?n:n?.5:0}function getStackedOnPoints(n,a,r){if(!r.valueDim)return[];for(var o=a.count(),l=createFloat32Array(o*2),u=0;u<o;u++){var c=getStackedOnPoint(r,n,a,u);l[u*2]=c[0],l[u*2+1]=c[1]}return l}function turnPointsIntoStep(n,a,r,o){var l=a.getBaseAxis(),u=l.dim==="x"||l.dim==="radius"?0:1,c=[],h=0,f=[],v=[],d=[],p=[];if(o){for(h=0;h<n.length;h+=2)!isNaN(n[h])&&!isNaN(n[h+1])&&p.push(n[h],n[h+1]);n=p}for(h=0;h<n.length-2;h+=2)switch(d[0]=n[h+2],d[1]=n[h+3],v[0]=n[h],v[1]=n[h+1],c.push(v[0],v[1]),r){case"end":f[u]=d[u],f[1-u]=v[1-u],c.push(f[0],f[1]);break;case"middle":var g=(v[u]+d[u])/2,y=[];f[u]=y[u]=g,f[1-u]=v[1-u],y[1-u]=d[1-u],c.push(f[0],f[1]),c.push(y[0],y[1]);break;default:f[u]=v[u],f[1-u]=d[1-u],c.push(f[0],f[1])}return c.push(n[h++],n[h++]),c}function clipColorStops(n,a){var r=[],o=n.length,l,u;function c(d,p,g){var y=d.coord,_=(g-y)/(p.coord-y),S=lerp(_,[d.color,p.color]);return{coord:g,color:S}}for(var h=0;h<o;h++){var f=n[h],v=f.coord;if(v<0)l=f;else if(v>a){u?r.push(c(u,f,a)):l&&r.push(c(l,f,0),c(l,f,a));break}else l&&(r.push(c(l,f,0)),l=null),r.push(f),u=f}return r}function getVisualGradient(n,a,r){var o=n.getVisual("visualMeta");if(!(!o||!o.length||!n.count())){if(a.type!=="cartesian2d"){({}).NODE_ENV!=="production"&&console.warn("Visual map on line style is only supported on cartesian2d.");return}for(var l,u,c=o.length-1;c>=0;c--){var h=n.getDimensionInfo(o[c].dimension);if(l=h&&h.coordDim,l==="x"||l==="y"){u=o[c];break}}if(!u){({}).NODE_ENV!=="production"&&console.warn("Visual map on line style only support x or y dimension.");return}var f=a.getAxis(l),v=map$1(u.stops,function(b){return{coord:f.toGlobalCoord(f.dataToCoord(b.value)),color:b.color}}),d=v.length,p=u.outerColors.slice();d&&v[0].coord>v[d-1].coord&&(v.reverse(),p.reverse());var g=clipColorStops(v,l==="x"?r.getWidth():r.getHeight()),y=g.length;if(!y&&d)return v[0].coord<0?p[1]?p[1]:v[d-1].color:p[0]?p[0]:v[0].color;var _=10,S=g[0].coord-_,x=g[y-1].coord+_,T=x-S;if(T<.001)return"transparent";each$f(g,function(b){b.offset=(b.coord-S)/T}),g.push({offset:y?g[y-1].offset:.5,color:p[1]||"transparent"}),g.unshift({offset:y?g[0].offset:.5,color:p[0]||"transparent"});var A=new LinearGradient$1(0,0,0,0,g,!0);return A[l]=S,A[l+"2"]=x,A}}function getIsIgnoreFunc(n,a,r){var o=n.get("showAllSymbol"),l=o==="auto";if(!(o&&!l)){var u=r.getAxesByScale("ordinal")[0];if(!!u&&!(l&&canShowAllSymbolForCategory(u,a))){var c=a.mapDimension(u.dim),h={};return each$f(u.getViewLabels(),function(f){var v=u.scale.getRawOrdinalNumber(f.tickValue);h[v]=1}),function(f){return!h.hasOwnProperty(a.get(c,f))}}}}function canShowAllSymbolForCategory(n,a){var r=n.getExtent(),o=Math.abs(r[1]-r[0])/n.scale.count();isNaN(o)&&(o=0);for(var l=a.count(),u=Math.max(1,Math.round(l/5)),c=0;c<l;c+=u)if(SymbolClz.getSymbolSize(a,c)[n.isHorizontal()?1:0]*1.5>o)return!1;return!0}function isPointNull(n,a){return isNaN(n)||isNaN(a)}function getLastIndexNotNull(n){for(var a=n.length/2;a>0&&isPointNull(n[a*2-2],n[a*2-1]);a--);return a-1}function getPointAtIndex(n,a){return[n[a*2],n[a*2+1]]}function getIndexRange(n,a,r){for(var o=n.length/2,l=r==="x"?0:1,u,c,h=0,f=-1,v=0;v<o;v++)if(c=n[v*2+l],!(isNaN(c)||isNaN(n[v*2+1-l]))){if(v===0){u=c;continue}if(u<=a&&c>=a||u>=a&&c<=a){f=v;break}h=v,u=c}return{range:[h,f],t:(a-u)/(c-u)}}function anyStateShowEndLabel(n){if(n.get(["endLabel","show"]))return!0;for(var a=0;a<SPECIAL_STATES.length;a++)if(n.get([SPECIAL_STATES[a],"endLabel","show"]))return!0;return!1}function createLineClipPath(n,a,r,o){if(isCoordinateSystemType(a,"cartesian2d")){var l=o.getModel("endLabel"),u=l.get("valueAnimation"),c=o.getData(),h={lastFrameIndex:0},f=anyStateShowEndLabel(o)?function(y,_){n._endLabelOnDuring(y,_,c,h,u,l,a)}:null,v=a.getBaseAxis().isHorizontal(),d=createGridClipPath(a,r,o,function(){var y=n._endLabel;y&&r&&h.originalX!=null&&y.attr({x:h.originalX,y:h.originalY})},f);if(!o.get("clip",!0)){var p=d.shape,g=Math.max(p.width,p.height);v?(p.y-=g,p.height+=g*2):(p.x-=g,p.width+=g*2)}return f&&f(1,d),d}else return{}.NODE_ENV!=="production"&&o.get(["endLabel","show"])&&console.warn("endLabel is not supported for lines in polar systems."),createPolarClipPath(a,r,o)}function getEndLabelStateSpecified(n,a){var r=a.getBaseAxis(),o=r.isHorizontal(),l=r.inverse,u=o?l?"right":"left":"center",c=o?"middle":l?"top":"bottom";return{normal:{align:n.get("align")||u,verticalAlign:n.get("verticalAlign")||c}}}var LineView=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.init=function(){var r=new Group$4,o=new SymbolDraw$1;this.group.add(o.group),this._symbolDraw=o,this._lineGroup=r},a.prototype.render=function(r,o,l){var u=this,c=r.coordinateSystem,h=this.group,f=r.getData(),v=r.getModel("lineStyle"),d=r.getModel("areaStyle"),p=f.getLayout("points")||[],g=c.type==="polar",y=this._coordSys,_=this._symbolDraw,S=this._polyline,x=this._polygon,T=this._lineGroup,A=!o.ssr&&r.isAnimationEnabled(),b=!d.isEmpty(),C=d.get("origin"),E=prepareDataCoordInfo(c,f,C),w=b&&getStackedOnPoints(c,f,E),D=r.get("showSymbol"),M=r.get("connectNulls"),P=D&&!g&&getIsIgnoreFunc(r,f,c),L=this._data;L&&L.eachItemGraphicEl(function(te,Q){te.__temp&&(h.remove(te),L.setItemGraphicEl(Q,null))}),D||_.remove(),h.add(T);var I=g?!1:r.get("step"),R;c&&c.getArea&&r.get("clip",!0)&&(R=c.getArea(),R.width!=null?(R.x-=.1,R.y-=.1,R.width+=.2,R.height+=.2):R.r0&&(R.r0-=.5,R.r+=.5)),this._clipShapeForSymbol=R;var O=getVisualGradient(f,c,l)||f.getVisual("style")[f.getVisual("drawType")];if(!(S&&y.type===c.type&&I===this._step))D&&_.updateData(f,{isIgnore:P,clipShape:R,disableAnimation:!0,getSymbolPoint:function(te){return[p[te*2],p[te*2+1]]}}),A&&this._initSymbolLabelAnimation(f,c,R),I&&(p=turnPointsIntoStep(p,c,I,M),w&&(w=turnPointsIntoStep(w,c,I,M))),S=this._newPolyline(p),b?x=this._newPolygon(p,w):x&&(T.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(r,c,convertToColorString(O)),T.setClipPath(createLineClipPath(this,c,!0,r));else{b&&!x?x=this._newPolygon(p,w):x&&!b&&(T.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(r,c,convertToColorString(O));var N=T.getClipPath();if(N){var V=createLineClipPath(this,c,!1,r);initProps(N,{shape:V.shape},r)}else T.setClipPath(createLineClipPath(this,c,!0,r));D&&_.updateData(f,{isIgnore:P,clipShape:R,disableAnimation:!0,getSymbolPoint:function(te){return[p[te*2],p[te*2+1]]}}),(!isPointsSame(this._stackedOnPoints,w)||!isPointsSame(this._points,p))&&(A?this._doUpdateAnimation(f,w,c,l,I,C,M):(I&&(p=turnPointsIntoStep(p,c,I,M),w&&(w=turnPointsIntoStep(w,c,I,M))),S.setShape({points:p}),x&&x.setShape({points:p,stackedOnPoints:w})))}var B=r.getModel("emphasis"),G=B.get("focus"),F=B.get("blurScope"),z=B.get("disabled");if(S.useStyle(defaults(v.getLineStyle(),{fill:"none",stroke:O,lineJoin:"bevel"})),setStatesStylesFromModel(S,r,"lineStyle"),S.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var H=S.getState("emphasis").style;H.lineWidth=+S.style.lineWidth+1}getECData(S).seriesIndex=r.seriesIndex,toggleHoverEmphasis(S,G,F,z);var U=getSmooth(r.get("smooth")),Y=r.get("smoothMonotone");if(S.setShape({smooth:U,smoothMonotone:Y,connectNulls:M}),x){var Z=f.getCalculationInfo("stackedOnSeries"),X=0;x.useStyle(defaults(d.getAreaStyle(),{fill:O,opacity:.7,lineJoin:"bevel",decal:f.getVisual("style").decal})),Z&&(X=getSmooth(Z.get("smooth"))),x.setShape({smooth:U,stackedOnSmooth:X,smoothMonotone:Y,connectNulls:M}),setStatesStylesFromModel(x,r,"areaStyle"),getECData(x).seriesIndex=r.seriesIndex,toggleHoverEmphasis(x,G,F,z)}var J=function(te){u._changePolyState(te)};f.eachItemGraphicEl(function(te){te&&(te.onHoverStateChange=J)}),this._polyline.onHoverStateChange=J,this._data=f,this._coordSys=c,this._stackedOnPoints=w,this._points=p,this._step=I,this._valueOrigin=C,r.get("triggerLineEvent")&&(this.packEventData(r,S),x&&this.packEventData(r,x))},a.prototype.packEventData=function(r,o){getECData(o).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},a.prototype.highlight=function(r,o,l,u){var c=r.getData(),h=queryDataIndex(c,u);if(this._changePolyState("emphasis"),!(h instanceof Array)&&h!=null&&h>=0){var f=c.getLayout("points"),v=c.getItemGraphicEl(h);if(!v){var d=f[h*2],p=f[h*2+1];if(isNaN(d)||isNaN(p)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(d,p))return;var g=r.get("zlevel")||0,y=r.get("z")||0;v=new SymbolClz(c,h),v.x=d,v.y=p,v.setZ(g,y);var _=v.getSymbolPath().getTextContent();_&&(_.zlevel=g,_.z=y,_.z2=this._polyline.z2+1),v.__temp=!0,c.setItemGraphicEl(h,v),v.stopSymbolAnimation(!0),this.group.add(v)}v.highlight()}else ChartView$1.prototype.highlight.call(this,r,o,l,u)},a.prototype.downplay=function(r,o,l,u){var c=r.getData(),h=queryDataIndex(c,u);if(this._changePolyState("normal"),h!=null&&h>=0){var f=c.getItemGraphicEl(h);f&&(f.__temp?(c.setItemGraphicEl(h,null),this.group.remove(f)):f.downplay())}else ChartView$1.prototype.downplay.call(this,r,o,l,u)},a.prototype._changePolyState=function(r){var o=this._polygon;setStatesFlag(this._polyline,r),o&&setStatesFlag(o,r)},a.prototype._newPolyline=function(r){var o=this._polyline;return o&&this._lineGroup.remove(o),o=new ECPolyline({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(o),this._polyline=o,o},a.prototype._newPolygon=function(r,o){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:r,stackedOnPoints:o},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},a.prototype._initSymbolLabelAnimation=function(r,o,l){var u,c,h=o.getBaseAxis(),f=h.inverse;o.type==="cartesian2d"?(u=h.isHorizontal(),c=!1):o.type==="polar"&&(u=h.dim==="angle",c=!0);var v=r.hostModel,d=v.get("animationDuration");isFunction(d)&&(d=d(null));var p=v.get("animationDelay")||0,g=isFunction(p)?p(null):p;r.eachItemGraphicEl(function(y,_){var S=y;if(S){var x=[y.x,y.y],T=void 0,A=void 0,b=void 0;if(l)if(c){var C=l,E=o.pointToCoord(x);u?(T=C.startAngle,A=C.endAngle,b=-E[1]/180*Math.PI):(T=C.r0,A=C.r,b=E[0])}else{var w=l;u?(T=w.x,A=w.x+w.width,b=y.x):(T=w.y+w.height,A=w.y,b=y.y)}var D=A===T?0:(b-T)/(A-T);f&&(D=1-D);var M=isFunction(p)?p(_):d*D+g,P=S.getSymbolPath(),L=P.getTextContent();S.attr({scaleX:0,scaleY:0}),S.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),L&&L.animateFrom({style:{opacity:0}},{duration:300,delay:M}),P.disableLabelAnimation=!0}})},a.prototype._initOrUpdateEndLabel=function(r,o,l){var u=r.getModel("endLabel");if(anyStateShowEndLabel(r)){var c=r.getData(),h=this._polyline,f=c.getLayout("points");if(!f){h.removeTextContent(),this._endLabel=null;return}var v=this._endLabel;v||(v=this._endLabel=new ZRText$1({z2:200}),v.ignoreClip=!0,h.setTextContent(this._endLabel),h.disableLabelAnimation=!0);var d=getLastIndexNotNull(f);d>=0&&(setLabelStyle(h,getLabelStatesModels(r,"endLabel"),{inheritColor:l,labelFetcher:r,labelDataIndex:d,defaultText:function(p,g,y){return y!=null?getDefaultInterpolatedLabel(c,y):getDefaultLabel(c,p)},enableTextSetter:!0},getEndLabelStateSpecified(u,o)),h.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},a.prototype._endLabelOnDuring=function(r,o,l,u,c,h,f){var v=this._endLabel,d=this._polyline;if(v){r<1&&u.originalX==null&&(u.originalX=v.x,u.originalY=v.y);var p=l.getLayout("points"),g=l.hostModel,y=g.get("connectNulls"),_=h.get("precision"),S=h.get("distance")||0,x=f.getBaseAxis(),T=x.isHorizontal(),A=x.inverse,b=o.shape,C=A?T?b.x:b.y+b.height:T?b.x+b.width:b.y,E=(T?S:0)*(A?-1:1),w=(T?0:-S)*(A?-1:1),D=T?"x":"y",M=getIndexRange(p,C,D),P=M.range,L=P[1]-P[0],I=void 0;if(L>=1){if(L>1&&!y){var R=getPointAtIndex(p,P[0]);v.attr({x:R[0]+E,y:R[1]+w}),c&&(I=g.getRawValue(P[0]))}else{var R=d.getPointOn(C,D);R&&v.attr({x:R[0]+E,y:R[1]+w});var O=g.getRawValue(P[0]),N=g.getRawValue(P[1]);c&&(I=interpolateRawValues(l,_,O,N,M.t))}u.lastFrameIndex=P[0]}else{var V=r===1||u.lastFrameIndex>0?P[0]:0,R=getPointAtIndex(p,V);c&&(I=g.getRawValue(V)),v.attr({x:R[0]+E,y:R[1]+w})}if(c){var B=labelInner(v);typeof B.setLabelText=="function"&&B.setLabelText(I)}}},a.prototype._doUpdateAnimation=function(r,o,l,u,c,h,f){var v=this._polyline,d=this._polygon,p=r.hostModel,g=lineAnimationDiff(this._data,r,this._stackedOnPoints,o,this._coordSys,l,this._valueOrigin),y=g.current,_=g.stackedOnCurrent,S=g.next,x=g.stackedOnNext;if(c&&(y=turnPointsIntoStep(g.current,l,c,f),_=turnPointsIntoStep(g.stackedOnCurrent,l,c,f),S=turnPointsIntoStep(g.next,l,c,f),x=turnPointsIntoStep(g.stackedOnNext,l,c,f)),getBoundingDiff(y,S)>3e3||d&&getBoundingDiff(_,x)>3e3){v.stopAnimation(),v.setShape({points:S}),d&&(d.stopAnimation(),d.setShape({points:S,stackedOnPoints:x}));return}v.shape.__points=g.current,v.shape.points=y;var T={shape:{points:S}};g.current!==y&&(T.shape.__points=g.next),v.stopAnimation(),updateProps$1(v,T,p),d&&(d.setShape({points:y,stackedOnPoints:_}),d.stopAnimation(),updateProps$1(d,{shape:{stackedOnPoints:x}},p),v.shape.points!==d.shape.points&&(d.shape.points=v.shape.points));for(var A=[],b=g.status,C=0;C<b.length;C++){var E=b[C].cmd;if(E==="="){var w=r.getItemGraphicEl(b[C].idx1);w&&A.push({el:w,ptIdx:C})}}v.animators&&v.animators.length&&v.animators[0].during(function(){d&&d.dirtyShape();for(var D=v.shape.__points,M=0;M<A.length;M++){var P=A[M].el,L=A[M].ptIdx*2;P.x=D[L],P.y=D[L+1],P.markRedraw()}})},a.prototype.remove=function(r){var o=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(u,c){u.__temp&&(o.remove(u),l.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},a.type="line",a}(ChartView$1);const LineView$1=LineView;function pointsLayout(n,a){return{seriesType:n,plan:createRenderPlanner(),reset:function(r){var o=r.getData(),l=r.coordinateSystem,u=r.pipelineContext,c=a||u.large;if(!!l){var h=map$1(l.dimensions,function(y){return o.mapDimension(y)}).slice(0,2),f=h.length,v=o.getCalculationInfo("stackResultDimension");isDimensionStacked(o,h[0])&&(h[0]=v),isDimensionStacked(o,h[1])&&(h[1]=v);var d=o.getStore(),p=o.getDimensionIndex(h[0]),g=o.getDimensionIndex(h[1]);return f&&{progress:function(y,_){for(var S=y.end-y.start,x=c&&createFloat32Array(S*f),T=[],A=[],b=y.start,C=0;b<y.end;b++){var E=void 0;if(f===1){var w=d.get(p,b);E=l.dataToPoint(w,null,A)}else T[0]=d.get(p,b),T[1]=d.get(g,b),E=l.dataToPoint(T,null,A);c?(x[C++]=E[0],x[C++]=E[1]):_.setItemLayout(b,E.slice())}c&&_.setLayout("points",x)}}}}}}var samplers={average:function(n){for(var a=0,r=0,o=0;o<n.length;o++)isNaN(n[o])||(a+=n[o],r++);return r===0?NaN:a/r},sum:function(n){for(var a=0,r=0;r<n.length;r++)a+=n[r]||0;return a},max:function(n){for(var a=-1/0,r=0;r<n.length;r++)n[r]>a&&(a=n[r]);return isFinite(a)?a:NaN},min:function(n){for(var a=1/0,r=0;r<n.length;r++)n[r]<a&&(a=n[r]);return isFinite(a)?a:NaN},nearest:function(n){return n[0]}},indexSampler=function(n){return Math.round(n.length/2)};function dataSample(n){return{seriesType:n,reset:function(a,r,o){var l=a.getData(),u=a.get("sampling"),c=a.coordinateSystem,h=l.count();if(h>10&&c.type==="cartesian2d"&&u){var f=c.getBaseAxis(),v=c.getOtherAxis(f),d=f.getExtent(),p=o.getDevicePixelRatio(),g=Math.abs(d[1]-d[0])*(p||1),y=Math.round(h/g);if(isFinite(y)&&y>1){u==="lttb"&&a.setData(l.lttbDownSample(l.mapDimension(v.dim),1/y));var _=void 0;isString(u)?_=samplers[u]:isFunction(u)&&(_=u),_&&a.setData(l.downSample(l.mapDimension(v.dim),1/y,_,indexSampler))}}}}}function install$Q(n){n.registerChartView(LineView$1),n.registerSeriesModel(LineSeries),n.registerLayout(pointsLayout("line",!0)),n.registerVisual({seriesType:"line",reset:function(a){var r=a.getData(),o=a.getModel("lineStyle").getLineStyle();o&&!o.stroke&&(o.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",o)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(r,o,l){var u=this.coordinateSystem;if(u&&u.clampData){var c=u.clampData(r),h=u.dataToPoint(c);if(l)each$f(u.getAxes(),function(g,y){if(g.type==="category"&&o!=null){var _=g.getTicksCoords(),S=c[y],x=o[y]==="x1"||o[y]==="y1";if(x&&(S+=1),_.length<2)return;if(_.length===2){h[y]=g.toGlobalCoord(g.getExtent()[x?1:0]);return}for(var T=void 0,A=void 0,b=1,C=0;C<_.length;C++){var E=_[C].coord,w=C===_.length-1?_[C-1].tickValue+b:_[C].tickValue;if(w===S){A=E;break}else if(w<S)T=E;else if(T!=null&&w>S){A=(E+T)/2;break}C===1&&(b=w-_[0].tickValue)}A==null&&(T?T&&(A=_[_.length-1].coord):A=_[0].coord),h[y]=g.toGlobalCoord(A)}});else{var f=this.getData(),v=f.getLayout("offset"),d=f.getLayout("size"),p=u.getBaseAxis().isHorizontal()?0:1;h[p]+=v+d/2}return h}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(SeriesModel$1);SeriesModel$1.registerClass(BaseBarSeriesModel);const BaseBarSeriesModel$1=BaseBarSeriesModel;var BarSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},a.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},a.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),o=this.get("largeThreshold");return o>r&&(r=o),r},a.prototype.brushSelector=function(r,o,l){return l.rect(o.getItemLayout(r))},a.type="series.bar",a.dependencies=["grid","polar"],a.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),a}(BaseBarSeriesModel$1);const BarSeries=BarSeriesModel;var SausageShape=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),SausagePath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="sausage",o}return a.prototype.getDefaultShape=function(){return new SausageShape},a.prototype.buildPath=function(r,o){var l=o.cx,u=o.cy,c=Math.max(o.r0||0,0),h=Math.max(o.r,0),f=(h-c)*.5,v=c+f,d=o.startAngle,p=o.endAngle,g=o.clockwise,y=Math.PI*2,_=g?p-d<y:d-p<y;_||(d=p-(g?y:-y));var S=Math.cos(d),x=Math.sin(d),T=Math.cos(p),A=Math.sin(p);_?(r.moveTo(S*c+l,x*c+u),r.arc(S*v+l,x*v+u,f,-Math.PI+d,d,!g)):r.moveTo(S*h+l,x*h+u),r.arc(l,u,h,d,p,!g),r.arc(T*v+l,A*v+u,f,p-Math.PI*2,p-Math.PI,!g),c!==0&&r.arc(l,u,c,p,d,g)},a}(Path$1);const Sausage=SausagePath;function createSectorCalculateTextPosition(n,a){a=a||{};var r=a.isRoundCap;return function(o,l,u){var c=l.position;if(!c||c instanceof Array)return calculateTextPosition(o,l,u);var h=n(c),f=l.distance!=null?l.distance:5,v=this.shape,d=v.cx,p=v.cy,g=v.r,y=v.r0,_=(g+y)/2,S=v.startAngle,x=v.endAngle,T=(S+x)/2,A=r?Math.abs(g-y)/2:0,b=Math.cos,C=Math.sin,E=d+g*b(S),w=p+g*C(S),D="left",M="top";switch(h){case"startArc":E=d+(y-f)*b(T),w=p+(y-f)*C(T),D="center",M="top";break;case"insideStartArc":E=d+(y+f)*b(T),w=p+(y+f)*C(T),D="center",M="bottom";break;case"startAngle":E=d+_*b(S)+adjustAngleDistanceX(S,f+A,!1),w=p+_*C(S)+adjustAngleDistanceY(S,f+A,!1),D="right",M="middle";break;case"insideStartAngle":E=d+_*b(S)+adjustAngleDistanceX(S,-f+A,!1),w=p+_*C(S)+adjustAngleDistanceY(S,-f+A,!1),D="left",M="middle";break;case"middle":E=d+_*b(T),w=p+_*C(T),D="center",M="middle";break;case"endArc":E=d+(g+f)*b(T),w=p+(g+f)*C(T),D="center",M="bottom";break;case"insideEndArc":E=d+(g-f)*b(T),w=p+(g-f)*C(T),D="center",M="top";break;case"endAngle":E=d+_*b(x)+adjustAngleDistanceX(x,f+A,!0),w=p+_*C(x)+adjustAngleDistanceY(x,f+A,!0),D="left",M="middle";break;case"insideEndAngle":E=d+_*b(x)+adjustAngleDistanceX(x,-f+A,!0),w=p+_*C(x)+adjustAngleDistanceY(x,-f+A,!0),D="right",M="middle";break;default:return calculateTextPosition(o,l,u)}return o=o||{},o.x=E,o.y=w,o.align=D,o.verticalAlign=M,o}}function setSectorTextRotation(n,a,r,o){if(isNumber(o)){n.setTextConfig({rotation:o});return}else if(isArray$1(a)){n.setTextConfig({rotation:0});return}var l=n.shape,u=l.clockwise?l.startAngle:l.endAngle,c=l.clockwise?l.endAngle:l.startAngle,h=(u+c)/2,f,v=r(a);switch(v){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":f=h;break;case"startAngle":case"insideStartAngle":f=u;break;case"endAngle":case"insideEndAngle":f=c;break;default:n.setTextConfig({rotation:0});return}var d=Math.PI*1.5-f;v==="middle"&&d>Math.PI/2&&d<Math.PI*1.5&&(d-=Math.PI),n.setTextConfig({rotation:d})}function adjustAngleDistanceX(n,a,r){return a*Math.sin(n)*(r?-1:1)}function adjustAngleDistanceY(n,a,r){return a*Math.cos(n)*(r?1:-1)}function getSectorCornerRadius(n,a,r){var o=n.get("borderRadius");if(o==null)return r?{cornerRadius:0}:null;isArray$1(o)||(o=[o,o,o,o]);var l=Math.abs(a.r||0-a.r0||0);return{cornerRadius:map$1(o,function(u){return parsePercent$1(u,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(n,a){var r=n.getArea&&n.getArea();if(isCoordinateSystemType(n,"cartesian2d")){var o=n.getBaseAxis();if(o.type!=="category"||!o.onBand){var l=a.getLayout("bandWidth");o.isHorizontal()?(r.x-=l,r.width+=l*2):(r.y-=l,r.height+=l*2)}}return r}var BarView=function(n){__extends(a,n);function a(){var r=n.call(this)||this;return r.type=a.type,r._isFirstFrame=!0,r}return a.prototype.render=function(r,o,l,u){this._model=r,this._removeOnRenderedListener(l),this._updateDrawMode(r);var c=r.get("coordinateSystem");c==="cartesian2d"||c==="polar"?(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,o,l):this._renderNormal(r,o,l,u)):{}.NODE_ENV!=="production"&&warn("Only cartesian2d and polar supported for bar.")},a.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},a.prototype.incrementalRender=function(r,o){this._progressiveEls=[],this._incrementalRenderLarge(r,o)},a.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},a.prototype._updateDrawMode=function(r){var o=r.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},a.prototype._renderNormal=function(r,o,l,u){var c=this.group,h=r.getData(),f=this._data,v=r.coordinateSystem,d=v.getBaseAxis(),p;v.type==="cartesian2d"?p=d.isHorizontal():v.type==="polar"&&(p=d.dim==="angle");var g=r.isAnimationEnabled()?r:null,y=shouldRealtimeSort(r,v);y&&this._enableRealtimeSort(y,h,l);var _=r.get("clip",!0)||y,S=getClipArea(v,h);c.removeClipPath();var x=r.get("roundCap",!0),T=r.get("showBackground",!0),A=r.getModel("backgroundStyle"),b=A.get("borderRadius")||0,C=[],E=this._backgroundEls,w=u&&u.isInitSort,D=u&&u.type==="changeAxisOrder";function M(I){var R=getLayout[v.type](h,I),O=createBackgroundEl(v,p,R);return O.useStyle(A.getItemStyle()),v.type==="cartesian2d"?O.setShape("r",b):O.setShape("cornerRadius",b),C[I]=O,O}h.diff(f).add(function(I){var R=h.getItemModel(I),O=getLayout[v.type](h,I,R);if(T&&M(I),!(!h.hasValue(I)||!isValidLayout[v.type](O))){var N=!1;_&&(N=clip[v.type](S,O));var V=elementCreator[v.type](r,h,I,O,p,g,d.model,!1,x);y&&(V.forceLabelAnimation=!0),updateStyle(V,h,I,R,O,r,p,v.type==="polar"),w?V.attr({shape:O}):y?updateRealtimeAnimation(y,g,V,O,I,p,!1,!1):initProps(V,{shape:O},r,I),h.setItemGraphicEl(I,V),c.add(V),V.ignore=N}}).update(function(I,R){var O=h.getItemModel(I),N=getLayout[v.type](h,I,O);if(T){var V=void 0;E.length===0?V=M(R):(V=E[R],V.useStyle(A.getItemStyle()),v.type==="cartesian2d"?V.setShape("r",b):V.setShape("cornerRadius",b),C[I]=V);var B=getLayout[v.type](h,I),G=createBackgroundShape(p,B,v);updateProps$1(V,{shape:G},g,I)}var F=f.getItemGraphicEl(R);if(!h.hasValue(I)||!isValidLayout[v.type](N)){c.remove(F);return}var z=!1;if(_&&(z=clip[v.type](S,N),z&&c.remove(F)),F?saveOldStyle(F):F=elementCreator[v.type](r,h,I,N,p,g,d.model,!!F,x),y&&(F.forceLabelAnimation=!0),D){var H=F.getTextContent();if(H){var U=labelInner(H);U.prevValue!=null&&(U.prevValue=U.value)}}else updateStyle(F,h,I,O,N,r,p,v.type==="polar");w?F.attr({shape:N}):y?updateRealtimeAnimation(y,g,F,N,I,p,!0,D):updateProps$1(F,{shape:N},r,I,null),h.setItemGraphicEl(I,F),F.ignore=z,c.add(F)}).remove(function(I){var R=f.getItemGraphicEl(I);R&&removeElementWithFadeOut(R,r,I)}).execute();var P=this._backgroundGroup||(this._backgroundGroup=new Group$4);P.removeAll();for(var L=0;L<C.length;++L)P.add(C[L]);c.add(P),this._backgroundEls=C,this._data=h},a.prototype._renderLarge=function(r,o,l){this._clear(),createLarge$1(r,this.group),this._updateLargeClip(r)},a.prototype._incrementalRenderLarge=function(r,o){this._removeBackground(),createLarge$1(o,this.group,this._progressiveEls,!0)},a.prototype._updateLargeClip=function(r){var o=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r),l=this.group;o?l.setClipPath(o):l.removeClipPath()},a.prototype._enableRealtimeSort=function(r,o,l){var u=this;if(!!o.count()){var c=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(o,r,l),this._isFirstFrame=!1;else{var h=function(f){var v=o.getItemGraphicEl(f),d=v&&v.shape;return d&&Math.abs(c.isHorizontal()?d.height:d.width)||0};this._onRendered=function(){u._updateSortWithinSameData(o,h,c,l)},l.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(r,o,l){var u=[];return r.each(r.mapDimension(o.dim),function(c,h){var f=l(h);f=f==null?NaN:f,u.push({dataIndex:h,mappedValue:f,ordinalNumber:c})}),u.sort(function(c,h){return h.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(u,function(c){return c.ordinalNumber})}},a.prototype._isOrderChangedWithinSameData=function(r,o,l){for(var u=l.scale,c=r.mapDimension(l.dim),h=Number.MAX_VALUE,f=0,v=u.getOrdinalMeta().categories.length;f<v;++f){var d=r.rawIndexOf(c,u.getRawOrdinalNumber(f)),p=d<0?Number.MIN_VALUE:o(r.indexOfRawIndex(d));if(p>h)return!0;h=p}return!1},a.prototype._isOrderDifferentInView=function(r,o){for(var l=o.scale,u=l.getExtent(),c=Math.max(0,u[0]),h=Math.min(u[1],l.getOrdinalMeta().categories.length-1);c<=h;++c)if(r.ordinalNumbers[c]!==l.getRawOrdinalNumber(c))return!0},a.prototype._updateSortWithinSameData=function(r,o,l,u){if(!!this._isOrderChangedWithinSameData(r,o,l)){var c=this._dataSort(r,l,o);this._isOrderDifferentInView(c,l)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:c}))}},a.prototype._dispatchInitSort=function(r,o,l){var u=o.baseAxis,c=this._dataSort(r,u,function(h){return r.get(r.mapDimension(o.otherAxis.dim),h)});l.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:c})},a.prototype.remove=function(r,o){this._clear(this._model),this._removeOnRenderedListener(o)},a.prototype.dispose=function(r,o){this._removeOnRenderedListener(o)},a.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(r){var o=this.group,l=this._data;r&&r.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,r,getECData(u).dataIndex)})):o.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(ChartView$1),clip={cartesian2d:function(n,a){var r=a.width<0?-1:1,o=a.height<0?-1:1;r<0&&(a.x+=a.width,a.width=-a.width),o<0&&(a.y+=a.height,a.height=-a.height);var l=n.x+n.width,u=n.y+n.height,c=mathMax$4(a.x,n.x),h=mathMin$4(a.x+a.width,l),f=mathMax$4(a.y,n.y),v=mathMin$4(a.y+a.height,u),d=h<c,p=v<f;return a.x=d&&c>l?h:c,a.y=p&&f>u?v:f,a.width=d?0:h-c,a.height=p?0:v-f,r<0&&(a.x+=a.width,a.width=-a.width),o<0&&(a.y+=a.height,a.height=-a.height),d||p},polar:function(n,a){var r=a.r0<=a.r?1:-1;if(r<0){var o=a.r;a.r=a.r0,a.r0=o}var l=mathMin$4(a.r,n.r),u=mathMax$4(a.r0,n.r0);a.r=l,a.r0=u;var c=l-u<0;if(r<0){var o=a.r;a.r=a.r0,a.r0=o}return c}},elementCreator={cartesian2d:function(n,a,r,o,l,u,c,h,f){var v=new Rect$3({shape:extend({},o),z2:1});if(v.__dataIndex=r,v.name="item",u){var d=v.shape,p=l?"height":"width";d[p]=0}return v},polar:function(n,a,r,o,l,u,c,h,f){var v=!l&&f?Sausage:Sector$1,d=new v({shape:o,z2:1});d.name="item";var p=createPolarPositionMapping(l);if(d.calculateTextPosition=createSectorCalculateTextPosition(p,{isRoundCap:v===Sausage}),u){var g=d.shape,y=l?"r":"endAngle",_={};g[y]=l?o.r0:o.startAngle,_[y]=o[y],(h?updateProps$1:initProps)(d,{shape:_},u)}return d}};function shouldRealtimeSort(n,a){var r=n.get("realtimeSort",!0),o=a.getBaseAxis();if({}.NODE_ENV!=="production"&&r&&(o.type!=="category"&&warn("`realtimeSort` will not work because this bar series is not based on a category axis."),a.type!=="cartesian2d"&&warn("`realtimeSort` will not work because this bar series is not on cartesian2d.")),r&&o.type==="category"&&a.type==="cartesian2d")return{baseAxis:o,otherAxis:a.getOtherAxis(o)}}function updateRealtimeAnimation(n,a,r,o,l,u,c,h){var f,v;u?(v={x:o.x,width:o.width},f={y:o.y,height:o.height}):(v={y:o.y,height:o.height},f={x:o.x,width:o.width}),h||(c?updateProps$1:initProps)(r,{shape:f},a,l,null);var d=a?n.baseAxis.model:null;(c?updateProps$1:initProps)(r,{shape:v},d,l)}function checkPropertiesNotValid(n,a){for(var r=0;r<a.length;r++)if(!isFinite(n[a[r]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(n){return!checkPropertiesNotValid(n,rectPropties)},polar:function(n){return!checkPropertiesNotValid(n,polarPropties)}},getLayout={cartesian2d:function(n,a,r){var o=n.getItemLayout(a),l=r?getLineWidth(r,o):0,u=o.width>0?1:-1,c=o.height>0?1:-1;return{x:o.x+u*l/2,y:o.y+c*l/2,width:o.width-u*l,height:o.height-c*l}},polar:function(n,a,r){var o=n.getItemLayout(a);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}}};function isZeroOnPolar(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function createPolarPositionMapping(n){return function(a){var r=a?"Arc":"Angle";return function(o){switch(o){case"start":case"insideStart":case"end":case"insideEnd":return o+r;default:return o}}}(n)}function updateStyle(n,a,r,o,l,u,c,h){var f=a.getItemVisual(r,"style");if(h){if(!u.get("roundCap")){var d=n.shape,p=getSectorCornerRadius(o.getModel("itemStyle"),d,!0);extend(d,p),n.setShape(d)}}else{var v=o.get(["itemStyle","borderRadius"])||0;n.setShape("r",v)}n.useStyle(f);var g=o.getShallow("cursor");g&&n.attr("cursor",g);var y=h?c?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":c?l.height>=0?"bottom":"top":l.width>=0?"right":"left",_=getLabelStatesModels(o);setLabelStyle(n,_,{labelFetcher:u,labelDataIndex:r,defaultText:getDefaultLabel(u.getData(),r),inheritColor:f.fill,defaultOpacity:f.opacity,defaultOutsidePosition:y});var S=n.getTextContent();if(h&&S){var x=o.get(["label","position"]);n.textConfig.inside=x==="middle"?!0:null,setSectorTextRotation(n,x==="outside"?y:x,createPolarPositionMapping(c),o.get(["label","rotate"]))}setLabelValueAnimation(S,_,u.getRawValue(r),function(A){return getDefaultInterpolatedLabel(a,A)});var T=o.getModel(["emphasis"]);toggleHoverEmphasis(n,T.get("focus"),T.get("blurScope"),T.get("disabled")),setStatesStylesFromModel(n,o),isZeroOnPolar(l)&&(n.style.fill="none",n.style.stroke="none",each$f(n.states,function(A){A.style&&(A.style.fill=A.style.stroke="none")}))}function getLineWidth(n,a){var r=n.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var o=n.get(["itemStyle","borderWidth"])||0,l=isNaN(a.width)?Number.MAX_VALUE:Math.abs(a.width),u=isNaN(a.height)?Number.MAX_VALUE:Math.abs(a.height);return Math.min(o,l,u)}var LagePathShape=function(){function n(){}return n}(),LargePath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="largeBar",o}return a.prototype.getDefaultShape=function(){return new LagePathShape},a.prototype.buildPath=function(r,o){for(var l=o.points,u=this.baseDimIdx,c=1-this.baseDimIdx,h=[],f=[],v=this.barWidth,d=0;d<l.length;d+=3)f[u]=v,f[c]=l[d+2],h[u]=l[d+u],h[c]=l[d+c],r.rect(h[0],h[1],f[0],f[1])},a}(Path$1);function createLarge$1(n,a,r,o){var l=n.getData(),u=l.getLayout("valueAxisHorizontal")?1:0,c=l.getLayout("largeDataIndices"),h=l.getLayout("size"),f=n.getModel("backgroundStyle"),v=l.getLayout("largeBackgroundPoints");if(v){var d=new LargePath({shape:{points:v},incremental:!!o,silent:!0,z2:0});d.baseDimIdx=u,d.largeDataIndices=c,d.barWidth=h,d.useStyle(f.getItemStyle()),a.add(d),r&&r.push(d)}var p=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!o,ignoreCoarsePointer:!0,z2:1});p.baseDimIdx=u,p.largeDataIndices=c,p.barWidth=h,a.add(p),p.useStyle(l.getVisual("style")),getECData(p).seriesIndex=n.seriesIndex,n.get("silent")||(p.on("mousedown",largePathUpdateDataIndex),p.on("mousemove",largePathUpdateDataIndex)),r&&r.push(p)}var largePathUpdateDataIndex=throttle(function(n){var a=this,r=largePathFindDataIndex(a,n.offsetX,n.offsetY);getECData(a).dataIndex=r>=0?r:null},30,!1);function largePathFindDataIndex(n,a,r){for(var o=n.baseDimIdx,l=1-o,u=n.shape.points,c=n.largeDataIndices,h=[],f=[],v=n.barWidth,d=0,p=u.length/3;d<p;d++){var g=d*3;if(f[o]=v,f[l]=u[g+2],h[o]=u[g+o],h[l]=u[g+l],f[l]<0&&(h[l]+=f[l],f[l]=-f[l]),a>=h[0]&&a<=h[0]+f[0]&&r>=h[1]&&r<=h[1]+f[1])return c[d]}return-1}function createBackgroundShape(n,a,r){if(isCoordinateSystemType(r,"cartesian2d")){var o=a,l=r.getArea();return{x:n?o.x:l.x,y:n?l.y:o.y,width:n?o.width:l.width,height:n?l.height:o.height}}else{var l=r.getArea(),u=a;return{cx:l.cx,cy:l.cy,r0:n?l.r0:u.r0,r:n?l.r:u.r,startAngle:n?u.startAngle:0,endAngle:n?u.endAngle:Math.PI*2}}}function createBackgroundEl(n,a,r){var o=n.type==="polar"?Sector$1:Rect$3;return new o({shape:createBackgroundShape(a,r,n),silent:!0,z2:0})}const BarView$1=BarView;function install$P(n){n.registerChartView(BarView$1),n.registerSeriesModel(BarSeries),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(a,r){var o=a.componentType||"series";r.eachComponent({mainType:o,query:a},function(l){a.sortInfo&&l.axis.setCategorySortInfo(a.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(n,a){return getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function getBasicPieLayout(n,a){var r=getViewRect$5(n,a),o=n.get("center"),l=n.get("radius");isArray$1(l)||(l=[0,l]);var u=parsePercent(r.width,a.getWidth()),c=parsePercent(r.height,a.getHeight()),h=Math.min(u,c),f=parsePercent(l[0],h/2),v=parsePercent(l[1],h/2),d,p,g=n.coordinateSystem;if(g){var y=g.dataToPoint(o);d=y[0]||0,p=y[1]||0}else isArray$1(o)||(o=[o,o]),d=parsePercent(o[0],u)+r.x,p=parsePercent(o[1],c)+r.y;return{cx:d,cy:p,r0:f,r:v}}function pieLayout(n,a,r){a.eachSeriesByType(n,function(o){var l=o.getData(),u=l.mapDimension("value"),c=getViewRect$5(o,r),h=getBasicPieLayout(o,r),f=h.cx,v=h.cy,d=h.r,p=h.r0,g=-o.get("startAngle")*RADIAN$2,y=o.get("minAngle")*RADIAN$2,_=0;l.each(u,function(L){!isNaN(L)&&_++});var S=l.getSum(u),x=Math.PI/(S||_)*2,T=o.get("clockwise"),A=o.get("roseType"),b=o.get("stillShowZeroSum"),C=l.getDataExtent(u);C[0]=0;var E=PI2,w=0,D=g,M=T?1:-1;if(l.setLayout({viewRect:c,r:d}),l.each(u,function(L,I){var R;if(isNaN(L)){l.setItemLayout(I,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:T,cx:f,cy:v,r0:p,r:A?NaN:d});return}A!=="area"?R=S===0&&b?x:L*x:R=PI2/_,R<y?(R=y,E-=y):w+=L;var O=D+M*R;l.setItemLayout(I,{angle:R,startAngle:D,endAngle:O,clockwise:T,cx:f,cy:v,r0:p,r:A?linearMap$2(L,C,[p,d]):d}),D=O}),E<PI2&&_)if(E<=.001){var P=PI2/_;l.each(u,function(L,I){if(!isNaN(L)){var R=l.getItemLayout(I);R.angle=P,R.startAngle=g+M*I*P,R.endAngle=g+M*(I+1)*P}})}else x=E/w,D=g,l.each(u,function(L,I){if(!isNaN(L)){var R=l.getItemLayout(I),O=R.angle===y?y:L*x;R.startAngle=D,R.endAngle=D+M*O,D+=M*O}})})}function dataFilter$1(n){return{seriesType:n,reset:function(a,r){var o=r.findComponents({mainType:"legend"});if(!(!o||!o.length)){var l=a.getData();l.filterSelf(function(u){for(var c=l.getName(u),h=0;h<o.length;h++)if(!o[h].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(n,a,r,o,l,u,c,h,f,v){if(n.length<2)return;function d(S){for(var x=S.rB,T=x*x,A=0;A<S.list.length;A++){var b=S.list[A],C=Math.abs(b.label.y-r),E=o+b.len,w=E*E,D=Math.sqrt((1-Math.abs(C*C/T))*w),M=a+(D+b.len2)*l,P=M-b.label.x,L=b.targetTextWidth-P*l;constrainTextWidth(b,L,!0),b.label.x=M}}function p(S){for(var x={list:[],maxY:0},T={list:[],maxY:0},A=0;A<S.length;A++)if(S[A].labelAlignTo==="none"){var b=S[A],C=b.label.y>r?T:x,E=Math.abs(b.label.y-r);if(E>=C.maxY){var w=b.label.x-a-b.len2*l,D=o+b.len,M=Math.abs(w)<D?Math.sqrt(E*E/(1-w*w/D/D)):D;C.rB=M,C.maxY=E}C.list.push(b)}d(x),d(T)}for(var g=n.length,y=0;y<g;y++)if(n[y].position==="outer"&&n[y].labelAlignTo==="labelLine"){var _=n[y].label.x-v;n[y].linePoints[1][0]+=_,n[y].label.x=v}shiftLayoutOnY(n,f,f+c)&&p(n)}function avoidOverlap(n,a,r,o,l,u,c,h){for(var f=[],v=[],d=Number.MAX_VALUE,p=-Number.MAX_VALUE,g=0;g<n.length;g++){var y=n[g].label;isPositionCenter(n[g])||(y.x<a?(d=Math.min(d,y.x),f.push(n[g])):(p=Math.max(p,y.x),v.push(n[g])))}for(var g=0;g<n.length;g++){var _=n[g];if(!isPositionCenter(_)&&_.linePoints){if(_.labelStyleWidth!=null)continue;var y=_.label,S=_.linePoints,x=void 0;_.labelAlignTo==="edge"?y.x<a?x=S[2][0]-_.labelDistance-c-_.edgeDistance:x=c+l-_.edgeDistance-S[2][0]-_.labelDistance:_.labelAlignTo==="labelLine"?y.x<a?x=d-c-_.bleedMargin:x=c+l-p-_.bleedMargin:y.x<a?x=y.x-c-_.bleedMargin:x=c+l-y.x-_.bleedMargin,_.targetTextWidth=x,constrainTextWidth(_,x)}}adjustSingleSide(v,a,r,o,1,l,u,c,h,p),adjustSingleSide(f,a,r,o,-1,l,u,c,h,d);for(var g=0;g<n.length;g++){var _=n[g];if(!isPositionCenter(_)&&_.linePoints){var y=_.label,S=_.linePoints,T=_.labelAlignTo==="edge",A=y.style.padding,b=A?A[1]+A[3]:0,C=y.style.backgroundColor?0:b,E=_.rect.width+C,w=S[1][0]-S[2][0];T?y.x<a?S[2][0]=c+_.edgeDistance+E+_.labelDistance:S[2][0]=c+l-_.edgeDistance-E-_.labelDistance:(y.x<a?S[2][0]=y.x+_.labelDistance:S[2][0]=y.x-_.labelDistance,S[1][0]=S[2][0]+w),S[1][1]=S[2][1]=y.y}}}function constrainTextWidth(n,a,r){if(r===void 0&&(r=!1),n.labelStyleWidth==null){var o=n.label,l=o.style,u=n.rect,c=l.backgroundColor,h=l.padding,f=h?h[1]+h[3]:0,v=l.overflow,d=u.width+(c?0:f);if(a<d||r){var p=u.height;if(v&&v.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",a-f);var g=o.getBoundingRect();o.setStyle("width",Math.ceil(g.width)),o.setStyle("backgroundColor",c)}else{var y=a-f,_=a<d?y:r?y>n.unconstrainedWidth?null:y:null;o.setStyle("width",_)}var S=o.getBoundingRect();u.width=S.width;var x=(o.style.margin||0)+2.1;u.height=S.height+x,u.y-=(u.height-p)/2}}}function isPositionCenter(n){return n.position==="center"}function pieLabelLayout(n){var a=n.getData(),r=[],o,l,u=!1,c=(n.get("minShowLabelAngle")||0)*RADIAN$1,h=a.getLayout("viewRect"),f=a.getLayout("r"),v=h.width,d=h.x,p=h.y,g=h.height;function y(w){w.ignore=!0}function _(w){if(!w.ignore)return!0;for(var D in w.states)if(w.states[D].ignore===!1)return!0;return!1}a.each(function(w){var D=a.getItemGraphicEl(w),M=D.shape,P=D.getTextContent(),L=D.getTextGuideLine(),I=a.getItemModel(w),R=I.getModel("label"),O=R.get("position")||I.get(["emphasis","label","position"]),N=R.get("distanceToLabelLine"),V=R.get("alignTo"),B=parsePercent(R.get("edgeDistance"),v),G=R.get("bleedMargin"),F=I.getModel("labelLine"),z=F.get("length");z=parsePercent(z,v);var H=F.get("length2");if(H=parsePercent(H,v),Math.abs(M.endAngle-M.startAngle)<c){each$f(P.states,y),P.ignore=!0,L&&(each$f(L.states,y),L.ignore=!0);return}if(!!_(P)){var U=(M.startAngle+M.endAngle)/2,Y=Math.cos(U),Z=Math.sin(U),X,J,te,Q;o=M.cx,l=M.cy;var q=O==="inside"||O==="inner";if(O==="center")X=M.cx,J=M.cy,Q="center";else{var ee=(q?(M.r+M.r0)/2*Y:M.r*Y)+o,K=(q?(M.r+M.r0)/2*Z:M.r*Z)+l;if(X=ee+Y*3,J=K+Z*3,!q){var W=ee+Y*(z+f-M.r),j=K+Z*(z+f-M.r),ae=W+(Y<0?-1:1)*H,re=j;V==="edge"?X=Y<0?d+B:d+v-B:X=ae+(Y<0?-N:N),J=re,te=[[ee,K],[W,j],[ae,re]]}Q=q?"center":V==="edge"?Y>0?"right":"left":Y>0?"left":"right"}var ne=Math.PI,ie=0,oe=R.get("rotate");if(isNumber(oe))ie=oe*(ne/180);else if(O==="center")ie=0;else if(oe==="radial"||oe===!0){var le=Y<0?-U+ne:-U;ie=le}else if(oe==="tangential"&&O!=="outside"&&O!=="outer"){var se=Math.atan2(Y,Z);se<0&&(se=ne*2+se);var ce=Z>0;ce&&(se=ne+se),ie=se-ne}if(u=!!ie,P.x=X,P.y=J,P.rotation=ie,P.setStyle({verticalAlign:"middle"}),q){P.setStyle({align:Q});var he=P.states.select;he&&(he.x+=P.x,he.y+=P.y)}else{var ue=P.getBoundingRect().clone();ue.applyTransform(P.getComputedTransform());var fe=(P.style.margin||0)+2.1;ue.y-=fe/2,ue.height+=fe,r.push({label:P,labelLine:L,position:O,len:z,len2:H,minTurnAngle:F.get("minTurnAngle"),maxSurfaceAngle:F.get("maxSurfaceAngle"),surfaceNormal:new Point$1(Y,Z),linePoints:te,textAlign:Q,labelDistance:N,labelAlignTo:V,edgeDistance:B,bleedMargin:G,rect:ue,unconstrainedWidth:ue.width,labelStyleWidth:P.style.width})}D.setTextConfig({inside:q})}}),!u&&n.get("avoidLabelOverlap")&&avoidOverlap(r,o,l,f,v,g,d,p);for(var S=0;S<r.length;S++){var x=r[S],T=x.label,A=x.labelLine,b=isNaN(T.x)||isNaN(T.y);if(T){T.setStyle({align:x.textAlign}),b&&(each$f(T.states,y),T.ignore=!0);var C=T.states.select;C&&(C.x+=T.x,C.y+=T.y)}if(A){var E=x.linePoints;b||!E?(each$f(A.states,y),A.ignore=!0):(limitTurnAngle(E,x.minTurnAngle),limitSurfaceAngle(E,x.surfaceNormal,x.maxSurfaceAngle),A.setShape({points:E}),T.__hostTarget.textGuideLineConfig={anchor:new Point$1(E[0][0],E[0][1])})}}}var PiePiece=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this)||this;u.z2=2;var c=new ZRText$1;return u.setTextContent(c),u.updateData(r,o,l,!0),u}return a.prototype.updateData=function(r,o,l,u){var c=this,h=r.hostModel,f=r.getItemModel(o),v=f.getModel("emphasis"),d=r.getItemLayout(o),p=extend(getSectorCornerRadius(f.getModel("itemStyle"),d,!0),d);if(isNaN(p.startAngle)){c.setShape(p);return}if(u){c.setShape(p);var g=h.getShallow("animationType");h.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},h,{dataIndex:o,isFrom:!0}),c.originX=p.cx,c.originY=p.cy):g==="scale"?(c.shape.r=d.r0,initProps(c,{shape:{r:d.r}},h,o)):l!=null?(c.setShape({startAngle:l,endAngle:l}),initProps(c,{shape:{startAngle:d.startAngle,endAngle:d.endAngle}},h,o)):(c.shape.endAngle=d.startAngle,updateProps$1(c,{shape:{endAngle:d.endAngle}},h,o))}else saveOldStyle(c),updateProps$1(c,{shape:p},h,o);c.useStyle(r.getItemVisual(o,"style")),setStatesStylesFromModel(c,f);var y=(d.startAngle+d.endAngle)/2,_=h.get("selectedOffset"),S=Math.cos(y)*_,x=Math.sin(y)*_,T=f.getShallow("cursor");T&&c.attr("cursor",T),this._updateLabel(h,r,o),c.ensureState("emphasis").shape=extend({r:d.r+(v.get("scale")&&v.get("scaleSize")||0)},getSectorCornerRadius(v.getModel("itemStyle"),d)),extend(c.ensureState("select"),{x:S,y:x,shape:getSectorCornerRadius(f.getModel(["select","itemStyle"]),d)}),extend(c.ensureState("blur"),{shape:getSectorCornerRadius(f.getModel(["blur","itemStyle"]),d)});var A=c.getTextGuideLine(),b=c.getTextContent();A&&extend(A.ensureState("select"),{x:S,y:x}),extend(b.ensureState("select"),{x:S,y:x}),toggleHoverEmphasis(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},a.prototype._updateLabel=function(r,o,l){var u=this,c=o.getItemModel(l),h=c.getModel("labelLine"),f=o.getItemVisual(l,"style"),v=f&&f.fill,d=f&&f.opacity;setLabelStyle(u,getLabelStatesModels(c),{labelFetcher:o.hostModel,labelDataIndex:l,inheritColor:v,defaultOpacity:d,defaultText:r.getFormattedLabel(l,"normal")||o.getName(l)});var p=u.getTextContent();u.setTextConfig({position:null,rotation:null}),p.attr({z2:10});var g=r.get(["label","position"]);if(g!=="outside"&&g!=="outer")u.removeTextGuideLine();else{var y=this.getTextGuideLine();y||(y=new Polyline$3,this.setTextGuideLine(y)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:v,opacity:retrieve3(h.get(["lineStyle","opacity"]),d,1)})}},a}(Sector$1),PieView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return a.prototype.render=function(r,o,l,u){var c=r.getData(),h=this._data,f=this.group,v;if(!h&&c.count()>0){for(var d=c.getItemLayout(0),p=1;isNaN(d&&d.startAngle)&&p<c.count();++p)d=c.getItemLayout(p);d&&(v=d.startAngle)}if(this._emptyCircleSector&&f.remove(this._emptyCircleSector),c.count()===0&&r.get("showEmptyCircle")){var g=new Sector$1({shape:getBasicPieLayout(r,l)});g.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=g,f.add(g)}c.diff(h).add(function(y){var _=new PiePiece(c,y,v);c.setItemGraphicEl(y,_),f.add(_)}).update(function(y,_){var S=h.getItemGraphicEl(_);S.updateData(c,y,v),S.off("click"),f.add(S),c.setItemGraphicEl(y,S)}).remove(function(y){var _=h.getItemGraphicEl(y);removeElementWithFadeOut(_,r,y)}).execute(),pieLabelLayout(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},a.prototype.dispose=function(){},a.prototype.containPoint=function(r,o){var l=o.getData(),u=l.getItemLayout(0);if(u){var c=r[0]-u.cx,h=r[1]-u.cy,f=Math.sqrt(c*c+h*h);return f<=u.r&&f>=u.r0}},a.type="pie",a}(ChartView$1);const PieView$1=PieView;function createSeriesDataSimply(n,a,r){a=isArray$1(a)&&{coordDimensions:a}||extend({encodeDefine:n.getEncode()},a);var o=n.getSource(),l=prepareSeriesDataSchema(o,a).dimensions,u=new SeriesData$1(l,n);return u.initData(o,r),u}var LegendVisualProvider=function(){function n(a,r){this._getDataWithEncodedVisual=a,this._getRawData=r}return n.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},n.prototype.containName=function(a){var r=this._getRawData();return r.indexOfName(a)>=0},n.prototype.indexOfName=function(a){var r=this._getDataWithEncodedVisual();return r.indexOfName(a)},n.prototype.getItemVisual=function(a,r){var o=this._getDataWithEncodedVisual();return o.getItemVisual(a,r)},n}();const LegendVisualProvider$1=LegendVisualProvider;var innerData=makeInner(),PieSeriesModel=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},a.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},a.prototype.getDataParams=function(r){var o=this.getData(),l=innerData(o),u=l.seats;if(!u){var c=[];o.each(o.mapDimension("value"),function(f){c.push(f)}),u=l.seats=getPercentSeats(c,o.hostModel.get("percentPrecision"))}var h=n.prototype.getDataParams.call(this,r);return h.percent=u[r]||0,h.$vars.push("percent"),h},a.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var o=r.labelLine,l=r.emphasis.labelLine;o.show=o.show&&r.label.show,l.show=l.show&&r.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(SeriesModel$1);const PieSeriesModel$1=PieSeriesModel;function negativeDataFilter(n){return{seriesType:n,reset:function(a,r){var o=a.getData();o.filterSelf(function(l){var u=o.mapDimension("value"),c=o.get(u,l);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$O(n){n.registerChartView(PieView$1),n.registerSeriesModel(PieSeriesModel$1),createLegacyDataSelectAction("pie",n.registerAction),n.registerLayout(curry$1(pieLayout,"pie")),n.registerProcessor(dataFilter$1("pie")),n.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.hasSymbolVisual=!0,r}return a.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},a.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},a.prototype.brushSelector=function(r,o,l){return l.point(o.getItemLayout(r))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(SeriesModel$1);const ScatterSeriesModel$1=ScatterSeriesModel;var BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function n(){}return n}(),LargeSymbolPath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o._off=0,o.hoverDataIdx=-1,o}return a.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(r,o){var l=o.points,u=o.size,c=this.symbolProxy,h=c.shape,f=r.getContext?r.getContext():r,v=f&&u[0]<BOOST_SIZE_THRESHOLD,d=this.softClipShape,p;if(v){this._ctx=f;return}for(this._ctx=null,p=this._off;p<l.length;){var g=l[p++],y=l[p++];isNaN(g)||isNaN(y)||d&&!d.contain(g,y)||(h.x=g-u[0]/2,h.y=y-u[1]/2,h.width=u[0],h.height=u[1],c.buildPath(r,h,!0))}this.incremental&&(this._off=p,this.notClear=!0)},a.prototype.afterBrush=function(){var r=this.shape,o=r.points,l=r.size,u=this._ctx,c=this.softClipShape,h;if(!!u){for(h=this._off;h<o.length;){var f=o[h++],v=o[h++];isNaN(f)||isNaN(v)||c&&!c.contain(f,v)||u.fillRect(f-l[0]/2,v-l[1]/2,l[0],l[1])}this.incremental&&(this._off=h,this.notClear=!0)}},a.prototype.findDataIndex=function(r,o){for(var l=this.shape,u=l.points,c=l.size,h=Math.max(c[0],4),f=Math.max(c[1],4),v=u.length/2-1;v>=0;v--){var d=v*2,p=u[d]-h/2,g=u[d+1]-f/2;if(r>=p&&o>=g&&r<=p+h&&o<=g+f)return v}return-1},a.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();if(r=l[0],o=l[1],u.contain(r,o)){var c=this.hoverDataIdx=this.findDataIndex(r,o);return c>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var o=this.shape,l=o.points,u=o.size,c=u[0],h=u[1],f=1/0,v=1/0,d=-1/0,p=-1/0,g=0;g<l.length;){var y=l[g++],_=l[g++];f=Math.min(y,f),d=Math.max(y,d),v=Math.min(_,v),p=Math.max(_,p)}r=this._rect=new BoundingRect$1(f-c/2,v-h/2,d-f+c,p-v+h)}return r},a}(Path$1),LargeSymbolDraw=function(){function n(){this.group=new Group$4}return n.prototype.updateData=function(a,r){this._clear();var o=this._create();o.setShape({points:a.getLayout("points")}),this._setCommon(o,a,r)},n.prototype.updateLayout=function(a){var r=a.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var l=(o.endIndex-o.startIndex)*2,u=o.startIndex*4*2;r=new Float32Array(r.buffer,u,l)}o.setShape("points",r),o.reset()})},n.prototype.incrementalPrepareUpdate=function(a){this._clear()},n.prototype.incrementalUpdate=function(a,r,o){var l=this._newAdded[0],u=r.getLayout("points"),c=l&&l.shape.points;if(c&&c.length<2e4){var h=c.length,f=new Float32Array(h+u.length);f.set(c),f.set(u,h),l.endIndex=a.end,l.setShape({points:f})}else{this._newAdded=[];var v=this._create();v.startIndex=a.start,v.endIndex=a.end,v.incremental=!0,v.setShape({points:u}),this._setCommon(v,r,o)}},n.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},n.prototype._create=function(){var a=new LargeSymbolPath({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},n.prototype._setCommon=function(a,r,o){var l=r.hostModel;o=o||{};var u=r.getVisual("symbolSize");a.setShape("size",u instanceof Array?u:[u,u]),a.softClipShape=o.clipShape||null,a.symbolProxy=createSymbol$1(r.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var c=a.shape.size[0]<BOOST_SIZE_THRESHOLD;a.useStyle(l.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var h=r.getVisual("style"),f=h&&h.fill;f&&a.setColor(f);var v=getECData(a);v.seriesIndex=l.seriesIndex,a.on("mousemove",function(d){v.dataIndex=null;var p=a.hoverDataIdx;p>=0&&(v.dataIndex=p+(a.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}();const LargeSymbolDraw$1=LargeSymbolDraw;var ScatterView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=r.getData(),c=this._updateSymbolDraw(u,r);c.updateData(u,{clipShape:this._getClipShape(r)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(r,o,l){var u=r.getData(),c=this._updateSymbolDraw(u,r);c.incrementalPrepareUpdate(u),this._finished=!1},a.prototype.incrementalRender=function(r,o,l){this._symbolDraw.incrementalUpdate(r,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=r.end===o.getData().count()},a.prototype.updateTransform=function(r,o,l){var u=r.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var c=pointsLayout("").reset(r,o,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},a.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},a.prototype._getClipShape=function(r){var o=r.coordinateSystem,l=o&&o.getArea&&o.getArea();return r.get("clip",!0)?l:null},a.prototype._updateSymbolDraw=function(r,o){var l=this._symbolDraw,u=o.pipelineContext,c=u.large;return(!l||c!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=c?new LargeSymbolDraw$1:new SymbolDraw$1,this._isLargeDraw=c,this.group.removeAll()),this.group.add(l.group),l},a.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(ChartView$1);const ScatterView$1=ScatterView;var GridModel=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.type="grid",a.dependencies=["xAxis","yAxis"],a.layoutMode="box",a.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},a}(ComponentModel$1);const GridModel$1=GridModel;var CartesianAxisModel=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},a.type="cartesian2dAxis",a}(ComponentModel$1);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(n,a,r,o){each$f(AXIS_TYPES,function(l,u){var c=merge(merge({},axisDefault[u],!0),o,!0),h=function(f){__extends(v,f);function v(){var d=f!==null&&f.apply(this,arguments)||this;return d.type=a+"Axis."+u,d}return v.prototype.mergeDefaultAndTheme=function(d,p){var g=fetchLayoutMode(this),y=g?getLayoutParams(d):{},_=p.getTheme();merge(d,_.get(u+"Axis")),merge(d,this.getDefaultOption()),d.type=getAxisType(d),g&&mergeLayoutParam(d,y,g)},v.prototype.optionUpdated=function(){var d=this.option;d.type==="category"&&(this.__ordinalMeta=OrdinalMeta$1.createByAxisModel(this))},v.prototype.getCategories=function(d){var p=this.option;if(p.type==="category")return d?p.data:this.__ordinalMeta.categories},v.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},v.type=a+"Axis."+u,v.defaultOption=c,v}(r);n.registerComponentModel(h)}),n.registerSubTypeDefaulter(a+"Axis",getAxisType)}function getAxisType(n){return n.type||(n.data?"category":"value")}var Cartesian=function(){function n(a){this.type="cartesian",this._dimList=[],this._axes={},this.name=a||""}return n.prototype.getAxis=function(a){return this._axes[a]},n.prototype.getAxes=function(){return map$1(this._dimList,function(a){return this._axes[a]},this)},n.prototype.getAxesByScale=function(a){return a=a.toLowerCase(),filter(this.getAxes(),function(r){return r.scale.type===a})},n.prototype.addAxis=function(a){var r=a.dim;this._axes[r]=a,this._dimList.push(r)},n}();const Cartesian$1=Cartesian;var cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(n){return n.type==="interval"||n.type==="time"}var Cartesian2D=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=cartesian2DDimensions,r}return a.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,o=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(r)||!canCalculateAffineTransform(o))){var l=r.getExtent(),u=o.getExtent(),c=this.dataToPoint([l[0],u[0]]),h=this.dataToPoint([l[1],u[1]]),f=l[1]-l[0],v=u[1]-u[0];if(!(!f||!v)){var d=(h[0]-c[0])/f,p=(h[1]-c[1])/v,g=c[0]-l[0]*d,y=c[1]-u[0]*p,_=this._transform=[d,0,0,p,g,y];this._invTransform=invert([],_)}}},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},a.prototype.containPoint=function(r){var o=this.getAxis("x"),l=this.getAxis("y");return o.contain(o.toLocalCoord(r[0]))&&l.contain(l.toLocalCoord(r[1]))},a.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},a.prototype.containZone=function(r,o){var l=this.dataToPoint(r),u=this.dataToPoint(o),c=this.getArea(),h=new BoundingRect$1(l[0],l[1],u[0]-l[0],u[1]-l[1]);return c.intersect(h)},a.prototype.dataToPoint=function(r,o,l){l=l||[];var u=r[0],c=r[1];if(this._transform&&u!=null&&isFinite(u)&&c!=null&&isFinite(c))return applyTransform$1(l,r,this._transform);var h=this.getAxis("x"),f=this.getAxis("y");return l[0]=h.toGlobalCoord(h.dataToCoord(u,o)),l[1]=f.toGlobalCoord(f.dataToCoord(c,o)),l},a.prototype.clampData=function(r,o){var l=this.getAxis("x").scale,u=this.getAxis("y").scale,c=l.getExtent(),h=u.getExtent(),f=l.parse(r[0]),v=u.parse(r[1]);return o=o||[],o[0]=Math.min(Math.max(Math.min(c[0],c[1]),f),Math.max(c[0],c[1])),o[1]=Math.min(Math.max(Math.min(h[0],h[1]),v),Math.max(h[0],h[1])),o},a.prototype.pointToData=function(r,o){var l=[];if(this._invTransform)return applyTransform$1(l,r,this._invTransform);var u=this.getAxis("x"),c=this.getAxis("y");return l[0]=u.coordToData(u.toLocalCoord(r[0]),o),l[1]=c.coordToData(c.toLocalCoord(r[1]),o),l},a.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},a.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),o=this.getAxis("y").getGlobalExtent(),l=Math.min(r[0],r[1]),u=Math.min(o[0],o[1]),c=Math.max(r[0],r[1])-l,h=Math.max(o[0],o[1])-u;return new BoundingRect$1(l,u,c,h)},a}(Cartesian$1),Axis2D=function(n){__extends(a,n);function a(r,o,l,u,c){var h=n.call(this,r,o,l)||this;return h.index=0,h.type=u||"value",h.position=c||"bottom",h}return a.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},a.prototype.getGlobalExtent=function(r){var o=this.getExtent();return o[0]=this.toGlobalCoord(o[0]),o[1]=this.toGlobalCoord(o[1]),r&&o[0]>o[1]&&o.reverse(),o},a.prototype.pointToData=function(r,o){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),o)},a.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},a}(Axis$1);const Axis2D$1=Axis2D;function layout$2(n,a,r){r=r||{};var o=n.coordinateSystem,l=a.axis,u={},c=l.getAxesOnZeroOf()[0],h=l.position,f=c?"onZero":h,v=l.dim,d=o.getRect(),p=[d.x,d.x+d.width,d.y,d.y+d.height],g={left:0,right:1,top:0,bottom:1,onZero:2},y=a.get("offset")||0,_=v==="x"?[p[2]-y,p[3]+y]:[p[0]-y,p[1]+y];if(c){var S=c.toGlobalCoord(c.dataToCoord(0));_[g.onZero]=Math.max(Math.min(S,_[1]),_[0])}u.position=[v==="y"?_[g[f]]:p[0],v==="x"?_[g[f]]:p[3]],u.rotation=Math.PI/2*(v==="x"?0:1);var x={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=x[h],u.labelOffset=c?_[g[h]]-_[g.onZero]:0,a.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(r.labelInside,a.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var T=a.get(["axisLabel","rotate"]);return u.labelRotate=f==="top"?-T:T,u.z2=1,u}function isCartesian2DSeries(n){return n.get("coordinateSystem")==="cartesian2d"}function findAxisModels(n){var a={xAxisModel:null,yAxisModel:null};return each$f(a,function(r,o){var l=o.replace(/Model$/,""),u=n.getReferringComponents(l,SINGLE_REFERRING).models[0];if({}.NODE_ENV!=="production"&&!u)throw new Error(l+' "'+retrieve3(n.get(l+"Index"),n.get(l+"Id"),0)+'" not found');a[o]=u}),a}var mathLog=Math.log;function alignScaleTicks(n,a,r){var o=IntervalScale$1.prototype,l=o.getTicks.call(r),u=o.getTicks.call(r,!0),c=l.length-1,h=o.getInterval.call(r),f=getScaleExtent(n,a),v=f.extent,d=f.fixMin,p=f.fixMax;if(n.type==="log"){var g=mathLog(n.base);v=[mathLog(v[0])/g,mathLog(v[1])/g]}n.setExtent(v[0],v[1]),n.calcNiceExtent({splitNumber:c,fixMin:d,fixMax:p});var y=o.getExtent.call(n);d&&(v[0]=y[0]),p&&(v[1]=y[1]);var _=o.getInterval.call(n),S=v[0],x=v[1];if(d&&p)_=(x-S)/c;else if(d)for(x=v[0]+_*c;x<v[1]&&isFinite(x)&&isFinite(v[1]);)_=increaseInterval(_),x=v[0]+_*c;else if(p)for(S=v[1]-_*c;S>v[0]&&isFinite(S)&&isFinite(v[0]);)_=increaseInterval(_),S=v[1]-_*c;else{var T=n.getTicks().length-1;T>c&&(_=increaseInterval(_));var A=_*c;x=Math.ceil(v[1]/_)*_,S=round$3(x-A),S<0&&v[0]>=0?(S=0,x=round$3(A)):x>0&&v[1]<=0&&(x=0,S=-round$3(A))}var b=(l[0].value-u[0].value)/h,C=(l[c].value-u[c].value)/h;if(o.setExtent.call(n,S+_*b,x+_*C),o.setInterval.call(n,_),(b||C)&&o.setNiceExtent.call(n,S+_,x-_),{}.NODE_ENV!=="production"){var E=o.getTicks.call(n);E[1]&&(!isValueNice(_)||getPrecisionSafe(E[1].value)>getPrecisionSafe(_))&&warn("The ticks may be not readable when set min: "+a.get("min")+", max: "+a.get("max")+" and alignTicks: true")}}var Grid=function(){function n(a,r,o){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(a,r,o),this.model=a}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(a,r){var o=this._axesMap;this._updateScale(a,this.model);function l(c){var h,f=keys(c),v=f.length;if(!!v){for(var d=[],p=v-1;p>=0;p--){var g=+f[p],y=c[g],_=y.model,S=y.scale;isIntervalOrLogScale(S)&&_.get("alignTicks")&&_.get("interval")==null?d.push(y):(niceScaleExtent(S,_),isIntervalOrLogScale(S)&&(h=y))}d.length&&(h||(h=d.pop(),niceScaleExtent(h.scale,h.model)),each$f(d,function(x){alignScaleTicks(x.scale,x.model,h.scale)}))}}l(o.x),l(o.y);var u={};each$f(o.x,function(c){fixAxisOnZero(o,"y",c,u)}),each$f(o.y,function(c){fixAxisOnZero(o,"x",c,u)}),this.resize(this.model,r)},n.prototype.resize=function(a,r,o){var l=a.getBoxLayoutParams(),u=!o&&a.get("containLabel"),c=getLayoutRect(l,{width:r.getWidth(),height:r.getHeight()});this._rect=c;var h=this._axesList;f(),u&&(each$f(h,function(v){if(!v.model.get(["axisLabel","inside"])){var d=estimateLabelUnionRect(v);if(d){var p=v.isHorizontal()?"height":"width",g=v.model.get(["axisLabel","margin"]);c[p]-=d[p]+g,v.position==="top"?c.y+=d.height+g:v.position==="left"&&(c.x+=d.width+g)}}}),f()),each$f(this._coordsList,function(v){v.calcAffineTransform()});function f(){each$f(h,function(v){var d=v.isHorizontal(),p=d?[0,c.width]:[0,c.height],g=v.inverse?1:0;v.setExtent(p[g],p[1-g]),updateAxisTransform(v,d?c.x:c.y)})}},n.prototype.getAxis=function(a,r){var o=this._axesMap[a];if(o!=null)return o[r||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(a,r){if(a!=null&&r!=null){var o="x"+a+"y"+r;return this._coordsMap[o]}isObject$3(a)&&(r=a.yAxisIndex,a=a.xAxisIndex);for(var l=0,u=this._coordsList;l<u.length;l++)if(u[l].getAxis("x").index===a||u[l].getAxis("y").index===r)return u[l]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(a,r,o){var l=this._findConvertTarget(r);return l.cartesian?l.cartesian.dataToPoint(o):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(o)):null},n.prototype.convertFromPixel=function(a,r,o){var l=this._findConvertTarget(r);return l.cartesian?l.cartesian.pointToData(o):l.axis?l.axis.coordToData(l.axis.toLocalCoord(o)):null},n.prototype._findConvertTarget=function(a){var r=a.seriesModel,o=a.xAxisModel||r&&r.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=a.yAxisModel||r&&r.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=a.gridModel,c=this._coordsList,h,f;if(r)h=r.coordinateSystem,indexOf(c,h)<0&&(h=null);else if(o&&l)h=this.getCartesian(o.componentIndex,l.componentIndex);else if(o)f=this.getAxis("x",o.componentIndex);else if(l)f=this.getAxis("y",l.componentIndex);else if(u){var v=u.coordinateSystem;v===this&&(h=this._coordsList[0])}return{cartesian:h,axis:f}},n.prototype.containPoint=function(a){var r=this._coordsList[0];if(r)return r.containPoint(a)},n.prototype._initCartesian=function(a,r,o){var l=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},h={x:{},y:{}},f={x:0,y:0};if(r.eachComponent("xAxis",v("x"),this),r.eachComponent("yAxis",v("y"),this),!f.x||!f.y){this._axesMap={},this._axesList=[];return}this._axesMap=h,each$f(h.x,function(d,p){each$f(h.y,function(g,y){var _="x"+p+"y"+y,S=new Cartesian2D(_);S.master=l,S.model=a,l._coordsMap[_]=S,l._coordsList.push(S),S.addAxis(d),S.addAxis(g)})});function v(d){return function(p,g){if(!!isAxisUsedInTheGrid(p,a)){var y=p.get("position");d==="x"?y!=="top"&&y!=="bottom"&&(y=c.bottom?"top":"bottom"):y!=="left"&&y!=="right"&&(y=c.left?"right":"left"),c[y]=!0;var _=new Axis2D$1(d,createScaleByModel$1(p),[0,0],p.get("type"),y),S=_.type==="category";_.onBand=S&&p.get("boundaryGap"),_.inverse=p.get("inverse"),p.axis=_,_.model=p,_.grid=u,_.index=g,u._axesList.push(_),h[d][g]=_,f[d]++}}}},n.prototype._updateScale=function(a,r){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var u=l.model.get("categorySortInfo");l.scale.setSortInfo(u)}}),a.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,h=u.yAxisModel;if(!isAxisUsedInTheGrid(c,r)||!isAxisUsedInTheGrid(h,r))return;var f=this.getCartesian(c.componentIndex,h.componentIndex),v=l.getData(),d=f.getAxis("x"),p=f.getAxis("y");o(v,d),o(v,p)}},this);function o(l,u){each$f(getDataDimensionsOnAxis(l,u.dim),function(c){u.scale.unionExtentFromData(l,c)})}},n.prototype.getTooltipAxes=function(a){var r=[],o=[];return each$f(this.getCartesians(),function(l){var u=a!=null&&a!=="auto"?l.getAxis(a):l.getBaseAxis(),c=l.getOtherAxis(u);indexOf(r,u)<0&&r.push(u),indexOf(o,c)<0&&o.push(c)}),{baseAxes:r,otherAxes:o}},n.create=function(a,r){var o=[];return a.eachComponent("grid",function(l,u){var c=new n(l,a,r);c.name="grid_"+u,c.resize(l,r,!0),l.coordinateSystem=c,o.push(c)}),a.eachSeries(function(l){if(!!isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,h=u.yAxisModel,f=c.getCoordSysModel();if({}.NODE_ENV!=="production"){if(!f)throw new Error('Grid "'+retrieve3(c.get("gridIndex"),c.get("gridId"),0)+'" not found');if(c.getCoordSysModel()!==h.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var v=f.coordinateSystem;l.coordinateSystem=v.getCartesian(c.componentIndex,h.componentIndex)}}),o},n.dimensions=cartesian2DDimensions,n}();function isAxisUsedInTheGrid(n,a){return n.getCoordSysModel()===a}function fixAxisOnZero(n,a,r,o){r.getAxesOnZeroOf=function(){return u?[u]:[]};var l=n[a],u,c=r.model,h=c.get(["axisLine","onZero"]),f=c.get(["axisLine","onZeroAxisIndex"]);if(!h)return;if(f!=null)canOnZeroToAxis(l[f])&&(u=l[f]);else for(var v in l)if(l.hasOwnProperty(v)&&canOnZeroToAxis(l[v])&&!o[d(l[v])]){u=l[v];break}u&&(o[d(u)]=!0);function d(p){return p.dim+"_"+p.index}}function canOnZeroToAxis(n){return n&&n.type!=="category"&&n.type!=="time"&&ifAxisCrossZero(n)}function updateAxisTransform(n,a){var r=n.getExtent(),o=r[0]+r[1];n.toGlobalCoord=n.dim==="x"?function(l){return l+a}:function(l){return o-l+a},n.toLocalCoord=n.dim==="x"?function(l){return l-a}:function(l){return o-l+a}}const Grid$1=Grid;var PI$3=Math.PI,AxisBuilder=function(){function n(a,r){this.group=new Group$4,this.opt=r,this.axisModel=a,defaults(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var o=new Group$4({x:r.position[0],y:r.position[1],rotation:r.rotation});o.updateTransform(),this._transformGroup=o}return n.prototype.hasBuilder=function(a){return!!builders[a]},n.prototype.add=function(a){builders[a](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(a,r,o){var l=remRadian(r-a),u,c;return isRadianAroundZero(l)?(c=o>0?"top":"bottom",u="center"):isRadianAroundZero(l-PI$3)?(c=o>0?"bottom":"top",u="center"):(c="middle",l>0&&l<PI$3?u=o>0?"right":"left":u=o>0?"left":"right"),{rotation:l,textAlign:u,textVerticalAlign:c}},n.makeAxisEventDataBase=function(a){var r={componentType:a.mainType,componentIndex:a.componentIndex};return r[a.mainType+"Index"]=a.componentIndex,r},n.isLabelSilent=function(a){var r=a.get("tooltip");return a.get("silent")||!(a.get("triggerEvent")||r&&r.show)},n}(),builders={axisLine:function(n,a,r,o){var l=a.get(["axisLine","show"]);if(l==="auto"&&n.handleAutoShown&&(l=n.handleAutoShown("axisLine")),!!l){var u=a.axis.getExtent(),c=o.transform,h=[u[0],0],f=[u[1],0],v=h[0]>f[0];c&&(applyTransform$1(h,h,c),applyTransform$1(f,f,c));var d=extend({lineCap:"round"},a.getModel(["axisLine","lineStyle"]).getLineStyle()),p=new Line$3({shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:d,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(p.shape,p.style.lineWidth),p.anid="line",r.add(p);var g=a.get(["axisLine","symbol"]);if(g!=null){var y=a.get(["axisLine","symbolSize"]);isString(g)&&(g=[g,g]),(isString(y)||isNumber(y))&&(y=[y,y]);var _=normalizeSymbolOffset(a.get(["axisLine","symbolOffset"])||0,y),S=y[0],x=y[1];each$f([{rotate:n.rotation+Math.PI/2,offset:_[0],r:0},{rotate:n.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((h[0]-f[0])*(h[0]-f[0])+(h[1]-f[1])*(h[1]-f[1]))}],function(T,A){if(g[A]!=="none"&&g[A]!=null){var b=createSymbol$1(g[A],-S/2,-x/2,S,x,d.stroke,!0),C=T.r+T.offset,E=v?f:h;b.attr({rotation:T.rotate,x:E[0]+C*Math.cos(n.rotation),y:E[1]-C*Math.sin(n.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(n,a,r,o){var l=buildAxisMajorTicks(r,o,a,n),u=buildAxisLabel(r,o,a,n);if(fixMinMaxLabelShow(a,u,l),buildAxisMinorTicks(r,o,a,n.tickDirection),a.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(u,function(h){return{label:h,priority:h.z2,defaultAttr:{ignore:h.ignore}}}));hideOverlap(c)}},axisName:function(n,a,r,o){var l=retrieve(n.axisName,a.get("name"));if(!!l){var u=a.get("nameLocation"),c=n.nameDirection,h=a.getModel("nameTextStyle"),f=a.get("nameGap")||0,v=a.axis.getExtent(),d=v[0]>v[1]?-1:1,p=[u==="start"?v[0]-d*f:u==="end"?v[1]+d*f:(v[0]+v[1])/2,isNameLocationCenter(u)?n.labelOffset+c*f:0],g,y=a.get("nameRotate");y!=null&&(y=y*PI$3/180);var _;isNameLocationCenter(u)?g=AxisBuilder.innerTextLayout(n.rotation,y!=null?y:n.rotation,c):(g=endTextLayout(n.rotation,u,y||0,v),_=n.axisNameAvailableWidth,_!=null&&(_=Math.abs(_/Math.sin(g.rotation)),!isFinite(_)&&(_=null)));var S=h.getFont(),x=a.get("nameTruncate",!0)||{},T=x.ellipsis,A=retrieve(n.nameTruncateMaxWidth,x.maxWidth,_),b=new ZRText$1({x:p[0],y:p[1],rotation:g.rotation,silent:AxisBuilder.isLabelSilent(a),style:createTextStyle$1(h,{text:l,font:S,overflow:"truncate",width:A,ellipsis:T,fill:h.getTextColor()||a.get(["axisLine","lineStyle","color"]),align:h.get("align")||g.textAlign,verticalAlign:h.get("verticalAlign")||g.textVerticalAlign}),z2:1});if(setTooltipConfig({el:b,componentModel:a,itemName:l}),b.__fullText=l,b.anid="name",a.get("triggerEvent")){var C=AxisBuilder.makeAxisEventDataBase(a);C.targetType="axisName",C.name=l,getECData(b).eventData=C}o.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function endTextLayout(n,a,r,o){var l=remRadian(r-n),u,c,h=o[0]>o[1],f=a==="start"&&!h||a!=="start"&&h;return isRadianAroundZero(l-PI$3/2)?(c=f?"bottom":"top",u="center"):isRadianAroundZero(l-PI$3*1.5)?(c=f?"top":"bottom",u="center"):(c="middle",l<PI$3*1.5&&l>PI$3/2?u=f?"left":"right":u=f?"right":"left"),{rotation:l,textAlign:u,textVerticalAlign:c}}function fixMinMaxLabelShow(n,a,r){if(!shouldShowAllLabels(n.axis)){var o=n.get(["axisLabel","showMinLabel"]),l=n.get(["axisLabel","showMaxLabel"]);a=a||[],r=r||[];var u=a[0],c=a[1],h=a[a.length-1],f=a[a.length-2],v=r[0],d=r[1],p=r[r.length-1],g=r[r.length-2];o===!1?(ignoreEl(u),ignoreEl(v)):isTwoLabelOverlapped(u,c)&&(o?(ignoreEl(c),ignoreEl(d)):(ignoreEl(u),ignoreEl(v))),l===!1?(ignoreEl(h),ignoreEl(p)):isTwoLabelOverlapped(f,h)&&(l?(ignoreEl(f),ignoreEl(g)):(ignoreEl(h),ignoreEl(p)))}}function ignoreEl(n){n&&(n.ignore=!0)}function isTwoLabelOverlapped(n,a){var r=n&&n.getBoundingRect().clone(),o=a&&a.getBoundingRect().clone();if(!(!r||!o)){var l=identity([]);return rotate(l,l,-n.rotation),r.applyTransform(mul([],l,n.getLocalTransform())),o.applyTransform(mul([],l,a.getLocalTransform())),r.intersect(o)}}function isNameLocationCenter(n){return n==="middle"||n==="center"}function createTicks(n,a,r,o,l){for(var u=[],c=[],h=[],f=0;f<n.length;f++){var v=n[f].coord;c[0]=v,c[1]=0,h[0]=v,h[1]=r,a&&(applyTransform$1(c,c,a),applyTransform$1(h,h,a));var d=new Line$3({shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:o,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(d.shape,d.style.lineWidth),d.anid=l+"_"+n[f].tickValue,u.push(d)}return u}function buildAxisMajorTicks(n,a,r,o){var l=r.axis,u=r.getModel("axisTick"),c=u.get("show");if(c==="auto"&&o.handleAutoShown&&(c=o.handleAutoShown("axisTick")),!(!c||l.scale.isBlank())){for(var h=u.getModel("lineStyle"),f=o.tickDirection*u.get("length"),v=l.getTicksCoords(),d=createTicks(v,a.transform,f,defaults(h.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),p=0;p<d.length;p++)n.add(d[p]);return d}}function buildAxisMinorTicks(n,a,r,o){var l=r.axis,u=r.getModel("minorTick");if(!(!u.get("show")||l.scale.isBlank())){var c=l.getMinorTicksCoords();if(!!c.length)for(var h=u.getModel("lineStyle"),f=o*u.get("length"),v=defaults(h.getLineStyle(),defaults(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),d=0;d<c.length;d++)for(var p=createTicks(c[d],a.transform,f,v,"minorticks_"+d),g=0;g<p.length;g++)n.add(p[g])}}function buildAxisLabel(n,a,r,o){var l=r.axis,u=retrieve(o.axisLabelShow,r.get(["axisLabel","show"]));if(!(!u||l.scale.isBlank())){var c=r.getModel("axisLabel"),h=c.get("margin"),f=l.getViewLabels(),v=(retrieve(o.labelRotate,c.get("rotate"))||0)*PI$3/180,d=AxisBuilder.innerTextLayout(o.rotation,v,o.labelDirection),p=r.getCategories&&r.getCategories(!0),g=[],y=AxisBuilder.isLabelSilent(r),_=r.get("triggerEvent");return each$f(f,function(S,x){var T=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(S.tickValue):S.tickValue,A=S.formattedLabel,b=S.rawLabel,C=c;if(p&&p[T]){var E=p[T];isObject$3(E)&&E.textStyle&&(C=new Model$1(E.textStyle,c,r.ecModel))}var w=C.getTextColor()||r.get(["axisLine","lineStyle","color"]),D=l.dataToCoord(T),M=new ZRText$1({x:D,y:o.labelOffset+o.labelDirection*h,rotation:d.rotation,silent:y,z2:10+(S.level||0),style:createTextStyle$1(C,{text:A,align:C.getShallow("align",!0)||d.textAlign,verticalAlign:C.getShallow("verticalAlign",!0)||C.getShallow("baseline",!0)||d.textVerticalAlign,fill:isFunction(w)?w(l.type==="category"?b:l.type==="value"?T+"":T,x):w})});if(M.anid="label_"+T,_){var P=AxisBuilder.makeAxisEventDataBase(r);P.targetType="axisLabel",P.value=b,P.tickIndex=x,l.type==="category"&&(P.dataIndex=T),getECData(M).eventData=P}a.add(M),M.updateTransform(),g.push(M),n.add(M),M.decomposeTransform()}),g}}const AxisBuilder$1=AxisBuilder;function collect(n,a){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(r,n,a),r.seriesInvolved&&collectSeriesInfo(r,n),r}function collectAxesInfo(n,a,r){var o=a.getComponent("tooltip"),l=a.getComponent("axisPointer"),u=l.get("link",!0)||[],c=[];each$f(r.getCoordinateSystems(),function(h){if(!h.axisPointerEnabled)return;var f=makeKey(h.model),v=n.coordSysAxesInfo[f]={};n.coordSysMap[f]=h;var d=h.model,p=d.getModel("tooltip",o);if(each$f(h.getAxes(),curry$1(S,!1,null)),h.getTooltipAxes&&o&&p.get("show")){var g=p.get("trigger")==="axis",y=p.get(["axisPointer","type"])==="cross",_=h.getTooltipAxes(p.get(["axisPointer","axis"]));(g||y)&&each$f(_.baseAxes,curry$1(S,y?"cross":!0,g)),y&&each$f(_.otherAxes,curry$1(S,"cross",!1))}function S(x,T,A){var b=A.model.getModel("axisPointer",l),C=b.get("show");if(!(!C||C==="auto"&&!x&&!isHandleTrigger(b))){T==null&&(T=b.get("triggerTooltip")),b=x?makeAxisPointerModel(A,p,l,a,x,T):b;var E=b.get("snap"),w=b.get("triggerEmphasis"),D=makeKey(A.model),M=T||E||A.type==="category",P=n.axesInfo[D]={key:D,axis:A,coordSys:h,axisPointerModel:b,triggerTooltip:T,triggerEmphasis:w,involveSeries:M,snap:E,useHandle:isHandleTrigger(b),seriesModels:[],linkGroup:null};v[D]=P,n.seriesInvolved=n.seriesInvolved||M;var L=getLinkGroupIndex(u,A);if(L!=null){var I=c[L]||(c[L]={axesInfo:{}});I.axesInfo[D]=P,I.mapper=u[L].mapper,P.linkGroup=I}}}})}function makeAxisPointerModel(n,a,r,o,l,u){var c=a.getModel("axisPointer"),h=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],f={};each$f(h,function(g){f[g]=clone$4(c.get(g))}),f.snap=n.type!=="category"&&!!u,c.get("type")==="cross"&&(f.type="line");var v=f.label||(f.label={});if(v.show==null&&(v.show=!1),l==="cross"){var d=c.get(["label","show"]);if(v.show=d!=null?d:!0,!u){var p=f.lineStyle=c.get("crossStyle");p&&defaults(v,p.textStyle)}}return n.model.getModel("axisPointer",new Model$1(f,r,o))}function collectSeriesInfo(n,a){a.eachSeries(function(r){var o=r.coordinateSystem,l=r.get(["tooltip","trigger"],!0),u=r.get(["tooltip","show"],!0);!o||l==="none"||l===!1||l==="item"||u===!1||r.get(["axisPointer","show"],!0)===!1||each$f(n.coordSysAxesInfo[makeKey(o.model)],function(c){var h=c.axis;o.getAxis(h.dim)===h&&(c.seriesModels.push(r),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=r.getData().count())})})}function getLinkGroupIndex(n,a){for(var r=a.model,o=a.dim,l=0;l<n.length;l++){var u=n[l]||{};if(checkPropInLink(u[o+"AxisId"],r.id)||checkPropInLink(u[o+"AxisIndex"],r.componentIndex)||checkPropInLink(u[o+"AxisName"],r.name))return l}}function checkPropInLink(n,a){return n==="all"||isArray$1(n)&&indexOf(n,a)>=0||n===a}function fixValue(n){var a=getAxisInfo$1(n);if(!!a){var r=a.axisPointerModel,o=a.axis.scale,l=r.option,u=r.get("status"),c=r.get("value");c!=null&&(c=o.parse(c));var h=isHandleTrigger(r);u==null&&(l.status=h?"show":"hide");var f=o.getExtent().slice();f[0]>f[1]&&f.reverse(),(c==null||c>f[1])&&(c=f[1]),c<f[0]&&(c=f[0]),l.value=c,h&&(l.status=a.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(n){var a=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return a&&a.axesInfo[makeKey(n)]}function getAxisPointerModel(n){var a=getAxisInfo$1(n);return a&&a.axisPointerModel}function isHandleTrigger(n){return!!n.get(["handle","show"])}function makeKey(n){return n.type+"||"+n.id}var axisPointerClazz={},AxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l,u){this.axisPointerClass&&fixValue(r),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,l,!0)},a.prototype.updateAxisPointer=function(r,o,l,u){this._doUpdateAxisPointerClass(r,l,!1)},a.prototype.remove=function(r,o){var l=this._axisPointer;l&&l.remove(o)},a.prototype.dispose=function(r,o){this._disposeAxisPointer(o),n.prototype.dispose.apply(this,arguments)},a.prototype._doUpdateAxisPointerClass=function(r,o,l){var u=a.getAxisPointerClass(this.axisPointerClass);if(!!u){var c=getAxisPointerModel(r);c?(this._axisPointer||(this._axisPointer=new u)).render(r,c,o,l):this._disposeAxisPointer(o)}},a.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},a.registerAxisPointerClass=function(r,o){if({}.NODE_ENV!=="production"&&axisPointerClazz[r])throw new Error("axisPointer "+r+" exists");axisPointerClazz[r]=o},a.getAxisPointerClass=function(r){return r&&axisPointerClazz[r]},a.type="axis",a}(ComponentView$1);const AxisView$1=AxisView;var inner$f=makeInner();function rectCoordAxisBuildSplitArea(n,a,r,o){var l=r.axis;if(!l.scale.isBlank()){var u=r.getModel("splitArea"),c=u.getModel("areaStyle"),h=c.get("color"),f=o.coordinateSystem.getRect(),v=l.getTicksCoords({tickModel:u,clamp:!0});if(!!v.length){var d=h.length,p=inner$f(n).splitAreaColors,g=createHashMap(),y=0;if(p)for(var _=0;_<v.length;_++){var S=p.get(v[_].tickValue);if(S!=null){y=(S+(d-1)*_)%d;break}}var x=l.toGlobalCoord(v[0].coord),T=c.getAreaStyle();h=isArray$1(h)?h:[h];for(var _=1;_<v.length;_++){var A=l.toGlobalCoord(v[_].coord),b=void 0,C=void 0,E=void 0,w=void 0;l.isHorizontal()?(b=x,C=f.y,E=A-b,w=f.height,x=b+E):(b=f.x,C=x,E=f.width,w=A-C,x=C+w);var D=v[_-1].tickValue;D!=null&&g.set(D,y),a.add(new Rect$3({anid:D!=null?"area_"+D:null,shape:{x:b,y:C,width:E,height:w},style:defaults({fill:h[y]},T),autoBatch:!0,silent:!0})),y=(y+1)%d}inner$f(n).splitAreaColors=g}}}function rectCoordAxisHandleRemove(n){inner$f(n).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.axisPointerClass="CartesianAxisPointer",r}return a.prototype.render=function(r,o,l,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var h=r.getCoordSysModel(),f=layout$2(h,r),v=new AxisBuilder$1(r,extend({handleAutoShown:function(p){for(var g=h.coordinateSystem.getCartesians(),y=0;y<g.length;y++)if(isIntervalOrLogScale(g[y].getOtherAxis(r.axis).scale))return!0;return!1}},f));each$f(axisBuilderAttrs$3,v.add,v),this._axisGroup.add(v.getGroup()),each$f(selfBuilderAttrs$2,function(p){r.get([p,"show"])&&axisElementBuilders$2[p](this,this._axisGroup,r,h)},this);var d=u&&u.type==="changeAxisOrder"&&u.isInitSort;d||groupTransition(c,this._axisGroup,r),n.prototype.render.call(this,r,o,l,u)}},a.prototype.remove=function(){rectCoordAxisHandleRemove(this)},a.type="cartesianAxis",a}(AxisView$1),axisElementBuilders$2={splitLine:function(n,a,r,o){var l=r.axis;if(!l.scale.isBlank()){var u=r.getModel("splitLine"),c=u.getModel("lineStyle"),h=c.get("color");h=isArray$1(h)?h:[h];for(var f=o.coordinateSystem.getRect(),v=l.isHorizontal(),d=0,p=l.getTicksCoords({tickModel:u}),g=[],y=[],_=c.getLineStyle(),S=0;S<p.length;S++){var x=l.toGlobalCoord(p[S].coord);v?(g[0]=x,g[1]=f.y,y[0]=x,y[1]=f.y+f.height):(g[0]=f.x,g[1]=x,y[0]=f.x+f.width,y[1]=x);var T=d++%h.length,A=p[S].tickValue,b=new Line$3({anid:A!=null?"line_"+p[S].tickValue:null,autoBatch:!0,shape:{x1:g[0],y1:g[1],x2:y[0],y2:y[1]},style:defaults({stroke:h[T]},_),silent:!0});subPixelOptimizeLine(b.shape,_.lineWidth),a.add(b)}}},minorSplitLine:function(n,a,r,o){var l=r.axis,u=r.getModel("minorSplitLine"),c=u.getModel("lineStyle"),h=o.coordinateSystem.getRect(),f=l.isHorizontal(),v=l.getMinorTicksCoords();if(!!v.length)for(var d=[],p=[],g=c.getLineStyle(),y=0;y<v.length;y++)for(var _=0;_<v[y].length;_++){var S=l.toGlobalCoord(v[y][_].coord);f?(d[0]=S,d[1]=h.y,p[0]=S,p[1]=h.y+h.height):(d[0]=h.x,d[1]=S,p[0]=h.x+h.width,p[1]=S);var x=new Line$3({anid:"minor_line_"+v[y][_].tickValue,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},style:g,silent:!0});subPixelOptimizeLine(x.shape,g.lineWidth),a.add(x)}},splitArea:function(n,a,r,o){rectCoordAxisBuildSplitArea(n,a,r,o)}},CartesianXAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="xAxis",a}(CartesianAxisView),CartesianYAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=CartesianXAxisView.type,r}return a.type="yAxis",a}(CartesianAxisView),GridView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="grid",r}return a.prototype.render=function(r,o){this.group.removeAll(),r.get("show")&&this.group.add(new Rect$3({shape:r.coordinateSystem.getRect(),style:defaults({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},a.type="grid",a}(ComponentView$1),extraOption={offset:0};function install$N(n){n.registerComponentView(GridView),n.registerComponentModel(GridModel$1),n.registerCoordinateSystem("cartesian2d",Grid$1),axisModelCreator(n,"x",CartesianAxisModel,extraOption),axisModelCreator(n,"y",CartesianAxisModel,extraOption),n.registerComponentView(CartesianXAxisView),n.registerComponentView(CartesianYAxisView),n.registerPreprocessor(function(a){a.xAxis&&a.yAxis&&!a.grid&&(a.grid={})})}function install$M(n){use(install$N),n.registerSeriesModel(ScatterSeriesModel$1),n.registerChartView(ScatterView$1),n.registerLayout(pointsLayout("scatter"))}function radarLayout(n){n.eachSeriesByType("radar",function(a){var r=a.getData(),o=[],l=a.coordinateSystem;if(!!l){var u=l.getIndicatorAxes();each$f(u,function(c,h){r.each(r.mapDimension(u[h].dim),function(f,v){o[v]=o[v]||[];var d=l.dataToPoint(f,h);o[v][h]=isValidPoint(d)?d:getValueMissingPoint(l)})}),r.each(function(c){var h=find(o[c],function(f){return isValidPoint(f)})||getValueMissingPoint(l);o[c].push(h.slice()),r.setItemLayout(c,o[c])})}})}function isValidPoint(n){return!isNaN(n[0])&&!isNaN(n[1])}function getValueMissingPoint(n){return[n.cx,n.cy]}function radarBackwardCompat(n){var a=n.polar;if(a){isArray$1(a)||(a=[a]);var r=[];each$f(a,function(o,l){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),n.radar=n.radar||[],isArray$1(n.radar)||(n.radar=[n.radar]),n.radar.push(o)):r.push(o)}),n.polar=r}each$f(n.series,function(o){o&&o.type==="radar"&&o.polarIndex&&(o.radarIndex=o.polarIndex)})}var RadarView$2=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=r.coordinateSystem,c=this.group,h=r.getData(),f=this._data;function v(g,y){var _=g.getItemVisual(y,"symbol")||"circle";if(_!=="none"){var S=normalizeSymbolSize(g.getItemVisual(y,"symbolSize")),x=createSymbol$1(_,-1,-1,2,2),T=g.getItemVisual(y,"symbolRotate")||0;return x.attr({style:{strokeNoScale:!0},z2:100,scaleX:S[0]/2,scaleY:S[1]/2,rotation:T*Math.PI/180||0}),x}}function d(g,y,_,S,x,T){_.removeAll();for(var A=0;A<y.length-1;A++){var b=v(S,x);b&&(b.__dimIdx=A,g[A]?(b.setPosition(g[A]),graphic$1[T?"initProps":"updateProps"](b,{x:y[A][0],y:y[A][1]},r,x)):b.setPosition(y[A]),_.add(b))}}function p(g){return map$1(g,function(y){return[u.cx,u.cy]})}h.diff(f).add(function(g){var y=h.getItemLayout(g);if(!!y){var _=new Polygon$1,S=new Polyline$3,x={shape:{points:y}};_.shape.points=p(y),S.shape.points=p(y),initProps(_,x,r,g),initProps(S,x,r,g);var T=new Group$4,A=new Group$4;T.add(S),T.add(_),T.add(A),d(S.shape.points,y,A,h,g,!0),h.setItemGraphicEl(g,T)}}).update(function(g,y){var _=f.getItemGraphicEl(y),S=_.childAt(0),x=_.childAt(1),T=_.childAt(2),A={shape:{points:h.getItemLayout(g)}};!A.shape.points||(d(S.shape.points,A.shape.points,T,h,g,!1),saveOldStyle(x),saveOldStyle(S),updateProps$1(S,A,r),updateProps$1(x,A,r),h.setItemGraphicEl(g,_))}).remove(function(g){c.remove(f.getItemGraphicEl(g))}).execute(),h.eachItemGraphicEl(function(g,y){var _=h.getItemModel(y),S=g.childAt(0),x=g.childAt(1),T=g.childAt(2),A=h.getItemVisual(y,"style"),b=A.fill;c.add(g),S.useStyle(defaults(_.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:b})),setStatesStylesFromModel(S,_,"lineStyle"),setStatesStylesFromModel(x,_,"areaStyle");var C=_.getModel("areaStyle"),E=C.isEmpty()&&C.parentModel.isEmpty();x.ignore=E,each$f(["emphasis","select","blur"],function(M){var P=_.getModel([M,"areaStyle"]),L=P.isEmpty()&&P.parentModel.isEmpty();x.ensureState(M).ignore=L&&E}),x.useStyle(defaults(C.getAreaStyle(),{fill:b,opacity:.7,decal:A.decal}));var w=_.getModel("emphasis"),D=w.getModel("itemStyle").getItemStyle();T.eachChild(function(M){if(M instanceof ZRImage$1){var P=M.style;M.useStyle(extend({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},A))}else M.useStyle(A),M.setColor(b),M.style.strokeNoScale=!0;var L=M.ensureState("emphasis");L.style=clone$4(D);var I=h.getStore().get(h.getDimensionIndex(M.__dimIdx),y);(I==null||isNaN(I))&&(I=""),setLabelStyle(M,getLabelStatesModels(_),{labelFetcher:h.hostModel,labelDataIndex:y,labelDimIndex:M.__dimIdx,defaultText:I,inheritColor:b,defaultOpacity:A.opacity})}),toggleHoverEmphasis(g,w.get("focus"),w.get("blurScope"),w.get("disabled"))}),this._data=h},a.prototype.remove=function(){this.group.removeAll(),this._data=null},a.type="radar",a}(ChartView$1);const RadarView$3=RadarView$2;var RadarSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.hasSymbolVisual=!0,r}return a.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},a.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},a.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=this.coordinateSystem,h=c.getIndicatorAxes(),f=this.getData().getName(r),v=f===""?this.name:f,d=retrieveVisualColorForTooltipMarker(this,r);return createTooltipMarkup("section",{header:v,sortBlocks:!0,blocks:map$1(h,function(p){var g=u.get(u.mapDimension(p.dim),r);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:d,name:p.name,value:g,sortParam:g})})})},a.prototype.getTooltipPosition=function(r){if(r!=null){for(var o=this.getData(),l=this.coordinateSystem,u=o.getValues(map$1(l.dimensions,function(v){return o.mapDimension(v)}),r),c=0,h=u.length;c<h;c++)if(!isNaN(u[c])){var f=l.getIndicatorAxes();return l.coordToPoint(f[c].dataToCoord(u[c]),c)}}},a.type="series.radar",a.dependencies=["radar"],a.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},a}(SeriesModel$1);const RadarSeriesModel$1=RadarSeriesModel;var valueAxisDefault=axisDefault.value;function defaultsShow(n,a){return defaults({show:a},n)}var RadarModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),o=this.get("splitNumber"),l=this.get("scale"),u=this.get("axisLine"),c=this.get("axisTick"),h=this.get("axisLabel"),f=this.get("axisName"),v=this.get(["axisName","show"]),d=this.get(["axisName","formatter"]),p=this.get("axisNameGap"),g=this.get("triggerEvent"),y=map$1(this.get("indicator")||[],function(_){_.max!=null&&_.max>0&&!_.min?_.min=0:_.min!=null&&_.min<0&&!_.max&&(_.max=0);var S=f;_.color!=null&&(S=defaults({color:_.color},f));var x=merge(clone$4(_),{boundaryGap:r,splitNumber:o,scale:l,axisLine:u,axisTick:c,axisLabel:h,name:_.text,showName:v,nameLocation:"end",nameGap:p,nameTextStyle:S,triggerEvent:g},!1);if(isString(d)){var T=x.name;x.name=d.replace("{value}",T!=null?T:"")}else isFunction(d)&&(x.name=d(x.name,x));var A=new Model$1(x,null,this.ecModel);return mixin(A,AxisModelCommonMixin.prototype),A.mainType="radar",A.componentIndex=this.componentIndex,A},this);this._indicatorModels=y},a.prototype.getIndicatorModels=function(){return this._indicatorModels},a.type="radar",a.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},a}(ComponentModel$1);const RadarModel$1=RadarModel;var axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=this.group;u.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},a.prototype._buildAxes=function(r){var o=r.coordinateSystem,l=o.getIndicatorAxes(),u=map$1(l,function(c){var h=c.model.get("showName")?c.name:"",f=new AxisBuilder$1(c.model,{axisName:h,position:[o.cx,o.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return f});each$f(u,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},a.prototype._buildSplitLineAndArea=function(r){var o=r.coordinateSystem,l=o.getIndicatorAxes();if(!l.length)return;var u=r.get("shape"),c=r.getModel("splitLine"),h=r.getModel("splitArea"),f=c.getModel("lineStyle"),v=h.getModel("areaStyle"),d=c.get("show"),p=h.get("show"),g=f.get("color"),y=v.get("color"),_=isArray$1(g)?g:[g],S=isArray$1(y)?y:[y],x=[],T=[];function A(V,B,G){var F=G%B.length;return V[F]=V[F]||[],F}if(u==="circle")for(var b=l[0].getTicksCoords(),C=o.cx,E=o.cy,w=0;w<b.length;w++){if(d){var D=A(x,_,w);x[D].push(new Circle$1({shape:{cx:C,cy:E,r:b[w].coord}}))}if(p&&w<b.length-1){var D=A(T,S,w);T[D].push(new Ring$1({shape:{cx:C,cy:E,r0:b[w].coord,r:b[w+1].coord}}))}}else for(var M,P=map$1(l,function(V,B){var G=V.getTicksCoords();return M=M==null?G.length-1:Math.min(G.length-1,M),map$1(G,function(F){return o.coordToPoint(F.coord,B)})}),L=[],w=0;w<=M;w++){for(var I=[],R=0;R<l.length;R++)I.push(P[R][w]);if(I[0]?I.push(I[0].slice()):{}.NODE_ENV!=="production"&&console.error("Can't draw value axis "+w),d){var D=A(x,_,w);x[D].push(new Polyline$3({shape:{points:I}}))}if(p&&L){var D=A(T,S,w-1);T[D].push(new Polygon$1({shape:{points:I.concat(L)}}))}L=I.slice().reverse()}var O=f.getLineStyle(),N=v.getAreaStyle();each$f(T,function(V,B){this.group.add(mergePath(V,{style:defaults({stroke:"none",fill:S[B%S.length]},N),silent:!0}))},this),each$f(x,function(V,B){this.group.add(mergePath(V,{style:defaults({fill:"none",stroke:_[B%_.length]},O),silent:!0}))},this)},a.type="radar",a}(ComponentView$1);const RadarView$1=RadarView;var IndicatorAxis=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this,r,o,l)||this;return u.type="value",u.angle=0,u.name="",u}return a}(Axis$1);const IndicatorAxis$1=IndicatorAxis;var Radar=function(){function n(a,r,o){this.dimensions=[],this._model=a,this._indicatorAxes=map$1(a.getIndicatorModels(),function(l,u){var c="indicator_"+u,h=new IndicatorAxis$1(c,new IntervalScale$1);return h.name=l.get("name"),h.model=l,l.axis=h,this.dimensions.push(c),h},this),this.resize(a,o)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(a,r){var o=this._indicatorAxes[r];return this.coordToPoint(o.dataToCoord(a),r)},n.prototype.coordToPoint=function(a,r){var o=this._indicatorAxes[r],l=o.angle,u=this.cx+a*Math.cos(l),c=this.cy-a*Math.sin(l);return[u,c]},n.prototype.pointToData=function(a){var r=a[0]-this.cx,o=a[1]-this.cy,l=Math.sqrt(r*r+o*o);r/=l,o/=l;for(var u=Math.atan2(-o,r),c=1/0,h,f=-1,v=0;v<this._indicatorAxes.length;v++){var d=this._indicatorAxes[v],p=Math.abs(u-d.angle);p<c&&(h=d,f=v,c=p)}return[f,+(h&&h.coordToData(l))]},n.prototype.resize=function(a,r){var o=a.get("center"),l=r.getWidth(),u=r.getHeight(),c=Math.min(l,u)/2;this.cx=parsePercent(o[0],l),this.cy=parsePercent(o[1],u),this.startAngle=a.get("startAngle")*Math.PI/180;var h=a.get("radius");(isString(h)||isNumber(h))&&(h=[0,h]),this.r0=parsePercent(h[0],c),this.r=parsePercent(h[1],c),each$f(this._indicatorAxes,function(f,v){f.setExtent(this.r0,this.r);var d=this.startAngle+v*Math.PI*2/this._indicatorAxes.length;d=Math.atan2(Math.sin(d),Math.cos(d)),f.angle=d},this)},n.prototype.update=function(a,r){var o=this._indicatorAxes,l=this._model;each$f(o,function(h){h.scale.setExtent(1/0,-1/0)}),a.eachSeriesByType("radar",function(h,f){if(!(h.get("coordinateSystem")!=="radar"||a.getComponent("radar",h.get("radarIndex"))!==l)){var v=h.getData();each$f(o,function(d){d.scale.unionExtentFromData(v,v.mapDimension(d.dim))})}},this);var u=l.get("splitNumber"),c=new IntervalScale$1;c.setExtent(0,u),c.setInterval(1),each$f(o,function(h,f){alignScaleTicks(h.scale,h.model,c)})},n.prototype.convertToPixel=function(a,r,o){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(a,r,o){return console.warn("Not implemented."),null},n.prototype.containPoint=function(a){return console.warn("Not implemented."),!1},n.create=function(a,r){var o=[];return a.eachComponent("radar",function(l){var u=new n(l,a,r);o.push(u),l.coordinateSystem=u}),a.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=o[l.get("radarIndex")||0])}),o},n.dimensions=[],n}();const Radar$1=Radar;function install$L(n){n.registerCoordinateSystem("radar",Radar$1),n.registerComponentModel(RadarModel$1),n.registerComponentView(RadarView$1),n.registerVisual({seriesType:"radar",reset:function(a){var r=a.getData();r.each(function(o){r.setItemVisual(o,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function install$K(n){use(install$L),n.registerChartView(RadarView$3),n.registerSeriesModel(RadarSeriesModel$1),n.registerLayout(radarLayout),n.registerProcessor(dataFilter$1("radar")),n.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(n,a,r){var o=getStore(n);o[a]=r}function release(n,a,r){var o=getStore(n),l=o[a];l===r&&(o[a]=null)}function isTaken(n,a){return!!getStore(n)[a]}function getStore(n){return n[ATTR]||(n[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(n){__extends(a,n);function a(r){var o=n.call(this)||this;o._zr=r;var l=bind$1(o._mousedownHandler,o),u=bind$1(o._mousemoveHandler,o),c=bind$1(o._mouseupHandler,o),h=bind$1(o._mousewheelHandler,o),f=bind$1(o._pinchHandler,o);return o.enable=function(v,d){this.disable(),this._opt=defaults(clone$4(d)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),v==null&&(v=!0),(v===!0||v==="move"||v==="pan")&&(r.on("mousedown",l),r.on("mousemove",u),r.on("mouseup",c)),(v===!0||v==="scale"||v==="zoom")&&(r.on("mousewheel",h),r.on("pinch",f))},o.disable=function(){r.off("mousedown",l),r.off("mousemove",u),r.off("mouseup",c),r.off("mousewheel",h),r.off("pinch",f)},o}return a.prototype.isDragging=function(){return this._dragging},a.prototype.isPinching=function(){return this._pinching},a.prototype.setPointerChecker=function(r){this.pointerChecker=r},a.prototype.dispose=function(){this.disable()},a.prototype._mousedownHandler=function(r){if(!isMiddleOrRightButtonOnMouseUpDown(r)){for(var o=r.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var l=r.offsetX,u=r.offsetY;this.pointerChecker&&this.pointerChecker(r,l,u)&&(this._x=l,this._y=u,this._dragging=!0)}},a.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var o=r.offsetX,l=r.offsetY,u=this._x,c=this._y,h=o-u,f=l-c;this._x=o,this._y=l,this._opt.preventDefaultMouseMove&&stop(r.event),trigger$1(this,"pan","moveOnMouseMove",r,{dx:h,dy:f,oldX:u,oldY:c,newX:o,newY:l,isAvailableBehavior:null})}},a.prototype._mouseupHandler=function(r){isMiddleOrRightButtonOnMouseUpDown(r)||(this._dragging=!1)},a.prototype._mousewheelHandler=function(r){var o=isAvailableBehavior("zoomOnMouseWheel",r,this._opt),l=isAvailableBehavior("moveOnMouseWheel",r,this._opt),u=r.wheelDelta,c=Math.abs(u),h=r.offsetX,f=r.offsetY;if(!(u===0||!o&&!l)){if(o){var v=c>3?1.4:c>1?1.2:1.1,d=u>0?v:1/v;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",r,{scale:d,originX:h,originY:f,isAvailableBehavior:null})}if(l){var p=Math.abs(u),g=(u>0?1:-1)*(p>3?.4:p>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:g,originX:h,originY:f,isAvailableBehavior:null})}}},a.prototype._pinchHandler=function(r){if(!isTaken(this._zr,"globalPan")){var o=r.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,r,{scale:o,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},a}(Eventful$1);function checkPointerAndTrigger(n,a,r,o,l){n.pointerChecker&&n.pointerChecker(o,l.originX,l.originY)&&(stop(o.event),trigger$1(n,a,r,o,l))}function trigger$1(n,a,r,o,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,r,o),n.trigger(a,l)}function isAvailableBehavior(n,a,r){var o=r[n];return!n||o&&(!isString(o)||a.event[o+"Key"])}const RoamController$1=RoamController;function updateViewOnPan(n,a,r){var o=n.target;o.x+=a,o.y+=r,o.dirty()}function updateViewOnZoom(n,a,r,o){var l=n.target,u=n.zoomLimit,c=n.zoom=n.zoom||1;if(c*=a,u){var h=u.min||0,f=u.max||1/0;c=Math.max(Math.min(f,c),h)}var v=c/n.zoom;n.zoom=c,l.x-=(r-l.x)*(v-1),l.y-=(o-l.y)*(v-1),l.scaleX*=v,l.scaleY*=v,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(n,a,r){var o=a.getComponentByElement(n.topTarget),l=o&&o.coordinateSystem;return o&&o!==r&&!IRRELEVANT_EXCLUDES.hasOwnProperty(o.mainType)&&l&&l.model!==r}function parseXML(n){if(isString(n)){var a=new DOMParser;n=a.parseFromString(n,"text/xml")}var r=n;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(a,r){r=r||{};var o=parseXML(a);if({}.NODE_ENV!=="production"&&!o)throw new Error("Illegal svg");this._defsUsePending=[];var l=new Group$4;this._root=l;var u=[],c=o.getAttribute("viewBox")||"",h=parseFloat(o.getAttribute("width")||r.width),f=parseFloat(o.getAttribute("height")||r.height);isNaN(h)&&(h=null),isNaN(f)&&(f=null),parseAttributes(o,l,null,!0,!1);for(var v=o.firstChild;v;)this._parseNode(v,l,u,null,!1,!1),v=v.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var d,p;if(c){var g=splitNumberSequence(c);g.length>=4&&(d={x:parseFloat(g[0]||0),y:parseFloat(g[1]||0),width:parseFloat(g[2]),height:parseFloat(g[3])})}if(d&&h!=null&&f!=null&&(p=makeViewBoxTransform(d,{x:0,y:0,width:h,height:f}),!r.ignoreViewBox)){var y=l;l=new Group$4,l.add(y),y.scaleX=y.scaleY=p.scale,y.x=p.x,y.y=p.y}return!r.ignoreRootClip&&h!=null&&f!=null&&l.setClipPath(new Rect$3({shape:{x:0,y:0,width:h,height:f}})),{root:l,width:h,height:f,viewBoxRect:d,viewBoxTransform:p,named:u}},n.prototype._parseNode=function(a,r,o,l,u,c){var h=a.nodeName.toLowerCase(),f,v=l;if(h==="defs"&&(u=!0),h==="text"&&(c=!0),h==="defs"||h==="switch")f=r;else{if(!u){var d=nodeParsers[h];if(d&&hasOwn(nodeParsers,h)){f=d.call(this,a,r);var p=a.getAttribute("name");if(p){var g={name:p,namedFrom:null,svgNodeTagLower:h,el:f};o.push(g),h==="g"&&(v=g)}else l&&o.push({name:l.name,namedFrom:l,svgNodeTagLower:h,el:f});r.add(f)}}var y=paintServerParsers[h];if(y&&hasOwn(paintServerParsers,h)){var _=y.call(this,a),S=a.getAttribute("id");S&&(this._defs[S]=_)}}if(f&&f.isGroup)for(var x=a.firstChild;x;)x.nodeType===1?this._parseNode(x,f,o,v,u,c):x.nodeType===3&&c&&this._parseText(x,f),x=x.nextSibling},n.prototype._parseText=function(a,r){var o=new TSpan$1({style:{text:a.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),applyTextAlignment(o,r);var l=o.style,u=l.fontSize;u&&u<9&&(l.fontSize=9,o.scaleX*=u/9,o.scaleY*=u/9);var c=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=c;var h=o.getBoundingRect();return this._textX+=h.width,r.add(o),o},n.internalField=function(){nodeParsers={g:function(a,r){var o=new Group$4;return inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),o},rect:function(a,r){var o=new Rect$3;return inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),o.setShape({x:parseFloat(a.getAttribute("x")||"0"),y:parseFloat(a.getAttribute("y")||"0"),width:parseFloat(a.getAttribute("width")||"0"),height:parseFloat(a.getAttribute("height")||"0")}),o.silent=!0,o},circle:function(a,r){var o=new Circle$1;return inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(a.getAttribute("cx")||"0"),cy:parseFloat(a.getAttribute("cy")||"0"),r:parseFloat(a.getAttribute("r")||"0")}),o.silent=!0,o},line:function(a,r){var o=new Line$3;return inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),o.setShape({x1:parseFloat(a.getAttribute("x1")||"0"),y1:parseFloat(a.getAttribute("y1")||"0"),x2:parseFloat(a.getAttribute("x2")||"0"),y2:parseFloat(a.getAttribute("y2")||"0")}),o.silent=!0,o},ellipse:function(a,r){var o=new Ellipse$1;return inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(a.getAttribute("cx")||"0"),cy:parseFloat(a.getAttribute("cy")||"0"),rx:parseFloat(a.getAttribute("rx")||"0"),ry:parseFloat(a.getAttribute("ry")||"0")}),o.silent=!0,o},polygon:function(a,r){var o=a.getAttribute("points"),l;o&&(l=parsePoints(o));var u=new Polygon$1({shape:{points:l||[]},silent:!0});return inheritStyle(r,u),parseAttributes(a,u,this._defsUsePending,!1,!1),u},polyline:function(a,r){var o=a.getAttribute("points"),l;o&&(l=parsePoints(o));var u=new Polyline$3({shape:{points:l||[]},silent:!0});return inheritStyle(r,u),parseAttributes(a,u,this._defsUsePending,!1,!1),u},image:function(a,r){var o=new ZRImage$1;return inheritStyle(r,o),parseAttributes(a,o,this._defsUsePending,!1,!1),o.setStyle({image:a.getAttribute("xlink:href")||a.getAttribute("href"),x:+a.getAttribute("x"),y:+a.getAttribute("y"),width:+a.getAttribute("width"),height:+a.getAttribute("height")}),o.silent=!0,o},text:function(a,r){var o=a.getAttribute("x")||"0",l=a.getAttribute("y")||"0",u=a.getAttribute("dx")||"0",c=a.getAttribute("dy")||"0";this._textX=parseFloat(o)+parseFloat(u),this._textY=parseFloat(l)+parseFloat(c);var h=new Group$4;return inheritStyle(r,h),parseAttributes(a,h,this._defsUsePending,!1,!0),h},tspan:function(a,r){var o=a.getAttribute("x"),l=a.getAttribute("y");o!=null&&(this._textX=parseFloat(o)),l!=null&&(this._textY=parseFloat(l));var u=a.getAttribute("dx")||"0",c=a.getAttribute("dy")||"0",h=new Group$4;return inheritStyle(r,h),parseAttributes(a,h,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),h},path:function(a,r){var o=a.getAttribute("d")||"",l=createFromString(o);return inheritStyle(r,l),parseAttributes(a,l,this._defsUsePending,!1,!1),l.silent=!0,l}}}(),n}(),paintServerParsers={lineargradient:function(n){var a=parseInt(n.getAttribute("x1")||"0",10),r=parseInt(n.getAttribute("y1")||"0",10),o=parseInt(n.getAttribute("x2")||"10",10),l=parseInt(n.getAttribute("y2")||"0",10),u=new LinearGradient$1(a,r,o,l);return parsePaintServerUnit(n,u),parseGradientColorStops(n,u),u},radialgradient:function(n){var a=parseInt(n.getAttribute("cx")||"0",10),r=parseInt(n.getAttribute("cy")||"0",10),o=parseInt(n.getAttribute("r")||"0",10),l=new RadialGradient$1(a,r,o);return parsePaintServerUnit(n,l),parseGradientColorStops(n,l),l}};function parsePaintServerUnit(n,a){var r=n.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(a.global=!0)}function parseGradientColorStops(n,a){for(var r=n.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var o=r.getAttribute("offset"),l=void 0;o&&o.indexOf("%")>0?l=parseInt(o,10)/100:o?l=parseFloat(o):l=0;var u={};parseInlineStyle(r,u,u);var c=u.stopColor||r.getAttribute("stop-color")||"#000000";a.colorStops.push({offset:l,color:c})}r=r.nextSibling}}function inheritStyle(n,a){n&&n.__inheritedStyle&&(a.__inheritedStyle||(a.__inheritedStyle={}),defaults(a.__inheritedStyle,n.__inheritedStyle))}function parsePoints(n){for(var a=splitNumberSequence(n),r=[],o=0;o<a.length;o+=2){var l=parseFloat(a[o]),u=parseFloat(a[o+1]);r.push([l,u])}return r}function parseAttributes(n,a,r,o,l){var u=a,c=u.__inheritedStyle=u.__inheritedStyle||{},h={};n.nodeType===1&&(parseTransformAttribute(n,a),parseInlineStyle(n,c,h),o||parseAttributeStyle(n,c,h)),u.style=u.style||{},c.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",c.fill,r)),c.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",c.stroke,r)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(f){c[f]!=null&&(u.style[f]=parseFloat(c[f]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(f){c[f]!=null&&(u.style[f]=c[f])}),l&&(u.__selfStyle=h),c.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(f){return parseFloat(f)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(u.invisible=!0),c.display==="none"&&(u.ignore=!0)}function applyTextAlignment(n,a){var r=a.__selfStyle;if(r){var o=r.textBaseline,l=o;!o||o==="auto"||o==="baseline"?l="alphabetic":o==="before-edge"||o==="text-before-edge"?l="top":o==="after-edge"||o==="text-after-edge"?l="bottom":(o==="central"||o==="mathematical")&&(l="middle"),n.style.textBaseline=l}var u=a.__inheritedStyle;if(u){var c=u.textAlign,h=c;c&&(c==="middle"&&(h="center"),n.style.textAlign=h)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(n,a,r,o){var l=r&&r.match(urlRegex);if(l){var u=trim$1(l[1]);o.push([n,a,u]);return}return r==="none"&&(r=null),r}function applyDefs(n,a){for(var r=0;r<a.length;r++){var o=a[r];o[0].style[o[1]]=n[o[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(n){return n.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(n,a){var r=n.getAttribute("transform");if(r){r=r.replace(/,/g," ");var o=[],l=null;r.replace(transformRegex,function(p,g,y){return o.push(g,y),""});for(var u=o.length-1;u>0;u-=2){var c=o[u],h=o[u-1],f=splitNumberSequence(c);switch(l=l||create$1(),h){case"translate":translate(l,l,[parseFloat(f[0]),parseFloat(f[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(f[0]),parseFloat(f[1]||f[0])]);break;case"rotate":rotate(l,l,-parseFloat(f[0])*DEGREE_TO_ANGLE);break;case"skewX":var v=Math.tan(parseFloat(f[0])*DEGREE_TO_ANGLE);mul(l,[1,0,v,1,0,0],l);break;case"skewY":var d=Math.tan(parseFloat(f[0])*DEGREE_TO_ANGLE);mul(l,[1,d,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(f[0]),l[1]=parseFloat(f[1]),l[2]=parseFloat(f[2]),l[3]=parseFloat(f[3]),l[4]=parseFloat(f[4]),l[5]=parseFloat(f[5]);break}}a.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(n,a,r){var o=n.getAttribute("style");if(!!o){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(o))!=null;){var u=l[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;c&&(a[c]=l[2]);var h=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;h&&(r[h]=l[2])}}}function parseAttributeStyle(n,a,r){for(var o=0;o<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[o],u=n.getAttribute(l);u!=null&&(a[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=u)}for(var o=0;o<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[o],u=n.getAttribute(l);u!=null&&(r[SELF_STYLE_ATTRIBUTES_MAP[l]]=u)}}function makeViewBoxTransform(n,a){var r=a.width/n.width,o=a.height/n.height,l=Math.min(r,o);return{scale:l,x:-(n.x+n.width/2)*l+(a.x+a.width/2),y:-(n.y+n.height/2)*l+(a.y+a.height/2)}}function parseSVG(n,a){var r=new SVGParser;return r.parse(n,a)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function n(a,r){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=a,this._parsedXML=parseXML(r)}return n.prototype.load=function(){var a=this._firstGraphic;if(!a){a=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(a),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=createRegions(a.named),o=r.regions,l=r.regionsMap;this._regions=o,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(a){var r,o;try{r=a&&parseSVG(a,{ignoreViewBox:!0,ignoreRootClip:!0})||{},o=r.root,assert(o!=null)}catch(x){throw new Error(`Invalid svg format
`+x.message)}var l=new Group$4;l.add(o),l.isGeoSVGGraphicRoot=!0;var u=r.width,c=r.height,h=r.viewBoxRect,f=this._boundingRect;if(!f){var v=void 0,d=void 0,p=void 0,g=void 0;if(u!=null?(v=0,p=u):h&&(v=h.x,p=h.width),c!=null?(d=0,g=c):h&&(d=h.y,g=h.height),v==null||d==null){var y=o.getBoundingRect();v==null&&(v=y.x,p=y.width),d==null&&(d=y.y,g=y.height)}f=this._boundingRect=new BoundingRect$1(v,d,p,g)}if(h){var _=makeViewBoxTransform(h,f);o.scaleX=o.scaleY=_.scale,o.x=_.x,o.y=_.y}l.setClipPath(new Rect$3({shape:f.plain()}));var S=[];return each$f(r.named,function(x){REGION_AVAILABLE_SVG_TAG_MAP.get(x.svgNodeTagLower)!=null&&(S.push(x),setSilent(x.el))}),{root:l,boundingRect:f,named:S}},n.prototype.useGraphic=function(a){var r=this._usedGraphicMap,o=r.get(a);return o||(o=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(a,o),o)},n.prototype.freeGraphic=function(a){var r=this._usedGraphicMap,o=r.get(a);o&&(r.removeKey(a),this._freedGraphics.push(o))},n}();function setSilent(n){n.silent=!1,n.isGroup&&n.traverse(function(a){a.silent=!1})}function createRegions(n){var a=[],r=createHashMap();return each$f(n,function(o){if(o.namedFrom==null){var l=new GeoSVGRegion(o.name,o.el);a.push(l),r.set(o.name,l)}}),{regions:a,regionsMap:r}}for(var geoCoord=[126,25],nanhaiName="\u5357\u6D77\u8BF8\u5C9B",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(n,a){if(n==="china"){for(var r=0;r<a.length;r++)if(a[r].name===nanhaiName)return;a.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(o){return{type:"polygon",exterior:o}}),geoCoord))}}var coordsOffsetMap={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function fixTextCoords(n,a){if(n==="china"){var r=coordsOffsetMap[a.name];if(r){var o=a.getCenter();o[0]+=r[0]/10.5,o[1]+=-r[1]/(10.5/.75),a.setCenter(o)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(n,a){n==="china"&&a.name==="\u53F0\u6E7E"&&a.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function n(a,r,o){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=a,this._specialAreas=o,this._geoJSON=parseInput(r)}return n.prototype.load=function(a,r){r=r||DEFAULT_NAME_PROPERTY;var o=this._parsedMap.get(r);if(!o){var l=this._parseToRegions(r);o=this._parsedMap.set(r,{regions:l,boundingRect:calculateBoundingRect(l)})}var u=createHashMap(),c=[];return each$f(o.regions,function(h){var f=h.name;a&&hasOwn(a,f)&&(h=h.cloneShallow(f=a[f])),c.push(h),u.set(f,h)}),{regions:c,boundingRect:o.boundingRect||new BoundingRect$1(0,0,0,0),regionsMap:u}},n.prototype._parseToRegions=function(a){var r=this._mapName,o=this._geoJSON,l;try{l=o?parseGeoJSON(o,a):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(r,l),each$f(l,function(u){var c=u.name;fixTextCoords(r,u),fixDiaoyuIsland(r,u);var h=this._specialAreas&&this._specialAreas[c];h&&u.transformTo(h.left,h.top,h.width,h.height)},this),l},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function calculateBoundingRect(n){for(var a,r=0;r<n.length;r++){var o=n[r].getBoundingRect();a=a||o.clone(),a.union(o)}return a}function parseInput(n){return isString(n)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var storage=createHashMap();const geoSourceManager={registerMap:function(n,a,r){if(a.svg){var o=new GeoSVGResource(n,a.svg);storage.set(n,o)}else{var l=a.geoJson||a.geoJSON;l&&!a.features?r=a.specialAreas:l=a;var o=new GeoJSONResource(n,l,r);storage.set(n,o)}},getGeoResource:function(n){return storage.get(n)},getMapForUser:function(n){var a=storage.get(n);return a&&a.type==="geoJSON"&&a.getMapForUser()},load:function(n,a,r){var o=storage.get(n);if(!o){({}).NODE_ENV!=="production"&&console.error("Map "+n+" not exists. The GeoJSON of the map must be provided.");return}return o.load(a,r)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(n){var a=n.getItemStyle(),r=n.get("areaColor");return r!=null&&(a.fill=r),a}function fixLineStyle(n){var a=n.style;a&&(a.stroke=a.stroke||a.fill,a.fill=null)}var MapDraw=function(){function n(a){var r=new Group$4;this.uid=getUID("ec_map_draw"),this._controller=new RoamController$1(a.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Group$4),r.add(this._svgGroup=new Group$4)}return n.prototype.draw=function(a,r,o,l,u){var c=a.mainType==="geo",h=a.getData&&a.getData();c&&r.eachComponent({mainType:"series",subType:"map"},function(T){!h&&T.getHostGeoModel()===a&&(h=T.getData())});var f=a.coordinateSystem,v=this._regionsGroup,d=this.group,p=f.getTransformInfo(),g=p.raw,y=p.roam,_=!v.childAt(0)||u;_?(d.x=y.x,d.y=y.y,d.scaleX=y.scaleX,d.scaleY=y.scaleY,d.dirty()):updateProps$1(d,y,a);var S=h&&h.getVisual("visualMeta")&&h.getVisual("visualMeta").length>0,x={api:o,geo:f,mapOrGeoModel:a,data:h,isVisualEncodedByVisualMap:S,isGeo:c,transformInfoRaw:g};f.resourceType==="geoJSON"?this._buildGeoJSON(x):f.resourceType==="geoSVG"&&this._buildSVG(x),this._updateController(a,r,o),this._updateMapSelectHandler(a,v,o,l)},n.prototype._buildGeoJSON=function(a){var r=this._regionsGroupByName=createHashMap(),o=createHashMap(),l=this._regionsGroup,u=a.transformInfoRaw,c=a.mapOrGeoModel,h=a.data,f=a.geo.projection,v=f&&f.stream;function d(y,_){return _&&(y=_(y)),y&&[y[0]*u.scaleX+u.x,y[1]*u.scaleY+u.y]}function p(y){for(var _=[],S=!v&&f&&f.project,x=0;x<y.length;++x){var T=d(y[x],S);T&&_.push(T)}return _}function g(y){return{shape:{points:p(y)}}}l.removeAll(),each$f(a.geo.regions,function(y){var _=y.name,S=r.get(_),x=o.get(_)||{},T=x.dataIdx,A=x.regionModel;S||(S=r.set(_,new Group$4),l.add(S),T=h?h.indexOfName(_):null,A=a.isGeo?c.getRegionModel(_):h?h.getItemModel(T):null,o.set(_,{dataIdx:T,regionModel:A}));var b=[],C=[];each$f(y.geometries,function(D){if(D.type==="polygon"){var M=[D.exterior].concat(D.interiors||[]);v&&(M=projectPolys(M,v)),each$f(M,function(L){b.push(new Polygon$1(g(L)))})}else{var P=D.points;v&&(P=projectPolys(P,v,!0)),each$f(P,function(L){C.push(new Polyline$3(g(L)))})}});var E=d(y.getCenter(),f&&f.project);function w(D,M){if(!!D.length){var P=new CompoundPath$1({culling:!0,segmentIgnoreThreshold:1,shape:{paths:D}});S.add(P),applyOptionStyleForRegion(a,P,T,A),resetLabelForRegion(a,P,_,A,c,T,E),M&&(fixLineStyle(P),each$f(P.states,fixLineStyle))}}w(b),w(C,!0)}),r.each(function(y,_){var S=o.get(_),x=S.dataIdx,T=S.regionModel;resetEventTriggerForRegion(a,y,_,T,c,x),resetTooltipForRegion(a,y,_,T,c),resetStateTriggerForRegion(a,y,_,T,c)},this)},n.prototype._buildSVG=function(a){var r=a.geo.map,o=a.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var l=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(c){var h=c.name,f=a.mapOrGeoModel,v=a.data,d=c.svgNodeTagLower,p=c.el,g=v?v.indexOfName(h):null,y=f.getRegionModel(h);if(OPTION_STYLE_ENABLED_TAG_MAP.get(d)!=null&&p instanceof Displayable$1&&applyOptionStyleForRegion(a,p,g,y),p instanceof Displayable$1&&(p.culling=!0),p.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(d)!=null&&resetLabelForRegion(a,p,h,y,f,g,null),resetEventTriggerForRegion(a,p,h,y,f,g),resetTooltipForRegion(a,p,h,y,f),STATE_TRIGGER_TAG_MAP.get(d)!=null)){var _=resetStateTriggerForRegion(a,p,h,y,f);_==="self"&&(u=!0);var S=l.get(h)||l.set(h,[]);S.push(p)}},this),this._enableBlurEntireSVG(u,a)},n.prototype._enableBlurEntireSVG=function(a,r){if(a&&r.isGeo){var o=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=o.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var c=u.ensureState("blur").style||{};c.opacity==null&&l!=null&&(c.opacity=l),u.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(a,r){if(a==null)return[];var o=r.coordinateSystem;if(o.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var u=l.get(a);return u?[u]:[]}}else if(o.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(a)||[]},n.prototype._svgResourceChanged=function(a){return this._svgMapName!==a},n.prototype._useSVG=function(a){var r=geoSourceManager.getGeoResource(a);if(r&&r.type==="geoSVG"){var o=r.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=a}},n.prototype._freeSVG=function(){var a=this._svgMapName;if(a!=null){var r=geoSourceManager.getGeoResource(a);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(a,r,o){var l=a.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=a.get("scaleLimit"),c.zoom=l.getZoom(),u.enable(a.get("roam")||!1);var h=a.mainType;function f(){var v={type:"geoRoam",componentType:h};return v[h+"Id"]=a.id,v}u.off("pan").on("pan",function(v){this._mouseDownFlag=!1,updateViewOnPan(c,v.dx,v.dy),o.dispatchAction(extend(f(),{dx:v.dx,dy:v.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(v){this._mouseDownFlag=!1,updateViewOnZoom(c,v.scale,v.originX,v.originY),o.dispatchAction(extend(f(),{zoom:v.scale,originX:v.originX,originY:v.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(v,d,p){return l.containPoint([d,p])&&!onIrrelevantElement(v,o,a)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(a){var r=a.getTextContent();r&&(r.ignore=mapLabelRaw(r).ignore)})},n.prototype._updateMapSelectHandler=function(a,r,o,l){var u=this;r.off("mousedown"),r.off("click"),a.get("selectedMode")&&(r.on("mousedown",function(){u._mouseDownFlag=!0}),r.on("click",function(c){!u._mouseDownFlag||(u._mouseDownFlag=!1)}))},n}();function applyOptionStyleForRegion(n,a,r,o){var l=o.getModel("itemStyle"),u=o.getModel(["emphasis","itemStyle"]),c=o.getModel(["blur","itemStyle"]),h=o.getModel(["select","itemStyle"]),f=getFixedItemStyle(l),v=getFixedItemStyle(u),d=getFixedItemStyle(h),p=getFixedItemStyle(c),g=n.data;if(g){var y=g.getItemVisual(r,"style"),_=g.getItemVisual(r,"decal");n.isVisualEncodedByVisualMap&&y.fill&&(f.fill=y.fill),_&&(f.decal=createOrUpdatePatternFromDecal(_,n.api))}a.setStyle(f),a.style.strokeNoScale=!0,a.ensureState("emphasis").style=v,a.ensureState("select").style=d,a.ensureState("blur").style=p,setDefaultStateProxy(a)}function resetLabelForRegion(n,a,r,o,l,u,c){var h=n.data,f=n.isGeo,v=h&&isNaN(h.get(h.mapDimension("value"),u)),d=h&&h.getItemLayout(u);if(f||v||d&&d.showLabel){var p=f?r:u,g=void 0;(!h||u>=0)&&(g=l);var y=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(a,getLabelStatesModels(o),{labelFetcher:g,labelDataIndex:p,defaultText:r},y);var _=a.getTextContent();if(_&&(mapLabelRaw(_).ignore=_.ignore,a.textConfig&&c)){var S=a.getBoundingRect().clone();a.textConfig.layoutRect=S,a.textConfig.position=[(c[0]-S.x)/S.width*100+"%",(c[1]-S.y)/S.height*100+"%"]}a.disableLabelAnimation=!0}else a.removeTextContent(),a.removeTextConfig(),a.disableLabelAnimation=null}function resetEventTriggerForRegion(n,a,r,o,l,u){n.data?n.data.setItemGraphicEl(u,a):getECData(a).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:r,region:o&&o.option||{}}}function resetTooltipForRegion(n,a,r,o,l){n.data||setTooltipConfig({el:a,componentModel:l,itemName:r,itemTooltipOption:o.get("tooltip")})}function resetStateTriggerForRegion(n,a,r,o,l){a.highDownSilentOnTouch=!!l.get("selectedMode");var u=o.getModel("emphasis"),c=u.get("focus");return toggleHoverEmphasis(a,c,u.get("blurScope"),u.get("disabled")),n.isGeo&&enableComponentHighDownFeatures(a,l,r),c}function projectPolys(n,a,r){var o=[],l;function u(){l=[]}function c(){l.length&&(o.push(l),l=[])}var h=a({polygonStart:u,polygonEnd:c,lineStart:u,lineEnd:c,point:function(f,v){isFinite(f)&&isFinite(v)&&l.push([f,v])},sphere:function(){}});return!r&&h.polygonStart(),each$f(n,function(f){h.lineStart();for(var v=0;v<f.length;v++)h.point(f[v][0],f[v][1]);h.lineEnd()}),!r&&h.polygonEnd(),o}const MapDraw$1=MapDraw;var MapView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var c=this.group;if(c.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===r.id){var h=this._mapDraw;h&&c.add(h.group)}else if(r.needsDrawMap){var h=this._mapDraw||new MapDraw$1(l);c.add(h.group),h.draw(r,o,l,this,u),this._mapDraw=h}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&o.getComponent("legend")&&this._renderSymbols(r,o,l)}}},a.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},a.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},a.prototype._renderSymbols=function(r,o,l){var u=r.originalData,c=this.group;u.each(u.mapDimension("value"),function(h,f){if(!isNaN(h)){var v=u.getItemLayout(f);if(!(!v||!v.point)){var d=v.point,p=v.offset,g=new Circle$1({style:{fill:r.getData().getVisual("style").fill},shape:{cx:d[0]+p*9,cy:d[1],r:3},silent:!0,z2:8+(p?0:Z2_EMPHASIS_LIFT+1)});if(!p){var y=r.mainSeries.getData(),_=u.getName(f),S=y.indexOfName(_),x=u.getItemModel(f),T=x.getModel("label"),A=y.getItemGraphicEl(S);setLabelStyle(g,getLabelStatesModels(x),{labelFetcher:{getFormattedLabel:function(b,C){return r.getFormattedLabel(S,C)}},defaultText:_}),g.disableLabelAnimation=!0,T.get("position")||g.setTextConfig({position:"bottom"}),A.onHoverStateChange=function(b){setStatesFlag(g,b)}}c.add(g)}}})},a.type="map",a}(ChartView$1);const MapView$1=MapView;var MapSeries=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(o){if(o!=null){var l=this.getData().getName(o),u=this.coordinateSystem,c=u.getRegion(l);return c&&u.dataToPoint(c.getCenter())}},r}return a.prototype.getInitialData=function(r){for(var o=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),u=[],c=0,h=o.count();c<h;c++){var f=o.getName(c);l.set(f,!0)}var v=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(v.regions,function(d){var p=d.name;l.get(p)||u.push(p)}),o.appendValues([],u),o},a.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},a.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},a.prototype.getRawValue=function(r){var o=this.getData();return o.get(o.mapDimension("value"),r)},a.prototype.getRegionModel=function(r){var o=this.getData();return o.getItemModel(o.indexOfName(r))},a.prototype.formatTooltip=function(r,o,l){for(var u=this.getData(),c=this.getRawValue(r),h=u.getName(r),f=this.seriesGroup,v=[],d=0;d<f.length;d++){var p=f[d].originalData.indexOfName(h),g=u.mapDimension("value");isNaN(f[d].originalData.get(g,p))||v.push(f[d].name)}return createTooltipMarkup("section",{header:v.join(", "),noHeader:!v.length,blocks:[createTooltipMarkup("nameValue",{name:h,value:c})]})},a.prototype.setZoom=function(r){this.option.zoom=r},a.prototype.setCenter=function(r){this.option.center=r},a.prototype.getLegendIcon=function(r){var o=r.icon||"roundRect",l=createSymbol$1(o,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return l.setStyle(r.itemStyle),l.style.stroke="none",o.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},a.type="series.map",a.dependencies=["geo"],a.layoutMode="box",a.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},a}(SeriesModel$1);const MapSeries$1=MapSeries;function dataStatistics(n,a){var r={};return each$f(n,function(o){o.each(o.mapDimension("value"),function(l,u){var c="ec-"+o.getName(u);r[c]=r[c]||[],isNaN(l)||r[c].push(l)})}),n[0].map(n[0].mapDimension("value"),function(o,l){for(var u="ec-"+n[0].getName(l),c=0,h=1/0,f=-1/0,v=r[u].length,d=0;d<v;d++)h=Math.min(h,r[u][d]),f=Math.max(f,r[u][d]),c+=r[u][d];var p;return a==="min"?p=h:a==="max"?p=f:a==="average"?p=c/v:p=c,v===0?NaN:p})}function mapDataStatistic(n){var a={};n.eachSeriesByType("map",function(r){var o=r.getHostGeoModel(),l=o?"o"+o.id:"i"+r.getMapType();(a[l]=a[l]||[]).push(r)}),each$f(a,function(r,o){for(var l=dataStatistics(map$1(r,function(c){return c.getData()}),r[0].get("mapValueCalculation")),u=0;u<r.length;u++)r[u].originalData=r[u].getData();for(var u=0;u<r.length;u++)r[u].seriesGroup=r,r[u].needsDrawMap=u===0&&!r[u].getHostGeoModel(),r[u].setData(l.cloneShallow()),r[u].mainSeries=r[0]})}function mapSymbolLayout(n){var a={};n.eachSeriesByType("map",function(r){var o=r.getMapType();if(!(r.getHostGeoModel()||a[o])){var l={};each$f(r.seriesGroup,function(c){var h=c.coordinateSystem,f=c.originalData;c.get("showLegendSymbol")&&n.getComponent("legend")&&f.each(f.mapDimension("value"),function(v,d){var p=f.getName(d),g=h.getRegion(p);if(!(!g||isNaN(v))){var y=l[p]||0,_=h.dataToPoint(g.getCenter());l[p]=y+1,f.setItemLayout(d,{point:_,offset:y})}})});var u=r.getData();u.each(function(c){var h=u.getName(c),f=u.getItemLayout(c)||{};f.showLabel=!l[h],u.setItemLayout(c,f)}),a[o]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(n){__extends(a,n);function a(r){var o=n.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable$1,o._rawTransformable=new Transformable$1,o.name=r,o}return a.prototype.setBoundingRect=function(r,o,l,u){return this._rect=new BoundingRect$1(r,o,l,u),this._rect},a.prototype.getBoundingRect=function(){return this._rect},a.prototype.setViewRect=function(r,o,l,u){this._transformTo(r,o,l,u),this._viewRect=new BoundingRect$1(r,o,l,u)},a.prototype._transformTo=function(r,o,l,u){var c=this.getBoundingRect(),h=this._rawTransformable;h.transform=c.calculateTransform(new BoundingRect$1(r,o,l,u));var f=h.parent;h.parent=null,h.decomposeTransform(),h.parent=f,this._updateTransform()},a.prototype.setCenter=function(r,o){!r||(this._center=[parsePercent(r[0],o.getWidth()),parsePercent(r[1],o.getHeight())],this._updateCenterAndZoom())},a.prototype.setZoom=function(r){r=r||1;var o=this.zoomLimit;o&&(o.max!=null&&(r=Math.min(o.max,r)),o.min!=null&&(r=Math.max(o.min,r))),this._zoom=r,this._updateCenterAndZoom()},a.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),o=r.x+r.width/2,l=r.y+r.height/2;return[o,l]},a.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},a.prototype.getZoom=function(){return this._zoom||1},a.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},a.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,l=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,r),l=applyTransform$1([],l,r),o.originX=u[0],o.originY=u[1],o.x=l[0]-u[0],o.y=l[1]-u[1],o.scaleX=o.scaleY=c,this._updateTransform()},a.prototype._updateTransform=function(){var r=this._roamTransformable,o=this._rawTransformable;o.parent=r,r.updateTransform(),o.updateTransform(),copy(this.transform||(this.transform=[]),o.transform||create$1()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},a.prototype.getTransformInfo=function(){var r=this._rawTransformable,o=this._roamTransformable,l=new Transformable$1;return l.transform=o.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},a.prototype.getViewRect=function(){return this._viewRect},a.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},a.prototype.dataToPoint=function(r,o,l){var u=o?this._rawTransform:this.transform;return l=l||[],u?v2ApplyTransform(l,r,u):copy$1(l,r)},a.prototype.pointToData=function(r){var o=this.invTransform;return o?v2ApplyTransform([],r,o):[r[0],r[1]]},a.prototype.convertToPixel=function(r,o,l){var u=getCoordSys$4(o);return u===this?u.dataToPoint(l):null},a.prototype.convertFromPixel=function(r,o,l){var u=getCoordSys$4(o);return u===this?u.pointToData(l):null},a.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},a.dimensions=["x","y"],a}(Transformable$1);function getCoordSys$4(n){var a=n.seriesModel;return a?a.coordinateSystem:null}const View$1=View;var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this,r)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=o;var c=l.projection,h=geoSourceManager.load(o,l.nameMap,l.nameProperty),f=geoSourceManager.getGeoResource(o),v=u.resourceType=f?f.type:null,d=u.regions=h.regions,p=GEO_DEFAULT_PARAMS[f.type];u._regionsMap=h.regionsMap,u.regions=h.regions,{}.NODE_ENV!=="production"&&c&&(v==="geoSVG"&&({}.NODE_ENV!=="production"&&warn("Map "+o+" with SVG source can't use projection. Only GeoJSON source supports projection."),c=null),c.project&&c.unproject||({}.NODE_ENV!=="production"&&warn("project and unproject must be both provided in the projeciton."),c=null)),u.projection=c;var g;if(c)for(var y=0;y<d.length;y++){var _=d[y].getBoundingRect(c);g=g||_.clone(),g.union(_)}else g=h.boundingRect;return u.setBoundingRect(g.x,g.y,g.width,g.height),u.aspectScale=c?1:retrieve2(l.aspectScale,p.aspectScale),u._invertLongitute=c?!1:p.invertLongitute,u}return a.prototype._transformTo=function(r,o,l,u){var c=this.getBoundingRect(),h=this._invertLongitute;c=c.clone(),h&&(c.y=-c.y-c.height);var f=this._rawTransformable;f.transform=c.calculateTransform(new BoundingRect$1(r,o,l,u));var v=f.parent;f.parent=null,f.decomposeTransform(),f.parent=v,h&&(f.scaleY=-f.scaleY),this._updateTransform()},a.prototype.getRegion=function(r){return this._regionsMap.get(r)},a.prototype.getRegionByCoord=function(r){for(var o=this.regions,l=0;l<o.length;l++){var u=o[l];if(u.type==="geoJSON"&&u.contain(r))return o[l]}},a.prototype.addGeoCoord=function(r,o){this._nameCoordMap.set(r,o)},a.prototype.getGeoCoord=function(r){var o=this._regionsMap.get(r);return this._nameCoordMap.get(r)||o&&o.getCenter()},a.prototype.dataToPoint=function(r,o,l){if(isString(r)&&(r=this.getGeoCoord(r)),r){var u=this.projection;return u&&(r=u.project(r)),r&&this.projectedToPoint(r,o,l)}},a.prototype.pointToData=function(r){var o=this.projection;return o&&(r=o.unproject(r)),r&&this.pointToProjected(r)},a.prototype.pointToProjected=function(r){return n.prototype.pointToData.call(this,r)},a.prototype.projectedToPoint=function(r,o,l){return n.prototype.dataToPoint.call(this,r,o,l)},a.prototype.convertToPixel=function(r,o,l){var u=getCoordSys$3(o);return u===this?u.dataToPoint(l):null},a.prototype.convertFromPixel=function(r,o,l){var u=getCoordSys$3(o);return u===this?u.pointToData(l):null},a}(View$1);mixin(Geo,View$1);function getCoordSys$3(n){var a=n.geoModel,r=n.seriesModel;return a?a.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}const Geo$1=Geo;function resizeGeo(n,a){var r=n.get("boundingCoords");if(r!=null){var o=r[0],l=r[1];if(!(isFinite(o[0])&&isFinite(o[1])&&isFinite(l[0])&&isFinite(l[1])))({}).NODE_ENV!=="production"&&console.error("Invalid boundingCoords");else{var u=this.projection;if(u){var c=o[0],h=o[1],f=l[0],v=l[1];o=[1/0,1/0],l=[-1/0,-1/0];var d=function(w,D,M,P){for(var L=M-w,I=P-D,R=0;R<=100;R++){var O=R/100,N=u.project([w+L*O,D+I*O]);min$1(o,o,N),max$1(l,l,N)}};d(c,h,f,h),d(f,h,f,v),d(f,v,c,v),d(c,v,f,h)}this.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1])}}var p=this.getBoundingRect(),g=n.get("layoutCenter"),y=n.get("layoutSize"),_=a.getWidth(),S=a.getHeight(),x=p.width/p.height*this.aspectScale,T=!1,A,b;g&&y&&(A=[parsePercent(g[0],_),parsePercent(g[1],S)],b=parsePercent(y,Math.min(_,S)),!isNaN(A[0])&&!isNaN(A[1])&&!isNaN(b)?T=!0:{}.NODE_ENV!=="production"&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."));var C;if(T)C={},x>1?(C.width=b,C.height=b/x):(C.height=b,C.width=b*x),C.y=A[1]-C.height/2,C.x=A[0]-C.width/2;else{var E=n.getBoxLayoutParams();E.aspect=x,C=getLayoutRect(E,{width:_,height:S})}this.setViewRect(C.x,C.y,C.width,C.height),this.setCenter(n.get("center"),a),this.setZoom(n.get("zoom"))}function setGeoCoords(n,a){each$f(a.get("geoCoord"),function(r,o){n.addGeoCoord(o,r)})}var GeoCreator=function(){function n(){this.dimensions=geo2DDimensions}return n.prototype.create=function(a,r){var o=[];function l(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}a.eachComponent("geo",function(c,h){var f=c.get("map"),v=new Geo$1(f+h,f,extend({nameMap:c.get("nameMap")},l(c)));v.zoomLimit=c.get("scaleLimit"),o.push(v),c.coordinateSystem=v,v.model=c,v.resize=resizeGeo,v.resize(c,r)}),a.eachSeries(function(c){var h=c.get("coordinateSystem");if(h==="geo"){var f=c.get("geoIndex")||0;c.coordinateSystem=o[f]}});var u={};return a.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var h=c.getMapType();u[h]=u[h]||[],u[h].push(c)}}),each$f(u,function(c,h){var f=map$1(c,function(d){return d.get("nameMap")}),v=new Geo$1(h,h,extend({nameMap:mergeAll(f)},l(c[0])));v.zoomLimit=retrieve.apply(null,map$1(c,function(d){return d.get("scaleLimit")})),o.push(v),v.resize=resizeGeo,v.resize(c[0],r),each$f(c,function(d){d.coordinateSystem=v,setGeoCoords(v,d)})}),o},n.prototype.getFilledRegions=function(a,r,o,l){for(var u=(a||[]).slice(),c=createHashMap(),h=0;h<u.length;h++)c.set(u[h].name,u[h]);var f=geoSourceManager.load(r,o,l);return each$f(f.regions,function(v){var d=v.name;!c.get(d)&&u.push({name:d})}),u},n}(),geoCreator=new GeoCreator;const geoCreator$1=geoCreator;var GeoModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o,l){var u=geoSourceManager.getGeoResource(r.map);if(u&&u.type==="geoJSON"){var c=r.itemStyle=r.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(r,l),defaultEmphasis(r,"label",["show"])},a.prototype.optionUpdated=function(){var r=this,o=this.option;o.regions=geoCreator$1.getFilledRegions(o.regions,o.map,o.nameMap,o.nameProperty);var l={};this._optionModelMap=reduce(o.regions||[],function(u,c){var h=c.name;return h&&(u.set(h,new Model$1(c,r,r.ecModel)),c.selected&&(l[h]=!0)),u},createHashMap()),o.selectedMap||(o.selectedMap=l)},a.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Model$1(null,this,this.ecModel)},a.prototype.getFormattedLabel=function(r,o){var l=this.getRegionModel(r),u=o==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),c={name:r};if(isFunction(u))return c.status=o,u(c);if(isString(u))return u.replace("{a}",r!=null?r:"")},a.prototype.setZoom=function(r){this.option.zoom=r},a.prototype.setCenter=function(r){this.option.center=r},a.prototype.select=function(r){var o=this.option,l=o.selectedMode;if(!!l){l!=="multiple"&&(o.selectedMap=null);var u=o.selectedMap||(o.selectedMap={});u[r]=!0}},a.prototype.unSelect=function(r){var o=this.option.selectedMap;o&&(o[r]=!1)},a.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},a.prototype.isSelected=function(r){var o=this.option.selectedMap;return!!(o&&o[r])},a.type="geo",a.layoutMode="box",a.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},a}(ComponentModel$1);const GeoModel$1=GeoModel;function getCenterCoord(n,a){return n.pointToProjected?n.pointToProjected(a):n.pointToData(a)}function updateCenterAndZoom(n,a,r,o){var l=n.getZoom(),u=n.getCenter(),c=a.zoom,h=n.projectedToPoint?n.projectedToPoint(u):n.dataToPoint(u);if(a.dx!=null&&a.dy!=null&&(h[0]-=a.dx,h[1]-=a.dy,n.setCenter(getCenterCoord(n,h),o)),c!=null){if(r){var f=r.min||0,v=r.max||1/0;c=Math.max(Math.min(l*c,v),f)/l}n.scaleX*=c,n.scaleY*=c;var d=(a.originX-n.x)*(c-1),p=(a.originY-n.y)*(c-1);n.x-=d,n.y-=p,n.updateTransform(),n.setCenter(getCenterCoord(n,h),o),n.setZoom(c*l)}return{center:n.getCenter(),zoom:n.getZoom()}}var GeoView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.focusBlurEnabled=!0,r}return a.prototype.init=function(r,o){this._api=o},a.prototype.render=function(r,o,l,u){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw$1(l));var c=this._mapDraw;c.draw(r,o,l,this,u),c.group.on("click",this._handleRegionClick,this),c.group.silent=r.get("silent"),this.group.add(c.group),this.updateSelectStatus(r,o,l)},a.prototype._handleRegionClick=function(r){var o;findEventDispatcher(r.target,function(l){return(o=getECData(l).eventData)!=null},!0),o&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:o.name})},a.prototype.updateSelectStatus=function(r,o,l){var u=this;this._mapDraw.group.traverse(function(c){var h=getECData(c).eventData;if(h)return u._model.isSelected(h.name)?l.enterSelect(c):l.leaveSelect(c),!0})},a.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},a.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},a.type="geo",a}(ComponentView$1);const GeoView$1=GeoView;function registerMap(n,a,r){geoSourceManager.registerMap(n,a,r)}function install$J(n){n.registerCoordinateSystem("geo",geoCreator$1),n.registerComponentModel(GeoModel$1),n.registerComponentView(GeoView$1),n.registerImpl("registerMap",registerMap),n.registerImpl("getMap",function(r){return geoSourceManager.getMapForUser(r)});function a(r,o){o.update="geo:updateSelectStatus",n.registerAction(o,function(l,u){var c={},h=[];return u.eachComponent({mainType:"geo",query:l},function(f){f[r](l.name);var v=f.coordinateSystem;each$f(v.regions,function(p){c[p.name]=f.isSelected(p.name)||!1});var d=[];each$f(c,function(p,g){c[g]&&d.push(g)}),h.push({geoIndex:f.componentIndex,name:d})}),{selected:c,allSelected:h,name:l.name}})}a("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),a("select",{type:"geoSelect",event:"geoselected"}),a("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,o,l){var u=r.componentType||"series";o.eachComponent({mainType:u,query:r},function(c){var h=c.coordinateSystem;if(h.type==="geo"){var f=updateCenterAndZoom(h,r,c.get("scaleLimit"),l);c.setCenter&&c.setCenter(f.center),c.setZoom&&c.setZoom(f.zoom),u==="series"&&each$f(c.seriesGroup,function(v){v.setCenter(f.center),v.setZoom(f.zoom)})}})})}function install$I(n){use(install$J),n.registerChartView(MapView$1),n.registerSeriesModel(MapSeries$1),n.registerLayout(mapSymbolLayout),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",n.registerAction)}function init(n){var a=n;a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[a],o,l;o=r.pop();)if(l=o.children,o.isExpand&&l.length)for(var u=l.length,c=u-1;c>=0;c--){var h=l[c];h.hierNode={defaultAncestor:null,ancestor:h,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},r.push(h)}}function firstWalk(n,a){var r=n.isExpand?n.children:[],o=n.parentNode.children,l=n.hierNode.i?o[n.hierNode.i-1]:null;if(r.length){executeShifts(n);var u=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;l?(n.hierNode.prelim=l.hierNode.prelim+a(n,l),n.hierNode.modifier=n.hierNode.prelim-u):n.hierNode.prelim=u}else l&&(n.hierNode.prelim=l.hierNode.prelim+a(n,l));n.parentNode.hierNode.defaultAncestor=apportion(n,l,n.parentNode.hierNode.defaultAncestor||o[0],a)}function secondWalk(n){var a=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:a},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function separation(n){return arguments.length?n:defaultSeparation}function radialCoordinate(n,a){return n-=Math.PI/2,{x:a*Math.cos(n),y:a*Math.sin(n)}}function getViewRect$4(n,a){return getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function executeShifts(n){for(var a=n.children,r=a.length,o=0,l=0;--r>=0;){var u=a[r];u.hierNode.prelim+=o,u.hierNode.modifier+=o,l+=u.hierNode.change,o+=u.hierNode.shift+l}}function apportion(n,a,r,o){if(a){for(var l=n,u=n,c=u.parentNode.children[0],h=a,f=l.hierNode.modifier,v=u.hierNode.modifier,d=c.hierNode.modifier,p=h.hierNode.modifier;h=nextRight(h),u=nextLeft(u),h&&u;){l=nextRight(l),c=nextLeft(c),l.hierNode.ancestor=n;var g=h.hierNode.prelim+p-u.hierNode.prelim-v+o(h,u);g>0&&(moveSubtree(nextAncestor(h,n,r),n,g),v+=g,f+=g),p+=h.hierNode.modifier,v+=u.hierNode.modifier,f+=l.hierNode.modifier,d+=c.hierNode.modifier}h&&!nextRight(l)&&(l.hierNode.thread=h,l.hierNode.modifier+=p-f),u&&!nextLeft(c)&&(c.hierNode.thread=u,c.hierNode.modifier+=v-d,r=n)}return r}function nextRight(n){var a=n.children;return a.length&&n.isExpand?a[a.length-1]:n.hierNode.thread}function nextLeft(n){var a=n.children;return a.length&&n.isExpand?a[0]:n.hierNode.thread}function nextAncestor(n,a,r){return n.hierNode.ancestor.parentNode===a.parentNode?n.hierNode.ancestor:r}function moveSubtree(n,a,r){var o=r/(a.hierNode.i-n.hierNode.i);a.hierNode.change-=o,a.hierNode.shift+=r,a.hierNode.modifier+=r,a.hierNode.prelim+=r,n.hierNode.change+=o}function defaultSeparation(n,a){return n.parentNode===a.parentNode?1:2}var TreeEdgeShape=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),TreePath=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new TreeEdgeShape},a.prototype.buildPath=function(r,o){var l=o.childPoints,u=l.length,c=o.parentPoint,h=l[0],f=l[u-1];if(u===1){r.moveTo(c[0],c[1]),r.lineTo(h[0],h[1]);return}var v=o.orient,d=v==="TB"||v==="BT"?0:1,p=1-d,g=parsePercent(o.forkPosition,1),y=[];y[d]=c[d],y[p]=c[p]+(f[p]-c[p])*g,r.moveTo(c[0],c[1]),r.lineTo(y[0],y[1]),r.moveTo(h[0],h[1]),y[d]=h[d],r.lineTo(y[0],y[1]),y[d]=f[d],r.lineTo(y[0],y[1]),r.lineTo(f[0],f[1]);for(var _=1;_<u-1;_++){var S=l[_];r.moveTo(S[0],S[1]),y[d]=S[d],r.lineTo(y[0],y[1])}},a}(Path$1),TreeView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._mainGroup=new Group$4,r}return a.prototype.init=function(r,o){this._controller=new RoamController$1(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},a.prototype.render=function(r,o,l){var u=r.getData(),c=r.layoutInfo,h=this._mainGroup,f=r.get("layout");f==="radial"?(h.x=c.x+c.width/2,h.y=c.y+c.height/2):(h.x=c.x,h.y=c.y),this._updateViewCoordSys(r,l),this._updateController(r,o,l);var v=this._data;u.diff(v).add(function(d){symbolNeedsDraw(u,d)&&updateNode(u,d,null,h,r)}).update(function(d,p){var g=v.getItemGraphicEl(p);if(!symbolNeedsDraw(u,d)){g&&removeNode(v,p,g,h,r);return}updateNode(u,d,g,h,r)}).remove(function(d){var p=v.getItemGraphicEl(d);p&&removeNode(v,d,p,h,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function(d,p){d.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:p})})}),this._data=u},a.prototype._updateViewCoordSys=function(r,o){var l=r.getData(),u=[];l.each(function(p){var g=l.getItemLayout(p);g&&!isNaN(g.x)&&!isNaN(g.y)&&u.push([+g.x,+g.y])});var c=[],h=[];fromPoints(u,c,h);var f=this._min,v=this._max;h[0]-c[0]===0&&(c[0]=f?f[0]:c[0]-1,h[0]=v?v[0]:h[0]+1),h[1]-c[1]===0&&(c[1]=f?f[1]:c[1]-1,h[1]=v?v[1]:h[1]+1);var d=r.coordinateSystem=new View$1;d.zoomLimit=r.get("scaleLimit"),d.setBoundingRect(c[0],c[1],h[0]-c[0],h[1]-c[1]),d.setCenter(r.get("center"),o),d.setZoom(r.get("zoom")),this.group.attr({x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY}),this._min=c,this._max=h},a.prototype._updateController=function(r,o,l){var u=this,c=this._controller,h=this._controllerHost,f=this.group;c.setPointerChecker(function(v,d,p){var g=f.getBoundingRect();return g.applyTransform(f.transform),g.contain(d,p)&&!onIrrelevantElement(v,l,r)}),c.enable(r.get("roam")),h.zoomLimit=r.get("scaleLimit"),h.zoom=r.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(v){updateViewOnPan(h,v.dx,v.dy),l.dispatchAction({seriesId:r.id,type:"treeRoam",dx:v.dx,dy:v.dy})}).on("zoom",function(v){updateViewOnZoom(h,v.scale,v.originX,v.originY),l.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:v.scale,originX:v.originX,originY:v.originY}),u._updateNodeAndLinkScale(r),l.updateLabelLayout()})},a.prototype._updateNodeAndLinkScale=function(r){var o=r.getData(),l=this._getNodeGlobalScale(r);o.eachItemGraphicEl(function(u,c){u.setSymbolScale(l)})},a.prototype._getNodeGlobalScale=function(r){var o=r.coordinateSystem;if(o.type!=="view")return 1;var l=this._nodeScaleRatio,u=o.scaleX||1,c=o.getZoom(),h=(c-1)*l+1;return h/u},a.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},a.type="tree",a}(ChartView$1);function symbolNeedsDraw(n,a){var r=n.getItemLayout(a);return r&&!isNaN(r.x)&&!isNaN(r.y)}function updateNode(n,a,r,o,l){var u=!r,c=n.tree.getNodeByDataIndex(a),h=c.getModel(),f=c.getVisual("style").fill,v=c.isExpand===!1&&c.children.length!==0?f:"#fff",d=n.tree.root,p=c.parentNode===d?c:c.parentNode||c,g=n.getItemGraphicEl(p.dataIndex),y=p.getLayout(),_=g?{x:g.__oldX,y:g.__oldY,rawX:g.__radialOldRawX,rawY:g.__radialOldRawY}:y,S=c.getLayout();u?(r=new SymbolClz(n,a,null,{symbolInnerColor:v,useNameLabel:!0}),r.x=_.x,r.y=_.y):r.updateData(n,a,null,{symbolInnerColor:v,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=S.rawX,r.__radialRawY=S.rawY,o.add(r),n.setItemGraphicEl(a,r),r.__oldX=r.x,r.__oldY=r.y,updateProps$1(r,{x:S.x,y:S.y},l);var x=r.getSymbolPath();if(l.get("layout")==="radial"){var T=d.children[0],A=T.getLayout(),b=T.children.length,C=void 0,E=void 0;if(S.x===A.x&&c.isExpand===!0&&T.children.length){var w={x:(T.children[0].getLayout().x+T.children[b-1].getLayout().x)/2,y:(T.children[0].getLayout().y+T.children[b-1].getLayout().y)/2};C=Math.atan2(w.y-A.y,w.x-A.x),C<0&&(C=Math.PI*2+C),E=w.x<A.x,E&&(C=C-Math.PI)}else C=Math.atan2(S.y-A.y,S.x-A.x),C<0&&(C=Math.PI*2+C),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(E=S.x<A.x,E&&(C=C-Math.PI)):(E=S.x>A.x,E||(C=C-Math.PI));var D=E?"left":"right",M=h.getModel("label"),P=M.get("rotate"),L=P*(Math.PI/180),I=x.getTextContent();I&&(x.setTextConfig({position:M.get("position")||D,rotation:P==null?-C:L,origin:"center"}),I.setStyle("verticalAlign","middle"))}var R=h.get(["emphasis","focus"]),O=R==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):R==="ancestor"?c.getAncestorsIndices():R==="descendant"?c.getDescendantIndices():null;O&&(getECData(r).focus=O),drawEdge(l,c,d,r,_,y,S,o),r.__edge&&(r.onHoverStateChange=function(N){if(N!=="blur"){var V=c.parentNode&&n.getItemGraphicEl(c.parentNode.dataIndex);V&&V.hoverState===HOVER_STATE_BLUR||setStatesFlag(r.__edge,N)}})}function drawEdge(n,a,r,o,l,u,c,h){var f=a.getModel(),v=n.get("edgeShape"),d=n.get("layout"),p=n.getOrient(),g=n.get(["lineStyle","curveness"]),y=n.get("edgeForkPosition"),_=f.getModel("lineStyle").getLineStyle(),S=o.__edge;if(v==="curve")a.parentNode&&a.parentNode!==r&&(S||(S=o.__edge=new BezierCurve$1({shape:getEdgeShape(d,p,g,l,l)})),updateProps$1(S,{shape:getEdgeShape(d,p,g,u,c)},n));else if(v==="polyline"){if(d==="orthogonal"){if(a!==r&&a.children&&a.children.length!==0&&a.isExpand===!0){for(var x=a.children,T=[],A=0;A<x.length;A++){var b=x[A].getLayout();T.push([b.x,b.y])}S||(S=o.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:p,forkPosition:y}})),updateProps$1(S,{shape:{parentPoint:[c.x,c.y],childPoints:T}},n)}}else if({}.NODE_ENV!=="production")throw new Error("The polyline edgeShape can only be used in orthogonal layout")}S&&!(v==="polyline"&&!a.isExpand)&&(S.useStyle(defaults({strokeNoScale:!0,fill:null},_)),setStatesStylesFromModel(S,f,"lineStyle"),setDefaultStateProxy(S),h.add(S))}function removeNodeEdge(n,a,r,o,l){var u=a.tree.root,c=getSourceNode(u,n),h=c.source,f=c.sourceLayout,v=a.getItemGraphicEl(n.dataIndex);if(!!v){var d=a.getItemGraphicEl(h.dataIndex),p=d.__edge,g=v.__edge||(h.isExpand===!1||h.children.length===1?p:void 0),y=o.get("edgeShape"),_=o.get("layout"),S=o.get("orient"),x=o.get(["lineStyle","curveness"]);g&&(y==="curve"?removeElement(g,{shape:getEdgeShape(_,S,x,f,f),style:{opacity:0}},o,{cb:function(){r.remove(g)},removeOpt:l}):y==="polyline"&&o.get("layout")==="orthogonal"&&removeElement(g,{shape:{parentPoint:[f.x,f.y],childPoints:[[f.x,f.y]]},style:{opacity:0}},o,{cb:function(){r.remove(g)},removeOpt:l}))}}function getSourceNode(n,a){for(var r=a.parentNode===n?a:a.parentNode||a,o;o=r.getLayout(),o==null;)r=r.parentNode===n?r:r.parentNode||r;return{source:r,sourceLayout:o}}function removeNode(n,a,r,o,l){var u=n.tree.getNodeByDataIndex(a),c=n.tree.root,h=getSourceNode(c,u).sourceLayout,f={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(r,{x:h.x+1,y:h.y+1},l,{cb:function(){o.remove(r),n.setItemGraphicEl(a,null)},removeOpt:f}),r.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:f}),u.children.forEach(function(v){removeNodeEdge(v,n,o,l,f)}),removeNodeEdge(u,n,o,l,f)}function getEdgeShape(n,a,r,o,l){var u,c,h,f,v,d,p,g;if(n==="radial"){v=o.rawX,p=o.rawY,d=l.rawX,g=l.rawY;var y=radialCoordinate(v,p),_=radialCoordinate(v,p+(g-p)*r),S=radialCoordinate(d,g+(p-g)*r),x=radialCoordinate(d,g);return{x1:y.x||0,y1:y.y||0,x2:x.x||0,y2:x.y||0,cpx1:_.x||0,cpy1:_.y||0,cpx2:S.x||0,cpy2:S.y||0}}else v=o.x,p=o.y,d=l.x,g=l.y,(a==="LR"||a==="RL")&&(u=v+(d-v)*r,c=p,h=d+(v-d)*r,f=g),(a==="TB"||a==="BT")&&(u=v,c=p+(g-p)*r,h=d,f=g+(p-g)*r);return{x1:v,y1:p,x2:d,y2:g,cpx1:u,cpy1:c,cpx2:h,cpy2:f}}const TreeView$1=TreeView;var inner$e=makeInner();function linkSeriesData(n){var a=n.mainData,r=n.datas;r||(r={main:a},n.datasAttr={main:"data"}),n.datas=n.mainData=null,linkAll(a,r,n),each$f(r,function(o){each$f(a.TRANSFERABLE_METHODS,function(l){o.wrapMethod(l,curry$1(transferInjection,n))})}),a.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,n)),each$f(a.CHANGABLE_METHODS,function(o){a.wrapMethod(o,curry$1(changeInjection,n))}),assert(r[a.dataType]===a)}function transferInjection(n,a){if(isMainData(this)){var r=extend({},inner$e(this).datas);r[this.dataType]=a,linkAll(a,r,n)}else linkSingle(a,this.dataType,inner$e(this).mainData,n);return a}function changeInjection(n,a){return n.struct&&n.struct.update(),a}function cloneShallowInjection(n,a){return each$f(inner$e(a).datas,function(r,o){r!==a&&linkSingle(r.cloneShallow(),o,a,n)}),a}function getLinkedData(n){var a=inner$e(this).mainData;return n==null||a==null?a:inner$e(a).datas[n]}function getLinkedDataAll(){var n=inner$e(this).mainData;return n==null?[{data:n}]:map$1(keys(inner$e(n).datas),function(a){return{type:a,data:inner$e(n).datas[a]}})}function isMainData(n){return inner$e(n).mainData===n}function linkAll(n,a,r){inner$e(n).datas={},each$f(a,function(o,l){linkSingle(o,l,n,r)})}function linkSingle(n,a,r,o){inner$e(r).datas[a]=n,inner$e(n).mainData=r,n.dataType=a,o.struct&&(n[o.structAttr]=o.struct,o.struct[o.datasAttr[a]]=n),n.getLinkedData=getLinkedData,n.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function n(a,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=a||"",this.hostTree=r}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(a,r,o){isFunction(a)&&(o=r,r=a,a=null),a=a||{},isString(a)&&(a={order:a});var l=a.order||"preorder",u=this[a.attr||"children"],c;l==="preorder"&&(c=r.call(o,this));for(var h=0;!c&&h<u.length;h++)u[h].eachNode(a,r,o);l==="postorder"&&r.call(o,this)},n.prototype.updateDepthAndHeight=function(a){var r=0;this.depth=a;for(var o=0;o<this.children.length;o++){var l=this.children[o];l.updateDepthAndHeight(a+1),l.height>r&&(r=l.height)}this.height=r+1},n.prototype.getNodeById=function(a){if(this.getId()===a)return this;for(var r=0,o=this.children,l=o.length;r<l;r++){var u=o[r].getNodeById(a);if(u)return u}},n.prototype.contains=function(a){if(a===this)return!0;for(var r=0,o=this.children,l=o.length;r<l;r++){var u=o[r].contains(a);if(u)return u}},n.prototype.getAncestors=function(a){for(var r=[],o=a?this:this.parentNode;o;)r.push(o),o=o.parentNode;return r.reverse(),r},n.prototype.getAncestorsIndices=function(){for(var a=[],r=this;r;)a.push(r.dataIndex),r=r.parentNode;return a.reverse(),a},n.prototype.getDescendantIndices=function(){var a=[];return this.eachNode(function(r){a.push(r.dataIndex)}),a},n.prototype.getValue=function(a){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(a||"value"),this.dataIndex)},n.prototype.setLayout=function(a,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,a,r)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(a){if(!(this.dataIndex<0)){var r=this.hostTree,o=r.data.getItemModel(this.dataIndex);return o.getModel(a)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(a,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,a,r)},n.prototype.getVisual=function(a){return this.hostTree.data.getItemVisual(this.dataIndex,a)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var a=this.parentNode.children,r=0;r<a.length;++r)if(a[r]===this)return r;return-1}return-1},n.prototype.isAncestorOf=function(a){for(var r=a.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},n.prototype.isDescendantOf=function(a){return a!==this&&a.isAncestorOf(this)},n}(),Tree=function(){function n(a){this.type="tree",this._nodes=[],this.hostModel=a}return n.prototype.eachNode=function(a,r,o){this.root.eachNode(a,r,o)},n.prototype.getNodeByDataIndex=function(a){var r=this.data.getRawIndex(a);return this._nodes[r]},n.prototype.getNodeById=function(a){return this.root.getNodeById(a)},n.prototype.update=function(){for(var a=this.data,r=this._nodes,o=0,l=r.length;o<l;o++)r[o].dataIndex=-1;for(var o=0,l=a.count();o<l;o++)r[a.getRawIndex(o)].dataIndex=o},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(a,r,o){var l=new n(r),u=[],c=1;h(a);function h(d,p){var g=d.value;c=Math.max(c,isArray$1(g)?g.length:1),u.push(d);var y=new TreeNode(convertOptionIdName(d.name,""),l);p?addChild(y,p):l.root=y,l._nodes.push(y);var _=d.children;if(_)for(var S=0;S<_.length;S++)h(_[S],y)}l.root.updateDepthAndHeight(0);var f=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:c}).dimensions,v=new SeriesData$1(f,r);return v.initData(u),o&&o(v),linkSeriesData({mainData:v,struct:l,structAttr:"tree"}),l.update(),l},n}();function addChild(n,a){var r=a.children;n.parentNode!==a&&(r.push(n),n.parentNode=a)}const Tree$1=Tree;function retrieveTargetInfo(n,a,r){if(n&&indexOf(a,n.type)>=0){var o=r.getData().tree.root,l=n.targetNode;if(isString(l)&&(l=o.getNodeById(l)),l&&o.contains(l))return{node:l};var u=n.targetNodeId;if(u!=null&&(l=o.getNodeById(u)))return{node:l}}}function getPathToRoot(n){for(var a=[];n;)n=n.parentNode,n&&a.push(n);return a.reverse()}function aboveViewRoot(n,a){var r=getPathToRoot(n);return indexOf(r,a)>=0}function wrapTreePathInfo(n,a){for(var r=[];n;){var o=n.dataIndex;r.push({name:n.name,dataIndex:o,value:a.getRawValue(o)}),n=n.parentNode}return r.reverse(),r}var TreeSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return a.prototype.getInitialData=function(r){var o={name:r.name,children:r.data},l=r.leaves||{},u=new Model$1(l,this,this.ecModel),c=Tree$1.createTree(o,this,h);function h(p){p.wrapMethod("getItemModel",function(g,y){var _=c.getNodeByDataIndex(y);return _&&_.children.length&&_.isExpand||(g.parentModel=u),g})}var f=0;c.eachNode("preorder",function(p){p.depth>f&&(f=p.depth)});var v=r.expandAndCollapse,d=v&&r.initialTreeDepth>=0?r.initialTreeDepth:f;return c.root.eachNode("preorder",function(p){var g=p.hostTree.data.getRawDataItem(p.dataIndex);p.isExpand=g&&g.collapsed!=null?!g.collapsed:p.depth<=d}),c.data},a.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},a.prototype.setZoom=function(r){this.option.zoom=r},a.prototype.setCenter=function(r){this.option.center=r},a.prototype.formatTooltip=function(r,o,l){for(var u=this.getData().tree,c=u.root.children[0],h=u.getNodeByDataIndex(r),f=h.getValue(),v=h.name;h&&h!==c;)v=h.parentNode.name+"."+v,h=h.parentNode;return createTooltipMarkup("nameValue",{name:v,value:f,noValue:isNaN(f)||f==null})},a.prototype.getDataParams=function(r){var o=n.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(r);return o.treeAncestors=wrapTreePathInfo(l,this),o.collapsed=!l.isExpand,o},a.type="series.tree",a.layoutMode="box",a.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},a}(SeriesModel$1);const TreeSeriesModel$1=TreeSeriesModel;function eachAfter(n,a,r){for(var o=[n],l=[],u;u=o.pop();)if(l.push(u),u.isExpand){var c=u.children;if(c.length)for(var h=0;h<c.length;h++)o.push(c[h])}for(;u=l.pop();)a(u,r)}function eachBefore(n,a){for(var r=[n],o;o=r.pop();)if(a(o),o.isExpand){var l=o.children;if(l.length)for(var u=l.length-1;u>=0;u--)r.push(l[u])}}function treeLayout(n,a){n.eachSeriesByType("tree",function(r){commonLayout(r,a)})}function commonLayout(n,a){var r=getViewRect$4(n,a);n.layoutInfo=r;var o=n.get("layout"),l=0,u=0,c=null;o==="radial"?(l=2*Math.PI,u=Math.min(r.height,r.width)/2,c=separation(function(b,C){return(b.parentNode===C.parentNode?1:2)/b.depth})):(l=r.width,u=r.height,c=separation());var h=n.getData().tree.root,f=h.children[0];if(f){init(h),eachAfter(f,firstWalk,c),h.hierNode.modifier=-f.hierNode.prelim,eachBefore(f,secondWalk);var v=f,d=f,p=f;eachBefore(f,function(b){var C=b.getLayout().x;C<v.getLayout().x&&(v=b),C>d.getLayout().x&&(d=b),b.depth>p.depth&&(p=b)});var g=v===d?1:c(v,d)/2,y=g-v.getLayout().x,_=0,S=0,x=0,T=0;if(o==="radial")_=l/(d.getLayout().x+g+y),S=u/(p.depth-1||1),eachBefore(f,function(b){x=(b.getLayout().x+y)*_,T=(b.depth-1)*S;var C=radialCoordinate(x,T);b.setLayout({x:C.x,y:C.y,rawX:x,rawY:T},!0)});else{var A=n.getOrient();A==="RL"||A==="LR"?(S=u/(d.getLayout().x+g+y),_=l/(p.depth-1||1),eachBefore(f,function(b){T=(b.getLayout().x+y)*S,x=A==="LR"?(b.depth-1)*_:l-(b.depth-1)*_,b.setLayout({x,y:T},!0)})):(A==="TB"||A==="BT")&&(_=l/(d.getLayout().x+g+y),S=u/(p.depth-1||1),eachBefore(f,function(b){x=(b.getLayout().x+y)*_,T=A==="TB"?(b.depth-1)*S:u-(b.depth-1)*S,b.setLayout({x,y:T},!0)}))}}}function treeVisual(n){n.eachSeriesByType("tree",function(a){var r=a.getData(),o=r.tree;o.eachNode(function(l){var u=l.getModel(),c=u.getModel("itemStyle").getItemStyle(),h=r.ensureUniqueItemVisual(l.dataIndex,"style");extend(h,c)})})}function installTreeAction(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(a,r){r.eachComponent({mainType:"series",subType:"tree",query:a},function(o){var l=a.dataIndex,u=o.getData().tree,c=u.getNodeByDataIndex(l);c.isExpand=!c.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(a,r,o){r.eachComponent({mainType:"series",subType:"tree",query:a},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,a,void 0,o);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}function install$H(n){n.registerChartView(TreeView$1),n.registerSeriesModel(TreeSeriesModel$1),n.registerLayout(treeLayout),n.registerVisual(treeVisual),installTreeAction(n)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(n){for(var a=0;a<actionTypes.length;a++)n.registerAction({type:actionTypes[a],update:"updateView"},noop);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,o){o.eachComponent({mainType:"series",subType:"treemap",query:r},l);function l(u,c){var h=["treemapZoomToNode","treemapRootToNode"],f=retrieveTargetInfo(r,h,u);if(f){var v=u.getViewRoot();v&&(r.direction=aboveViewRoot(v,f.node)?"rollUp":"drillDown"),u.resetViewRoot(f.node)}}})}function enableAriaDecalForTree(n){var a=n.getData(),r=a.tree,o={};r.eachNode(function(l){for(var u=l;u&&u.depth>1;)u=u.parentNode;var c=getDecalFromPalette(n.ecModel,u.name||u.dataIndex+"",o);l.setVisual("decal",c)})}var TreemapSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.preventUsingHoverLayer=!0,r}return a.prototype.getInitialData=function(r,o){var l={name:r.name,children:r.data};completeTreeValue$1(l);var u=r.levels||[],c=this.designatedVisualItemStyle={},h=new Model$1({itemStyle:c},this,o);u=r.levels=setDefault(u,o);var f=map$1(u||[],function(p){return new Model$1(p,h,o)},this),v=Tree$1.createTree(l,this,d);function d(p){p.wrapMethod("getItemModel",function(g,y){var _=v.getNodeByDataIndex(y),S=_?f[_.depth]:null;return g.parentModel=S||h,g})}return v.data},a.prototype.optionUpdated=function(){this.resetViewRoot()},a.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=this.getRawValue(r),h=u.getName(r);return createTooltipMarkup("nameValue",{name:h,value:c})},a.prototype.getDataParams=function(r){var o=n.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(r);return o.treeAncestors=wrapTreePathInfo(l,this),o.treePathInfo=o.treeAncestors,o},a.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,r)},a.prototype.mapIdToIndex=function(r){var o=this._idIndexMap;o||(o=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=o.get(r);return l==null&&o.set(r,l=this._idIndexMapCount++),l},a.prototype.getViewRoot=function(){return this._viewRoot},a.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var o=this.getRawData().tree.root;(!r||r!==o&&!o.contains(r))&&(this._viewRoot=o)},a.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},a.type="series.treemap",a.layoutMode="box",a.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},a}(SeriesModel$1);function completeTreeValue$1(n){var a=0;each$f(n.children,function(o){completeTreeValue$1(o);var l=o.value;isArray$1(l)&&(l=l[0]),a+=l});var r=n.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=a),r<0&&(r=0),isArray$1(n.value)?n.value[0]=r:n.value=r}function setDefault(n,a){var r=normalizeToArray(a.get("color")),o=normalizeToArray(a.get(["aria","decal","decals"]));if(!!r){n=n||[];var l,u;each$f(n,function(h){var f=new Model$1(h),v=f.get("color"),d=f.get("decal");(f.get(["itemStyle","color"])||v&&v!=="none")&&(l=!0),(f.get(["itemStyle","decal"])||d&&d!=="none")&&(u=!0)});var c=n[0]||(n[0]={});return l||(c.color=r.slice()),!u&&o&&(c.decal=o.slice()),n}}const TreemapSeriesModel$1=TreemapSeriesModel;var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function n(a){this.group=new Group$4,a.add(this.group)}return n.prototype.render=function(a,r,o,l){var u=a.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!u.get("show")||!o)){var h=u.getModel("itemStyle"),f=u.getModel("emphasis"),v=h.getModel("textStyle"),d=f.getModel(["itemStyle","textStyle"]),p={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,p,v),this._renderContent(a,p,h,f,v,d,l),positionElement(c,p.pos,p.box)}},n.prototype._prepare=function(a,r,o){for(var l=a;l;l=l.parentNode){var u=convertOptionIdName(l.getModel().get("name"),""),c=o.getTextRect(u),h=Math.max(c.width+TEXT_PADDING*2,r.emptyItemWidth);r.totalWidth+=h+ITEM_GAP,r.renderList.push({node:l,text:u,width:h})}},n.prototype._renderContent=function(a,r,o,l,u,c,h){for(var f=0,v=r.emptyItemWidth,d=a.get(["breadcrumb","height"]),p=getAvailableSize(r.pos,r.box),g=r.totalWidth,y=r.renderList,_=l.getModel("itemStyle").getItemStyle(),S=y.length-1;S>=0;S--){var x=y[S],T=x.node,A=x.width,b=x.text;g>p.width&&(g-=A-v,A=v,b=null);var C=new Polygon$1({shape:{points:makeItemPoints(f,0,A,d,S===y.length-1,S===0)},style:defaults(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText$1({style:createTextStyle$1(u,{text:b})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(h,T)});C.disableLabelAnimation=!0,C.getTextContent().ensureState("emphasis").style=createTextStyle$1(c,{text:b}),C.ensureState("emphasis").style=_,toggleHoverEmphasis(C,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(C),packEventData(C,a,T),f+=A+ITEM_GAP}},n.prototype.remove=function(){this.group.removeAll()},n}();function makeItemPoints(n,a,r,o,l,u){var c=[[l?n:n-ARRAY_LENGTH,a],[n+r,a],[n+r,a+o],[l?n:n-ARRAY_LENGTH,a+o]];return!u&&c.splice(2,0,[n+r+ARRAY_LENGTH,a+o/2]),!l&&c.push([n,a+o/2]),c}function packEventData(n,a,r){getECData(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&wrapTreePathInfo(r,a)}}const Breadcrumb$1=Breadcrumb;var AnimationWrap=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(a,r,o,l,u){return this._elExistsMap[a.id]?!1:(this._elExistsMap[a.id]=!0,this._storage.push({el:a,target:r,duration:o,delay:l,easing:u}),!0)},n.prototype.finished=function(a){return this._finishedCallback=a,this},n.prototype.start=function(){for(var a=this,r=this._storage.length,o=function(){r--,r<=0&&(a._storage.length=0,a._elExistsMap={},a._finishedCallback&&a._finishedCallback())},l=0,u=this._storage.length;l<u;l++){var c=this._storage[l];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:o,aborted:o})}return this},n}();function createWrap(){return new AnimationWrap}var Group$2=Group$4,Rect$1=Rect$3,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(n){var a=getStateItemStyle(n);return a.stroke=a.fill=a.lineWidth=null,a},inner$d=makeInner(),TreemapView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._state="ready",r._storage=createStorage(),r}return a.prototype.render=function(r,o,l,u){var c=o.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(c,r)<0)){this.seriesModel=r,this.api=l,this.ecModel=o;var h=["treemapZoomToNode","treemapRootToNode"],f=retrieveTargetInfo(u,h,r),v=u&&u.type,d=r.layoutInfo,p=!this._oldTree,g=this._storage,y=v==="treemapRootToNode"&&f&&g?{rootNodeGroup:g.nodeGroup[f.node.getRawIndex()],direction:u.direction}:null,_=this._giveContainerGroup(d),S=r.get("animation"),x=this._doRender(_,r,y);S&&!p&&(!v||v==="treemapZoomToNode"||v==="treemapRootToNode")?this._doAnimation(_,x,r,y):x.renderFinally(),this._resetController(l),this._renderBreadcrumb(r,l,f)}},a.prototype._giveContainerGroup=function(r){var o=this._containerGroup;return o||(o=this._containerGroup=new Group$2,this._initEvents(o),this.group.add(o)),o.x=r.x,o.y=r.y,o},a.prototype._doRender=function(r,o,l){var u=o.getData().tree,c=this._oldTree,h=createStorage(),f=createStorage(),v=this._storage,d=[];function p(x,T,A,b){return renderNode(o,f,v,l,h,d,x,T,A,b)}y(u.root?[u.root]:[],c&&c.root?[c.root]:[],r,u===c||!c,0);var g=_(v);return this._oldTree=u,this._storage=f,{lastsForAnimation:h,willDeleteEls:g,renderFinally:S};function y(x,T,A,b,C){b?(T=x,each$f(x,function(D,M){!D.isRemoved()&&w(M,M)})):new DataDiffer$1(T,x,E,E).add(w).update(w).remove(curry$1(w,null)).execute();function E(D){return D.getId()}function w(D,M){var P=D!=null?x[D]:null,L=M!=null?T[M]:null,I=p(P,L,A,C);I&&y(P&&P.viewChildren||[],L&&L.viewChildren||[],I,b,C+1)}}function _(x){var T=createStorage();return x&&each$f(x,function(A,b){var C=T[b];each$f(A,function(E){E&&(C.push(E),inner$d(E).willDelete=!0)})}),T}function S(){each$f(g,function(x){each$f(x,function(T){T.parent&&T.parent.remove(T)})}),each$f(d,function(x){x.invisible=!0,x.dirty()})}},a.prototype._doAnimation=function(r,o,l,u){var c=l.get("animationDurationUpdate"),h=l.get("animationEasing"),f=(isFunction(c)?0:c)||0,v=(isFunction(h)?null:h)||"cubicOut",d=createWrap();each$f(o.willDeleteEls,function(p,g){each$f(p,function(y,_){if(!y.invisible){var S=y.parent,x,T=inner$d(S);if(u&&u.direction==="drillDown")x=S===u.rootNodeGroup?{shape:{x:0,y:0,width:T.nodeWidth,height:T.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var A=0,b=0;T.willDelete||(A=T.nodeWidth/2,b=T.nodeHeight/2),x=g==="nodeGroup"?{x:A,y:b,style:{opacity:0}}:{shape:{x:A,y:b,width:0,height:0},style:{opacity:0}}}x&&d.add(y,x,f,0,v)}})}),each$f(this._storage,function(p,g){each$f(p,function(y,_){var S=o.lastsForAnimation[g][_],x={};!S||(y instanceof Group$4?S.oldX!=null&&(x.x=y.x,x.y=y.y,y.x=S.oldX,y.y=S.oldY):(S.oldShape&&(x.shape=extend({},y.shape),y.setShape(S.oldShape)),S.fadein?(y.setStyle("opacity",0),x.style={opacity:1}):y.style.opacity!==1&&(x.style={opacity:1})),d.add(y,x,f,0,v))})},this),this._state="animating",d.finished(bind$1(function(){this._state="ready",o.renderFinally()},this)).start()},a.prototype._resetController=function(r){var o=this._controller;o||(o=this._controller=new RoamController$1(r.getZr()),o.enable(this.seriesModel.get("roam")),o.on("pan",bind$1(this._onPan,this)),o.on("zoom",bind$1(this._onZoom,this)));var l=new BoundingRect$1(0,0,r.getWidth(),r.getHeight());o.setPointerChecker(function(u,c,h){return l.contain(c,h)})},a.prototype._clearController=function(){var r=this._controller;r&&(r.dispose(),r=null)},a.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>DRAG_THRESHOLD||Math.abs(r.dy)>DRAG_THRESHOLD)){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+r.dx,y:l.y+r.dy,width:l.width,height:l.height}})}},a.prototype._onZoom=function(r){var o=r.originX,l=r.originY;if(this._state!=="animating"){var u=this.seriesModel.getData().tree.root;if(!u)return;var c=u.getLayout();if(!c)return;var h=new BoundingRect$1(c.x,c.y,c.width,c.height),f=this.seriesModel.layoutInfo;o-=f.x,l-=f.y;var v=create$1();translate(v,v,[-o,-l]),scale$1(v,v,[r.scale,r.scale]),translate(v,v,[o,l]),h.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},a.prototype._initEvents=function(r){var o=this;r.on("click",function(l){if(o._state==="ready"){var u=o.seriesModel.get("nodeClick",!0);if(!!u){var c=o.findTarget(l.offsetX,l.offsetY);if(!!c){var h=c.node;if(h.getLayout().isLeafRoot)o._rootToNode(c);else if(u==="zoomToNode")o._zoomToNode(c);else if(u==="link"){var f=h.hostTree.data.getItemModel(h.dataIndex),v=f.get("link",!0),d=f.get("target",!0)||"blank";v&&windowOpen(v,d)}}}}},this)},a.prototype._renderBreadcrumb=function(r,o,l){var u=this;l||(l=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(o.getWidth()/2,o.getHeight()/2),l||(l={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb$1(this.group))).render(r,o,l.node,function(c){u._state!=="animating"&&(aboveViewRoot(r.getViewRoot(),c)?u._rootToNode({node:c}):u._zoomToNode({node:c}))})},a.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},a.prototype.dispose=function(){this._clearController()},a.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},a.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},a.prototype.findTarget=function(r,o){var l,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(c){var h=this._storage.background[c.getRawIndex()];if(h){var f=h.transformCoordToLocal(r,o),v=h.shape;if(v.x<=f[0]&&f[0]<=v.x+v.width&&v.y<=f[1]&&f[1]<=v.y+v.height)l={node:c,offsetX:f[0],offsetY:f[1]};else return!1}},this),l},a.type="treemap",a}(ChartView$1);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(n,a,r,o,l,u,c,h,f,v){if(!c)return;var d=c.getLayout(),p=n.getData(),g=c.getModel();if(p.setItemGraphicEl(c.dataIndex,null),!d||!d.isInView)return;var y=d.width,_=d.height,S=d.borderWidth,x=d.invisible,T=c.getRawIndex(),A=h&&h.getRawIndex(),b=c.viewChildren,C=d.upperHeight,E=b&&b.length,w=g.getModel("itemStyle"),D=g.getModel(["emphasis","itemStyle"]),M=g.getModel(["blur","itemStyle"]),P=g.getModel(["select","itemStyle"]),L=w.get("borderRadius")||0,I=X("nodeGroup",Group$2);if(!I)return;if(f.add(I),I.x=d.x||0,I.y=d.y||0,I.markRedraw(),inner$d(I).nodeWidth=y,inner$d(I).nodeHeight=_,d.isAboveViewRoot)return I;var R=X("background",Rect$1,v,Z2_BG);R&&z(I,R,E&&d.upperLabelHeight);var O=g.getModel("emphasis"),N=O.get("focus"),V=O.get("blurScope"),B=O.get("disabled"),G=N==="ancestor"?c.getAncestorsIndices():N==="descendant"?c.getDescendantIndices():N;if(E)isHighDownDispatcher(I)&&setAsHighDownDispatcher(I,!1),R&&(setAsHighDownDispatcher(R,!B),p.setItemGraphicEl(c.dataIndex,R),enableHoverFocus(R,G,V));else{var F=X("content",Rect$1,v,Z2_CONTENT);F&&H(I,F),R.disableMorphing=!0,R&&isHighDownDispatcher(R)&&setAsHighDownDispatcher(R,!1),setAsHighDownDispatcher(I,!B),p.setItemGraphicEl(c.dataIndex,I),enableHoverFocus(I,G,V)}return I;function z(Q,q,ee){var K=getECData(q);if(K.dataIndex=c.dataIndex,K.seriesIndex=n.seriesIndex,q.setShape({x:0,y:0,width:y,height:_,r:L}),x)U(q);else{q.invisible=!1;var W=c.getVisual("style"),j=W.stroke,ae=getItemStyleNormal(w);ae.fill=j;var re=getStateItemStyle(D);re.fill=D.get("borderColor");var ne=getStateItemStyle(M);ne.fill=M.get("borderColor");var ie=getStateItemStyle(P);if(ie.fill=P.get("borderColor"),ee){var oe=y-2*S;Y(q,j,W.opacity,{x:S,y:0,width:oe,height:C})}else q.removeTextContent();q.setStyle(ae),q.ensureState("emphasis").style=re,q.ensureState("blur").style=ne,q.ensureState("select").style=ie,setDefaultStateProxy(q)}Q.add(q)}function H(Q,q){var ee=getECData(q);ee.dataIndex=c.dataIndex,ee.seriesIndex=n.seriesIndex;var K=Math.max(y-2*S,0),W=Math.max(_-2*S,0);if(q.culling=!0,q.setShape({x:S,y:S,width:K,height:W,r:L}),x)U(q);else{q.invisible=!1;var j=c.getVisual("style"),ae=j.fill,re=getItemStyleNormal(w);re.fill=ae,re.decal=j.decal;var ne=getStateItemStyle(D),ie=getStateItemStyle(M),oe=getStateItemStyle(P);Y(q,ae,j.opacity,null),q.setStyle(re),q.ensureState("emphasis").style=ne,q.ensureState("blur").style=ie,q.ensureState("select").style=oe,setDefaultStateProxy(q)}Q.add(q)}function U(Q){!Q.invisible&&u.push(Q)}function Y(Q,q,ee,K){var W=g.getModel(K?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),j=convertOptionIdName(g.get("name"),null),ae=W.getShallow("show");setLabelStyle(Q,getLabelStatesModels(g,K?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:ae?j:null,inheritColor:q,defaultOpacity:ee,labelFetcher:n,labelDataIndex:c.dataIndex});var re=Q.getTextContent();if(!!re){var ne=re.style,ie=normalizeCssArray$1(ne.padding||0);K&&(Q.setTextConfig({layoutRect:K}),re.disableLabelLayout=!0),re.beforeUpdate=function(){var le=Math.max((K?K.width:Q.shape.width)-ie[1]-ie[3],0),se=Math.max((K?K.height:Q.shape.height)-ie[0]-ie[2],0);(ne.width!==le||ne.height!==se)&&re.setStyle({width:le,height:se})},ne.truncateMinChar=2,ne.lineOverflow="truncate",Z(ne,K,d);var oe=re.getState("emphasis");Z(oe?oe.style:null,K,d)}}function Z(Q,q,ee){var K=Q?Q.text:null;if(!q&&ee.isLeafRoot&&K!=null){var W=n.get("drillDownIcon",!0);Q.text=W?W+" "+K:K}}function X(Q,q,ee,K){var W=A!=null&&r[Q][A],j=l[Q];return W?(r[Q][A]=null,J(j,W)):x||(W=new q,W instanceof Displayable$1&&(W.z2=calculateZ2(ee,K)),te(j,W)),a[Q][T]=W}function J(Q,q){var ee=Q[T]={};q instanceof Group$2?(ee.oldX=q.x,ee.oldY=q.y):ee.oldShape=extend({},q.shape)}function te(Q,q){var ee=Q[T]={},K=c.parentNode,W=q instanceof Group$4;if(K&&(!o||o.direction==="drillDown")){var j=0,ae=0,re=l.background[K.getRawIndex()];!o&&re&&re.oldShape&&(j=re.oldShape.width,ae=re.oldShape.height),W?(ee.oldX=0,ee.oldY=ae):ee.oldShape={x:j,y:ae,width:0,height:0}}ee.fadein=!W}}function calculateZ2(n,a){return n*Z2_BASE+a}const TreemapView$1=TreemapView;var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function n(a){var r=a.mappingMethod,o=a.type,l=this.option=clone$4(a);this.type=o,this.mappingMethod=r,this._normalizeData=normalizers[r];var u=n.visualHandlers[o];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[r],r==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):r==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(r!=="linear"||l.dataExtent),normalizeVisualRange(l))}return n.prototype.mapValueToVisual=function(a){var r=this._normalizeData(a);return this._normalizedToVisual(r,a)},n.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},n.listVisualTypes=function(){return keys(n.visualHandlers)},n.isValidType=function(a){return n.visualHandlers.hasOwnProperty(a)},n.eachVisual=function(a,r,o){isObject$3(a)?each$f(a,r,o):r.call(o,a)},n.mapVisual=function(a,r,o){var l,u=isArray$1(a)?[]:isObject$3(a)?{}:(l=!0,null);return n.eachVisual(a,function(c,h){var f=r.call(o,c,h);l?u=f:u[h]=f}),u},n.retrieveVisuals=function(a){var r={},o;return a&&each$c(n.visualHandlers,function(l,u){a.hasOwnProperty(u)&&(r[u]=a[u],o=!0)}),o?r:null},n.prepareVisualTypes=function(a){if(isArray$1(a))a=a.slice();else if(isObject(a)){var r=[];each$c(a,function(o,l){r.push(l)}),a=r}else return[];return a.sort(function(o,l){return l==="color"&&o!=="color"&&o.indexOf("color")===0?1:-1}),a},n.dependsOn=function(a,r){return r==="color"?!!(a&&a.indexOf(r)===0):a===r},n.findPieceIndex=function(a,r,o){for(var l,u=1/0,c=0,h=r.length;c<h;c++){var f=r[c].value;if(f!=null){if(f===a||isString(f)&&f===a+"")return c;o&&g(f,c)}}for(var c=0,h=r.length;c<h;c++){var v=r[c],d=v.interval,p=v.close;if(d){if(d[0]===-1/0){if(littleThan(p[1],a,d[1]))return c}else if(d[1]===1/0){if(littleThan(p[0],d[0],a))return c}else if(littleThan(p[0],d[0],a)&&littleThan(p[1],a,d[1]))return c;o&&g(d[0],c),o&&g(d[1],c)}}if(o)return a===1/0?r.length-1:a===-1/0?0:l;function g(y,_){var S=Math.abs(y-a);S<u&&(u=S,l=_)}},n.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var a=this.option;return bind$1(a.mappingMethod==="category"?function(r,o){return!o&&(r=this._normalizeData(r)),doMapCategory.call(this,r)}:function(r,o,l){var u=!!l;return!o&&(r=this._normalizeData(r)),l=fastLerp(r,a.parsedVisual,l),u?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(a){return stringify(fastLerp(a,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(a,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=stringify(fastLerp(a,this.option.parsedVisual),"rgba")),o},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(a,r){return modifyHSL(a,r)}),colorSaturation:makePartialColorVisualHandler(function(a,r){return modifyHSL(a,null,r)}),colorLightness:makePartialColorVisualHandler(function(a,r){return modifyHSL(a,null,null,r)}),colorAlpha:makePartialColorVisualHandler(function(a,r){return modifyAlpha(a,r)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(a,r,o){var l=this.mapValueToVisual(a);o("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(a,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=doMapToArray.call(this,a)),o},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},n}();function preprocessForPiecewise(n){var a=n.pieceList;n.hasSpecialVisual=!1,each$f(a,function(r,o){r.originIndex=o,r.visual!=null&&(n.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(n){var a=n.categories,r=n.categoryMap={},o=n.visual;if(each$c(a,function(c,h){r[c]=h}),!isArray$1(o)){var l=[];isObject$3(o)?each$c(o,function(c,h){var f=r[h];l[f!=null?f:CATEGORY_DEFAULT_VISUAL_INDEX]=c}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=o,o=setVisualToOption(n,l)}for(var u=a.length-1;u>=0;u--)o[u]==null&&(delete r[a[u]],a.pop())}function normalizeVisualRange(n,a){var r=n.visual,o=[];isObject$3(r)?each$c(r,function(u){o.push(u)}):r!=null&&o.push(r);var l={color:1,symbol:1};!a&&o.length===1&&!l.hasOwnProperty(n.type)&&(o[1]=o[0]),setVisualToOption(n,o)}function makePartialColorVisualHandler(n){return{applyVisual:function(a,r,o){var l=this.mapValueToVisual(a);o("color",n(r("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(n){var a=this.option.visual;return a[Math.round(linearMap$2(n,[0,1],[0,a.length-1],!0))]||{}}function makeApplyVisual(n){return function(a,r,o){o(n,this.mapValueToVisual(a))}}function doMapCategory(n){var a=this.option.visual;return a[this.option.loop&&n!==CATEGORY_DEFAULT_VISUAL_INDEX?n%a.length:n]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(n){return{linear:function(a){return linearMap$2(a,n,this.option.visual,!0)},category:doMapCategory,piecewise:function(a,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=linearMap$2(a,n,this.option.visual,!0)),o},fixed:doMapFixed}}function getSpecifiedVisual(n){var a=this.option,r=a.pieceList;if(a.hasSpecialVisual){var o=VisualMapping.findPieceIndex(n,r),l=r[o];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(n,a){return n.visual=a,n.type==="color"&&(n.parsedVisual=map$1(a,function(r){var o=parse(r);return!o&&{}.NODE_ENV!=="production"&&warn("'"+r+"' is an illegal color, fallback to '#000000'",!0),o||[0,0,0,1]})),a}var normalizers={linear:function(n){return linearMap$2(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var a=this.option.pieceList,r=VisualMapping.findPieceIndex(n,a,!0);if(r!=null)return linearMap$2(r,[0,a.length-1],[0,1],!0)},category:function(n){var a=this.option.categories?this.option.categoryMap[n]:n;return a==null?CATEGORY_DEFAULT_VISUAL_INDEX:a},fixed:noop};function littleThan(n,a,r){return n?a<=r:a<r}const VisualMapping$1=VisualMapping;var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(n){var a=n.getData().tree,r=a.root;r.isRemoved()||travelTree(r,{},n.getViewRoot().getAncestors(),n)}};function travelTree(n,a,r,o){var l=n.getModel(),u=n.getLayout(),c=n.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var h=l.getModel(ITEM_STYLE_NORMAL),f=buildVisuals(h,a,o),v=c.ensureUniqueItemVisual(n.dataIndex,"style"),d=h.get("borderColor"),p=h.get("borderColorSaturation"),g;p!=null&&(g=calculateColor(f),d=calculateBorderColor(p,g)),v.stroke=d;var y=n.viewChildren;if(!y||!y.length)g=calculateColor(f),v.fill=g;else{var _=buildVisualMapping(n,l,u,h,f,y);each$f(y,function(S,x){if(S.depth>=r.length||S===r[S.depth]){var T=mapVisual$1(l,f,S,x,_,o);travelTree(S,T,r,o)}})}}}function buildVisuals(n,a,r){var o=extend({},a),l=r.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){l[u]=a[u];var c=n.get(u);l[u]=null,c!=null&&(o[u]=c)}),o}function calculateColor(n){var a=getValueVisualDefine(n,"color");if(a){var r=getValueVisualDefine(n,"colorAlpha"),o=getValueVisualDefine(n,"colorSaturation");return o&&(a=modifyHSL(a,null,null,o)),r&&(a=modifyAlpha(a,r)),a}}function calculateBorderColor(n,a){return a!=null?modifyHSL(a,null,null,n):null}function getValueVisualDefine(n,a){var r=n[a];if(r!=null&&r!=="none")return r}function buildVisualMapping(n,a,r,o,l,u){if(!(!u||!u.length)){var c=getRangeVisual(a,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(a,"colorAlpha")||getRangeVisual(a,"colorSaturation"));if(!!c){var h=a.get("visualMin"),f=a.get("visualMax"),v=r.dataExtent.slice();h!=null&&h<v[0]&&(v[0]=h),f!=null&&f>v[1]&&(v[1]=f);var d=a.get("colorMappingBy"),p={type:c.name,dataExtent:v,visual:c.range};p.type==="color"&&(d==="index"||d==="id")?(p.mappingMethod="category",p.loop=!0):p.mappingMethod="linear";var g=new VisualMapping$1(p);return inner$c(g).drColorMappingBy=d,g}}}function getRangeVisual(n,a){var r=n.get(a);return isArray$1(r)&&r.length?{name:a,range:r}:null}function mapVisual$1(n,a,r,o,l,u){var c=extend({},a);if(l){var h=l.type,f=h==="color"&&inner$c(l).drColorMappingBy,v=f==="index"?o:f==="id"?u.mapIdToIndex(r.getId()):r.getValue(n.get("visualDimension"));c[h]=l.mapValueToVisual(v)}return c}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(n,a,r,o){var l=r.getWidth(),u=r.getHeight(),c=n.option,h=getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),f=c.size||[],v=parsePercent(retrieveValue(h.width,f[0]),l),d=parsePercent(retrieveValue(h.height,f[1]),u),p=o&&o.type,g=["treemapZoomToNode","treemapRootToNode"],y=retrieveTargetInfo(o,g,n),_=p==="treemapRender"||p==="treemapMove"?o.rootRect:null,S=n.getViewRoot(),x=getPathToRoot(S);if(p!=="treemapMove"){var T=p==="treemapZoomToNode"?estimateRootSize(n,y,S,v,d):_?[_.width,_.height]:[v,d],A=c.sort;A&&A!=="asc"&&A!=="desc"&&(A="desc");var b={squareRatio:c.squareRatio,sort:A,leafDepth:c.leafDepth};S.hostTree.clearLayouts();var C={x:0,y:0,width:T[0],height:T[1],area:T[0]*T[1]};S.setLayout(C),squarify(S,b,!1,0),C=S.getLayout(),each$b(x,function(w,D){var M=(x[D+1]||S).getValue();w.setLayout(extend({dataExtent:[M,M],borderWidth:0,upperHeight:0},C))})}var E=n.getData().tree.root;E.setLayout(calculateRootPosition(h,_,y),!0),n.setLayoutInfo(h),prunning(E,new BoundingRect$1(-h.x,-h.y,l,u),x,S,0)}};function squarify(n,a,r,o){var l,u;if(!n.isRemoved()){var c=n.getLayout();l=c.width,u=c.height;var h=n.getModel(),f=h.get(PATH_BORDER_WIDTH),v=h.get(PATH_GAP_WIDTH)/2,d=getUpperLabelHeight(h),p=Math.max(f,d),g=f-v,y=p-v;n.setLayout({borderWidth:f,upperHeight:p,upperLabelHeight:d},!0),l=mathMax$3(l-2*g,0),u=mathMax$3(u-g-y,0);var _=l*u,S=initChildren$1(n,h,_,a,r,o);if(!!S.length){var x={x:g,y,width:l,height:u},T=mathMin$3(l,u),A=1/0,b=[];b.area=0;for(var C=0,E=S.length;C<E;){var w=S[C];b.push(w),b.area+=w.getLayout().area;var D=worst(b,T,a.squareRatio);D<=A?(C++,A=D):(b.area-=b.pop().getLayout().area,position(b,T,x,v,!1),T=mathMin$3(x.width,x.height),b.length=b.area=0,A=1/0)}if(b.length&&position(b,T,x,v,!0),!r){var M=h.get("childrenVisibleMin");M!=null&&_<M&&(r=!0)}for(var C=0,E=S.length;C<E;C++)squarify(S[C],a,r,o+1)}}}function initChildren$1(n,a,r,o,l,u){var c=n.children||[],h=o.sort;h!=="asc"&&h!=="desc"&&(h=null);var f=o.leafDepth!=null&&o.leafDepth<=u;if(l&&!f)return n.viewChildren=[];c=filter(c,function(y){return!y.isRemoved()}),sort$1(c,h);var v=statistic(a,c,h);if(v.sum===0)return n.viewChildren=[];if(v.sum=filterByThreshold(a,r,v.sum,h,c),v.sum===0)return n.viewChildren=[];for(var d=0,p=c.length;d<p;d++){var g=c[d].getValue()/v.sum*r;c[d].setLayout({area:g})}return f&&(c.length&&n.setLayout({isLeafRoot:!0},!0),c.length=0),n.viewChildren=c,n.setLayout({dataExtent:v.dataExtent},!0),c}function filterByThreshold(n,a,r,o,l){if(!o)return r;for(var u=n.get("visibleMin"),c=l.length,h=c,f=c-1;f>=0;f--){var v=l[o==="asc"?c-f-1:f].getValue();v/r*a<u&&(h=f,r-=v)}return o==="asc"?l.splice(0,c-h):l.splice(h,c-h),r}function sort$1(n,a){return a&&n.sort(function(r,o){var l=a==="asc"?r.getValue()-o.getValue():o.getValue()-r.getValue();return l===0?a==="asc"?r.dataIndex-o.dataIndex:o.dataIndex-r.dataIndex:l}),n}function statistic(n,a,r){for(var o=0,l=0,u=a.length;l<u;l++)o+=a[l].getValue();var c=n.get("visualDimension"),h;return!a||!a.length?h=[NaN,NaN]:c==="value"&&r?(h=[a[a.length-1].getValue(),a[0].getValue()],r==="asc"&&h.reverse()):(h=[1/0,-1/0],each$b(a,function(f){var v=f.getValue(c);v<h[0]&&(h[0]=v),v>h[1]&&(h[1]=v)})),{sum:o,dataExtent:h}}function worst(n,a,r){for(var o=0,l=1/0,u=0,c=void 0,h=n.length;u<h;u++)c=n[u].getLayout().area,c&&(c<l&&(l=c),c>o&&(o=c));var f=n.area*n.area,v=a*a*r;return f?mathMax$3(v*o/f,f/(v*l)):1/0}function position(n,a,r,o,l){var u=a===r.width?0:1,c=1-u,h=["x","y"],f=["width","height"],v=r[h[u]],d=a?n.area/a:0;(l||d>r[f[c]])&&(d=r[f[c]]);for(var p=0,g=n.length;p<g;p++){var y=n[p],_={},S=d?y.getLayout().area/d:0,x=_[f[c]]=mathMax$3(d-2*o,0),T=r[h[u]]+r[f[u]]-v,A=p===g-1||T<S?T:S,b=_[f[u]]=mathMax$3(A-2*o,0);_[h[c]]=r[h[c]]+mathMin$3(o,x/2),_[h[u]]=v+mathMin$3(o,b/2),v+=A,y.setLayout(_,!0)}r[h[c]]+=d,r[f[c]]-=d}function estimateRootSize(n,a,r,o,l){var u=(a||{}).node,c=[o,l];if(!u||u===r)return c;for(var h,f=o*l,v=f*n.option.zoomToNodeRatio;h=u.parentNode;){for(var d=0,p=h.children,g=0,y=p.length;g<y;g++)d+=p[g].getValue();var _=u.getValue();if(_===0)return c;v*=d/_;var S=h.getModel(),x=S.get(PATH_BORDER_WIDTH),T=Math.max(x,getUpperLabelHeight(S));v+=4*x*x+(3*x+T)*Math.pow(v,.5),v>MAX_SAFE_INTEGER&&(v=MAX_SAFE_INTEGER),u=h}v<f&&(v=f);var A=Math.pow(v/f,.5);return[o*A,l*A]}function calculateRootPosition(n,a,r){if(a)return{x:a.x,y:a.y};var o={x:0,y:0};if(!r)return o;var l=r.node,u=l.getLayout();if(!u)return o;for(var c=[u.width/2,u.height/2],h=l;h;){var f=h.getLayout();c[0]+=f.x,c[1]+=f.y,h=h.parentNode}return{x:n.width/2-c[0],y:n.height/2-c[1]}}function prunning(n,a,r,o,l){var u=n.getLayout(),c=r[l],h=c&&c===n;if(!(c&&!h||l===r.length&&n!==o)){n.setLayout({isInView:!0,invisible:!h&&!a.intersect(u),isAboveViewRoot:h},!0);var f=new BoundingRect$1(a.x-u.x,a.y-u.y,a.width,a.height);each$b(n.viewChildren||[],function(v){prunning(v,f,r,o,l+1)})}}function getUpperLabelHeight(n){return n.get(PATH_UPPER_LABEL_SHOW)?n.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(n){n.registerSeriesModel(TreemapSeriesModel$1),n.registerChartView(TreemapView$1),n.registerVisual(treemapVisual),n.registerLayout(treemapLayout),installTreemapAction(n)}function categoryFilter(n){var a=n.findComponents({mainType:"legend"});!a||!a.length||n.eachSeriesByType("graph",function(r){var o=r.getCategoriesData(),l=r.getGraph(),u=l.data,c=o.mapArray(o.getName);u.filterSelf(function(h){var f=u.getItemModel(h),v=f.getShallow("category");if(v!=null){isNumber(v)&&(v=c[v]);for(var d=0;d<a.length;d++)if(!a[d].isSelected(v))return!1}return!0})})}function categoryVisual(n){var a={};n.eachSeriesByType("graph",function(r){var o=r.getCategoriesData(),l=r.getData(),u={};o.each(function(c){var h=o.getName(c);u["ec-"+h]=c;var f=o.getItemModel(c),v=f.getModel("itemStyle").getItemStyle();v.fill||(v.fill=r.getColorFromPalette(h,a)),o.setItemVisual(c,"style",v);for(var d=["symbol","symbolSize","symbolKeepAspect"],p=0;p<d.length;p++){var g=f.getShallow(d[p],!0);g!=null&&o.setItemVisual(c,d[p],g)}}),o.count()&&l.each(function(c){var h=l.getItemModel(c),f=h.getShallow("category");if(f!=null){isString(f)&&(f=u["ec-"+f]);var v=o.getItemVisual(f,"style"),d=l.ensureUniqueItemVisual(c,"style");extend(d,v);for(var p=["symbol","symbolSize","symbolKeepAspect"],g=0;g<p.length;g++)l.setItemVisual(c,p[g],o.getItemVisual(f,p[g]))}})})}function normalize$1(n){return n instanceof Array||(n=[n,n]),n}function graphEdgeVisual(n){n.eachSeriesByType("graph",function(a){var r=a.getGraph(),o=a.getEdgeData(),l=normalize$1(a.get("edgeSymbol")),u=normalize$1(a.get("edgeSymbolSize"));o.setVisual("fromSymbol",l&&l[0]),o.setVisual("toSymbol",l&&l[1]),o.setVisual("fromSymbolSize",u&&u[0]),o.setVisual("toSymbolSize",u&&u[1]),o.setVisual("style",a.getModel("lineStyle").getLineStyle()),o.each(function(c){var h=o.getItemModel(c),f=r.getEdgeByIndex(c),v=normalize$1(h.getShallow("symbol",!0)),d=normalize$1(h.getShallow("symbolSize",!0)),p=h.getModel("lineStyle").getLineStyle(),g=o.ensureUniqueItemVisual(c,"style");switch(extend(g,p),g.stroke){case"source":{var y=f.node1.getVisual("style");g.stroke=y&&y.fill;break}case"target":{var y=f.node2.getVisual("style");g.stroke=y&&y.fill;break}}v[0]&&f.setVisual("fromSymbol",v[0]),v[1]&&f.setVisual("toSymbol",v[1]),d[0]&&f.setVisual("fromSymbolSize",d[0]),d[1]&&f.setVisual("toSymbolSize",d[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(n){return n.get("autoCurveness")||null},createCurveness=function(n,a){var r=getAutoCurvenessParams(n),o=20,l=[];if(isNumber(r))o=r;else if(isArray$1(r)){n.__curvenessList=r;return}a>o&&(o=a);var u=o%2?o+2:o+3;l=[];for(var c=0;c<u;c++)l.push((c%2?c+1:c)/10*(c%2?-1:1));n.__curvenessList=l},getKeyOfEdges=function(n,a,r){var o=[n.id,n.dataIndex].join("."),l=[a.id,a.dataIndex].join(".");return[r.uid,o,l].join(KEY_DELIMITER)},getOppositeKey=function(n){var a=n.split(KEY_DELIMITER);return[a[0],a[2],a[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(n,a){var r=getKeyOfEdges(n.node1,n.node2,a);return a.__edgeMap[r]},getTotalLengthBetweenNodes=function(n,a){var r=getEdgeMapLengthWithKey(getKeyOfEdges(n.node1,n.node2,a),a),o=getEdgeMapLengthWithKey(getKeyOfEdges(n.node2,n.node1,a),a);return r+o},getEdgeMapLengthWithKey=function(n,a){var r=a.__edgeMap;return r[n]?r[n].length:0};function initCurvenessList(n){!getAutoCurvenessParams(n)||(n.__curvenessList=[],n.__edgeMap={},createCurveness(n))}function createEdgeMapForCurveness(n,a,r,o){if(!!getAutoCurvenessParams(r)){var l=getKeyOfEdges(n,a,r),u=r.__edgeMap,c=u[getOppositeKey(l)];u[l]&&!c?u[l].isForward=!0:c&&u[l]&&(c.isForward=!0,u[l].isForward=!1),u[l]=u[l]||[],u[l].push(o)}}function getCurvenessForEdge(n,a,r,o){var l=getAutoCurvenessParams(a),u=isArray$1(l);if(!l)return null;var c=getEdgeFromMap(n,a);if(!c)return null;for(var h=-1,f=0;f<c.length;f++)if(c[f]===r){h=f;break}var v=getTotalLengthBetweenNodes(n,a);createCurveness(a,v),n.lineStyle=n.lineStyle||{};var d=getKeyOfEdges(n.node1,n.node2,a),p=a.__curvenessList,g=u||v%2?0:1;if(c.isForward)return p[g+h];var y=getOppositeKey(d),_=getEdgeMapLengthWithKey(y,a),S=p[h+_+g];return o?u?l&&l[0]===0?(_+g)%2?S:-S:((_%2?0:1)+g)%2?S:-S:(_+g)%2?S:-S:p[h+_+g]}function simpleLayout(n){var a=n.coordinateSystem;if(!(a&&a.type!=="view")){var r=n.getGraph();r.eachNode(function(o){var l=o.getModel();o.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(r,n)}}function simpleLayoutEdge(n,a){n.eachEdge(function(r,o){var l=retrieve3(r.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(r,a,o,!0),0),u=clone$3(r.node1.getLayout()),c=clone$3(r.node2.getLayout()),h=[u,c];+l&&h.push([(u[0]+c[0])/2-(u[1]-c[1])*l,(u[1]+c[1])/2-(c[0]-u[0])*l]),r.setLayout(h)})}function graphSimpleLayout(n,a){n.eachSeriesByType("graph",function(r){var o=r.get("layout"),l=r.coordinateSystem;if(l&&l.type!=="view"){var u=r.getData(),c=[];each$f(l.dimensions,function(g){c=c.concat(u.mapDimensionsAll(g))});for(var h=0;h<u.count();h++){for(var f=[],v=!1,d=0;d<c.length;d++){var p=u.get(c[d],h);isNaN(p)||(v=!0),f.push(p)}v?u.setItemLayout(h,l.dataToPoint(f)):u.setItemLayout(h,[NaN,NaN])}simpleLayoutEdge(u.graph,r)}else(!o||o==="none")&&simpleLayout(r)})}function getNodeGlobalScale(n){var a=n.coordinateSystem;if(a.type!=="view")return 1;var r=n.option.nodeScaleRatio,o=a.scaleX,l=a.getZoom(),u=(l-1)*r+1;return u/o}function getSymbolSize(n){var a=n.getVisual("symbolSize");return a instanceof Array&&(a=(a[0]+a[1])/2),+a}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(n,a,r,o){var l=n.coordinateSystem;if(!(l&&l.type!=="view")){var u=l.getBoundingRect(),c=n.getData(),h=c.graph,f=u.width/2+u.x,v=u.height/2+u.y,d=Math.min(u.width,u.height)/2,p=c.count();if(c.setLayout({cx:f,cy:v}),!!p){if(r){var g=l.pointToData(o),y=g[0],_=g[1],S=[y-f,_-v];normalize$3(S,S),scale$2(S,S,d),r.setLayout([f+S[0],v+S[1]],!0);var x=n.get(["circular","rotateLabel"]);rotateNodeLabel(r,x,f,v)}_layoutNodesBasedOn[a](n,h,c,d,f,v,p),h.eachEdge(function(T,A){var b=retrieve3(T.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(T,n,A),0),C=clone$3(T.node1.getLayout()),E=clone$3(T.node2.getLayout()),w,D=(C[0]+E[0])/2,M=(C[1]+E[1])/2;+b&&(b*=3,w=[f*b+D*(1-b),v*b+M*(1-b)]),T.setLayout([C,E,w])})}}}var _layoutNodesBasedOn={value:function(n,a,r,o,l,u,c){var h=0,f=r.getSum("value"),v=Math.PI*2/(f||c);a.eachNode(function(d){var p=d.getValue("value"),g=v*(f?p:1)/2;h+=g,d.setLayout([o*Math.cos(h)+l,o*Math.sin(h)+u]),h+=g})},symbolSize:function(n,a,r,o,l,u,c){var h=0;_symbolRadiansHalf.length=c;var f=getNodeGlobalScale(n);a.eachNode(function(p){var g=getSymbolSize(p);isNaN(g)&&(g=2),g<0&&(g=0),g*=f;var y=Math.asin(g/2/o);isNaN(y)&&(y=PI$2/2),_symbolRadiansHalf[p.dataIndex]=y,h+=y*2});var v=(2*PI$2-h)/c/2,d=0;a.eachNode(function(p){var g=v+_symbolRadiansHalf[p.dataIndex];d+=g,(!p.getLayout()||!p.getLayout().fixed)&&p.setLayout([o*Math.cos(d)+l,o*Math.sin(d)+u]),d+=g})}};function rotateNodeLabel(n,a,r,o){var l=n.getGraphicEl();if(!!l){var u=n.getModel(),c=u.get(["label","rotate"])||0,h=l.getSymbolPath();if(a){var f=n.getLayout(),v=Math.atan2(f[1]-o,f[0]-r);v<0&&(v=Math.PI*2+v);var d=f[0]<r;d&&(v=v-Math.PI);var p=d?"left":"right";h.setTextConfig({rotation:-v,position:p,origin:"center"});var g=h.ensureState("emphasis");extend(g.textConfig||(g.textConfig={}),{position:p})}else h.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(n){n.eachSeriesByType("graph",function(a){a.get("layout")==="circular"&&circularLayout(a,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(n,a,r){for(var o=n,l=a,u=r.rect,c=u.width,h=u.height,f=[u.x+c/2,u.y+h/2],v=r.gravity==null?.1:r.gravity,d=0;d<o.length;d++){var p=o[d];p.p||(p.p=create$2(c*(Math.random()-.5)+f[0],h*(Math.random()-.5)+f[1])),p.pp=clone$3(p.p),p.edges=null}var g=r.friction==null?.6:r.friction,y=g,_,S;return{warmUp:function(){y=g*.8},setFixed:function(x){o[x].fixed=!0},setUnfixed:function(x){o[x].fixed=!1},beforeStep:function(x){_=x},afterStep:function(x){S=x},step:function(x){_&&_(o,l);for(var T=[],A=o.length,b=0;b<l.length;b++){var C=l[b];if(!C.ignoreForceLayout){var E=C.n1,w=C.n2;sub(T,w.p,E.p);var D=len(T)-C.d,M=w.w/(E.w+w.w);isNaN(M)&&(M=0),normalize$3(T,T),!E.fixed&&scaleAndAdd(E.p,E.p,T,M*D*y),!w.fixed&&scaleAndAdd(w.p,w.p,T,-(1-M)*D*y)}}for(var b=0;b<A;b++){var P=o[b];P.fixed||(sub(T,f,P.p),scaleAndAdd(P.p,P.p,T,v*y))}for(var b=0;b<A;b++)for(var E=o[b],L=b+1;L<A;L++){var w=o[L];sub(T,w.p,E.p);var D=len(T);D===0&&(set$1(T,Math.random()-.5,Math.random()-.5),D=1);var I=(E.rep+w.rep)/D/D;!E.fixed&&scaleAndAdd(E.pp,E.pp,T,I),!w.fixed&&scaleAndAdd(w.pp,w.pp,T,-I)}for(var R=[],b=0;b<A;b++){var P=o[b];P.fixed||(sub(R,P.p,P.pp),scaleAndAdd(P.p,P.p,R,y),copy$1(P.pp,P.p))}y=y*.992;var O=y<.01;S&&S(o,l,O),x&&x(O)}}}function graphForceLayout(n){n.eachSeriesByType("graph",function(a){var r=a.coordinateSystem;if(!(r&&r.type!=="view"))if(a.get("layout")==="force"){var o=a.preservedPoints||{},l=a.getGraph(),u=l.data,c=l.edgeData,h=a.getModel("force"),f=h.get("initLayout");a.preservedPoints?u.each(function(b){var C=u.getId(b);u.setItemLayout(b,o[C]||[NaN,NaN])}):!f||f==="none"?simpleLayout(a):f==="circular"&&circularLayout(a,"value");var v=u.getDataExtent("value"),d=c.getDataExtent("value"),p=h.get("repulsion"),g=h.get("edgeLength"),y=isArray$1(p)?p:[p,p],_=isArray$1(g)?g:[g,g];_=[_[1],_[0]];var S=u.mapArray("value",function(b,C){var E=u.getItemLayout(C),w=linearMap$2(b,v,y);return isNaN(w)&&(w=(y[0]+y[1])/2),{w,rep:w,fixed:u.getItemModel(C).get("fixed"),p:!E||isNaN(E[0])||isNaN(E[1])?null:E}}),x=c.mapArray("value",function(b,C){var E=l.getEdgeByIndex(C),w=linearMap$2(b,d,_);isNaN(w)&&(w=(_[0]+_[1])/2);var D=E.getModel(),M=retrieve3(E.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(E,a,C,!0),0);return{n1:S[E.node1.dataIndex],n2:S[E.node2.dataIndex],d:w,curveness:M,ignoreForceLayout:D.get("ignoreForceLayout")}}),T=r.getBoundingRect(),A=forceLayout(S,x,{rect:T,gravity:h.get("gravity"),friction:h.get("friction")});A.beforeStep(function(b,C){for(var E=0,w=b.length;E<w;E++)b[E].fixed&&copy$1(b[E].p,l.getNodeByIndex(E).getLayout())}),A.afterStep(function(b,C,E){for(var w=0,D=b.length;w<D;w++)b[w].fixed||l.getNodeByIndex(w).setLayout(b[w].p),o[u.getId(w)]=b[w].p;for(var w=0,D=C.length;w<D;w++){var M=C[w],P=l.getEdgeByIndex(w),L=M.n1.p,I=M.n2.p,R=P.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],copy$1(R[0],L),copy$1(R[1],I),+M.curveness&&(R[2]=[(L[0]+I[0])/2-(L[1]-I[1])*M.curveness,(L[1]+I[1])/2-(I[0]-L[0])*M.curveness]),P.setLayout(R)}}),a.forceLayout=A,a.preservedPoints=o,A.step()}else a.forceLayout=null})}function getViewRect$3(n,a,r){var o=extend(n.getBoxLayoutParams(),{aspect:r});return getLayoutRect(o,{width:a.getWidth(),height:a.getHeight()})}function createViewCoordSys(n,a){var r=[];return n.eachSeriesByType("graph",function(o){var l=o.get("coordinateSystem");if(!l||l==="view"){var u=o.getData(),c=u.mapArray(function(x){var T=u.getItemModel(x);return[+T.get("x"),+T.get("y")]}),h=[],f=[];fromPoints(c,h,f),f[0]-h[0]===0&&(f[0]+=1,h[0]-=1),f[1]-h[1]===0&&(f[1]+=1,h[1]-=1);var v=(f[0]-h[0])/(f[1]-h[1]),d=getViewRect$3(o,a,v);isNaN(v)&&(h=[d.x,d.y],f=[d.x+d.width,d.y+d.height]);var p=f[0]-h[0],g=f[1]-h[1],y=d.width,_=d.height,S=o.coordinateSystem=new View$1;S.zoomLimit=o.get("scaleLimit"),S.setBoundingRect(h[0],h[1],p,g),S.setViewRect(d.x,d.y,y,_),S.setCenter(o.get("center"),a),S.setZoom(o.get("zoom")),r.push(S)}}),r}var straightLineProto=Line$3.prototype,bezierCurveProto=BezierCurve$1.prototype,StraightLineShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a})(StraightLineShape);function isStraightLine(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var ECLinePath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="ec-line",o}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new StraightLineShape},a.prototype.buildPath=function(r,o){isStraightLine(o)?straightLineProto.buildPath.call(this,r,o):bezierCurveProto.buildPath.call(this,r,o)},a.prototype.pointAt=function(r){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,r):bezierCurveProto.pointAt.call(this,r)},a.prototype.tangentAt=function(r){var o=this.shape,l=isStraightLine(o)?[o.x2-o.x1,o.y2-o.y1]:bezierCurveProto.tangentAt.call(this,r);return normalize$3(l,l)},a}(Path$1);const ECLinePath$1=ECLinePath;var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(n){return"_"+n+"Type"}function makeSymbolTypeValue(n,a,r){var o=a.getItemVisual(r,n);if(!o||o==="none")return o;var l=a.getItemVisual(r,n+"Size"),u=a.getItemVisual(r,n+"Rotate"),c=a.getItemVisual(r,n+"Offset"),h=a.getItemVisual(r,n+"KeepAspect"),f=normalizeSymbolSize(l),v=normalizeSymbolOffset(c||0,f);return o+f+v+(u||"")+(h||"")}function createSymbol(n,a,r){var o=a.getItemVisual(r,n);if(!(!o||o==="none")){var l=a.getItemVisual(r,n+"Size"),u=a.getItemVisual(r,n+"Rotate"),c=a.getItemVisual(r,n+"Offset"),h=a.getItemVisual(r,n+"KeepAspect"),f=normalizeSymbolSize(l),v=normalizeSymbolOffset(c||0,f),d=createSymbol$1(o,-f[0]/2+v[0],-f[1]/2+v[1],f[0],f[1],null,h);return d.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,d.name=n,d}}function createLine(n){var a=new ECLinePath$1({name:"line",subPixelOptimize:!0});return setLinePoints(a.shape,n),a}function setLinePoints(n,a){n.x1=a[0][0],n.y1=a[0][1],n.x2=a[1][0],n.y2=a[1][1],n.percent=1;var r=a[2];r?(n.cpx1=r[0],n.cpy1=r[1]):(n.cpx1=NaN,n.cpy1=NaN)}var Line=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this)||this;return u._createLine(r,o,l),u}return a.prototype._createLine=function(r,o,l){var u=r.hostModel,c=r.getItemLayout(o),h=createLine(c);h.shape.percent=0,initProps(h,{shape:{percent:1}},u,o),this.add(h),each$f(SYMBOL_CATEGORIES,function(f){var v=createSymbol(f,r,o);this.add(v),this[makeSymbolTypeKey(f)]=makeSymbolTypeValue(f,r,o)},this),this._updateCommonStl(r,o,l)},a.prototype.updateData=function(r,o,l){var u=r.hostModel,c=this.childOfName("line"),h=r.getItemLayout(o),f={shape:{}};setLinePoints(f.shape,h),updateProps$1(c,f,u,o),each$f(SYMBOL_CATEGORIES,function(v){var d=makeSymbolTypeValue(v,r,o),p=makeSymbolTypeKey(v);if(this[p]!==d){this.remove(this.childOfName(v));var g=createSymbol(v,r,o);this.add(g)}this[p]=d},this),this._updateCommonStl(r,o,l)},a.prototype.getLinePath=function(){return this.childAt(0)},a.prototype._updateCommonStl=function(r,o,l){var u=r.hostModel,c=this.childOfName("line"),h=l&&l.emphasisLineStyle,f=l&&l.blurLineStyle,v=l&&l.selectLineStyle,d=l&&l.labelStatesModels,p=l&&l.emphasisDisabled,g=l&&l.focus,y=l&&l.blurScope;if(!l||r.hasItemOption){var _=r.getItemModel(o),S=_.getModel("emphasis");h=S.getModel("lineStyle").getLineStyle(),f=_.getModel(["blur","lineStyle"]).getLineStyle(),v=_.getModel(["select","lineStyle"]).getLineStyle(),p=S.get("disabled"),g=S.get("focus"),y=S.get("blurScope"),d=getLabelStatesModels(_)}var x=r.getItemVisual(o,"style"),T=x.stroke;c.useStyle(x),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=h,c.ensureState("blur").style=f,c.ensureState("select").style=v,each$f(SYMBOL_CATEGORIES,function(w){var D=this.childOfName(w);if(D){D.setColor(T),D.style.opacity=x.opacity;for(var M=0;M<SPECIAL_STATES.length;M++){var P=SPECIAL_STATES[M],L=c.getState(P);if(L){var I=L.style||{},R=D.ensureState(P),O=R.style||(R.style={});I.stroke!=null&&(O[D.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(O.opacity=I.opacity)}}D.markRedraw()}},this);var A=u.getRawValue(o);setLabelStyle(this,d,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(w,D){return u.getFormattedLabel(w,D,r.dataType)}},inheritColor:T||"#000",defaultOpacity:x.opacity,defaultText:(A==null?r.getName(o):isFinite(A)?round$3(A):A)+""});var b=this.getTextContent();if(b){var C=d.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=C.get("position")||"middle";var E=C.get("distance");isArray$1(E)||(E=[E,E]),b.__labelDistance=E}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,g,y,p)},a.prototype.highlight=function(){enterEmphasis(this)},a.prototype.downplay=function(){leaveEmphasis(this)},a.prototype.updateLayout=function(r,o){this.setLinePoints(r.getItemLayout(o))},a.prototype.setLinePoints=function(r){var o=this.childOfName("line");setLinePoints(o.shape,r),o.dirty()},a.prototype.beforeUpdate=function(){var r=this,o=r.childOfName("fromSymbol"),l=r.childOfName("toSymbol"),u=r.getTextContent();if(!o&&!l&&(!u||u.ignore))return;for(var c=1,h=this.parent;h;)h.scaleX&&(c/=h.scaleX),h=h.parent;var f=r.childOfName("line");if(!this.__dirty&&!f.__dirty)return;var v=f.shape.percent,d=f.pointAt(0),p=f.pointAt(v),g=sub([],p,d);normalize$3(g,g);function y(L,I){var R=L.__specifiedRotation;if(R==null){var O=f.tangentAt(I);L.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(O[1],O[0]))}else L.attr("rotation",R)}if(o&&(o.setPosition(d),y(o,0),o.scaleX=o.scaleY=c*v,o.markRedraw()),l&&(l.setPosition(p),y(l,1),l.scaleX=l.scaleY=c*v,l.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var _=void 0,S=void 0,x=u.__labelDistance,T=x[0]*c,A=x[1]*c,b=v/2,C=f.tangentAt(b),E=[C[1],-C[0]],w=f.pointAt(b);E[1]>0&&(E[0]=-E[0],E[1]=-E[1]);var D=C[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var M=-Math.atan2(C[1],C[0]);p[0]<d[0]&&(M=Math.PI+M),u.rotation=M}var P=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":P=-A,S="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":P=A,S="top";break;default:P=0,S="middle"}switch(u.__position){case"end":u.x=g[0]*T+p[0],u.y=g[1]*A+p[1],_=g[0]>.8?"left":g[0]<-.8?"right":"center",S=g[1]>.8?"top":g[1]<-.8?"bottom":"middle";break;case"start":u.x=-g[0]*T+d[0],u.y=-g[1]*A+d[1],_=g[0]>.8?"right":g[0]<-.8?"left":"center",S=g[1]>.8?"bottom":g[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=T*D+d[0],u.y=d[1]+P,_=C[0]<0?"right":"left",u.originX=-T*D,u.originY=-P;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=w[0],u.y=w[1]+P,_="center",u.originY=-P;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-T*D+p[0],u.y=p[1]+P,_=C[0]>=0?"right":"left",u.originX=T*D,u.originY=-P;break}u.scaleX=u.scaleY=c,u.setStyle({verticalAlign:u.__verticalAlign||S,align:u.__align||_})}},a}(Group$4);const Line$1=Line;var LineDraw=function(){function n(a){this.group=new Group$4,this._LineCtor=a||Line$1}return n.prototype.updateData=function(a){var r=this;this._progressiveEls=null;var o=this,l=o.group,u=o._lineData;o._lineData=a,u||l.removeAll();var c=makeSeriesScope$1(a);a.diff(u).add(function(h){r._doAdd(a,h,c)}).update(function(h,f){r._doUpdate(u,a,f,h,c)}).remove(function(h){l.remove(u.getItemGraphicEl(h))}).execute()},n.prototype.updateLayout=function(){var a=this._lineData;!a||a.eachItemGraphicEl(function(r,o){r.updateLayout(a,o)},this)},n.prototype.incrementalPrepareUpdate=function(a){this._seriesScope=makeSeriesScope$1(a),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(a,r){this._progressiveEls=[];function o(h){!h.isGroup&&!isEffectObject(h)&&(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var l=a.start;l<a.end;l++){var u=r.getItemLayout(l);if(lineNeedsDraw(u)){var c=new this._LineCtor(r,l,this._seriesScope);c.traverse(o),this.group.add(c),r.setItemGraphicEl(l,c),this._progressiveEls.push(c)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._doAdd=function(a,r,o){var l=a.getItemLayout(r);if(!!lineNeedsDraw(l)){var u=new this._LineCtor(a,r,o);a.setItemGraphicEl(r,u),this.group.add(u)}},n.prototype._doUpdate=function(a,r,o,l,u){var c=a.getItemGraphicEl(o);if(!lineNeedsDraw(r.getItemLayout(l))){this.group.remove(c);return}c?c.updateData(r,l,u):c=new this._LineCtor(r,l,u),r.setItemGraphicEl(l,c),this.group.add(c)},n}();function isEffectObject(n){return n.animators&&n.animators.length>0}function makeSeriesScope$1(n){var a=n.hostModel,r=a.getModel("emphasis");return{lineStyle:a.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:a.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:a.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:getLabelStatesModels(a)}}function isPointNaN(n){return isNaN(n[0])||isNaN(n[1])}function lineNeedsDraw(n){return n&&!isPointNaN(n[0])&&!isPointNaN(n[1])}const LineDraw$1=LineDraw;var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(n,a,r){for(var o=n[0],l=n[1],u=n[2],c=1/0,h,f=r*r,v=.1,d=.1;d<=.9;d+=.1){v1[0]=quadraticAt(o[0],l[0],u[0],d),v1[1]=quadraticAt(o[1],l[1],u[1],d);var p=mathAbs(v2DistSquare(v1,a)-f);p<c&&(c=p,h=d)}for(var g=0;g<32;g++){var y=h+v;v2[0]=quadraticAt(o[0],l[0],u[0],h),v2[1]=quadraticAt(o[1],l[1],u[1],h),v3[0]=quadraticAt(o[0],l[0],u[0],y),v3[1]=quadraticAt(o[1],l[1],u[1],y);var p=v2DistSquare(v2,a)-f;if(mathAbs(p)<.01)break;var _=v2DistSquare(v3,a)-f;v/=2,p<0?_>=0?h=h+v:h=h-v:_>=0?h=h-v:h=h+v}return h}function adjustEdge(n,a){var r=[],o=quadraticSubdivide,l=[[],[],[]],u=[[],[]],c=[];a/=2,n.eachEdge(function(h,f){var v=h.getLayout(),d=h.getVisual("fromSymbol"),p=h.getVisual("toSymbol");v.__original||(v.__original=[clone$3(v[0]),clone$3(v[1])],v[2]&&v.__original.push(clone$3(v[2])));var g=v.__original;if(v[2]!=null){if(copy$1(l[0],g[0]),copy$1(l[1],g[2]),copy$1(l[2],g[1]),d&&d!=="none"){var y=getSymbolSize(h.node1),_=intersectCurveCircle(l,g[0],y*a);o(l[0][0],l[1][0],l[2][0],_,r),l[0][0]=r[3],l[1][0]=r[4],o(l[0][1],l[1][1],l[2][1],_,r),l[0][1]=r[3],l[1][1]=r[4]}if(p&&p!=="none"){var y=getSymbolSize(h.node2),_=intersectCurveCircle(l,g[1],y*a);o(l[0][0],l[1][0],l[2][0],_,r),l[1][0]=r[1],l[2][0]=r[2],o(l[0][1],l[1][1],l[2][1],_,r),l[1][1]=r[1],l[2][1]=r[2]}copy$1(v[0],l[0]),copy$1(v[1],l[2]),copy$1(v[2],l[1])}else{if(copy$1(u[0],g[0]),copy$1(u[1],g[1]),sub(c,u[1],u[0]),normalize$3(c,c),d&&d!=="none"){var y=getSymbolSize(h.node1);scaleAndAdd$1(u[0],u[0],c,y*a)}if(p&&p!=="none"){var y=getSymbolSize(h.node2);scaleAndAdd$1(u[1],u[1],c,-y*a)}copy$1(v[0],u[0]),copy$1(v[1],u[1])}})}function isViewCoordSys(n){return n.type==="view"}var GraphView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o){var l=new SymbolDraw$1,u=new LineDraw$1,c=this.group;this._controller=new RoamController$1(o.getZr()),this._controllerHost={target:c},c.add(l.group),c.add(u.group),this._symbolDraw=l,this._lineDraw=u,this._firstRender=!0},a.prototype.render=function(r,o,l){var u=this,c=r.coordinateSystem;this._model=r;var h=this._symbolDraw,f=this._lineDraw,v=this.group;if(isViewCoordSys(c)){var d={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?v.attr(d):updateProps$1(v,d,r)}adjustEdge(r.getGraph(),getNodeGlobalScale(r));var p=r.getData();h.updateData(p);var g=r.getEdgeData();f.updateData(g),this._updateNodeAndLinkScale(),this._updateController(r,o,l),clearTimeout(this._layoutTimeout);var y=r.forceLayout,_=r.get(["force","layoutAnimation"]);y&&this._startForceLayoutIteration(y,_);var S=r.get("layout");p.graph.eachNode(function(b){var C=b.dataIndex,E=b.getGraphicEl(),w=b.getModel();if(!!E){E.off("drag").off("dragend");var D=w.get("draggable");D&&E.on("drag",function(P){switch(S){case"force":y.warmUp(),!u._layouting&&u._startForceLayoutIteration(y,_),y.setFixed(C),p.setItemLayout(C,[E.x,E.y]);break;case"circular":p.setItemLayout(C,[E.x,E.y]),b.setLayout({fixed:!0},!0),circularLayout(r,"symbolSize",b,[P.offsetX,P.offsetY]),u.updateLayout(r);break;case"none":default:p.setItemLayout(C,[E.x,E.y]),simpleLayoutEdge(r.getGraph(),r),u.updateLayout(r);break}}).on("dragend",function(){y&&y.setUnfixed(C)}),E.setDraggable(D,!!w.get("cursor"));var M=w.get(["emphasis","focus"]);M==="adjacency"&&(getECData(E).focus=b.getAdjacentDataIndices())}}),p.graph.eachEdge(function(b){var C=b.getGraphicEl(),E=b.getModel().get(["emphasis","focus"]);!C||E==="adjacency"&&(getECData(C).focus={edge:[b.dataIndex],node:[b.node1.dataIndex,b.node2.dataIndex]})});var x=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),T=p.getLayout("cx"),A=p.getLayout("cy");p.graph.eachNode(function(b){rotateNodeLabel(b,x,T,A)}),this._firstRender=!1},a.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype._startForceLayoutIteration=function(r,o){var l=this;(function u(){r.step(function(c){l.updateLayout(l._model),(l._layouting=!c)&&(o?l._layoutTimeout=setTimeout(u,16):u())})})()},a.prototype._updateController=function(r,o,l){var u=this,c=this._controller,h=this._controllerHost,f=this.group;if(c.setPointerChecker(function(v,d,p){var g=f.getBoundingRect();return g.applyTransform(f.transform),g.contain(d,p)&&!onIrrelevantElement(v,l,r)}),!isViewCoordSys(r.coordinateSystem)){c.disable();return}c.enable(r.get("roam")),h.zoomLimit=r.get("scaleLimit"),h.zoom=r.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(v){updateViewOnPan(h,v.dx,v.dy),l.dispatchAction({seriesId:r.id,type:"graphRoam",dx:v.dx,dy:v.dy})}).on("zoom",function(v){updateViewOnZoom(h,v.scale,v.originX,v.originY),l.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:v.scale,originX:v.originX,originY:v.originY}),u._updateNodeAndLinkScale(),adjustEdge(r.getGraph(),getNodeGlobalScale(r)),u._lineDraw.updateLayout(),l.updateLabelLayout()})},a.prototype._updateNodeAndLinkScale=function(){var r=this._model,o=r.getData(),l=getNodeGlobalScale(r);o.eachItemGraphicEl(function(u,c){u&&u.setSymbolScale(l)})},a.prototype.updateLayout=function(r){adjustEdge(r.getGraph(),getNodeGlobalScale(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},a.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},a.type="graph",a}(ChartView$1);const GraphView$1=GraphView;function generateNodeKey(n){return"_EC_"+n}var Graph=function(){function n(a){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=a||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(a,r){a=a==null?""+r:""+a;var o=this._nodesMap;if(o[generateNodeKey(a)]){({}).NODE_ENV!=="production"&&console.error("Graph nodes have duplicate name or id");return}var l=new GraphNode(a,r);return l.hostGraph=this,this.nodes.push(l),o[generateNodeKey(a)]=l,l},n.prototype.getNodeByIndex=function(a){var r=this.data.getRawIndex(a);return this.nodes[r]},n.prototype.getNodeById=function(a){return this._nodesMap[generateNodeKey(a)]},n.prototype.addEdge=function(a,r,o){var l=this._nodesMap,u=this._edgesMap;if(isNumber(a)&&(a=this.nodes[a]),isNumber(r)&&(r=this.nodes[r]),a instanceof GraphNode||(a=l[generateNodeKey(a)]),r instanceof GraphNode||(r=l[generateNodeKey(r)]),!(!a||!r)){var c=a.id+"-"+r.id,h=new GraphEdge(a,r,o);return h.hostGraph=this,this._directed&&(a.outEdges.push(h),r.inEdges.push(h)),a.edges.push(h),a!==r&&r.edges.push(h),this.edges.push(h),u[c]=h,h}},n.prototype.getEdgeByIndex=function(a){var r=this.edgeData.getRawIndex(a);return this.edges[r]},n.prototype.getEdge=function(a,r){a instanceof GraphNode&&(a=a.id),r instanceof GraphNode&&(r=r.id);var o=this._edgesMap;return this._directed?o[a+"-"+r]:o[a+"-"+r]||o[r+"-"+a]},n.prototype.eachNode=function(a,r){for(var o=this.nodes,l=o.length,u=0;u<l;u++)o[u].dataIndex>=0&&a.call(r,o[u],u)},n.prototype.eachEdge=function(a,r){for(var o=this.edges,l=o.length,u=0;u<l;u++)o[u].dataIndex>=0&&o[u].node1.dataIndex>=0&&o[u].node2.dataIndex>=0&&a.call(r,o[u],u)},n.prototype.breadthFirstTraverse=function(a,r,o,l){if(r instanceof GraphNode||(r=this._nodesMap[generateNodeKey(r)]),!!r){for(var u=o==="out"?"outEdges":o==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!a.call(l,r,null))for(var h=[r];h.length;)for(var f=h.shift(),v=f[u],c=0;c<v.length;c++){var d=v[c],p=d.node1===f?d.node2:d.node1;if(!p.__visited){if(a.call(l,p,f))return;h.push(p),p.__visited=!0}}}},n.prototype.update=function(){for(var a=this.data,r=this.edgeData,o=this.nodes,l=this.edges,u=0,c=o.length;u<c;u++)o[u].dataIndex=-1;for(var u=0,c=a.count();u<c;u++)o[a.getRawIndex(u)].dataIndex=u;r.filterSelf(function(h){var f=l[r.getRawIndex(h)];return f.node1.dataIndex>=0&&f.node2.dataIndex>=0});for(var u=0,c=l.length;u<c;u++)l[u].dataIndex=-1;for(var u=0,c=r.count();u<c;u++)l[r.getRawIndex(u)].dataIndex=u},n.prototype.clone=function(){for(var a=new n(this._directed),r=this.nodes,o=this.edges,l=0;l<r.length;l++)a.addNode(r[l].id,r[l].dataIndex);for(var l=0;l<o.length;l++){var u=o[l];a.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return a},n}(),GraphNode=function(){function n(a,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=a==null?"":a,this.dataIndex=r==null?-1:r}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(a){if(!(this.dataIndex<0)){var r=this.hostGraph,o=r.data.getItemModel(this.dataIndex);return o.getModel(a)}},n.prototype.getAdjacentDataIndices=function(){for(var a={edge:[],node:[]},r=0;r<this.edges.length;r++){var o=this.edges[r];o.dataIndex<0||(a.edge.push(o.dataIndex),a.node.push(o.node1.dataIndex,o.node2.dataIndex))}return a},n.prototype.getTrajectoryDataIndices=function(){for(var a=createHashMap(),r=createHashMap(),o=0;o<this.edges.length;o++){var l=this.edges[o];if(!(l.dataIndex<0)){a.set(l.dataIndex,!0);for(var u=[l.node1],c=[l.node2],h=0;h<u.length;){var f=u[h];h++,r.set(f.dataIndex,!0);for(var v=0;v<f.inEdges.length;v++)a.set(f.inEdges[v].dataIndex,!0),u.push(f.inEdges[v].node1)}for(h=0;h<c.length;){var d=c[h];h++,r.set(d.dataIndex,!0);for(var v=0;v<d.outEdges.length;v++)a.set(d.outEdges[v].dataIndex,!0),c.push(d.outEdges[v].node2)}}}return{edge:a.keys(),node:r.keys()}},n}(),GraphEdge=function(){function n(a,r,o){this.dataIndex=-1,this.node1=a,this.node2=r,this.dataIndex=o==null?-1:o}return n.prototype.getModel=function(a){if(!(this.dataIndex<0)){var r=this.hostGraph,o=r.edgeData.getItemModel(this.dataIndex);return o.getModel(a)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var a=createHashMap(),r=createHashMap();a.set(this.dataIndex,!0);for(var o=[this.node1],l=[this.node2],u=0;u<o.length;){var c=o[u];u++,r.set(c.dataIndex,!0);for(var h=0;h<c.inEdges.length;h++)a.set(c.inEdges[h].dataIndex,!0),o.push(c.inEdges[h].node1)}for(u=0;u<l.length;){var f=l[u];u++,r.set(f.dataIndex,!0);for(var h=0;h<f.outEdges.length;h++)a.set(f.outEdges[h].dataIndex,!0),l.push(f.outEdges[h].node2)}return{edge:a.keys(),node:r.keys()}},n}();function createGraphDataProxyMixin(n,a){return{getValue:function(r){var o=this[n][a];return o.getStore().get(o.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,o){this.dataIndex>=0&&this[n][a].setItemVisual(this.dataIndex,r,o)},getVisual:function(r){return this[n][a].getItemVisual(this.dataIndex,r)},setLayout:function(r,o){this.dataIndex>=0&&this[n][a].setItemLayout(this.dataIndex,r,o)},getLayout:function(){return this[n][a].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][a].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][a].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data")),mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));const Graph$1=Graph;function createGraphFromNodeEdge(n,a,r,o,l){for(var u=new Graph$1(o),c=0;c<n.length;c++)u.addNode(retrieve(n[c].id,n[c].name,c),c);for(var h=[],f=[],v=0,c=0;c<a.length;c++){var d=a[c],p=d.source,g=d.target;u.addEdge(p,g,v)&&(f.push(d),h.push(retrieve(convertOptionIdName(d.id,null),p+" > "+g)),v++)}var y=r.get("coordinateSystem"),_;if(y==="cartesian2d"||y==="polar")_=createSeriesData(n,r);else{var S=CoordinateSystem.get(y),x=S?S.dimensions||[]:[];indexOf(x,"value")<0&&x.concat(["value"]);var T=prepareSeriesDataSchema(n,{coordDimensions:x,encodeDefine:r.getEncode()}).dimensions;_=new SeriesData$1(T,r),_.initData(n)}var A=new SeriesData$1(["value"],r);return A.initData(f,h),l&&l(_,A),linkSeriesData({mainData:_,struct:u,structAttr:"graph",datas:{node:_,edge:A},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.hasSymbolVisual=!0,r}return a.prototype.init=function(r){n.prototype.init.apply(this,arguments);var o=this;function l(){return o._categoriesData}this.legendVisualProvider=new LegendVisualProvider$1(l,l),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},a.prototype.mergeOption=function(r){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},a.prototype.mergeDefaultAndTheme=function(r){n.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(r,"edgeLabel",["show"])},a.prototype.getInitialData=function(r,o){var l=r.edges||r.links||[],u=r.data||r.nodes||[],c=this;if(u&&l){initCurvenessList(this);var h=createGraphFromNodeEdge(u,l,this,!0,f);return each$f(h.edges,function(v){createEdgeMapForCurveness(v.node1,v.node2,this,v.dataIndex)},this),h.data}function f(v,d){v.wrapMethod("getItemModel",function(_){var S=c._categoriesModels,x=_.getShallow("category"),T=S[x];return T&&(T.parentModel=_.parentModel,_.parentModel=T),_});var p=Model$1.prototype.getModel;function g(_,S){var x=p.call(this,_,S);return x.resolveParentPath=y,x}d.wrapMethod("getItemModel",function(_){return _.resolveParentPath=y,_.getModel=g,_});function y(_){if(_&&(_[0]==="label"||_[1]==="label")){var S=_.slice();return _[0]==="label"?S[0]="edgeLabel":_[1]==="label"&&(S[1]="edgeLabel"),S}return _}}},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.getCategoriesData=function(){return this._categoriesData},a.prototype.formatTooltip=function(r,o,l){if(l==="edge"){var u=this.getData(),c=this.getDataParams(r,l),h=u.graph.getEdgeByIndex(r),f=u.getName(h.node1.dataIndex),v=u.getName(h.node2.dataIndex),d=[];return f!=null&&d.push(f),v!=null&&d.push(v),createTooltipMarkup("nameValue",{name:d.join(" > "),value:c.value,noValue:c.value==null})}var p=defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:o});return p},a.prototype._updateCategoriesData=function(){var r=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),o=new SeriesData$1(["value"],this);o.initData(r),this._categoriesData=o,this._categoriesModels=o.mapArray(function(l){return o.getItemModel(l)})},a.prototype.setZoom=function(r){this.option.zoom=r},a.prototype.setCenter=function(r){this.option.center=r},a.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},a.type="series.graph",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(SeriesModel$1);const GraphSeriesModel$1=GraphSeriesModel;var actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(n){n.registerChartView(GraphView$1),n.registerSeriesModel(GraphSeriesModel$1),n.registerProcessor(categoryFilter),n.registerVisual(categoryVisual),n.registerVisual(graphEdgeVisual),n.registerLayout(graphSimpleLayout),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),n.registerLayout(graphForceLayout),n.registerCoordinateSystem("graphView",{dimensions:View$1.dimensions,create:createViewCoordSys}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),n.registerAction(actionInfo$1,function(a,r,o){r.eachComponent({mainType:"series",query:a},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,a,void 0,o);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}var PointerShape=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),PointerPath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="pointer",o}return a.prototype.getDefaultShape=function(){return new PointerShape},a.prototype.buildPath=function(r,o){var l=Math.cos,u=Math.sin,c=o.r,h=o.width,f=o.angle,v=o.x-l(f)*h*(h>=c/3?1:2),d=o.y-u(f)*h*(h>=c/3?1:2);f=o.angle-Math.PI/2,r.moveTo(v,d),r.lineTo(o.x+l(f)*h,o.y+u(f)*h),r.lineTo(o.x+l(o.angle)*c,o.y+u(o.angle)*c),r.lineTo(o.x-l(f)*h,o.y-u(f)*h),r.lineTo(v,d)},a}(Path$1);const PointerPath$1=PointerPath;function parsePosition(n,a){var r=n.get("center"),o=a.getWidth(),l=a.getHeight(),u=Math.min(o,l),c=parsePercent(r[0],a.getWidth()),h=parsePercent(r[1],a.getHeight()),f=parsePercent(n.get("radius"),u/2);return{cx:c,cy:h,r:f}}function formatLabel(n,a){var r=n==null?"":n+"";return a&&(isString(a)?r=a.replace("{value}",r):isFunction(a)&&(r=a(n))),r}var GaugeView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){this.group.removeAll();var u=r.get(["axisLine","lineStyle","color"]),c=parsePosition(r,l);this._renderMain(r,o,l,u,c),this._data=r.getData()},a.prototype.dispose=function(){},a.prototype._renderMain=function(r,o,l,u,c){var h=this.group,f=r.get("clockwise"),v=-r.get("startAngle")/180*Math.PI,d=-r.get("endAngle")/180*Math.PI,p=r.getModel("axisLine"),g=p.get("roundCap"),y=g?Sausage:Sector$1,_=p.get("show"),S=p.getModel("lineStyle"),x=S.get("width"),T=[v,d];normalizeArcAngles(T,!f),v=T[0],d=T[1];for(var A=d-v,b=v,C=[],E=0;_&&E<u.length;E++){var w=Math.min(Math.max(u[E][0],0),1);d=v+A*w;var D=new y({shape:{startAngle:b,endAngle:d,cx:c.cx,cy:c.cy,clockwise:f,r0:c.r-x,r:c.r},silent:!0});D.setStyle({fill:u[E][1]}),D.setStyle(S.getLineStyle(["color","width"])),C.push(D),b=d}C.reverse(),each$f(C,function(P){return h.add(P)});var M=function(P){if(P<=0)return u[0][1];var L;for(L=0;L<u.length;L++)if(u[L][0]>=P&&(L===0?0:u[L-1][0])<P)return u[L][1];return u[L-1][1]};this._renderTicks(r,o,l,M,c,v,d,f,x),this._renderTitleAndDetail(r,o,l,M,c),this._renderAnchor(r,c),this._renderPointer(r,o,l,M,c,v,d,f,x)},a.prototype._renderTicks=function(r,o,l,u,c,h,f,v,d){for(var p=this.group,g=c.cx,y=c.cy,_=c.r,S=+r.get("min"),x=+r.get("max"),T=r.getModel("splitLine"),A=r.getModel("axisTick"),b=r.getModel("axisLabel"),C=r.get("splitNumber"),E=A.get("splitNumber"),w=parsePercent(T.get("length"),_),D=parsePercent(A.get("length"),_),M=h,P=(f-h)/C,L=P/E,I=T.getModel("lineStyle").getLineStyle(),R=A.getModel("lineStyle").getLineStyle(),O=T.get("distance"),N,V,B=0;B<=C;B++){if(N=Math.cos(M),V=Math.sin(M),T.get("show")){var G=O?O+d:d,F=new Line$3({shape:{x1:N*(_-G)+g,y1:V*(_-G)+y,x2:N*(_-w-G)+g,y2:V*(_-w-G)+y},style:I,silent:!0});I.stroke==="auto"&&F.setStyle({stroke:u(B/C)}),p.add(F)}if(b.get("show")){var G=b.get("distance")+O,z=formatLabel(round$3(B/C*(x-S)+S),b.get("formatter")),H=u(B/C),U=N*(_-w-G)+g,Y=V*(_-w-G)+y,Z=b.get("rotate"),X=0;Z==="radial"?(X=-M+2*Math.PI,X>Math.PI/2&&(X+=Math.PI)):Z==="tangential"?X=-M-Math.PI/2:isNumber(Z)&&(X=Z*Math.PI/180),X===0?p.add(new ZRText$1({style:createTextStyle$1(b,{text:z,x:U,y:Y,verticalAlign:V<-.8?"top":V>.8?"bottom":"middle",align:N<-.4?"left":N>.4?"right":"center"},{inheritColor:H}),silent:!0})):p.add(new ZRText$1({style:createTextStyle$1(b,{text:z,x:U,y:Y,verticalAlign:"middle",align:"center"},{inheritColor:H}),silent:!0,originX:U,originY:Y,rotation:X}))}if(A.get("show")&&B!==C){var G=A.get("distance");G=G?G+d:d;for(var J=0;J<=E;J++){N=Math.cos(M),V=Math.sin(M);var te=new Line$3({shape:{x1:N*(_-G)+g,y1:V*(_-G)+y,x2:N*(_-D-G)+g,y2:V*(_-D-G)+y},silent:!0,style:R});R.stroke==="auto"&&te.setStyle({stroke:u((B+J/E)/C)}),p.add(te),M+=L}M-=L}else M+=P}},a.prototype._renderPointer=function(r,o,l,u,c,h,f,v,d){var p=this.group,g=this._data,y=this._progressEls,_=[],S=r.get(["pointer","show"]),x=r.getModel("progress"),T=x.get("show"),A=r.getData(),b=A.mapDimension("value"),C=+r.get("min"),E=+r.get("max"),w=[C,E],D=[h,f];function M(L,I){var R=A.getItemModel(L),O=R.getModel("pointer"),N=parsePercent(O.get("width"),c.r),V=parsePercent(O.get("length"),c.r),B=r.get(["pointer","icon"]),G=O.get("offsetCenter"),F=parsePercent(G[0],c.r),z=parsePercent(G[1],c.r),H=O.get("keepAspect"),U;return B?U=createSymbol$1(B,F-N/2,z-V,N,V,null,H):U=new PointerPath$1({shape:{angle:-Math.PI/2,width:N,r:V,x:F,y:z}}),U.rotation=-(I+Math.PI/2),U.x=c.cx,U.y=c.cy,U}function P(L,I){var R=x.get("roundCap"),O=R?Sausage:Sector$1,N=x.get("overlap"),V=N?x.get("width"):d/A.count(),B=N?c.r-V:c.r-(L+1)*V,G=N?c.r:c.r-L*V,F=new O({shape:{startAngle:h,endAngle:I,cx:c.cx,cy:c.cy,clockwise:v,r0:B,r:G}});return N&&(F.z2=E-A.get(b,L)%E),F}(T||S)&&(A.diff(g).add(function(L){var I=A.get(b,L);if(S){var R=M(L,h);initProps(R,{rotation:-((isNaN(+I)?D[0]:linearMap$2(I,w,D,!0))+Math.PI/2)},r),p.add(R),A.setItemGraphicEl(L,R)}if(T){var O=P(L,h),N=x.get("clip");initProps(O,{shape:{endAngle:linearMap$2(I,w,D,N)}},r),p.add(O),setCommonECData(r.seriesIndex,A.dataType,L,O),_[L]=O}}).update(function(L,I){var R=A.get(b,L);if(S){var O=g.getItemGraphicEl(I),N=O?O.rotation:h,V=M(L,N);V.rotation=N,updateProps$1(V,{rotation:-((isNaN(+R)?D[0]:linearMap$2(R,w,D,!0))+Math.PI/2)},r),p.add(V),A.setItemGraphicEl(L,V)}if(T){var B=y[I],G=B?B.shape.endAngle:h,F=P(L,G),z=x.get("clip");updateProps$1(F,{shape:{endAngle:linearMap$2(R,w,D,z)}},r),p.add(F),setCommonECData(r.seriesIndex,A.dataType,L,F),_[L]=F}}).execute(),A.each(function(L){var I=A.getItemModel(L),R=I.getModel("emphasis"),O=R.get("focus"),N=R.get("blurScope"),V=R.get("disabled");if(S){var B=A.getItemGraphicEl(L),G=A.getItemVisual(L,"style"),F=G.fill;if(B instanceof ZRImage$1){var z=B.style;B.useStyle(extend({image:z.image,x:z.x,y:z.y,width:z.width,height:z.height},G))}else B.useStyle(G),B.type!=="pointer"&&B.setColor(F);B.setStyle(I.getModel(["pointer","itemStyle"]).getItemStyle()),B.style.fill==="auto"&&B.setStyle("fill",u(linearMap$2(A.get(b,L),w,[0,1],!0))),B.z2EmphasisLift=0,setStatesStylesFromModel(B,I),toggleHoverEmphasis(B,O,N,V)}if(T){var H=_[L];H.useStyle(A.getItemVisual(L,"style")),H.setStyle(I.getModel(["progress","itemStyle"]).getItemStyle()),H.z2EmphasisLift=0,setStatesStylesFromModel(H,I),toggleHoverEmphasis(H,O,N,V)}}),this._progressEls=_)},a.prototype._renderAnchor=function(r,o){var l=r.getModel("anchor"),u=l.get("show");if(u){var c=l.get("size"),h=l.get("icon"),f=l.get("offsetCenter"),v=l.get("keepAspect"),d=createSymbol$1(h,o.cx-c/2+parsePercent(f[0],o.r),o.cy-c/2+parsePercent(f[1],o.r),c,c,null,v);d.z2=l.get("showAbove")?1:0,d.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(d)}},a.prototype._renderTitleAndDetail=function(r,o,l,u,c){var h=this,f=r.getData(),v=f.mapDimension("value"),d=+r.get("min"),p=+r.get("max"),g=new Group$4,y=[],_=[],S=r.isAnimationEnabled(),x=r.get(["pointer","showAbove"]);f.diff(this._data).add(function(T){y[T]=new ZRText$1({silent:!0}),_[T]=new ZRText$1({silent:!0})}).update(function(T,A){y[T]=h._titleEls[A],_[T]=h._detailEls[A]}).execute(),f.each(function(T){var A=f.getItemModel(T),b=f.get(v,T),C=new Group$4,E=u(linearMap$2(b,[d,p],[0,1],!0)),w=A.getModel("title");if(w.get("show")){var D=w.get("offsetCenter"),M=c.cx+parsePercent(D[0],c.r),P=c.cy+parsePercent(D[1],c.r),L=y[T];L.attr({z2:x?0:2,style:createTextStyle$1(w,{x:M,y:P,text:f.getName(T),align:"center",verticalAlign:"middle"},{inheritColor:E})}),C.add(L)}var I=A.getModel("detail");if(I.get("show")){var R=I.get("offsetCenter"),O=c.cx+parsePercent(R[0],c.r),N=c.cy+parsePercent(R[1],c.r),V=parsePercent(I.get("width"),c.r),B=parsePercent(I.get("height"),c.r),G=r.get(["progress","show"])?f.getItemVisual(T,"style").fill:E,L=_[T],F=I.get("formatter");L.attr({z2:x?0:2,style:createTextStyle$1(I,{x:O,y:N,text:formatLabel(b,F),width:isNaN(V)?null:V,height:isNaN(B)?null:B,align:"center",verticalAlign:"middle"},{inheritColor:G})}),setLabelValueAnimation(L,{normal:I},b,function(H){return formatLabel(H,F)}),S&&animateLabelValue(L,T,f,r,{getFormattedLabel:function(H,U,Y,Z,X,J){return formatLabel(J?J.interpolatedValue:b,F)}}),C.add(L)}g.add(C)}),this.group.add(g),this._titleEls=y,this._detailEls=_},a.type="gauge",a}(ChartView$1);const GaugeView$1=GaugeView;var GaugeSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.visualStyleAccessPath="itemStyle",r}return a.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,["value"])},a.type="series.gauge",a.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},a}(SeriesModel$1);const GaugeSeriesModel$1=GaugeSeriesModel;function install$E(n){n.registerChartView(GaugeView$1),n.registerSeriesModel(GaugeSeriesModel$1)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(n){__extends(a,n);function a(r,o){var l=n.call(this)||this,u=l,c=new Polyline$3,h=new ZRText$1;return u.setTextContent(h),l.setTextGuideLine(c),l.updateData(r,o,!0),l}return a.prototype.updateData=function(r,o,l){var u=this,c=r.hostModel,h=r.getItemModel(o),f=r.getItemLayout(o),v=h.getModel("emphasis"),d=h.get(opacityAccessPath$1);d=d==null?1:d,l||saveOldStyle(u),u.useStyle(r.getItemVisual(o,"style")),u.style.lineJoin="round",l?(u.setShape({points:f.points}),u.style.opacity=0,initProps(u,{style:{opacity:d}},c,o)):updateProps$1(u,{style:{opacity:d},shape:{points:f.points}},c,o),setStatesStylesFromModel(u,h),this._updateLabel(r,o),toggleHoverEmphasis(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},a.prototype._updateLabel=function(r,o){var l=this,u=this.getTextGuideLine(),c=l.getTextContent(),h=r.hostModel,f=r.getItemModel(o),v=r.getItemLayout(o),d=v.label,p=r.getItemVisual(o,"style"),g=p.fill;setLabelStyle(c,getLabelStatesModels(f),{labelFetcher:r.hostModel,labelDataIndex:o,defaultOpacity:p.opacity,defaultText:r.getName(o)},{normal:{align:d.textAlign,verticalAlign:d.verticalAlign}}),l.setTextConfig({local:!0,inside:!!d.inside,insideStroke:g,outsideFill:g});var y=d.linePoints;u.setShape({points:y}),l.textGuideLineConfig={anchor:y?new Point$1(y[0][0],y[0][1]):null},updateProps$1(c,{style:{x:d.x,y:d.y}},h,o),c.attr({rotation:d.rotation,originX:d.x,originY:d.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(f),{stroke:g})},a}(Polygon$1),FunnelView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.ignoreLabelLineUpdate=!0,r}return a.prototype.render=function(r,o,l){var u=r.getData(),c=this._data,h=this.group;u.diff(c).add(function(f){var v=new FunnelPiece(u,f);u.setItemGraphicEl(f,v),h.add(v)}).update(function(f,v){var d=c.getItemGraphicEl(v);d.updateData(u,f),h.add(d),u.setItemGraphicEl(f,d)}).remove(function(f){var v=c.getItemGraphicEl(f);removeElementWithFadeOut(v,r,f)}).execute(),this._data=u},a.prototype.remove=function(){this.group.removeAll(),this._data=null},a.prototype.dispose=function(){},a.type="funnel",a}(ChartView$1);const FunnelView$1=FunnelView;var FunnelSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},a.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},a.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var o=r.labelLine,l=r.emphasis.labelLine;o.show=o.show&&r.label.show,l.show=l.show&&r.emphasis.label.show},a.prototype.getDataParams=function(r){var o=this.getData(),l=n.prototype.getDataParams.call(this,r),u=o.mapDimension("value"),c=o.getSum(u);return l.percent=c?+(o.get(u,r)/c*100).toFixed(2):0,l.$vars.push("percent"),l},a.type="series.funnel",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(SeriesModel$1);const FunnelSeriesModel$1=FunnelSeriesModel;function getViewRect$2(n,a){return getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function getSortedIndices(n,a){for(var r=n.mapDimension("value"),o=n.mapArray(r,function(f){return f}),l=[],u=a==="ascending",c=0,h=n.count();c<h;c++)l[c]=c;return isFunction(a)?l.sort(a):a!=="none"&&l.sort(function(f,v){return u?o[f]-o[v]:o[v]-o[f]}),l}function labelLayout(n){var a=n.hostModel,r=a.get("orient");n.each(function(o){var l=n.getItemModel(o),u=l.getModel("label"),c=u.get("position"),h=l.getModel("labelLine"),f=n.getItemLayout(o),v=f.points,d=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",p,g,y,_;if(d)c==="insideLeft"?(g=(v[0][0]+v[3][0])/2+5,y=(v[0][1]+v[3][1])/2,p="left"):c==="insideRight"?(g=(v[1][0]+v[2][0])/2-5,y=(v[1][1]+v[2][1])/2,p="right"):(g=(v[0][0]+v[1][0]+v[2][0]+v[3][0])/4,y=(v[0][1]+v[1][1]+v[2][1]+v[3][1])/4,p="center"),_=[[g,y],[g,y]];else{var S=void 0,x=void 0,T=void 0,A=void 0,b=h.get("length");({}).NODE_ENV!=="production"&&(r==="vertical"&&["top","bottom"].indexOf(c)>-1&&(c="left",console.warn("Position error: Funnel chart on vertical orient dose not support top and bottom.")),r==="horizontal"&&["left","right"].indexOf(c)>-1&&(c="bottom",console.warn("Position error: Funnel chart on horizontal orient dose not support left and right."))),c==="left"?(S=(v[3][0]+v[0][0])/2,x=(v[3][1]+v[0][1])/2,T=S-b,g=T-5,p="right"):c==="right"?(S=(v[1][0]+v[2][0])/2,x=(v[1][1]+v[2][1])/2,T=S+b,g=T+5,p="left"):c==="top"?(S=(v[3][0]+v[0][0])/2,x=(v[3][1]+v[0][1])/2,A=x-b,y=A-5,p="center"):c==="bottom"?(S=(v[1][0]+v[2][0])/2,x=(v[1][1]+v[2][1])/2,A=x+b,y=A+5,p="center"):c==="rightTop"?(S=r==="horizontal"?v[3][0]:v[1][0],x=r==="horizontal"?v[3][1]:v[1][1],r==="horizontal"?(A=x-b,y=A-5,p="center"):(T=S+b,g=T+5,p="top")):c==="rightBottom"?(S=v[2][0],x=v[2][1],r==="horizontal"?(A=x+b,y=A+5,p="center"):(T=S+b,g=T+5,p="bottom")):c==="leftTop"?(S=v[0][0],x=r==="horizontal"?v[0][1]:v[1][1],r==="horizontal"?(A=x-b,y=A-5,p="center"):(T=S-b,g=T-5,p="right")):c==="leftBottom"?(S=r==="horizontal"?v[1][0]:v[3][0],x=r==="horizontal"?v[1][1]:v[2][1],r==="horizontal"?(A=x+b,y=A+5,p="center"):(T=S-b,g=T-5,p="right")):(S=(v[1][0]+v[2][0])/2,x=(v[1][1]+v[2][1])/2,r==="horizontal"?(A=x+b,y=A+5,p="center"):(T=S+b,g=T+5,p="left")),r==="horizontal"?(T=S,g=T):(A=x,y=A),_=[[S,x],[T,A]]}f.label={linePoints:_,x:g,y,verticalAlign:"middle",textAlign:p,inside:d}})}function funnelLayout(n,a){n.eachSeriesByType("funnel",function(r){var o=r.getData(),l=o.mapDimension("value"),u=r.get("sort"),c=getViewRect$2(r,a),h=r.get("orient"),f=c.width,v=c.height,d=getSortedIndices(o,u),p=c.x,g=c.y,y=h==="horizontal"?[parsePercent(r.get("minSize"),v),parsePercent(r.get("maxSize"),v)]:[parsePercent(r.get("minSize"),f),parsePercent(r.get("maxSize"),f)],_=o.getDataExtent(l),S=r.get("min"),x=r.get("max");S==null&&(S=Math.min(_[0],0)),x==null&&(x=_[1]);var T=r.get("funnelAlign"),A=r.get("gap"),b=h==="horizontal"?f:v,C=(b-A*(o.count()-1))/o.count(),E=function(N,V){if(h==="horizontal"){var B=o.get(l,N)||0,G=linearMap$2(B,[S,x],y,!0),F=void 0;switch(T){case"top":F=g;break;case"center":F=g+(v-G)/2;break;case"bottom":F=g+(v-G);break}return[[V,F],[V,F+G]]}var z=o.get(l,N)||0,H=linearMap$2(z,[S,x],y,!0),U;switch(T){case"left":U=p;break;case"center":U=p+(f-H)/2;break;case"right":U=p+f-H;break}return[[U,V],[U+H,V]]};u==="ascending"&&(C=-C,A=-A,h==="horizontal"?p+=f:g+=v,d=d.reverse());for(var w=0;w<d.length;w++){var D=d[w],M=d[w+1],P=o.getItemModel(D);if(h==="horizontal"){var L=P.get(["itemStyle","width"]);L==null?L=C:(L=parsePercent(L,f),u==="ascending"&&(L=-L));var I=E(D,p),R=E(M,p+L);p+=L+A,o.setItemLayout(D,{points:I.concat(R.slice().reverse())})}else{var O=P.get(["itemStyle","height"]);O==null?O=C:(O=parsePercent(O,v),u==="ascending"&&(O=-O));var I=E(D,g),R=E(M,g+O);g+=O+A,o.setItemLayout(D,{points:I.concat(R.slice().reverse())})}}labelLayout(o)})}function install$D(n){n.registerChartView(FunnelView$1),n.registerSeriesModel(FunnelSeriesModel$1),n.registerLayout(funnelLayout),n.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$2=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._dataGroup=new Group$4,r._initialized=!1,r}return a.prototype.init=function(){this.group.add(this._dataGroup)},a.prototype.render=function(r,o,l,u){this._progressiveEls=null;var c=this._dataGroup,h=r.getData(),f=this._data,v=r.coordinateSystem,d=v.dimensions,p=makeSeriesScope(r);h.diff(f).add(g).update(y).remove(_).execute();function g(x){var T=addEl(h,c,x,d,v);updateElCommon(T,h,x,p)}function y(x,T){var A=f.getItemGraphicEl(T),b=createLinePoints(h,x,d,v);h.setItemGraphicEl(x,A),updateProps$1(A,{shape:{points:b}},r,x),saveOldStyle(A),updateElCommon(A,h,x,p)}function _(x){var T=f.getItemGraphicEl(x);c.remove(T)}if(!this._initialized){this._initialized=!0;var S=createGridClipShape$2(v,r,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(S)}this._data=h},a.prototype.incrementalPrepareRender=function(r,o,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},a.prototype.incrementalRender=function(r,o,l){for(var u=o.getData(),c=o.coordinateSystem,h=c.dimensions,f=makeSeriesScope(o),v=this._progressiveEls=[],d=r.start;d<r.end;d++){var p=addEl(u,this._dataGroup,d,h,c);p.incremental=!0,updateElCommon(p,u,d,f),v.push(p)}},a.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},a.type="parallel",a}(ChartView$1);function createGridClipShape$2(n,a,r){var o=n.model,l=n.getRect(),u=new Rect$3({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),c=o.get("layout")==="horizontal"?"width":"height";return u.setShape(c,0),initProps(u,{shape:{width:l.width,height:l.height}},a,r),u}function createLinePoints(n,a,r,o){for(var l=[],u=0;u<r.length;u++){var c=r[u],h=n.get(n.mapDimension(c),a);isEmptyValue(h,o.getAxis(c).type)||l.push(o.dataToPoint(h,c))}return l}function addEl(n,a,r,o,l){var u=createLinePoints(n,r,o,l),c=new Polyline$3({shape:{points:u},z2:10});return a.add(c),n.setItemGraphicEl(r,c),c}function makeSeriesScope(n){var a=n.get("smooth",!0);return a===!0&&(a=DEFAULT_SMOOTH),a=numericToNumber(a),eqNaN(a)&&(a=0),{smooth:a}}function updateElCommon(n,a,r,o){n.useStyle(a.getItemVisual(r,"style")),n.style.fill=null,n.setShape("smooth",o.smooth);var l=a.getItemModel(r),u=l.getModel("emphasis");setStatesStylesFromModel(n,l,"lineStyle"),toggleHoverEmphasis(n,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue(n,a){return a==="category"?n==null:n==null||isNaN(n)}const ParallelView$3=ParallelView$2;var ParallelSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return a.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},a.prototype.getRawIndicesByActiveState=function(r){var o=this.coordinateSystem,l=this.getData(),u=[];return o.eachActiveState(l,function(c,h){r===c&&u.push(l.getRawIndex(h))}),u},a.type="series.parallel",a.dependencies=["parallel"],a.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},a}(SeriesModel$1);function makeDefaultEncode(n){var a=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(!!a){var r={};return each$f(a.dimensions,function(o){var l=convertDimNameToNumber(o);r[o]=l}),r}}function convertDimNameToNumber(n){return+n.replace("dim","")}const ParallelSeriesModel$1=ParallelSeriesModel;var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(n,a){var r=n.coordinateSystem,o={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(l,u){r.eachActiveState(u,function(c,h){var f=o[c];if(c==="normal"&&u.hasItemOption){var v=u.getItemModel(h).get(opacityAccessPath,!0);v!=null&&(f=v)}var d=u.ensureUniqueItemVisual(h,"style");d.opacity=f},l.start,l.end)}}}};const parallelVisual$1=parallelVisual;function parallelPreprocessor(n){createParallelIfNeeded(n),mergeAxisOptionFromParallel(n)}function createParallelIfNeeded(n){if(!n.parallel){var a=!1;each$f(n.series,function(r){r&&r.type==="parallel"&&(a=!0)}),a&&(n.parallel=[{}])}}function mergeAxisOptionFromParallel(n){var a=normalizeToArray(n.parallelAxis);each$f(a,function(r){if(!!isObject$3(r)){var o=r.parallelIndex||0,l=normalizeToArray(n.parallel)[o];l&&l.parallelAxisDefault&&merge(r,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){this._model=r,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(u,c){l.getZr().on(c,this._handlers[c]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},a.prototype.dispose=function(r,o){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,u){o.getZr().off(u,l)}),this._handlers=null},a.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},a.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},r))},a.type="parallel",a}(ComponentView$1),handlers$1={mousedown:function(n){checkTrigger(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var a=this._mouseDownPoint;if(checkTrigger(this,"click")&&a){var r=[n.offsetX,n.offsetY],o=Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2);if(o>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var a=this._model,r=a.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),o=r.behavior;o==="jump"&&this._throttledDispatchExpand.debounceNextCall(a.get("axisExpandDebounce")),this._throttledDispatchExpand(o==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:o==="jump"?null:{duration:0}})}}};function checkTrigger(n,a){var r=n._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===a}const ParallelView$1=ParallelView;var ParallelModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},a.prototype.mergeOption=function(r){var o=this.option;r&&merge(o,r,!0),this._initDimensions()},a.prototype.contains=function(r,o){var l=r.get("parallelIndex");return l!=null&&o.getComponent("parallel",l)===this},a.prototype.setAxisExpand=function(r){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(o){r.hasOwnProperty(o)&&(this.option[o]=r[o])},this)},a.prototype._initDimensions=function(){var r=this.dimensions=[],o=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(u){r.push("dim"+u.get("dim")),o.push(u.componentIndex)})},a.type="parallel",a.dependencies=["parallelAxis"],a.layoutMode="box",a.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},a}(ComponentModel$1);const ParallelModel$1=ParallelModel;var ParallelAxis=function(n){__extends(a,n);function a(r,o,l,u,c){var h=n.call(this,r,o,l)||this;return h.type=u||"value",h.axisIndex=c,h}return a.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},a}(Axis$1);const ParallelAxis$1=ParallelAxis;function sliderMove(n,a,r,o,l,u){n=n||0;var c=r[1]-r[0];if(l!=null&&(l=restrict$1(l,[0,c])),u!=null&&(u=Math.max(u,l!=null?l:0)),o==="all"){var h=Math.abs(a[1]-a[0]);h=restrict$1(h,[0,c]),l=u=restrict$1(h,[l,u]),o=0}a[0]=restrict$1(a[0],r),a[1]=restrict$1(a[1],r);var f=getSpanSign(a,o);a[o]+=n;var v=l||0,d=r.slice();f.sign<0?d[0]+=v:d[1]-=v,a[o]=restrict$1(a[o],d);var p;return p=getSpanSign(a,o),l!=null&&(p.sign!==f.sign||p.span<l)&&(a[1-o]=a[o]+f.sign*l),p=getSpanSign(a,o),u!=null&&p.span>u&&(a[1-o]=a[o]+p.sign*u),a}function getSpanSign(n,a){var r=n[a]-n[1-a];return{span:Math.abs(r),sign:r>0?-1:r<0?1:a?-1:1}}function restrict$1(n,a){return Math.min(a[1]!=null?a[1]:1/0,Math.max(a[0]!=null?a[0]:-1/0,n))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function n(a,r,o){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=a.dimensions,this._model=a,this._init(a,r,o)}return n.prototype._init=function(a,r,o){var l=a.dimensions,u=a.parallelAxisIndex;each$a(l,function(c,h){var f=u[h],v=r.getComponent("parallelAxis",f),d=this._axesMap.set(c,new ParallelAxis$1(c,createScaleByModel$1(v),[0,0],v.get("type"),f)),p=d.type==="category";d.onBand=p&&v.get("boundaryGap"),d.inverse=v.get("inverse"),v.axis=d,d.model=v,d.coordinateSystem=v.coordinateSystem=this},this)},n.prototype.update=function(a,r){this._updateAxesFromSeries(this._model,a)},n.prototype.containPoint=function(a){var r=this._makeLayoutInfo(),o=r.axisBase,l=r.layoutBase,u=r.pixelDimIndex,c=a[1-u],h=a[u];return c>=o&&c<=o+r.axisLength&&h>=l&&h<=l+r.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(a,r){r.eachSeries(function(o){if(!!a.contains(o,r)){var l=o.getData();each$a(this.dimensions,function(u){var c=this._axesMap.get(u);c.scale.unionExtentFromData(l,l.mapDimension(u)),niceScaleExtent(c.scale,c.model)},this)}},this)},n.prototype.resize=function(a,r){this._rect=getLayoutRect(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var a=this._model,r=this._rect,o=["x","y"],l=["width","height"],u=a.get("layout"),c=u==="horizontal"?0:1,h=r[l[c]],f=[0,h],v=this.dimensions.length,d=restrict(a.get("axisExpandWidth"),f),p=restrict(a.get("axisExpandCount")||0,[0,v]),g=a.get("axisExpandable")&&v>3&&v>p&&p>1&&d>0&&h>0,y=a.get("axisExpandWindow"),_;if(y)_=restrict(y[1]-y[0],f),y[1]=y[0]+_;else{_=restrict(d*(p-1),f);var S=a.get("axisExpandCenter")||mathFloor(v/2);y=[d*S-_/2],y[1]=y[0]+_}var x=(h-_)/(v-p);x<3&&(x=0);var T=[mathFloor(round(y[0]/d,1))+1,mathCeil(round(y[1]/d,1))-1],A=x/d*y[0];return{layout:u,pixelDimIndex:c,layoutBase:r[o[c]],layoutLength:h,axisBase:r[o[1-c]],axisLength:r[l[1-c]],axisExpandable:g,axisExpandWidth:d,axisCollapseWidth:x,axisExpandWindow:y,axisCount:v,winInnerIndices:T,axisExpandWindow0Pos:A}},n.prototype._layoutAxes=function(){var a=this._rect,r=this._axesMap,o=this.dimensions,l=this._makeLayoutInfo(),u=l.layout;r.each(function(c){var h=[0,l.axisLength],f=c.inverse?1:0;c.setExtent(h[f],h[1-f])}),each$a(o,function(c,h){var f=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(h,l),v={horizontal:{x:f.position,y:l.axisLength},vertical:{x:0,y:f.position}},d={horizontal:PI$1/2,vertical:0},p=[v[u].x+a.x,v[u].y+a.y],g=d[u],y=create$1();rotate(y,y,g),translate(y,y,p),this._axesLayout[c]={position:p,rotation:g,transform:y,axisNameAvailableWidth:f.axisNameAvailableWidth,axisLabelShow:f.axisLabelShow,nameTruncateMaxWidth:f.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(a){return this._axesMap.get(a)},n.prototype.dataToPoint=function(a,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(a),r)},n.prototype.eachActiveState=function(a,r,o,l){o==null&&(o=0),l==null&&(l=a.count());var u=this._axesMap,c=this.dimensions,h=[],f=[];each$f(c,function(x){h.push(a.mapDimension(x)),f.push(u.get(x).model)});for(var v=this.hasAxisBrushed(),d=o;d<l;d++){var p=void 0;if(!v)p="normal";else{p="active";for(var g=a.getValues(h,d),y=0,_=c.length;y<_;y++){var S=f[y].getActiveState(g[y]);if(S==="inactive"){p="inactive";break}}}r(p,d)}},n.prototype.hasAxisBrushed=function(){for(var a=this.dimensions,r=this._axesMap,o=!1,l=0,u=a.length;l<u;l++)r.get(a[l]).model.getActiveState()!=="normal"&&(o=!0);return o},n.prototype.axisCoordToPoint=function(a,r){var o=this._axesLayout[r];return applyTransform([a,0],o.transform)},n.prototype.getAxisLayout=function(a){return clone$4(this._axesLayout[a])},n.prototype.getSlidedAxisExpandWindow=function(a){var r=this._makeLayoutInfo(),o=r.pixelDimIndex,l=r.axisExpandWindow.slice(),u=l[1]-l[0],c=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(a))return{behavior:"none",axisExpandWindow:l};var h=a[o]-r.layoutBase-r.axisExpandWindow0Pos,f,v="slide",d=r.axisCollapseWidth,p=this._model.get("axisExpandSlideTriggerArea"),g=p[0]!=null;if(d)g&&d&&h<u*p[0]?(v="jump",f=h-u*p[2]):g&&d&&h>u*(1-p[0])?(v="jump",f=h-u*(1-p[2])):(f=h-u*p[1])>=0&&(f=h-u*(1-p[1]))<=0&&(f=0),f*=r.axisExpandWidth/d,f?sliderMove(f,l,c,"all"):v="none";else{var y=l[1]-l[0],_=c[1]*h/y;l=[mathMax$2(0,_-y/2)],l[1]=mathMin$2(c[1],l[0]+y),l[0]=l[1]-y}return{axisExpandWindow:l,behavior:v}},n}();function restrict(n,a){return mathMin$2(mathMax$2(n,a[0]),a[1])}function layoutAxisWithoutExpand(n,a){var r=a.layoutLength/(a.axisCount-1);return{position:r*n,axisNameAvailableWidth:r,axisLabelShow:!0}}function layoutAxisWithExpand(n,a){var r=a.layoutLength,o=a.axisExpandWidth,l=a.axisCount,u=a.axisCollapseWidth,c=a.winInnerIndices,h,f=u,v=!1,d;return n<c[0]?(h=n*u,d=u):n<=c[1]?(h=a.axisExpandWindow0Pos+n*o-a.axisExpandWindow[0],f=o,v=!0):(h=r-(l-1-n)*u,d=u),{position:h,axisNameAvailableWidth:f,axisLabelShow:v,nameTruncateMaxWidth:d}}const Parallel$1=Parallel;function createParallelCoordSys(n,a){var r=[];return n.eachComponent("parallel",function(o,l){var u=new Parallel$1(o,n,a);u.name="parallel_"+l,u.resize(o,a),o.coordinateSystem=u,u.model=o,r.push(u)}),n.eachSeries(function(o){if(o.get("coordinateSystem")==="parallel"){var l=o.getReferringComponents("parallel",SINGLE_REFERRING).models[0];o.coordinateSystem=l.coordinateSystem}}),r}var parallelCoordSysCreator={create:createParallelCoordSys};const parallelCoordSysCreator$1=parallelCoordSysCreator;var ParallelAxisModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.activeIntervals=[],r}return a.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},a.prototype.setActiveIntervals=function(r){var o=this.activeIntervals=clone$4(r);if(o)for(var l=o.length-1;l>=0;l--)asc$2(o[l])},a.prototype.getActiveState=function(r){var o=this.activeIntervals;if(!o.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(o.length===1){var l=o[0];if(l[0]<=r&&r<=l[1])return"active"}else for(var u=0,c=o.length;u<c;u++)if(o[u][0]<=r&&r<=o[u][1])return"active";return"inactive"},a}(ComponentModel$1);mixin(ParallelAxisModel,AxisModelCommonMixin);const ParallelAxisModel$1=ParallelAxisModel;var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(n){__extends(a,n);function a(r){var o=n.call(this)||this;return o._track=[],o._covers=[],o._handlers={},{}.NODE_ENV!=="production"&&assert(r),o._zr=r,o.group=new Group$4,o._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,u){this._handlers[u]=bind$1(l,this)},o),o}return a.prototype.enableBrush=function(r){return{}.NODE_ENV!=="production"&&assert(this._mounted),this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},a.prototype._doEnableBrush=function(r){var o=this._zr;this._enableGlobalPan||take(o,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,u){o.on(u,l)}),this._brushType=r.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),r,!0)},a.prototype._doDisableBrush=function(){var r=this._zr;release(r,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,l){r.off(l,o)}),this._brushType=this._brushOption=null},a.prototype.setPanels=function(r){if(r&&r.length){var o=this._panels={};each$f(r,function(l){o[l.panelId]=clone$4(l)})}else this._panels=null;return this},a.prototype.mount=function(r){r=r||{},{}.NODE_ENV!=="production"&&(this._mounted=!0),this._enableGlobalPan=r.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=o.getLocalTransform(),this},a.prototype.updateCovers=function(r){({}).NODE_ENV!=="production"&&assert(this._mounted),r=map$1(r,function(g){return merge(clone$4(DEFAULT_BRUSH_OPT),g,!0)});var o="\0-brush-index-",l=this._covers,u=this._covers=[],c=this,h=this._creatingCover;return new DataDiffer$1(l,r,v,f).add(d).update(d).remove(p).execute(),this;function f(g,y){return(g.id!=null?g.id:o+y)+"-"+g.brushType}function v(g,y){return f(g.__brushOption,y)}function d(g,y){var _=r[g];if(y!=null&&l[y]===h)u[g]=l[y];else{var S=u[g]=y!=null?(l[y].__brushOption=_,l[y]):endCreating(c,createCover(c,_));updateCoverAfterCreation(c,S)}}function p(g){l[g]!==h&&c.group.remove(l[g])}},a.prototype.unmount=function(){if(!({}.NODE_ENV!=="production"&&!this._mounted))return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),{}.NODE_ENV!=="production"&&(this._mounted=!1),this},a.prototype.dispose=function(){this.unmount(),this.off()},a}(Eventful$1);function createCover(n,a){var r=coverRenderers[a.brushType].createCover(n,a);return r.__brushOption=a,updateZ$1(r,a),n.group.add(r),r}function endCreating(n,a){var r=getCoverRenderer(a);return r.endCreating&&(r.endCreating(n,a),updateZ$1(a,a.__brushOption)),a}function updateCoverShape(n,a){var r=a.__brushOption;getCoverRenderer(a).updateCoverShape(n,a,r.range,r)}function updateZ$1(n,a){var r=a.z;r==null&&(r=COVER_Z),n.traverse(function(o){o.z=r,o.z2=r})}function updateCoverAfterCreation(n,a){getCoverRenderer(a).updateCommon(n,a),updateCoverShape(n,a)}function getCoverRenderer(n){return coverRenderers[n.__brushOption.brushType]}function getPanelByPoint(n,a,r){var o=n._panels;if(!o)return BRUSH_PANEL_GLOBAL;var l,u=n._transform;return each$f(o,function(c){c.isTargetByCursor(a,r,u)&&(l=c)}),l}function getPanelByCover(n,a){var r=n._panels;if(!r)return BRUSH_PANEL_GLOBAL;var o=a.__brushOption.panelId;return o!=null?r[o]:BRUSH_PANEL_GLOBAL}function clearCovers(n){var a=n._covers,r=a.length;return each$f(a,function(o){n.group.remove(o)},n),a.length=0,!!r}function trigger(n,a){var r=map$1(n._covers,function(o){var l=o.__brushOption,u=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:u}});n.trigger("brush",{areas:r,isEnd:!!a.isEnd,removeOnClick:!!a.removeOnClick})}function shouldShowCover(n){var a=n._track;if(!a.length)return!1;var r=a[a.length-1],o=a[0],l=r[0]-o[0],u=r[1]-o[1],c=mathPow(l*l+u*u,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(n){var a=n.length-1;return a<0&&(a=0),[n[0],n[a]]}function createBaseRectCover(n,a,r,o){var l=new Group$4;return l.add(new Rect$3({name:"main",style:makeStyle(r),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,n,a,l,["n","s","w","e"]),ondragend:curry$1(trigger,a,{isEnd:!0})})),each$f(o,function(u){l.add(new Rect$3({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,n,a,l,u),ondragend:curry$1(trigger,a,{isEnd:!0})}))}),l}function updateBaseRect(n,a,r,o){var l=o.brushStyle.lineWidth||0,u=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),c=r[0][0],h=r[1][0],f=c-l/2,v=h-l/2,d=r[0][1],p=r[1][1],g=d-u+l/2,y=p-u+l/2,_=d-c,S=p-h,x=_+l,T=S+l;updateRectShape(n,a,"main",c,h,_,S),o.transformable&&(updateRectShape(n,a,"w",f,v,u,T),updateRectShape(n,a,"e",g,v,u,T),updateRectShape(n,a,"n",f,v,x,u),updateRectShape(n,a,"s",f,y,x,u),updateRectShape(n,a,"nw",f,v,u,u),updateRectShape(n,a,"ne",g,v,u,u),updateRectShape(n,a,"sw",f,y,u,u),updateRectShape(n,a,"se",g,y,u,u))}function updateCommon$1(n,a){var r=a.__brushOption,o=r.transformable,l=a.childAt(0);l.useStyle(makeStyle(r)),l.attr({silent:!o,cursor:o?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var c=a.childOfName(u.join("")),h=u.length===1?getGlobalDirection1(n,u[0]):getGlobalDirection2(n,u);c&&c.attr({silent:!o,invisible:!o,cursor:o?CURSOR_MAP[h]+"-resize":null})})}function updateRectShape(n,a,r,o,l,u,c){var h=a.childOfName(r);h&&h.setShape(pointsToRect(clipByPanel(n,a,[[o,l],[o+u,l+c]])))}function makeStyle(n){return defaults({strokeNoScale:!0},n.brushStyle)}function formatRectRange(n,a,r,o){var l=[mathMin$1(n,r),mathMin$1(a,o)],u=[mathMax$1(n,r),mathMax$1(a,o)];return[[l[0],u[0]],[l[1],u[1]]]}function getTransform(n){return getTransform$1(n.group)}function getGlobalDirection1(n,a){var r={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(r[a],getTransform(n));return o[l]}function getGlobalDirection2(n,a){var r=[getGlobalDirection1(n,a[0]),getGlobalDirection1(n,a[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function driftRect(n,a,r,o,l,u){var c=r.__brushOption,h=n.toRectRange(c.range),f=toLocalDelta(a,l,u);each$f(o,function(v){var d=DIRECTION_MAP[v];h[d[0]][d[1]]+=f[d[0]]}),c.range=n.fromRectRange(formatRectRange(h[0][0],h[1][0],h[0][1],h[1][1])),updateCoverAfterCreation(a,r),trigger(a,{isEnd:!1})}function driftPolygon(n,a,r,o){var l=a.__brushOption.range,u=toLocalDelta(n,r,o);each$f(l,function(c){c[0]+=u[0],c[1]+=u[1]}),updateCoverAfterCreation(n,a),trigger(n,{isEnd:!1})}function toLocalDelta(n,a,r){var o=n.group,l=o.transformCoordToLocal(a,r),u=o.transformCoordToLocal(0,0);return[l[0]-u[0],l[1]-u[1]]}function clipByPanel(n,a,r){var o=getPanelByCover(n,a);return o&&o!==BRUSH_PANEL_GLOBAL?o.clipPath(r,n._transform):clone$4(r)}function pointsToRect(n){var a=mathMin$1(n[0][0],n[1][0]),r=mathMin$1(n[0][1],n[1][1]),o=mathMax$1(n[0][0],n[1][0]),l=mathMax$1(n[0][1],n[1][1]);return{x:a,y:r,width:o-a,height:l-r}}function resetCursor(n,a,r){if(!(!n._brushType||isOutsideZrArea(n,a.offsetX,a.offsetY))){var o=n._zr,l=n._covers,u=getPanelByPoint(n,a,r);if(!n._dragging)for(var c=0;c<l.length;c++){var h=l[c].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||h.panelId===u.panelId)&&coverRenderers[h.brushType].contain(l[c],r[0],r[1]))return}u&&o.setCursorStyle("crosshair")}}function preventDefault(n){var a=n.event;a.preventDefault&&a.preventDefault()}function mainShapeContain(n,a,r){return n.childOfName("main").contain(a,r)}function updateCoverByMouse(n,a,r,o){var l=n._creatingCover,u=n._creatingPanel,c=n._brushOption,h;if(n._track.push(r.slice()),shouldShowCover(n)||l){if(u&&!l){c.brushMode==="single"&&clearCovers(n);var f=clone$4(c);f.brushType=determineBrushType(f.brushType,u),f.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,l=n._creatingCover=createCover(n,f),n._covers.push(l)}if(l){var v=coverRenderers[determineBrushType(n._brushType,u)],d=l.__brushOption;d.range=v.getCreatingRange(clipByPanel(n,l,n._track)),o&&(endCreating(n,l),v.updateCommon(n,l)),updateCoverShape(n,l),h={isEnd:o}}}else o&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(n,a,r)&&clearCovers(n)&&(h={isEnd:o,removeOnClick:!0});return h}function determineBrushType(n,a){return n==="auto"?({}.NODE_ENV!=="production"&&assert(a&&a.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),a.defaultBrushType):n}var pointerHandlers={mousedown:function(n){if(this._dragging)handleDragEnd(this,n);else if(!n.target||!n.target.draggable){preventDefault(n);var a=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var r=this._creatingPanel=getPanelByPoint(this,n,a);r&&(this._dragging=!0,this._track=[a.slice()])}},mousemove:function(n){var a=n.offsetX,r=n.offsetY,o=this.group.transformCoordToLocal(a,r);if(resetCursor(this,n,o),this._dragging){preventDefault(n);var l=updateCoverByMouse(this,n,o,!1);l&&trigger(this,l)}},mouseup:function(n){handleDragEnd(this,n)}};function handleDragEnd(n,a){if(n._dragging){preventDefault(a);var r=a.offsetX,o=a.offsetY,l=n.group.transformCoordToLocal(r,o),u=updateCoverByMouse(n,a,l,!0);n._dragging=!1,n._track=[],n._creatingCover=null,u&&trigger(n,u)}}function isOutsideZrArea(n,a,r){var o=n._zr;return a<0||a>o.getWidth()||r<0||r>o.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(n,a){function r(o){return o}return createBaseRectCover({toRectRange:r,fromRectRange:r},n,a,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var a=getTrackEnds(n);return formatRectRange(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(n,a,r,o){updateBaseRect(n,a,r,o)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(n,a){var r=new Group$4;return r.add(new Polyline$3({name:"main",style:makeStyle(a),silent:!0})),r},getCreatingRange:function(n){return n},endCreating:function(n,a){a.remove(a.childAt(0)),a.add(new Polygon$1({name:"main",draggable:!0,drift:curry$1(driftPolygon,n,a),ondragend:curry$1(trigger,n,{isEnd:!0})}))},updateCoverShape:function(n,a,r,o){a.childAt(0).setShape({points:clipByPanel(n,a,r)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(n){return{createCover:function(a,r){return createBaseRectCover({toRectRange:function(o){var l=[o,[0,100]];return n&&l.reverse(),l},fromRectRange:function(o){return o[n]}},a,r,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(a){var r=getTrackEnds(a),o=mathMin$1(r[0][n],r[1][n]),l=mathMax$1(r[0][n],r[1][n]);return[o,l]},updateCoverShape:function(a,r,o,l){var u,c=getPanelByCover(a,r);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)u=c.getLinearBrushOtherExtent(n);else{var h=a._zr;u=[0,[h.getWidth(),h.getHeight()][1-n]]}var f=[o,u];n&&f.reverse(),updateBaseRect(a,r,f,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}const BrushController$1=BrushController;function makeRectPanelClipPath(n){return n=normalizeRect(n),function(a){return clipPointsByRect(a,n)}}function makeLinearBrushOtherExtent(n,a){return n=normalizeRect(n),function(r){var o=a!=null?a:r,l=o?n.width:n.height,u=o?n.x:n.y;return[u,u+(l||0)]}}function makeRectIsTargetByCursor(n,a,r){var o=normalizeRect(n);return function(l,u){return o.contain(u[0],u[1])&&!onIrrelevantElement(l,a,r)}}function normalizeRect(n){return BoundingRect$1.create(n)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o){n.prototype.init.apply(this,arguments),(this._brushController=new BrushController$1(o.getZr())).on("brush",bind$1(this._onBrush,this))},a.prototype.render=function(r,o,l,u){if(!fromAxisAreaSelect(r,o,u)){this.axisModel=r,this.api=l,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var h=getCoordSysModel(r,o),f=h.coordinateSystem,v=r.getAreaSelectStyle(),d=v.width,p=r.axis.dim,g=f.getAxisLayout(p),y=extend({strokeContainThreshold:d},g),_=new AxisBuilder$1(r,y);each$f(elementList$1,_.add,_),this._axisGroup.add(_.getGroup()),this._refreshBrushController(y,v,r,h,d,l),groupTransition(c,this._axisGroup,r)}}},a.prototype._refreshBrushController=function(r,o,l,u,c,h){var f=l.axis.getExtent(),v=f[1]-f[0],d=Math.min(30,Math.abs(v)*.1),p=BoundingRect$1.create({x:f[0],y:-c/2,width:v,height:c});p.x-=d,p.width+=2*d,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(p),isTargetByCursor:makeRectIsTargetByCursor(p,h,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(p,0)}]).enableBrush({brushType:"lineX",brushStyle:o,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},a.prototype._onBrush=function(r){var o=r.areas,l=this.axisModel,u=l.axis,c=map$1(o,function(h){return[u.coordToData(h.range[0],!0),u.coordToData(h.range[1],!0)]});(!l.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:c})},a.prototype.dispose=function(){this._brushController.dispose()},a.type="parallelAxis",a}(ComponentView$1);function fromAxisAreaSelect(n,a,r){return r&&r.type==="axisAreaSelect"&&a.findComponents({mainType:"parallelAxis",query:r})[0]===n}function getCoverInfoList(n){var a=n.axis;return map$1(n.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[a.dataToCoord(r[0],!0),a.dataToCoord(r[1],!0)]}})}function getCoordSysModel(n,a){return a.getComponent("parallel",n.get("parallelIndex"))}const ParallelAxisView$1=ParallelAxisView;var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(n){n.registerAction(actionInfo,function(a,r){r.eachComponent({mainType:"parallelAxis",query:a},function(o){o.axis.model.setActiveIntervals(a.intervals)})}),n.registerAction("parallelAxisExpand",function(a,r){r.eachComponent({mainType:"parallel",query:a},function(o){o.setAxisExpand(a)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(n){n.registerComponentView(ParallelView$1),n.registerComponentModel(ParallelModel$1),n.registerCoordinateSystem("parallel",parallelCoordSysCreator$1),n.registerPreprocessor(parallelPreprocessor),n.registerComponentModel(ParallelAxisModel$1),n.registerComponentView(ParallelAxisView$1),axisModelCreator(n,"parallel",ParallelAxisModel$1,defaultAxisOption),installParallelActions(n)}function install$B(n){use(install$C),n.registerChartView(ParallelView$3),n.registerSeriesModel(ParallelSeriesModel$1),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,parallelVisual$1)}var SankeyPathShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),SankeyPath=function(n){__extends(a,n);function a(r){return n.call(this,r)||this}return a.prototype.getDefaultShape=function(){return new SankeyPathShape},a.prototype.buildPath=function(r,o){var l=o.extent;r.moveTo(o.x1,o.y1),r.bezierCurveTo(o.cpx1,o.cpy1,o.cpx2,o.cpy2,o.x2,o.y2),o.orient==="vertical"?(r.lineTo(o.x2+l,o.y2),r.bezierCurveTo(o.cpx2+l,o.cpy2,o.cpx1+l,o.cpy1,o.x1+l,o.y1)):(r.lineTo(o.x2,o.y2+l),r.bezierCurveTo(o.cpx2,o.cpy2+l,o.cpx1,o.cpy1+l,o.x1,o.y1+l)),r.closePath()},a.prototype.highlight=function(){enterEmphasis(this)},a.prototype.downplay=function(){leaveEmphasis(this)},a}(Path$1),SankeyView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._focusAdjacencyDisabled=!1,r}return a.prototype.render=function(r,o,l){var u=this,c=r.getGraph(),h=this.group,f=r.layoutInfo,v=f.width,d=f.height,p=r.getData(),g=r.getData("edge"),y=r.get("orient");this._model=r,h.removeAll(),h.x=f.x,h.y=f.y,c.eachEdge(function(_){var S=new SankeyPath,x=getECData(S);x.dataIndex=_.dataIndex,x.seriesIndex=r.seriesIndex,x.dataType="edge";var T=_.getModel(),A=T.getModel("lineStyle"),b=A.get("curveness"),C=_.node1.getLayout(),E=_.node1.getModel(),w=E.get("localX"),D=E.get("localY"),M=_.node2.getLayout(),P=_.node2.getModel(),L=P.get("localX"),I=P.get("localY"),R=_.getLayout(),O,N,V,B,G,F,z,H;S.shape.extent=Math.max(1,R.dy),S.shape.orient=y,y==="vertical"?(O=(w!=null?w*v:C.x)+R.sy,N=(D!=null?D*d:C.y)+C.dy,V=(L!=null?L*v:M.x)+R.ty,B=I!=null?I*d:M.y,G=O,F=N*(1-b)+B*b,z=V,H=N*b+B*(1-b)):(O=(w!=null?w*v:C.x)+C.dx,N=(D!=null?D*d:C.y)+R.sy,V=L!=null?L*v:M.x,B=(I!=null?I*d:M.y)+R.ty,G=O*(1-b)+V*b,F=N,z=O*b+V*(1-b),H=B),S.setShape({x1:O,y1:N,x2:V,y2:B,cpx1:G,cpy1:F,cpx2:z,cpy2:H}),S.useStyle(A.getItemStyle()),applyCurveStyle(S.style,y,_);var U=""+T.get("value"),Y=getLabelStatesModels(T,"edgeLabel");setLabelStyle(S,Y,{labelFetcher:{getFormattedLabel:function(J,te,Q,q,ee,K){return r.getFormattedLabel(J,te,"edge",q,retrieve3(ee,Y.normal&&Y.normal.get("formatter"),U),K)}},labelDataIndex:_.dataIndex,defaultText:U}),S.setTextConfig({position:"inside"});var Z=T.getModel("emphasis");setStatesStylesFromModel(S,T,"lineStyle",function(J){var te=J.getItemStyle();return applyCurveStyle(te,y,_),te}),h.add(S),g.setItemGraphicEl(_.dataIndex,S);var X=Z.get("focus");toggleHoverEmphasis(S,X==="adjacency"?_.getAdjacentDataIndices():X==="trajectory"?_.getTrajectoryDataIndices():X,Z.get("blurScope"),Z.get("disabled"))}),c.eachNode(function(_){var S=_.getLayout(),x=_.getModel(),T=x.get("localX"),A=x.get("localY"),b=x.getModel("emphasis"),C=new Rect$3({shape:{x:T!=null?T*v:S.x,y:A!=null?A*d:S.y,width:S.dx,height:S.dy},style:x.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(C,getLabelStatesModels(x),{labelFetcher:{getFormattedLabel:function(w,D){return r.getFormattedLabel(w,D,"node")}},labelDataIndex:_.dataIndex,defaultText:_.id}),C.disableLabelAnimation=!0,C.setStyle("fill",_.getVisual("color")),C.setStyle("decal",_.getVisual("style").decal),setStatesStylesFromModel(C,x),h.add(C),p.setItemGraphicEl(_.dataIndex,C),getECData(C).dataType="node";var E=b.get("focus");toggleHoverEmphasis(C,E==="adjacency"?_.getAdjacentDataIndices():E==="trajectory"?_.getTrajectoryDataIndices():E,b.get("blurScope"),b.get("disabled"))}),p.eachItemGraphicEl(function(_,S){var x=p.getItemModel(S);x.get("draggable")&&(_.drift=function(T,A){u._focusAdjacencyDisabled=!0,this.shape.x+=T,this.shape.y+=A,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:p.getRawIndex(S),localX:this.shape.x/v,localY:this.shape.y/d})},_.ondragend=function(){u._focusAdjacencyDisabled=!1},_.draggable=!0,_.cursor="move")}),!this._data&&r.isAnimationEnabled()&&h.setClipPath(createGridClipShape$1(h.getBoundingRect(),r,function(){h.removeClipPath()})),this._data=r.getData()},a.prototype.dispose=function(){},a.type="sankey",a}(ChartView$1);function applyCurveStyle(n,a,r){switch(n.fill){case"source":n.fill=r.node1.getVisual("color"),n.decal=r.node1.getVisual("style").decal;break;case"target":n.fill=r.node2.getVisual("color"),n.decal=r.node2.getVisual("style").decal;break;case"gradient":var o=r.node1.getVisual("color"),l=r.node2.getVisual("color");isString(o)&&isString(l)&&(n.fill=new LinearGradient$1(0,0,+(a==="horizontal"),+(a==="vertical"),[{color:o,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(n,a,r){var o=new Rect$3({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return initProps(o,{shape:{width:n.width+20}},a,r),o}const SankeyView$1=SankeyView;var SankeySeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.getInitialData=function(r,o){var l=r.edges||r.links,u=r.data||r.nodes,c=r.levels;this.levelModels=[];for(var h=this.levelModels,f=0;f<c.length;f++)if(c[f].depth!=null&&c[f].depth>=0)h[c[f].depth]=new Model$1(c[f],this,o);else if({}.NODE_ENV!=="production")throw new Error("levels[i].depth is mandatory and should be natural number");if(u&&l){var v=createGraphFromNodeEdge(u,l,this,!0,d);return v.data}function d(p,g){p.wrapMethod("getItemModel",function(y,_){var S=y.parentModel,x=S.getData().getItemLayout(_);if(x){var T=x.depth,A=S.levelModels[T];A&&(y.parentModel=A)}return y}),g.wrapMethod("getItemModel",function(y,_){var S=y.parentModel,x=S.getGraph().getEdgeByIndex(_),T=x.node1.getLayout();if(T){var A=T.depth,b=S.levelModels[A];b&&(y.parentModel=b)}return y})}},a.prototype.setNodePosition=function(r,o){var l=this.option.data||this.option.nodes,u=l[r];u.localX=o[0],u.localY=o[1]},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.formatTooltip=function(r,o,l){function u(y){return isNaN(y)||y==null}if(l==="edge"){var c=this.getDataParams(r,l),h=c.data,f=c.value,v=h.source+" -- "+h.target;return createTooltipMarkup("nameValue",{name:v,value:f,noValue:u(f)})}else{var d=this.getGraph().getNodeByIndex(r),p=d.getLayout().value,g=this.getDataParams(r,l).data.name;return createTooltipMarkup("nameValue",{name:g!=null?g+"":null,value:p,noValue:u(p)})}},a.prototype.optionUpdated=function(){},a.prototype.getDataParams=function(r,o){var l=n.prototype.getDataParams.call(this,r,o);if(l.value==null&&o==="node"){var u=this.getGraph().getNodeByIndex(r),c=u.getLayout().value;l.value=c}return l},a.type="series.sankey",a.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},a}(SeriesModel$1);const SankeySeriesModel$1=SankeySeriesModel;function sankeyLayout(n,a){n.eachSeriesByType("sankey",function(r){var o=r.get("nodeWidth"),l=r.get("nodeGap"),u=getViewRect$1(r,a);r.layoutInfo=u;var c=u.width,h=u.height,f=r.getGraph(),v=f.nodes,d=f.edges;computeNodeValues(v);var p=filter(v,function(S){return S.getLayout().value===0}),g=p.length!==0?0:r.get("layoutIterations"),y=r.get("orient"),_=r.get("nodeAlign");layoutSankey(v,d,o,l,c,h,g,y,_)})}function getViewRect$1(n,a){return getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function layoutSankey(n,a,r,o,l,u,c,h,f){computeNodeBreadths(n,a,r,l,u,h,f),computeNodeDepths(n,a,u,l,o,c,h),computeEdgeDepths(n,h)}function computeNodeValues(n){each$f(n,function(a){var r=sum(a.outEdges,getEdgeValue),o=sum(a.inEdges,getEdgeValue),l=a.getValue()||0,u=Math.max(r,o,l);a.setLayout({value:u},!0)})}function computeNodeBreadths(n,a,r,o,l,u,c){for(var h=[],f=[],v=[],d=[],p=0,g=0;g<a.length;g++)h[g]=1;for(var g=0;g<n.length;g++)f[g]=n[g].inEdges.length,f[g]===0&&v.push(n[g]);for(var y=-1;v.length;){for(var _=0;_<v.length;_++){var S=v[_],x=S.hostGraph.data.getRawDataItem(S.dataIndex),T=x.depth!=null&&x.depth>=0;T&&x.depth>y&&(y=x.depth),S.setLayout({depth:T?x.depth:p},!0),u==="vertical"?S.setLayout({dy:r},!0):S.setLayout({dx:r},!0);for(var A=0;A<S.outEdges.length;A++){var b=S.outEdges[A],C=a.indexOf(b);h[C]=0;var E=b.node2,w=n.indexOf(E);--f[w]===0&&d.indexOf(E)<0&&d.push(E)}}++p,v=d,d=[]}for(var g=0;g<h.length;g++)if(h[g]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var D=y>p-1?y:p-1;c&&c!=="left"&&adjustNodeWithNodeAlign(n,c,u,D);var M=u==="vertical"?(l-r)/D:(o-r)/D;scaleNodeBreadths(n,M,u)}function isNodeDepth(n){var a=n.hostGraph.data.getRawDataItem(n.dataIndex);return a.depth!=null&&a.depth>=0}function adjustNodeWithNodeAlign(n,a,r,o){if(a==="right"){for(var l=[],u=n,c=0;u.length;){for(var h=0;h<u.length;h++){var f=u[h];f.setLayout({skNodeHeight:c},!0);for(var v=0;v<f.inEdges.length;v++){var d=f.inEdges[v];l.indexOf(d.node1)<0&&l.push(d.node1)}}u=l,l=[],++c}each$f(n,function(p){isNodeDepth(p)||p.setLayout({depth:Math.max(0,o-p.getLayout().skNodeHeight)},!0)})}else a==="justify"&&moveSinksRight(n,o)}function moveSinksRight(n,a){each$f(n,function(r){!isNodeDepth(r)&&!r.outEdges.length&&r.setLayout({depth:a},!0)})}function scaleNodeBreadths(n,a,r){each$f(n,function(o){var l=o.getLayout().depth*a;r==="vertical"?o.setLayout({y:l},!0):o.setLayout({x:l},!0)})}function computeNodeDepths(n,a,r,o,l,u,c){var h=prepareNodesByBreadth(n,c);initializeNodeDepth(h,a,r,o,l,c),resolveCollisions(h,l,r,o,c);for(var f=1;u>0;u--)f*=.99,relaxRightToLeft(h,f,c),resolveCollisions(h,l,r,o,c),relaxLeftToRight(h,f,c),resolveCollisions(h,l,r,o,c)}function prepareNodesByBreadth(n,a){var r=[],o=a==="vertical"?"y":"x",l=groupData(n,function(u){return u.getLayout()[o]});return l.keys.sort(function(u,c){return u-c}),each$f(l.keys,function(u){r.push(l.buckets.get(u))}),r}function initializeNodeDepth(n,a,r,o,l,u){var c=1/0;each$f(n,function(h){var f=h.length,v=0;each$f(h,function(p){v+=p.getLayout().value});var d=u==="vertical"?(o-(f-1)*l)/v:(r-(f-1)*l)/v;d<c&&(c=d)}),each$f(n,function(h){each$f(h,function(f,v){var d=f.getLayout().value*c;u==="vertical"?(f.setLayout({x:v},!0),f.setLayout({dx:d},!0)):(f.setLayout({y:v},!0),f.setLayout({dy:d},!0))})}),each$f(a,function(h){var f=+h.getValue()*c;h.setLayout({dy:f},!0)})}function resolveCollisions(n,a,r,o,l){var u=l==="vertical"?"x":"y";each$f(n,function(c){c.sort(function(S,x){return S.getLayout()[u]-x.getLayout()[u]});for(var h,f,v,d=0,p=c.length,g=l==="vertical"?"dx":"dy",y=0;y<p;y++)f=c[y],v=d-f.getLayout()[u],v>0&&(h=f.getLayout()[u]+v,l==="vertical"?f.setLayout({x:h},!0):f.setLayout({y:h},!0)),d=f.getLayout()[u]+f.getLayout()[g]+a;var _=l==="vertical"?o:r;if(v=d-a-_,v>0){h=f.getLayout()[u]-v,l==="vertical"?f.setLayout({x:h},!0):f.setLayout({y:h},!0),d=h;for(var y=p-2;y>=0;--y)f=c[y],v=f.getLayout()[u]+f.getLayout()[g]+a-d,v>0&&(h=f.getLayout()[u]-v,l==="vertical"?f.setLayout({x:h},!0):f.setLayout({y:h},!0)),d=f.getLayout()[u]}})}function relaxRightToLeft(n,a,r){each$f(n.slice().reverse(),function(o){each$f(o,function(l){if(l.outEdges.length){var u=sum(l.outEdges,weightedTarget,r)/sum(l.outEdges,getEdgeValue);if(isNaN(u)){var c=l.outEdges.length;u=c?sum(l.outEdges,centerTarget,r)/c:0}if(r==="vertical"){var h=l.getLayout().x+(u-center(l,r))*a;l.setLayout({x:h},!0)}else{var f=l.getLayout().y+(u-center(l,r))*a;l.setLayout({y:f},!0)}}})})}function weightedTarget(n,a){return center(n.node2,a)*n.getValue()}function centerTarget(n,a){return center(n.node2,a)}function weightedSource(n,a){return center(n.node1,a)*n.getValue()}function centerSource(n,a){return center(n.node1,a)}function center(n,a){return a==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function getEdgeValue(n){return n.getValue()}function sum(n,a,r){for(var o=0,l=n.length,u=-1;++u<l;){var c=+a(n[u],r);isNaN(c)||(o+=c)}return o}function relaxLeftToRight(n,a,r){each$f(n,function(o){each$f(o,function(l){if(l.inEdges.length){var u=sum(l.inEdges,weightedSource,r)/sum(l.inEdges,getEdgeValue);if(isNaN(u)){var c=l.inEdges.length;u=c?sum(l.inEdges,centerSource,r)/c:0}if(r==="vertical"){var h=l.getLayout().x+(u-center(l,r))*a;l.setLayout({x:h},!0)}else{var f=l.getLayout().y+(u-center(l,r))*a;l.setLayout({y:f},!0)}}})})}function computeEdgeDepths(n,a){var r=a==="vertical"?"x":"y";each$f(n,function(o){o.outEdges.sort(function(l,u){return l.node2.getLayout()[r]-u.node2.getLayout()[r]}),o.inEdges.sort(function(l,u){return l.node1.getLayout()[r]-u.node1.getLayout()[r]})}),each$f(n,function(o){var l=0,u=0;each$f(o.outEdges,function(c){c.setLayout({sy:l},!0),l+=c.getLayout().dy}),each$f(o.inEdges,function(c){c.setLayout({ty:u},!0),u+=c.getLayout().dy})})}function sankeyVisual(n){n.eachSeriesByType("sankey",function(a){var r=a.getGraph(),o=r.nodes,l=r.edges;if(o.length){var u=1/0,c=-1/0;each$f(o,function(h){var f=h.getLayout().value;f<u&&(u=f),f>c&&(c=f)}),each$f(o,function(h){var f=new VisualMapping$1({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:a.get("color")}),v=f.mapValueToVisual(h.getLayout().value),d=h.getModel().get(["itemStyle","color"]);d!=null?(h.setVisual("color",d),h.setVisual("style",{fill:d})):(h.setVisual("color",v),h.setVisual("style",{fill:v}))})}l.length&&each$f(l,function(h){var f=h.getModel().get("lineStyle");h.setVisual("style",f)})})}function install$A(n){n.registerChartView(SankeyView$1),n.registerSeriesModel(SankeySeriesModel$1),n.registerLayout(sankeyLayout),n.registerVisual(sankeyVisual),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(a,r){r.eachComponent({mainType:"series",subType:"sankey",query:a},function(o){o.setNodePosition(a.dataIndex,[a.localX,a.localY])})})}var WhiskerBoxCommonMixin=function(){function n(){}return n.prototype.getInitialData=function(a,r){var o,l=r.getComponent("xAxis",this.get("xAxisIndex")),u=r.getComponent("yAxis",this.get("yAxisIndex")),c=l.get("type"),h=u.get("type"),f;c==="category"?(a.layout="horizontal",o=l.getOrdinalMeta(),f=!0):h==="category"?(a.layout="vertical",o=u.getOrdinalMeta(),f=!0):a.layout=a.layout||"horizontal";var v=["x","y"],d=a.layout==="horizontal"?0:1,p=this._baseAxisDim=v[d],g=v[1-d],y=[l,u],_=y[d].get("type"),S=y[1-d].get("type"),x=a.data;if(x&&f){var T=[];each$f(x,function(C,E){var w;isArray$1(C)?(w=C.slice(),C.unshift(E)):isArray$1(C.value)?(w=extend({},C),w.value=w.value.slice(),C.value.unshift(E)):w=C,T.push(w)}),a.data=T}var A=this.defaultValueDimensions,b=[{name:p,type:getDimensionTypeByAxis(_),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:g,type:getDimensionTypeByAxis(S),dimsDef:A.slice()}];return createSeriesDataSimply(this,{coordDimensions:b,dimensionsCount:A.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,b,this)})},n.prototype.getBaseAxis=function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+"Axis",this.get(a+"AxisIndex")).axis},n}(),BoxplotSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return a.type="series.boxplot",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},a}(SeriesModel$1);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);const BoxplotSeriesModel$1=BoxplotSeriesModel;var BoxplotView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=r.getData(),c=this.group,h=this._data;this._data||c.removeAll();var f=r.get("layout")==="horizontal"?1:0;u.diff(h).add(function(v){if(u.hasValue(v)){var d=u.getItemLayout(v),p=createNormalBox$1(d,u,v,f,!0);u.setItemGraphicEl(v,p),c.add(p)}}).update(function(v,d){var p=h.getItemGraphicEl(d);if(!u.hasValue(v)){c.remove(p);return}var g=u.getItemLayout(v);p?(saveOldStyle(p),updateNormalBoxData(g,p,u,v)):p=createNormalBox$1(g,u,v,f),c.add(p),u.setItemGraphicEl(v,p)}).remove(function(v){var d=h.getItemGraphicEl(v);d&&c.remove(d)}).execute(),this._data=u},a.prototype.remove=function(r){var o=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(u){u&&o.remove(u)})},a.type="boxplot",a}(ChartView$1),BoxPathShape=function(){function n(){}return n}(),BoxPath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="boxplotBoxPath",o}return a.prototype.getDefaultShape=function(){return new BoxPathShape},a.prototype.buildPath=function(r,o){var l=o.points,u=0;for(r.moveTo(l[u][0],l[u][1]),u++;u<4;u++)r.lineTo(l[u][0],l[u][1]);for(r.closePath();u<l.length;u++)r.moveTo(l[u][0],l[u][1]),u++,r.lineTo(l[u][0],l[u][1])},a}(Path$1);function createNormalBox$1(n,a,r,o,l){var u=n.ends,c=new BoxPath({shape:{points:l?transInit$1(u,o,n):u}});return updateNormalBoxData(n,c,a,r,l),c}function updateNormalBoxData(n,a,r,o,l){var u=r.hostModel,c=graphic$1[l?"initProps":"updateProps"];c(a,{shape:{points:n.ends}},u,o),a.useStyle(r.getItemVisual(o,"style")),a.style.strokeNoScale=!0,a.z2=100;var h=r.getItemModel(o),f=h.getModel("emphasis");setStatesStylesFromModel(a,h),toggleHoverEmphasis(a,f.get("focus"),f.get("blurScope"),f.get("disabled"))}function transInit$1(n,a,r){return map$1(n,function(o){return o=o.slice(),o[a]=r.initBaseline,o})}const BoxplotView$1=BoxplotView;var each$9=each$f;function boxplotLayout(n){var a=groupSeriesByAxis(n);each$9(a,function(r){var o=r.seriesModels;!o.length||(calculateBase(r),each$9(o,function(l,u){layoutSingleSeries(l,r.boxOffsetList[u],r.boxWidthList[u])}))})}function groupSeriesByAxis(n){var a=[],r=[];return n.eachSeriesByType("boxplot",function(o){var l=o.getBaseAxis(),u=indexOf(r,l);u<0&&(u=r.length,r[u]=l,a[u]={axis:l,seriesModels:[]}),a[u].seriesModels.push(o)}),a}function calculateBase(n){var a=n.axis,r=n.seriesModels,o=r.length,l=n.boxWidthList=[],u=n.boxOffsetList=[],c=[],h;if(a.type==="category")h=a.getBandWidth();else{var f=0;each$9(r,function(_){f=Math.max(f,_.getData().count())});var v=a.getExtent();h=Math.abs(v[1]-v[0])/f}each$9(r,function(_){var S=_.get("boxWidth");isArray$1(S)||(S=[S,S]),c.push([parsePercent(S[0],h)||0,parsePercent(S[1],h)||0])});var d=h*.8-2,p=d/o*.3,g=(d-p*(o-1))/o,y=g/2-d/2;each$9(r,function(_,S){u.push(y),y+=p+g,l.push(Math.min(Math.max(g,c[S][0]),c[S][1]))})}function layoutSingleSeries(n,a,r){var o=n.coordinateSystem,l=n.getData(),u=r/2,c=n.get("layout")==="horizontal"?0:1,h=1-c,f=["x","y"],v=l.mapDimension(f[c]),d=l.mapDimensionsAll(f[h]);if(v==null||d.length<5)return;for(var p=0;p<l.count();p++){var g=l.get(v,p),y=b(g,d[2],p),_=b(g,d[0],p),S=b(g,d[1],p),x=b(g,d[3],p),T=b(g,d[4],p),A=[];C(A,S,!1),C(A,x,!0),A.push(_,S,T,x),E(A,_),E(A,T),E(A,y),l.setItemLayout(p,{initBaseline:y[h],ends:A})}function b(w,D,M){var P=l.get(D,M),L=[];L[c]=w,L[h]=P;var I;return isNaN(w)||isNaN(P)?I=[NaN,NaN]:(I=o.dataToPoint(L),I[c]+=a),I}function C(w,D,M){var P=D.slice(),L=D.slice();P[c]+=u,L[c]-=u,M?w.push(P,L):w.push(L,P)}function E(w,D){var M=D.slice(),P=D.slice();M[c]-=u,P[c]+=u,w.push(M,P)}}function prepareBoxplotData(n,a){a=a||{};for(var r=[],o=[],l=a.boundIQR,u=l==="none"||l===0,c=0;c<n.length;c++){var h=asc$2(n[c].slice()),f=quantile(h,.25),v=quantile(h,.5),d=quantile(h,.75),p=h[0],g=h[h.length-1],y=(l==null?1.5:l)*(d-f),_=u?p:Math.max(p,f-y),S=u?g:Math.min(g,d+y),x=a.itemNameFormatter,T=isFunction(x)?x({value:c}):isString(x)?x.replace("{value}",c+""):c+"";r.push([T,_,f,v,d,S]);for(var A=0;A<h.length;A++){var b=h[A];if(b<_||b>S){var C=[T,b];o.push(C)}}}return{boxData:r,outliers:o}}var boxplotTransform={type:"echarts:boxplot",transform:function(a){var r=a.upstream;if(r.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var o="";({}).NODE_ENV!=="production"&&(o=makePrintable("source data is not applicable for this boxplot transform. Expect number[][].")),throwError(o)}var l=prepareBoxplotData(r.getRawData(),a.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:l.boxData},{data:l.outliers}]}};function install$z(n){n.registerSeriesModel(BoxplotSeriesModel$1),n.registerChartView(BoxplotView$1),n.registerLayout(boxplotLayout),n.registerTransform(boxplotTransform)}var SKIP_PROPS=["color","borderColor"],CandlestickView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},a.prototype.incrementalPrepareRender=function(r,o,l){this._clear(),this._updateDrawMode(r)},a.prototype.incrementalRender=function(r,o,l,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,o):this._incrementalRenderNormal(r,o)},a.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},a.prototype._updateDrawMode=function(r){var o=r.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},a.prototype._renderNormal=function(r){var o=r.getData(),l=this._data,u=this.group,c=o.getLayout("isSimpleBox"),h=r.get("clip",!0),f=r.coordinateSystem,v=f.getArea&&f.getArea();this._data||u.removeAll(),o.diff(l).add(function(d){if(o.hasValue(d)){var p=o.getItemLayout(d);if(h&&isNormalBoxClipped(v,p))return;var g=createNormalBox(p,d,!0);initProps(g,{shape:{points:p.ends}},r,d),setBoxCommon(g,o,d,c),u.add(g),o.setItemGraphicEl(d,g)}}).update(function(d,p){var g=l.getItemGraphicEl(p);if(!o.hasValue(d)){u.remove(g);return}var y=o.getItemLayout(d);if(h&&isNormalBoxClipped(v,y)){u.remove(g);return}g?(updateProps$1(g,{shape:{points:y.ends}},r,d),saveOldStyle(g)):g=createNormalBox(y),setBoxCommon(g,o,d,c),u.add(g),o.setItemGraphicEl(d,g)}).remove(function(d){var p=l.getItemGraphicEl(d);p&&u.remove(p)}).execute(),this._data=o},a.prototype._renderLarge=function(r){this._clear(),createLarge(r,this.group);var o=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;o?this.group.setClipPath(o):this.group.removeClipPath()},a.prototype._incrementalRenderNormal=function(r,o){for(var l=o.getData(),u=l.getLayout("isSimpleBox"),c;(c=r.next())!=null;){var h=l.getItemLayout(c),f=createNormalBox(h);setBoxCommon(f,l,c,u),f.incremental=!0,this.group.add(f),this._progressiveEls.push(f)}},a.prototype._incrementalRenderLarge=function(r,o){createLarge(o,this.group,this._progressiveEls,!0)},a.prototype.remove=function(r){this._clear()},a.prototype._clear=function(){this.group.removeAll(),this._data=null},a.type="candlestick",a}(ChartView$1),NormalBoxPathShape=function(){function n(){}return n}(),NormalBoxPath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="normalCandlestickBox",o}return a.prototype.getDefaultShape=function(){return new NormalBoxPathShape},a.prototype.buildPath=function(r,o){var l=o.points;this.__simpleBox?(r.moveTo(l[4][0],l[4][1]),r.lineTo(l[6][0],l[6][1])):(r.moveTo(l[0][0],l[0][1]),r.lineTo(l[1][0],l[1][1]),r.lineTo(l[2][0],l[2][1]),r.lineTo(l[3][0],l[3][1]),r.closePath(),r.moveTo(l[4][0],l[4][1]),r.lineTo(l[5][0],l[5][1]),r.moveTo(l[6][0],l[6][1]),r.lineTo(l[7][0],l[7][1]))},a}(Path$1);function createNormalBox(n,a,r){var o=n.ends;return new NormalBoxPath({shape:{points:r?transInit(o,n):o},z2:100})}function isNormalBoxClipped(n,a){for(var r=!0,o=0;o<a.ends.length;o++)if(n.contain(a.ends[o][0],a.ends[o][1])){r=!1;break}return r}function setBoxCommon(n,a,r,o){var l=a.getItemModel(r);n.useStyle(a.getItemVisual(r,"style")),n.style.strokeNoScale=!0,n.__simpleBox=o,setStatesStylesFromModel(n,l)}function transInit(n,a){return map$1(n,function(r){return r=r.slice(),r[1]=a.initBaseline,r})}var LargeBoxPathShape=function(){function n(){}return n}(),LargeBoxPath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o.type="largeCandlestickBox",o}return a.prototype.getDefaultShape=function(){return new LargeBoxPathShape},a.prototype.buildPath=function(r,o){for(var l=o.points,u=0;u<l.length;)if(this.__sign===l[u++]){var c=l[u++];r.moveTo(c,l[u++]),r.lineTo(c,l[u++])}else u+=3},a}(Path$1);function createLarge(n,a,r,o){var l=n.getData(),u=l.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});a.add(c);var h=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});a.add(h);var f=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});a.add(f),setLargeStyle(1,c,n),setLargeStyle(-1,h,n),setLargeStyle(0,f,n),o&&(c.incremental=!0,h.incremental=!0),r&&r.push(c,h)}function setLargeStyle(n,a,r,o){var l=r.get(["itemStyle",n>0?"borderColor":"borderColor0"])||r.get(["itemStyle",n>0?"color":"color0"]);n===0&&(l=r.get(["itemStyle","borderColorDoji"]));var u=r.getModel("itemStyle").getItemStyle(SKIP_PROPS);a.useStyle(u),a.style.fill=null,a.style.stroke=l}const CandlestickView$1=CandlestickView;var CandlestickSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return a.prototype.getShadowDim=function(){return"open"},a.prototype.brushSelector=function(r,o,l){var u=o.getItemLayout(r);return u&&l.rect(u.brushRect)},a.type="series.candlestick",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},a}(SeriesModel$1);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);const CandlestickSeriesModel$1=CandlestickSeriesModel;function candlestickPreprocessor(n){!n||!isArray$1(n.series)||each$f(n.series,function(a){isObject$3(a)&&a.type==="k"&&(a.type="candlestick")})}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"],candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(n,a){function r(u,c){return c.get(u>0?positiveColorQuery:negativeColorQuery)}function o(u,c){return c.get(u===0?dojiBorderColorQuery:u>0?positiveBorderColorQuery:negativeBorderColorQuery)}if(!a.isSeriesFiltered(n)){var l=n.pipelineContext.large;return!l&&{progress:function(u,c){for(var h;(h=u.next())!=null;){var f=c.getItemModel(h),v=c.getItemLayout(h).sign,d=f.getItemStyle();d.fill=r(v,f),d.stroke=o(v,f)||d.fill;var p=c.ensureUniqueItemVisual(h,"style");extend(p,d)}}}}}};const candlestickVisual$1=candlestickVisual;var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(n){var a=n.coordinateSystem,r=n.getData(),o=calculateCandleWidth(n,r),l=0,u=1,c=["x","y"],h=r.getDimensionIndex(r.mapDimension(c[l])),f=map$1(r.mapDimensionsAll(c[u]),r.getDimensionIndex,r),v=f[0],d=f[1],p=f[2],g=f[3];if(r.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),h<0||f.length<4)return;return{progress:n.pipelineContext.large?_:y};function y(S,x){for(var T,A=x.getStore();(T=S.next())!=null;){var b=A.get(h,T),C=A.get(v,T),E=A.get(d,T),w=A.get(p,T),D=A.get(g,T),M=Math.min(C,E),P=Math.max(C,E),L=G(M,b),I=G(P,b),R=G(w,b),O=G(D,b),N=[];F(N,I,0),F(N,L,1),N.push(H(O),H(I),H(R),H(L));var V=x.getItemModel(T),B=!!V.get(["itemStyle","borderColorDoji"]);x.setItemLayout(T,{sign:getSign(A,T,C,E,d,B),initBaseline:C>E?I[u]:L[u],ends:N,brushRect:z(w,D,b)})}function G(U,Y){var Z=[];return Z[l]=Y,Z[u]=U,isNaN(Y)||isNaN(U)?[NaN,NaN]:a.dataToPoint(Z)}function F(U,Y,Z){var X=Y.slice(),J=Y.slice();X[l]=subPixelOptimize(X[l]+o/2,1,!1),J[l]=subPixelOptimize(J[l]-o/2,1,!0),Z?U.push(X,J):U.push(J,X)}function z(U,Y,Z){var X=G(U,Z),J=G(Y,Z);return X[l]-=o/2,J[l]-=o/2,{x:X[0],y:X[1],width:o,height:J[1]-X[1]}}function H(U){return U[l]=subPixelOptimize(U[l],1),U}}function _(S,x){for(var T=createFloat32Array(S.count*4),A=0,b,C=[],E=[],w,D=x.getStore(),M=!!n.get(["itemStyle","borderColorDoji"]);(w=S.next())!=null;){var P=D.get(h,w),L=D.get(v,w),I=D.get(d,w),R=D.get(p,w),O=D.get(g,w);if(isNaN(P)||isNaN(R)||isNaN(O)){T[A++]=NaN,A+=3;continue}T[A++]=getSign(D,w,L,I,d,M),C[l]=P,C[u]=R,b=a.dataToPoint(C,null,E),T[A++]=b?b[0]:NaN,T[A++]=b?b[1]:NaN,C[u]=O,b=a.dataToPoint(C,null,E),T[A++]=b?b[1]:NaN}x.setLayout("largePoints",T)}}};function getSign(n,a,r,o,l,u){var c;return r>o?c=-1:r<o?c=1:c=u?0:a>0?n.get(l,a-1)<=o?1:-1:1,c}function calculateCandleWidth(n,a){var r=n.getBaseAxis(),o,l=r.type==="category"?r.getBandWidth():(o=r.getExtent(),Math.abs(o[1]-o[0])/a.count()),u=parsePercent(retrieve2(n.get("barMaxWidth"),l),l),c=parsePercent(retrieve2(n.get("barMinWidth"),1),l),h=n.get("barWidth");return h!=null?parsePercent(h,l):Math.max(Math.min(l/2,u),c)}const candlestickLayout$1=candlestickLayout;function install$y(n){n.registerChartView(CandlestickView$1),n.registerSeriesModel(CandlestickSeriesModel$1),n.registerPreprocessor(candlestickPreprocessor),n.registerVisual(candlestickVisual$1),n.registerLayout(candlestickLayout$1)}function updateRipplePath(n,a){var r=a.rippleEffectColor||a.color;n.eachChild(function(o){o.attr({z:a.z,zlevel:a.zlevel,style:{stroke:a.brushType==="stroke"?r:null,fill:a.brushType==="fill"?r:null}})})}var EffectSymbol=function(n){__extends(a,n);function a(r,o){var l=n.call(this)||this,u=new SymbolClz(r,o),c=new Group$4;return l.add(u),l.add(c),l.updateData(r,o),l}return a.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},a.prototype.startEffectAnimation=function(r){for(var o=r.symbolType,l=r.color,u=r.rippleNumber,c=this.childAt(1),h=0;h<u;h++){var f=createSymbol$1(o,-1,-1,2,2,l);f.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var v=-h/u*r.period+r.effectOffset;f.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(v).start(),f.animateStyle(!0).when(r.period,{opacity:0}).delay(v).start(),c.add(f)}updateRipplePath(c,r)},a.prototype.updateEffectAnimation=function(r){for(var o=this._effectCfg,l=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],c=0;c<u.length;c++){var h=u[c];if(o[h]!==r[h]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}updateRipplePath(l,r)},a.prototype.highlight=function(){enterEmphasis(this)},a.prototype.downplay=function(){leaveEmphasis(this)},a.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},a.prototype.updateData=function(r,o){var l=this,u=r.hostModel;this.childAt(0).updateData(r,o);var c=this.childAt(1),h=r.getItemModel(o),f=r.getItemVisual(o,"symbol"),v=normalizeSymbolSize(r.getItemVisual(o,"symbolSize")),d=r.getItemVisual(o,"style"),p=d&&d.fill,g=h.getModel("emphasis");c.setScale(v),c.traverse(function(x){x.setStyle("fill",p)});var y=normalizeSymbolOffset(r.getItemVisual(o,"symbolOffset"),v);y&&(c.x=y[0],c.y=y[1]);var _=r.getItemVisual(o,"symbolRotate");c.rotation=(_||0)*Math.PI/180||0;var S={};S.showEffectOn=u.get("showEffectOn"),S.rippleScale=h.get(["rippleEffect","scale"]),S.brushType=h.get(["rippleEffect","brushType"]),S.period=h.get(["rippleEffect","period"])*1e3,S.effectOffset=o/r.count(),S.z=u.getShallow("z")||0,S.zlevel=u.getShallow("zlevel")||0,S.symbolType=f,S.color=p,S.rippleEffectColor=h.get(["rippleEffect","color"]),S.rippleNumber=h.get(["rippleEffect","number"]),S.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(S):this.startEffectAnimation(S),this._effectCfg=S):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(x){x==="emphasis"?S.showEffectOn!=="render"&&l.startEffectAnimation(S):x==="normal"&&S.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=S,toggleHoverEmphasis(this,g.get("focus"),g.get("blurScope"),g.get("disabled"))},a.prototype.fadeOut=function(r){r&&r()},a}(Group$4);const EffectSymbol$1=EffectSymbol;var EffectScatterView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(){this._symbolDraw=new SymbolDraw$1(EffectSymbol$1)},a.prototype.render=function(r,o,l){var u=r.getData(),c=this._symbolDraw;c.updateData(u,{clipShape:this._getClipShape(r)}),this.group.add(c.group)},a.prototype._getClipShape=function(r){var o=r.coordinateSystem,l=o&&o.getArea&&o.getArea();return r.get("clip",!0)?l:null},a.prototype.updateTransform=function(r,o,l){var u=r.getData();this.group.dirty();var c=pointsLayout("").reset(r,o,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},a.prototype._updateGroupTransform=function(r){var o=r.coordinateSystem;o&&o.getRoamTransform&&(this.group.transform=clone$2(o.getRoamTransform()),this.group.decomposeTransform())},a.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(!0)},a.type="effectScatter",a}(ChartView$1);const EffectScatterView$1=EffectScatterView;var EffectScatterSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.hasSymbolVisual=!0,r}return a.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.brushSelector=function(r,o,l){return l.point(o.getItemLayout(r))},a.type="series.effectScatter",a.dependencies=["grid","polar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},a}(SeriesModel$1);const EffectScatterSeriesModel$1=EffectScatterSeriesModel;function install$x(n){n.registerChartView(EffectScatterView$1),n.registerSeriesModel(EffectScatterSeriesModel$1),n.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this)||this;return u.add(u.createLine(r,o,l)),u._updateEffectSymbol(r,o),u}return a.prototype.createLine=function(r,o,l){return new Line$1(r,o,l)},a.prototype._updateEffectSymbol=function(r,o){var l=r.getItemModel(o),u=l.getModel("effect"),c=u.get("symbolSize"),h=u.get("symbol");isArray$1(c)||(c=[c,c]);var f=r.getItemVisual(o,"style"),v=u.get("color")||f&&f.stroke,d=this.childAt(1);this._symbolType!==h&&(this.remove(d),d=createSymbol$1(h,-.5,-.5,1,1,v),d.z2=100,d.culling=!0,this.add(d)),d&&(d.setStyle("shadowColor",v),d.setStyle(u.getItemStyle(["color"])),d.scaleX=c[0],d.scaleY=c[1],d.setColor(v),this._symbolType=h,this._symbolScale=c,this._updateEffectAnimation(r,u,o))},a.prototype._updateEffectAnimation=function(r,o,l){var u=this.childAt(1);if(!!u){var c=r.getItemLayout(l),h=o.get("period")*1e3,f=o.get("loop"),v=o.get("roundTrip"),d=o.get("constantSpeed"),p=retrieve(o.get("delay"),function(y){return y/r.count()*h/3});if(u.ignore=!0,this._updateAnimationPoints(u,c),d>0&&(h=this._getLineLength(u)/d*1e3),h!==this._period||f!==this._loop||v!==this._roundTrip){u.stopAnimation();var g=void 0;isFunction(p)?g=p(l):g=p,u.__t>0&&(g=-h*u.__t),this._animateSymbol(u,h,g,f,v)}this._period=h,this._loop=f,this._roundTrip=v}},a.prototype._animateSymbol=function(r,o,l,u,c){if(o>0){r.__t=0;var h=this,f=r.animate("",u).when(c?o*2:o,{__t:c?2:1}).delay(l).during(function(){h._updateSymbolPosition(r)});u||f.done(function(){h.remove(r)}),f.start()}},a.prototype._getLineLength=function(r){return dist$1(r.__p1,r.__cp1)+dist$1(r.__cp1,r.__p2)},a.prototype._updateAnimationPoints=function(r,o){r.__p1=o[0],r.__p2=o[1],r.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},a.prototype.updateData=function(r,o,l){this.childAt(0).updateData(r,o,l),this._updateEffectSymbol(r,o)},a.prototype._updateSymbolPosition=function(r){var o=r.__p1,l=r.__p2,u=r.__cp1,c=r.__t<1?r.__t:2-r.__t,h=[r.x,r.y],f=h.slice(),v=quadraticAt$1,d=quadraticDerivativeAt;h[0]=v(o[0],u[0],l[0],c),h[1]=v(o[1],u[1],l[1],c);var p=r.__t<1?d(o[0],u[0],l[0],c):d(l[0],u[0],o[0],1-c),g=r.__t<1?d(o[1],u[1],l[1],c):d(l[1],u[1],o[1],1-c);r.rotation=-Math.atan2(g,p)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=dist$1(f,h)*1.05,c===1&&(h[0]=f[0]+(h[0]-f[0])/2,h[1]=f[1]+(h[1]-f[1])/2)):r.__lastT===1?r.scaleY=2*dist$1(o,h):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=h[0],r.y=h[1]},a.prototype.updateLayout=function(r,o){this.childAt(0).updateLayout(r,o);var l=r.getItemModel(o).getModel("effect");this._updateEffectAnimation(r,l,o)},a}(Group$4);const EffectLine$1=EffectLine;var Polyline=function(n){__extends(a,n);function a(r,o,l){var u=n.call(this)||this;return u._createPolyline(r,o,l),u}return a.prototype._createPolyline=function(r,o,l){var u=r.getItemLayout(o),c=new Polyline$3({shape:{points:u}});this.add(c),this._updateCommonStl(r,o,l)},a.prototype.updateData=function(r,o,l){var u=r.hostModel,c=this.childAt(0),h={shape:{points:r.getItemLayout(o)}};updateProps$1(c,h,u,o),this._updateCommonStl(r,o,l)},a.prototype._updateCommonStl=function(r,o,l){var u=this.childAt(0),c=r.getItemModel(o),h=l&&l.emphasisLineStyle,f=l&&l.focus,v=l&&l.blurScope,d=l&&l.emphasisDisabled;if(!l||r.hasItemOption){var p=c.getModel("emphasis");h=p.getModel("lineStyle").getLineStyle(),d=p.get("disabled"),f=p.get("focus"),v=p.get("blurScope")}u.useStyle(r.getItemVisual(o,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var g=u.ensureState("emphasis");g.style=h,toggleHoverEmphasis(this,f,v,d)},a.prototype.updateLayout=function(r,o){var l=this.childAt(0);l.setShape("points",r.getItemLayout(o))},a}(Group$4);const Polyline$1=Polyline;var EffectPolyline=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return a.prototype.createLine=function(r,o,l){return new Polyline$1(r,o,l)},a.prototype._updateAnimationPoints=function(r,o){this._points=o;for(var l=[0],u=0,c=1;c<o.length;c++){var h=o[c-1],f=o[c];u+=dist$1(h,f),l.push(u)}if(u===0){this._length=0;return}for(var c=0;c<l.length;c++)l[c]/=u;this._offsets=l,this._length=u},a.prototype._getLineLength=function(){return this._length},a.prototype._updateSymbolPosition=function(r){var o=r.__t<1?r.__t:2-r.__t,l=this._points,u=this._offsets,c=l.length;if(!!u){var h=this._lastFrame,f;if(o<this._lastFramePercent){var v=Math.min(h+1,c-1);for(f=v;f>=0&&!(u[f]<=o);f--);f=Math.min(f,c-2)}else{for(f=h;f<c&&!(u[f]>o);f++);f=Math.min(f-1,c-2)}var d=(o-u[f])/(u[f+1]-u[f]),p=l[f],g=l[f+1];r.x=p[0]*(1-d)+d*g[0],r.y=p[1]*(1-d)+d*g[1];var y=r.__t<1?g[0]-p[0]:p[0]-g[0],_=r.__t<1?g[1]-p[1]:p[1]-g[1];r.rotation=-Math.atan2(_,y)-Math.PI/2,this._lastFrame=f,this._lastFramePercent=o,r.ignore=!1}},a}(EffectLine$1);const EffectPolyline$1=EffectPolyline;var LargeLinesPathShape=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),LargeLinesPath=function(n){__extends(a,n);function a(r){var o=n.call(this,r)||this;return o._off=0,o.hoverDataIdx=-1,o}return a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new LargeLinesPathShape},a.prototype.buildPath=function(r,o){var l=o.segs,u=o.curveness,c;if(o.polyline)for(c=this._off;c<l.length;){var h=l[c++];if(h>0){r.moveTo(l[c++],l[c++]);for(var f=1;f<h;f++)r.lineTo(l[c++],l[c++])}}else for(c=this._off;c<l.length;){var v=l[c++],d=l[c++],p=l[c++],g=l[c++];if(r.moveTo(v,d),u>0){var y=(v+p)/2-(d-g)*u,_=(d+g)/2-(p-v)*u;r.quadraticCurveTo(y,_,p,g)}else r.lineTo(p,g)}this.incremental&&(this._off=c,this.notClear=!0)},a.prototype.findDataIndex=function(r,o){var l=this.shape,u=l.segs,c=l.curveness,h=this.style.lineWidth;if(l.polyline)for(var f=0,v=0;v<u.length;){var d=u[v++];if(d>0)for(var p=u[v++],g=u[v++],y=1;y<d;y++){var _=u[v++],S=u[v++];if(containStroke$4(p,g,_,S,h,r,o))return f}f++}else for(var f=0,v=0;v<u.length;){var p=u[v++],g=u[v++],_=u[v++],S=u[v++];if(c>0){var x=(p+_)/2-(g-S)*c,T=(g+S)/2-(_-p)*c;if(containStroke$2(p,g,x,T,_,S,h,r,o))return f}else if(containStroke$4(p,g,_,S,h,r,o))return f;f++}return-1},a.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();if(r=l[0],o=l[1],u.contain(r,o)){var c=this.hoverDataIdx=this.findDataIndex(r,o);return c>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var o=this.shape,l=o.segs,u=1/0,c=1/0,h=-1/0,f=-1/0,v=0;v<l.length;){var d=l[v++],p=l[v++];u=Math.min(d,u),h=Math.max(d,h),c=Math.min(p,c),f=Math.max(p,f)}r=this._rect=new BoundingRect$1(u,c,h,f)}return r},a}(Path$1),LargeLineDraw=function(){function n(){this.group=new Group$4}return n.prototype.updateData=function(a){this._clear();var r=this._create();r.setShape({segs:a.getLayout("linesPoints")}),this._setCommon(r,a)},n.prototype.incrementalPrepareUpdate=function(a){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(a,r){var o=this._newAdded[0],l=r.getLayout("linesPoints"),u=o&&o.shape.segs;if(u&&u.length<2e4){var c=u.length,h=new Float32Array(c+l.length);h.set(u),h.set(l,c),o.setShape({segs:h})}else{this._newAdded=[];var f=this._create();f.incremental=!0,f.setShape({segs:l}),this._setCommon(f,r),f.__startIndex=a.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},n.prototype._create=function(){var a=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(a),this.group.add(a),a},n.prototype._setCommon=function(a,r,o){var l=r.hostModel;a.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),a.useStyle(l.getModel("lineStyle").getLineStyle()),a.style.strokeNoScale=!0;var u=r.getVisual("style");u&&u.stroke&&a.setStyle("stroke",u.stroke),a.setStyle("fill",null);var c=getECData(a);c.seriesIndex=l.seriesIndex,a.on("mousemove",function(h){c.dataIndex=null;var f=a.hoverDataIdx;f>0&&(c.dataIndex=f+a.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}();const LargeLineDraw$1=LargeLineDraw;var linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(n){var a=n.coordinateSystem;if(!a){({}).NODE_ENV!=="production"&&error("The lines series must have a coordinate system.");return}var r=n.get("polyline"),o=n.pipelineContext.large;return{progress:function(l,u){var c=[];if(o){var h=void 0,f=l.end-l.start;if(r){for(var v=0,d=l.start;d<l.end;d++)v+=n.getLineCoordsCount(d);h=new Float32Array(f+v*2)}else h=new Float32Array(f*4);for(var p=0,g=[],d=l.start;d<l.end;d++){var y=n.getLineCoords(d,c);r&&(h[p++]=y);for(var _=0;_<y;_++)g=a.dataToPoint(c[_],!1,g),h[p++]=g[0],h[p++]=g[1]}u.setLayout("linesPoints",h)}else for(var d=l.start;d<l.end;d++){var S=u.getItemModel(d),y=n.getLineCoords(d,c),x=[];if(r)for(var T=0;T<y;T++)x.push(a.dataToPoint(c[T]));else{x[0]=a.dataToPoint(c[0]),x[1]=a.dataToPoint(c[1]);var A=S.get(["lineStyle","curveness"]);+A&&(x[2]=[(x[0][0]+x[1][0])/2-(x[0][1]-x[1][1])*A,(x[0][1]+x[1][1])/2-(x[1][0]-x[0][0])*A])}u.setItemLayout(d,x)}}}}};const linesLayout$1=linesLayout;var LinesView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=r.getData(),c=this._updateLineDraw(u,r),h=r.get("zlevel"),f=r.get(["effect","trailLength"]),v=l.getZr(),d=v.painter.getType()==="svg";d||v.painter.getLayer(h).clear(!0),this._lastZlevel!=null&&!d&&v.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&f>0&&(d?{}.NODE_ENV!=="production"&&console.warn("SVG render mode doesn't support lines with trail effect"):v.configLayer(h,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(f/10+.9,1),0)})),c.updateData(u);var p=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r);p?this.group.setClipPath(p):this.group.removeClipPath(),this._lastZlevel=h,this._finished=!0},a.prototype.incrementalPrepareRender=function(r,o,l){var u=r.getData(),c=this._updateLineDraw(u,r);c.incrementalPrepareUpdate(u),this._clearLayer(l),this._finished=!1},a.prototype.incrementalRender=function(r,o,l){this._lineDraw.incrementalUpdate(r,o.getData()),this._finished=r.end===o.getData().count()},a.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},a.prototype.updateTransform=function(r,o,l){var u=r.getData(),c=r.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var h=linesLayout$1.reset(r,o,l);h.progress&&h.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(l)},a.prototype._updateLineDraw=function(r,o){var l=this._lineDraw,u=this._showEffect(o),c=!!o.get("polyline"),h=o.pipelineContext,f=h.large;return{}.NODE_ENV!=="production"&&u&&f&&console.warn("Large lines not support effect"),(!l||u!==this._hasEffet||c!==this._isPolyline||f!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=f?new LargeLineDraw$1:new LineDraw$1(c?u?EffectPolyline$1:Polyline$1:u?EffectLine$1:Line$1),this._hasEffet=u,this._isPolyline=c,this._isLargeDraw=f),this.group.add(l.group),l},a.prototype._showEffect=function(r){return!!r.get(["effect","show"])},a.prototype._clearLayer=function(r){var o=r.getZr(),l=o.painter.getType()==="svg";!l&&this._lastZlevel!=null&&o.painter.getLayer(this._lastZlevel).clear(!0)},a.prototype.remove=function(r,o){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(o)},a.prototype.dispose=function(r,o){this.remove(r,o)},a.type="lines",a}(ChartView$1);const LinesView$1=LinesView;var Uint32Arr=typeof Uint32Array=="undefined"?Array:Uint32Array,Float64Arr=typeof Float64Array=="undefined"?Array:Float64Array;function compatEc2(n){var a=n.data;a&&a[0]&&a[0][0]&&a[0][0].coord&&({}.NODE_ENV!=="production"&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),n.data=map$1(a,function(r){var o=[r[0].coord,r[1].coord],l={coords:o};return r[0].name&&(l.fromName=r[0].name),r[1].name&&(l.toName=r[1].name),mergeAll([l,r[0],r[1]])}))}var LinesSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return a.prototype.init=function(r){r.data=r.data||[],compatEc2(r);var o=this._processFlatCoordsArray(r.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(r.data=new Float32Array(o.count)),n.prototype.init.apply(this,arguments)},a.prototype.mergeOption=function(r){if(compatEc2(r),r.data){var o=this._processFlatCoordsArray(r.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(r.data=new Float32Array(o.count))}n.prototype.mergeOption.apply(this,arguments)},a.prototype.appendData=function(r){var o=this._processFlatCoordsArray(r.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),r.data=new Float32Array(o.count)),this.getRawData().appendData(r.data)},a.prototype._getCoordsFromItemModel=function(r){var o=this.getData().getItemModel(r),l=o.option instanceof Array?o.option:o.getShallow("coords");if({}.NODE_ENV!=="production"&&!(l instanceof Array&&l.length>0&&l[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(l)+". Lines must have 2d coords array in data item.");return l},a.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},a.prototype.getLineCoords=function(r,o){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[r*2],u=this._flatCoordsOffset[r*2+1],c=0;c<u;c++)o[c]=o[c]||[],o[c][0]=this._flatCoords[l+c*2],o[c][1]=this._flatCoords[l+c*2+1];return u}else{for(var h=this._getCoordsFromItemModel(r),c=0;c<h.length;c++)o[c]=o[c]||[],o[c][0]=h[c][0],o[c][1]=h[c][1];return h.length}},a.prototype._processFlatCoordsArray=function(r){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),isNumber(r[0])){for(var l=r.length,u=new Uint32Arr(l),c=new Float64Arr(l),h=0,f=0,v=0,d=0;d<l;){v++;var p=r[d++];u[f++]=h+o,u[f++]=p;for(var g=0;g<p;g++){var y=r[d++],_=r[d++];if(c[h++]=y,c[h++]=_,d>l&&{}.NODE_ENV!=="production")throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,f),flatCoords:c,count:v}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},a.prototype.getInitialData=function(r,o){if({}.NODE_ENV!=="production"){var l=CoordinateSystem.get(r.coordinateSystem);if(!l)throw new Error("Unknown coordinate system "+r.coordinateSystem)}var u=new SeriesData$1(["value"],this);return u.hasItemOption=!1,u.initData(r.data,[],function(c,h,f,v){if(c instanceof Array)return NaN;u.hasItemOption=!0;var d=c.value;if(d!=null)return d instanceof Array?d[v]:d}),u},a.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=u.getItemModel(r),h=c.get("name");if(h)return h;var f=c.get("fromName"),v=c.get("toName"),d=[];return f!=null&&d.push(f),v!=null&&d.push(v),createTooltipMarkup("nameValue",{name:d.join(" > ")})},a.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},a.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?1e4:this.get("progressive"):r},a.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?2e4:this.get("progressiveThreshold"):r},a.prototype.getZLevelKey=function(){var r=this.getModel("effect"),o=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&o>0?o+"":""},a.type="series.lines",a.dependencies=["grid","polar","geo","calendar"],a.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},a}(SeriesModel$1);const LinesSeriesModel$1=LinesSeriesModel;function normalize(n){return n instanceof Array||(n=[n,n]),n}var linesVisual={seriesType:"lines",reset:function(n){var a=normalize(n.get("symbol")),r=normalize(n.get("symbolSize")),o=n.getData();o.setVisual("fromSymbol",a&&a[0]),o.setVisual("toSymbol",a&&a[1]),o.setVisual("fromSymbolSize",r&&r[0]),o.setVisual("toSymbolSize",r&&r[1]);function l(u,c){var h=u.getItemModel(c),f=normalize(h.getShallow("symbol",!0)),v=normalize(h.getShallow("symbolSize",!0));f[0]&&u.setItemVisual(c,"fromSymbol",f[0]),f[1]&&u.setItemVisual(c,"toSymbol",f[1]),v[0]&&u.setItemVisual(c,"fromSymbolSize",v[0]),v[1]&&u.setItemVisual(c,"toSymbolSize",v[1])}return{dataEach:o.hasItemOption?l:null}}};const linesVisual$1=linesVisual;function install$w(n){n.registerChartView(LinesView$1),n.registerSeriesModel(LinesSeriesModel$1),n.registerLayout(linesLayout$1),n.registerVisual(linesVisual$1)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var a=platformApi.createCanvas();this.canvas=a}return n.prototype.update=function(a,r,o,l,u,c){var h=this._getBrush(),f=this._getGradient(u,"inRange"),v=this._getGradient(u,"outOfRange"),d=this.pointSize+this.blurSize,p=this.canvas,g=p.getContext("2d"),y=a.length;p.width=r,p.height=o;for(var _=0;_<y;++_){var S=a[_],x=S[0],T=S[1],A=S[2],b=l(A);g.globalAlpha=b,g.drawImage(h,x-d,T-d)}if(!p.width||!p.height)return p;for(var C=g.getImageData(0,0,p.width,p.height),E=C.data,w=0,D=E.length,M=this.minOpacity,P=this.maxOpacity,L=P-M;w<D;){var b=E[w+3]/256,I=Math.floor(b*(GRADIENT_LEVELS-1))*4;if(b>0){var R=c(b)?f:v;b>0&&(b=b*L+M),E[w++]=R[I],E[w++]=R[I+1],E[w++]=R[I+2],E[w++]=R[I+3]*b*256}else w+=4}return g.putImageData(C,0,0),p},n.prototype._getBrush=function(){var a=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),r=this.pointSize+this.blurSize,o=r*2;a.width=o,a.height=o;var l=a.getContext("2d");return l.clearRect(0,0,o,o),l.shadowOffsetX=o,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-r,r,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),a},n.prototype._getGradient=function(a,r){for(var o=this._gradientPixels,l=o[r]||(o[r]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],c=0,h=0;h<256;h++)a[r](h/255,!0,u),l[c++]=u[0],l[c++]=u[1],l[c++]=u[2],l[c++]=u[3];return l},n}();const HeatmapLayer$1=HeatmapLayer;function getIsInPiecewiseRange(n,a,r){var o=n[1]-n[0];a=map$1(a,function(c){return{interval:[(c.interval[0]-n[0])/o,(c.interval[1]-n[0])/o]}});var l=a.length,u=0;return function(c){var h;for(h=u;h<l;h++){var f=a[h].interval;if(f[0]<=c&&c<=f[1]){u=h;break}}if(h===l)for(h=u-1;h>=0;h--){var f=a[h].interval;if(f[0]<=c&&c<=f[1]){u=h;break}}return h>=0&&h<l&&r[h]}}function getIsInContinuousRange(n,a){var r=n[1]-n[0];return a=[(a[0]-n[0])/r,(a[1]-n[0])/r],function(o){return o>=a[0]&&o<=a[1]}}function isGeoCoordSys(n){var a=n.dimensions;return a[0]==="lng"&&a[1]==="lat"}var HeatmapView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u;if(o.eachComponent("visualMap",function(h){h.eachTargetSeries(function(f){f===r&&(u=h)})}),{}.NODE_ENV!=="production"&&!u)throw new Error("Heatmap must use with visualMap");this._progressiveEls=null,this.group.removeAll();var c=r.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(r,l,0,r.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,r,u,l)},a.prototype.incrementalPrepareRender=function(r,o,l){this.group.removeAll()},a.prototype.incrementalRender=function(r,o,l,u){var c=o.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(o,l,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(o,u,r.start,r.end,!0)))},a.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},a.prototype._renderOnCartesianAndCalendar=function(r,o,l,u,c){var h=r.coordinateSystem,f=isCoordinateSystemType(h,"cartesian2d"),v,d,p,g;if(f){var y=h.getAxis("x"),_=h.getAxis("y");if({}.NODE_ENV!=="production"){if(!(y.type==="category"&&_.type==="category"))throw new Error("Heatmap on cartesian must have two category axes");if(!(y.onBand&&_.onBand))throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}v=y.getBandWidth()+.5,d=_.getBandWidth()+.5,p=y.scale.getExtent(),g=_.scale.getExtent()}for(var S=this.group,x=r.getData(),T=r.getModel(["emphasis","itemStyle"]).getItemStyle(),A=r.getModel(["blur","itemStyle"]).getItemStyle(),b=r.getModel(["select","itemStyle"]).getItemStyle(),C=r.get(["itemStyle","borderRadius"]),E=getLabelStatesModels(r),w=r.getModel("emphasis"),D=w.get("focus"),M=w.get("blurScope"),P=w.get("disabled"),L=f?[x.mapDimension("x"),x.mapDimension("y"),x.mapDimension("value")]:[x.mapDimension("time"),x.mapDimension("value")],I=l;I<u;I++){var R=void 0,O=x.getItemVisual(I,"style");if(f){var N=x.get(L[0],I),V=x.get(L[1],I);if(isNaN(x.get(L[2],I))||isNaN(N)||isNaN(V)||N<p[0]||N>p[1]||V<g[0]||V>g[1])continue;var B=h.dataToPoint([N,V]);R=new Rect$3({shape:{x:B[0]-v/2,y:B[1]-d/2,width:v,height:d},style:O})}else{if(isNaN(x.get(L[1],I)))continue;R=new Rect$3({z2:1,shape:h.dataToRect([x.get(L[0],I)]).contentShape,style:O})}if(x.hasItemOption){var G=x.getItemModel(I),F=G.getModel("emphasis");T=F.getModel("itemStyle").getItemStyle(),A=G.getModel(["blur","itemStyle"]).getItemStyle(),b=G.getModel(["select","itemStyle"]).getItemStyle(),C=G.get(["itemStyle","borderRadius"]),D=F.get("focus"),M=F.get("blurScope"),P=F.get("disabled"),E=getLabelStatesModels(G)}R.shape.r=C;var z=r.getRawValue(I),H="-";z&&z[2]!=null&&(H=z[2]+""),setLabelStyle(R,E,{labelFetcher:r,labelDataIndex:I,defaultOpacity:O.opacity,defaultText:H}),R.ensureState("emphasis").style=T,R.ensureState("blur").style=A,R.ensureState("select").style=b,toggleHoverEmphasis(R,D,M,P),R.incremental=c,c&&(R.states.emphasis.hoverLayer=!0),S.add(R),x.setItemGraphicEl(I,R),this._progressiveEls&&this._progressiveEls.push(R)}},a.prototype._renderOnGeo=function(r,o,l,u){var c=l.targetVisuals.inRange,h=l.targetVisuals.outOfRange,f=o.getData(),v=this._hmLayer||this._hmLayer||new HeatmapLayer$1;v.blurSize=o.get("blurSize"),v.pointSize=o.get("pointSize"),v.minOpacity=o.get("minOpacity"),v.maxOpacity=o.get("maxOpacity");var d=r.getViewRect().clone(),p=r.getRoamTransform();d.applyTransform(p);var g=Math.max(d.x,0),y=Math.max(d.y,0),_=Math.min(d.width+d.x,u.getWidth()),S=Math.min(d.height+d.y,u.getHeight()),x=_-g,T=S-y,A=[f.mapDimension("lng"),f.mapDimension("lat"),f.mapDimension("value")],b=f.mapArray(A,function(D,M,P){var L=r.dataToPoint([D,M]);return L[0]-=g,L[1]-=y,L.push(P),L}),C=l.getExtent(),E=l.type==="visualMap.continuous"?getIsInContinuousRange(C,l.option.range):getIsInPiecewiseRange(C,l.getPieceList(),l.option.selected);v.update(b,x,T,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:h.color.getColorMapper()},E);var w=new ZRImage$1({style:{width:x,height:T,x:g,y,image:v.canvas},silent:!0});this.group.add(w)},a.type="heatmap",a}(ChartView$1);const HeatmapView$1=HeatmapView;var HeatmapSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{generateCoord:"value"})},a.prototype.preventIncremental=function(){var r=CoordinateSystem.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},a.type="series.heatmap",a.dependencies=["grid","geo","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},a}(SeriesModel$1);const HeatmapSeriesModel$1=HeatmapSeriesModel;function install$v(n){n.registerChartView(HeatmapView$1),n.registerSeriesModel(HeatmapSeriesModel$1)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle$1,PictorialBarView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=this.group,c=r.getData(),h=this._data,f=r.coordinateSystem,v=f.getBaseAxis(),d=v.isHorizontal(),p=f.master.getRect(),g={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:r,coordSys:f,coordSysExtent:[[p.x,p.x+p.width],[p.y,p.y+p.height]],isHorizontal:d,valueDim:LAYOUT_ATTRS[+d],categoryDim:LAYOUT_ATTRS[1-+d]};return c.diff(h).add(function(y){if(!!c.hasValue(y)){var _=getItemModel(c,y),S=getSymbolMeta(c,y,_,g),x=createBar(c,g,S);c.setItemGraphicEl(y,x),u.add(x),updateCommon(x,g,S)}}).update(function(y,_){var S=h.getItemGraphicEl(_);if(!c.hasValue(y)){u.remove(S);return}var x=getItemModel(c,y),T=getSymbolMeta(c,y,x,g),A=getShapeStr(c,T);S&&A!==S.__pictorialShapeStr&&(u.remove(S),c.setItemGraphicEl(y,null),S=null),S?updateBar(S,g,T):S=createBar(c,g,T,!0),c.setItemGraphicEl(y,S),S.__pictorialSymbolMeta=T,u.add(S),updateCommon(S,g,T)}).remove(function(y){var _=h.getItemGraphicEl(y);_&&removeBar(h,y,_.__pictorialSymbolMeta.animationModel,_)}).execute(),this._data=c,this.group},a.prototype.remove=function(r,o){var l=this.group,u=this._data;r.get("animation")?u&&u.eachItemGraphicEl(function(c){removeBar(u,getECData(c).dataIndex,r,c)}):l.removeAll()},a.type="pictorialBar",a}(ChartView$1);function getSymbolMeta(n,a,r,o){var l=n.getItemLayout(a),u=r.get("symbolRepeat"),c=r.get("symbolClip"),h=r.get("symbolPosition")||"start",f=r.get("symbolRotate"),v=(f||0)*Math.PI/180||0,d=r.get("symbolPatternSize")||2,p=r.isAnimationEnabled(),g={dataIndex:a,layout:l,itemModel:r,symbolType:n.getItemVisual(a,"symbol")||"circle",style:n.getItemVisual(a,"style"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:v,animationModel:p?r:null,hoverScale:p&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};prepareBarLength(r,u,l,o,g),prepareSymbolSize(n,a,l,u,c,g.boundingLength,g.pxSign,d,o,g),prepareLineWidth(r,g.symbolScale,v,o,g);var y=g.symbolSize,_=normalizeSymbolOffset(r.get("symbolOffset"),y);return prepareLayoutInfo(r,y,l,u,c,_,h,g.valueLineWidth,g.boundingLength,g.repeatCutLength,o,g),g}function prepareBarLength(n,a,r,o,l){var u=o.valueDim,c=n.get("symbolBoundingData"),h=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),f=h.toGlobalCoord(h.dataToCoord(0)),v=1-+(r[u.wh]<=0),d;if(isArray$1(c)){var p=[convertToCoordOnAxis(h,c[0])-f,convertToCoordOnAxis(h,c[1])-f];p[1]<p[0]&&p.reverse(),d=p[v]}else c!=null?d=convertToCoordOnAxis(h,c)-f:a?d=o.coordSysExtent[u.index][v]-f:d=r[u.wh];l.boundingLength=d,a&&(l.repeatCutLength=r[u.wh]),l.pxSign=d>0?1:-1}function convertToCoordOnAxis(n,a){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(a)))}function prepareSymbolSize(n,a,r,o,l,u,c,h,f,v){var d=f.valueDim,p=f.categoryDim,g=Math.abs(r[p.wh]),y=n.getItemVisual(a,"symbolSize"),_;isArray$1(y)?_=y.slice():y==null?_=["100%","100%"]:_=[y,y],_[p.index]=parsePercent(_[p.index],g),_[d.index]=parsePercent(_[d.index],o?g:Math.abs(u)),v.symbolSize=_;var S=v.symbolScale=[_[0]/h,_[1]/h];S[d.index]*=(f.isHorizontal?-1:1)*c}function prepareLineWidth(n,a,r,o,l){var u=n.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:a[0],scaleY:a[1],rotation:r}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=a[o.valueDim.index]),l.valueLineWidth=u||0}function prepareLayoutInfo(n,a,r,o,l,u,c,h,f,v,d,p){var g=d.categoryDim,y=d.valueDim,_=p.pxSign,S=Math.max(a[y.index]+h,0),x=S;if(o){var T=Math.abs(f),A=retrieve(n.get("symbolMargin"),"15%")+"",b=!1;A.lastIndexOf("!")===A.length-1&&(b=!0,A=A.slice(0,A.length-1));var C=parsePercent(A,a[y.index]),E=Math.max(S+C*2,0),w=b?0:C*2,D=isNumeric(o),M=D?o:toIntTimes((T+w)/E),P=T-M*S;C=P/2/(b?M:Math.max(M-1,1)),E=S+C*2,w=b?0:C*2,!D&&o!=="fixed"&&(M=v?toIntTimes((Math.abs(v)+w)/E):0),x=M*E-w,p.repeatTimes=M,p.symbolMargin=C}var L=_*(x/2),I=p.pathPosition=[];I[g.index]=r[g.wh]/2,I[y.index]=c==="start"?L:c==="end"?f-L:f/2,u&&(I[0]+=u[0],I[1]+=u[1]);var R=p.bundlePosition=[];R[g.index]=r[g.xy],R[y.index]=r[y.xy];var O=p.barRectShape=extend({},r);O[y.wh]=_*Math.max(Math.abs(r[y.wh]),Math.abs(I[y.index]+L)),O[g.wh]=r[g.wh];var N=p.clipShape={};N[g.xy]=-r[g.xy],N[g.wh]=d.ecSize[g.wh],N[y.xy]=0,N[y.wh]=r[y.wh]}function createPath(n){var a=n.symbolPatternSize,r=createSymbol$1(n.symbolType,-a/2,-a/2,a,a);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function createOrUpdateRepeatSymbols(n,a,r,o){var l=n.__pictorialBundle,u=r.symbolSize,c=r.valueLineWidth,h=r.pathPosition,f=a.valueDim,v=r.repeatTimes||0,d=0,p=u[a.valueDim.index]+c+r.symbolMargin*2;for(eachPath(n,function(S){S.__pictorialAnimationIndex=d,S.__pictorialRepeatTimes=v,d<v?updateAttr(S,null,_(d),r,o):updateAttr(S,null,{scaleX:0,scaleY:0},r,o,function(){l.remove(S)}),d++});d<v;d++){var g=createPath(r);g.__pictorialAnimationIndex=d,g.__pictorialRepeatTimes=v,l.add(g);var y=_(d);updateAttr(g,{x:y.x,y:y.y,scaleX:0,scaleY:0},{scaleX:y.scaleX,scaleY:y.scaleY,rotation:y.rotation},r,o)}function _(S){var x=h.slice(),T=r.pxSign,A=S;return(r.symbolRepeatDirection==="start"?T>0:T<0)&&(A=v-1-S),x[f.index]=p*(A-v/2+.5)+h[f.index],{x:x[0],y:x[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function createOrUpdateSingleSymbol(n,a,r,o){var l=n.__pictorialBundle,u=n.__pictorialMainPath;u?updateAttr(u,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,o):(u=n.__pictorialMainPath=createPath(r),l.add(u),updateAttr(u,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,o))}function createOrUpdateBarRect(n,a,r){var o=extend({},a.barRectShape),l=n.__pictorialBarRect;l?updateAttr(l,null,{shape:o},a,r):(l=n.__pictorialBarRect=new Rect$3({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,n.add(l))}function createOrUpdateClip(n,a,r,o){if(r.symbolClip){var l=n.__pictorialClipPath,u=extend({},r.clipShape),c=a.valueDim,h=r.animationModel,f=r.dataIndex;if(l)updateProps$1(l,{shape:u},h,f);else{u[c.wh]=0,l=new Rect$3({shape:u}),n.__pictorialBundle.setClipPath(l),n.__pictorialClipPath=l;var v={};v[c.wh]=r.clipShape[c.wh],graphic$1[o?"updateProps":"initProps"](l,{shape:v},h,f)}}}function getItemModel(n,a){var r=n.getItemModel(a);return r.getAnimationDelayParams=getAnimationDelayParams,r.isAnimationEnabled=isAnimationEnabled,r}function getAnimationDelayParams(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(n,a,r,o){var l=new Group$4,u=new Group$4;return l.add(u),l.__pictorialBundle=u,u.x=r.bundlePosition[0],u.y=r.bundlePosition[1],r.symbolRepeat?createOrUpdateRepeatSymbols(l,a,r):createOrUpdateSingleSymbol(l,a,r),createOrUpdateBarRect(l,r,o),createOrUpdateClip(l,a,r,o),l.__pictorialShapeStr=getShapeStr(n,r),l.__pictorialSymbolMeta=r,l}function updateBar(n,a,r){var o=r.animationModel,l=r.dataIndex,u=n.__pictorialBundle;updateProps$1(u,{x:r.bundlePosition[0],y:r.bundlePosition[1]},o,l),r.symbolRepeat?createOrUpdateRepeatSymbols(n,a,r,!0):createOrUpdateSingleSymbol(n,a,r,!0),createOrUpdateBarRect(n,r,!0),createOrUpdateClip(n,a,r,!0)}function removeBar(n,a,r,o){var l=o.__pictorialBarRect;l&&l.removeTextContent();var u=[];eachPath(o,function(c){u.push(c)}),o.__pictorialMainPath&&u.push(o.__pictorialMainPath),o.__pictorialClipPath&&(r=null),each$f(u,function(c){removeElement(c,{scaleX:0,scaleY:0},r,a,function(){o.parent&&o.parent.remove(o)})}),n.setItemGraphicEl(a,null)}function getShapeStr(n,a){return[n.getItemVisual(a.dataIndex,"symbol")||"none",!!a.symbolRepeat,!!a.symbolClip].join(":")}function eachPath(n,a,r){each$f(n.__pictorialBundle.children(),function(o){o!==n.__pictorialBarRect&&a.call(r,o)})}function updateAttr(n,a,r,o,l,u){a&&n.attr(a),o.symbolClip&&!l?r&&n.attr(r):r&&graphic$1[l?"updateProps":"initProps"](n,r,o.animationModel,o.dataIndex,u)}function updateCommon(n,a,r){var o=r.dataIndex,l=r.itemModel,u=l.getModel("emphasis"),c=u.getModel("itemStyle").getItemStyle(),h=l.getModel(["blur","itemStyle"]).getItemStyle(),f=l.getModel(["select","itemStyle"]).getItemStyle(),v=l.getShallow("cursor"),d=u.get("focus"),p=u.get("blurScope"),g=u.get("scale");eachPath(n,function(S){if(S instanceof ZRImage$1){var x=S.style;S.useStyle(extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},r.style))}else S.useStyle(r.style);var T=S.ensureState("emphasis");T.style=c,g&&(T.scaleX=S.scaleX*1.1,T.scaleY=S.scaleY*1.1),S.ensureState("blur").style=h,S.ensureState("select").style=f,v&&(S.cursor=v),S.z2=r.z2});var y=a.valueDim.posDesc[+(r.boundingLength>0)],_=n.__pictorialBarRect;setLabelStyle(_,getLabelStatesModels(l),{labelFetcher:a.seriesModel,labelDataIndex:o,defaultText:getDefaultLabel(a.seriesModel.getData(),o),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:y}),toggleHoverEmphasis(n,d,p,u.get("disabled"))}function toIntTimes(n){var a=Math.round(n);return Math.abs(n-a)<1e-4?a:Math.ceil(n)}const PictorialBarView$1=PictorialBarView;var PictorialBarSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return a.prototype.getInitialData=function(r){return r.stack=null,n.prototype.getInitialData.apply(this,arguments)},a.type="series.pictorialBar",a.dependencies=["grid"],a.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),a}(BaseBarSeriesModel$1);const PictorialBarSeriesModel$1=PictorialBarSeriesModel;function install$u(n){n.registerChartView(PictorialBarView$1),n.registerSeriesModel(PictorialBarSeriesModel$1),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._layers=[],r}return a.prototype.render=function(r,o,l){var u=r.getData(),c=this,h=this.group,f=r.getLayerSeries(),v=u.getLayout("layoutInfo"),d=v.rect,p=v.boundaryGap;h.x=0,h.y=d.y+p[0];function g(x){return x.name}var y=new DataDiffer$1(this._layersSeries||[],f,g,g),_=[];y.add(bind$1(S,this,"add")).update(bind$1(S,this,"update")).remove(bind$1(S,this,"remove")).execute();function S(x,T,A){var b=c._layers;if(x==="remove"){h.remove(b[T]);return}for(var C=[],E=[],w,D=f[T].indices,M=0;M<D.length;M++){var P=u.getItemLayout(D[M]),L=P.x,I=P.y0,R=P.y;C.push(L,I),E.push(L,I+R),w=u.getItemVisual(D[M],"style")}var O,N=u.getItemLayout(D[0]),V=r.getModel("label"),B=V.get("margin"),G=r.getModel("emphasis");if(x==="add"){var F=_[T]=new Group$4;O=new ECPolygon({shape:{points:C,stackedOnPoints:E,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),F.add(O),h.add(F),r.isAnimationEnabled()&&O.setClipPath(createGridClipShape(O.getBoundingRect(),r,function(){O.removeClipPath()}))}else{var F=b[A];O=F.childAt(0),h.add(F),_[T]=F,updateProps$1(O,{shape:{points:C,stackedOnPoints:E}},r),saveOldStyle(O)}setLabelStyle(O,getLabelStatesModels(r),{labelDataIndex:D[M-1],defaultText:u.getName(D[M-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),O.setTextConfig({position:null,local:!0});var z=O.getTextContent();z&&(z.x=N.x-B,z.y=N.y0+N.y/2),O.useStyle(w),u.setItemGraphicEl(T,O),setStatesStylesFromModel(O,r),toggleHoverEmphasis(O,G.get("focus"),G.get("blurScope"),G.get("disabled"))}this._layersSeries=f,this._layers=_},a.type="themeRiver",a}(ChartView$1);function createGridClipShape(n,a,r){var o=new Rect$3({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return initProps(o,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},a,r),o}const ThemeRiverView$1=ThemeRiverView;var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},a.prototype.fixData=function(r){var o=r.length,l={},u=groupData(r,function(g){return l.hasOwnProperty(g[0]+"")||(l[g[0]+""]=-1),g[2]}),c=[];u.buckets.each(function(g,y){c.push({name:y,dataList:g})});for(var h=c.length,f=0;f<h;++f){for(var v=c[f].name,d=0;d<c[f].dataList.length;++d){var p=c[f].dataList[d][0]+"";l[p]=f}for(var p in l)l.hasOwnProperty(p)&&l[p]!==f&&(l[p]=f,r[o]=[p,0,v],o++)}return r},a.prototype.getInitialData=function(r,o){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=l.get("type"),c=filter(r.data,function(_){return _[2]!==void 0}),h=this.fixData(c||[]),f=[],v=this.nameMap=createHashMap(),d=0,p=0;p<h.length;++p)f.push(h[p][DATA_NAME_INDEX]),v.get(h[p][DATA_NAME_INDEX])||(v.set(h[p][DATA_NAME_INDEX],d),d++);var g=prepareSeriesDataSchema(h,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,y=new SeriesData$1(g,this);return y.initData(h),y},a.prototype.getLayerSeries=function(){for(var r=this.getData(),o=r.count(),l=[],u=0;u<o;++u)l[u]=u;var c=r.mapDimension("single"),h=groupData(l,function(v){return r.get("name",v)}),f=[];return h.buckets.each(function(v,d){v.sort(function(p,g){return r.get(c,p)-r.get(c,g)}),f.push({name:d,indices:v})}),f},a.prototype.getAxisTooltipData=function(r,o,l){isArray$1(r)||(r=r?[r]:[]);for(var u=this.getData(),c=this.getLayerSeries(),h=[],f=c.length,v,d=0;d<f;++d){for(var p=Number.MAX_VALUE,g=-1,y=c[d].indices.length,_=0;_<y;++_){var S=u.get(r[0],c[d].indices[_]),x=Math.abs(S-o);x<=p&&(v=S,p=x,g=c[d].indices[_])}h.push(g)}return{dataIndices:h,nestestValue:v}},a.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=u.getName(r),h=u.get(u.mapDimension("value"),r);return createTooltipMarkup("nameValue",{name:c,value:h})},a.type="series.themeRiver",a.dependencies=["singleAxis"],a.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},a}(SeriesModel$1);const ThemeRiverSeriesModel$1=ThemeRiverSeriesModel;function themeRiverLayout(n,a){n.eachSeriesByType("themeRiver",function(r){var o=r.getData(),l=r.coordinateSystem,u={},c=l.getRect();u.rect=c;var h=r.get("boundaryGap"),f=l.getAxis();if(u.boundaryGap=h,f.orient==="horizontal"){h[0]=parsePercent(h[0],c.height),h[1]=parsePercent(h[1],c.height);var v=c.height-h[0]-h[1];doThemeRiverLayout(o,r,v)}else{h[0]=parsePercent(h[0],c.width),h[1]=parsePercent(h[1],c.width);var d=c.width-h[0]-h[1];doThemeRiverLayout(o,r,d)}o.setLayout("layoutInfo",u)})}function doThemeRiverLayout(n,a,r){if(!!n.count())for(var o=a.coordinateSystem,l=a.getLayerSeries(),u=n.mapDimension("single"),c=n.mapDimension("value"),h=map$1(l,function(x){return map$1(x.indices,function(T){var A=o.dataToPoint(n.get(u,T));return A[1]=n.get(c,T),A})}),f=computeBaseline(h),v=f.y0,d=r/f.max,p=l.length,g=l[0].indices.length,y,_=0;_<g;++_){y=v[_]*d,n.setItemLayout(l[0].indices[_],{layerIndex:0,x:h[0][_][0],y0:y,y:h[0][_][1]*d});for(var S=1;S<p;++S)y+=h[S-1][_][1]*d,n.setItemLayout(l[S].indices[_],{layerIndex:S,x:h[S][_][0],y0:y,y:h[S][_][1]*d})}}function computeBaseline(n){for(var a=n.length,r=n[0].length,o=[],l=[],u=0,c=0;c<r;++c){for(var h=0,f=0;f<a;++f)h+=n[f][c][1];h>u&&(u=h),o.push(h)}for(var v=0;v<r;++v)l[v]=(u-o[v])/2;u=0;for(var d=0;d<r;++d){var p=o[d]+l[d];p>u&&(u=p)}return{y0:l,max:u}}function install$t(n){n.registerChartView(ThemeRiverView$1),n.registerSeriesModel(ThemeRiverSeriesModel$1),n.registerLayout(themeRiverLayout),n.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(n){__extends(a,n);function a(r,o,l,u){var c=n.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=o.seriesIndex;var h=new ZRText$1({z2:DEFAULT_TEXT_Z,silent:r.getModel().get(["label","silent"])});return c.setTextContent(h),c.updateData(!0,r,o,l,u),c}return a.prototype.updateData=function(r,o,l,u,c){this.node=o,o.piece=this,l=l||this._seriesModel,u=u||this._ecModel;var h=this;getECData(h).dataIndex=o.dataIndex;var f=o.getModel(),v=f.getModel("emphasis"),d=o.getLayout(),p=extend({},d);p.label=null;var g=o.getVisual("style");g.lineJoin="bevel";var y=o.getVisual("decal");y&&(g.decal=createOrUpdatePatternFromDecal(y,c));var _=getSectorCornerRadius(f.getModel("itemStyle"),p,!0);extend(p,_),each$f(SPECIAL_STATES,function(A){var b=h.ensureState(A),C=f.getModel([A,"itemStyle"]);b.style=C.getItemStyle();var E=getSectorCornerRadius(C,p);E&&(b.shape=E)}),r?(h.setShape(p),h.shape.r=d.r0,initProps(h,{shape:{r:d.r}},l,o.dataIndex)):(updateProps$1(h,{shape:p},l),saveOldStyle(h)),h.useStyle(g),this._updateLabel(l);var S=f.getShallow("cursor");S&&h.attr("cursor",S),this._seriesModel=l||this._seriesModel,this._ecModel=u||this._ecModel;var x=v.get("focus"),T=x==="ancestor"?o.getAncestorsIndices():x==="descendant"?o.getDescendantIndices():x;toggleHoverEmphasis(this,T,v.get("blurScope"),v.get("disabled"))},a.prototype._updateLabel=function(r){var o=this,l=this.node.getModel(),u=l.getModel("label"),c=this.node.getLayout(),h=c.endAngle-c.startAngle,f=(c.startAngle+c.endAngle)/2,v=Math.cos(f),d=Math.sin(f),p=this,g=p.getTextContent(),y=this.node.dataIndex,_=u.get("minAngle")/180*Math.PI,S=u.get("show")&&!(_!=null&&Math.abs(h)<_);g.ignore=!S,each$f(DISPLAY_STATES,function(T){var A=T==="normal"?l.getModel("label"):l.getModel([T,"label"]),b=T==="normal",C=b?g:g.ensureState(T),E=r.getFormattedLabel(y,T);b&&(E=E||o.node.name),C.style=createTextStyle$1(A,{},null,T!=="normal",!0),E&&(C.style.text=E);var w=A.get("show");w!=null&&!b&&(C.ignore=!w);var D=x(A,"position"),M=b?p:p.states[T],P=M.style.fill;M.textConfig={outsideFill:A.get("color")==="inherit"?P:null,inside:D!=="outside"};var L,I=x(A,"distance")||0,R=x(A,"align");D==="outside"?(L=c.r+I,R=f>Math.PI/2?"right":"left"):!R||R==="center"?(h===2*Math.PI&&c.r0===0?L=0:L=(c.r+c.r0)/2,R="center"):R==="left"?(L=c.r0+I,f>Math.PI/2&&(R="right")):R==="right"&&(L=c.r-I,f>Math.PI/2&&(R="left")),C.style.align=R,C.style.verticalAlign=x(A,"verticalAlign")||"middle",C.x=L*v+c.cx,C.y=L*d+c.cy;var O=x(A,"rotate"),N=0;O==="radial"?(N=normalizeRadian(-f),N>Math.PI/2&&N<Math.PI*1.5&&(N+=Math.PI)):O==="tangential"?(N=Math.PI/2-f,N>Math.PI/2?N-=Math.PI:N<-Math.PI/2&&(N+=Math.PI)):isNumber(O)&&(N=O*Math.PI/180),C.rotation=normalizeRadian(N)});function x(T,A){var b=T.get(A);return b==null?u.get(A):b}g.dirtyStyle()},a}(Sector$1);const SunburstPiece$1=SunburstPiece;var ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(n){n.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(a,r){r.eachComponent({mainType:"series",subType:"sunburst",query:a},o);function o(l,u){var c=retrieveTargetInfo(a,[ROOT_TO_NODE_ACTION],l);if(c){var h=l.getViewRoot();h&&(a.direction=aboveViewRoot(h,c.node)?"rollUp":"drillDown"),l.resetViewRoot(c.node)}}}),n.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(a,r,o){a=extend({},a),r.eachComponent({mainType:"series",subType:"sunburst",query:a},l);function l(u){var c=retrieveTargetInfo(a,[HIGHLIGHT_ACTION],u);c&&(a.dataIndex=c.node.dataIndex)}({}).NODE_ENV!=="production"&&deprecateReplaceLog("sunburstHighlight","highlight"),o.dispatchAction(extend(a,{type:"highlight"}))}),n.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(a,r,o){a=extend({},a),{}.NODE_ENV!=="production"&&deprecateReplaceLog("sunburstUnhighlight","downplay"),o.dispatchAction(extend(a,{type:"downplay"}))})}var SunburstView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l,u){var c=this;this.seriesModel=r,this.api=l,this.ecModel=o;var h=r.getData(),f=h.tree.root,v=r.getViewRoot(),d=this.group,p=r.get("renderLabelForZeroData"),g=[];v.eachNode(function(A){g.push(A)});var y=this._oldChildren||[];_(g,y),T(f,v),this._initEvents(),this._oldChildren=g;function _(A,b){if(A.length===0&&b.length===0)return;new DataDiffer$1(b,A,C,C).add(E).update(E).remove(curry$1(E,null)).execute();function C(w){return w.getId()}function E(w,D){var M=w==null?null:A[w],P=D==null?null:b[D];S(M,P)}}function S(A,b){if(!p&&A&&!A.getValue()&&(A=null),A!==f&&b!==f){if(b&&b.piece)A?(b.piece.updateData(!1,A,r,o,l),h.setItemGraphicEl(A.dataIndex,b.piece)):x(b);else if(A){var C=new SunburstPiece$1(A,r,o,l);d.add(C),h.setItemGraphicEl(A.dataIndex,C)}}}function x(A){!A||A.piece&&(d.remove(A.piece),A.piece=null)}function T(A,b){b.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,A,r,o,l):(c.virtualPiece=new SunburstPiece$1(A,r,o,l),d.add(c.virtualPiece)),b.piece.off("click"),c.virtualPiece.on("click",function(C){c._rootToNode(b.parentNode)})):c.virtualPiece&&(d.remove(c.virtualPiece),c.virtualPiece=null)}},a.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(o){var l=!1,u=r.seriesModel.getViewRoot();u.eachNode(function(c){if(!l&&c.piece&&c.piece===o.target){var h=c.getModel().get("nodeClick");if(h==="rootToNode")r._rootToNode(c);else if(h==="link"){var f=c.getModel(),v=f.get("link");if(v){var d=f.get("target",!0)||"_blank";windowOpen(v,d)}}l=!0}})})},a.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},a.prototype.containPoint=function(r,o){var l=o.getData(),u=l.getItemLayout(0);if(u){var c=r[0]-u.cx,h=r[1]-u.cy,f=Math.sqrt(c*c+h*h);return f<=u.r&&f>=u.r0}},a.type="sunburst",a}(ChartView$1);const SunburstView$1=SunburstView;var SunburstSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.ignoreStyleOnData=!0,r}return a.prototype.getInitialData=function(r,o){var l={name:r.name,children:r.data};completeTreeValue(l);var u=this._levelModels=map$1(r.levels||[],function(f){return new Model$1(f,this,o)},this),c=Tree$1.createTree(l,this,h);function h(f){f.wrapMethod("getItemModel",function(v,d){var p=c.getNodeByDataIndex(d),g=u[p.depth];return g&&(v.parentModel=g),v})}return c.data},a.prototype.optionUpdated=function(){this.resetViewRoot()},a.prototype.getDataParams=function(r){var o=n.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(r);return o.treePathInfo=wrapTreePathInfo(l,this),o},a.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},a.prototype.getViewRoot=function(){return this._viewRoot},a.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var o=this.getRawData().tree.root;(!r||r!==o&&!o.contains(r))&&(this._viewRoot=o)},a.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},a.type="series.sunburst",a.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},a}(SeriesModel$1);function completeTreeValue(n){var a=0;each$f(n.children,function(o){completeTreeValue(o);var l=o.value;isArray$1(l)&&(l=l[0]),a+=l});var r=n.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=a),r<0&&(r=0),isArray$1(n.value)?n.value[0]=r:n.value=r}const SunburstSeriesModel$1=SunburstSeriesModel;var RADIAN=Math.PI/180;function sunburstLayout(n,a,r){a.eachSeriesByType(n,function(o){var l=o.get("center"),u=o.get("radius");isArray$1(u)||(u=[0,u]),isArray$1(l)||(l=[l,l]);var c=r.getWidth(),h=r.getHeight(),f=Math.min(c,h),v=parsePercent(l[0],c),d=parsePercent(l[1],h),p=parsePercent(u[0],f/2),g=parsePercent(u[1],f/2),y=-o.get("startAngle")*RADIAN,_=o.get("minAngle")*RADIAN,S=o.getData().tree.root,x=o.getViewRoot(),T=x.depth,A=o.get("sort");A!=null&&initChildren(x,A);var b=0;each$f(x.children,function(B){!isNaN(B.getValue())&&b++});var C=x.getValue(),E=Math.PI/(C||b)*2,w=x.depth>0,D=x.height-(w?-1:1),M=(g-p)/(D||1),P=o.get("clockwise"),L=o.get("stillShowZeroSum"),I=P?1:-1,R=function(B,G){if(!!B){var F=G;if(B!==S){var z=B.getValue(),H=C===0&&L?E:z*E;H<_&&(H=_),F=G+I*H;var U=B.depth-T-(w?-1:1),Y=p+M*U,Z=p+M*(U+1),X=o.getLevelModel(B);if(X){var J=X.get("r0",!0),te=X.get("r",!0),Q=X.get("radius",!0);Q!=null&&(J=Q[0],te=Q[1]),J!=null&&(Y=parsePercent(J,f/2)),te!=null&&(Z=parsePercent(te,f/2))}B.setLayout({angle:H,startAngle:G,endAngle:F,clockwise:P,cx:v,cy:d,r0:Y,r:Z})}if(B.children&&B.children.length){var q=0;each$f(B.children,function(ee){q+=R(ee,G+q)})}return F-G}};if(w){var O=p,N=p+M,V=Math.PI*2;S.setLayout({angle:V,startAngle:y,endAngle:y+V,clockwise:P,cx:v,cy:d,r0:O,r:N})}R(x,y)})}function initChildren(n,a){var r=n.children||[];n.children=sort(r,a),r.length&&each$f(n.children,function(o){initChildren(o,a)})}function sort(n,a){if(isFunction(a)){var r=map$1(n,function(l,u){var c=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return c}},index:u}});return r.sort(function(l,u){return a(l.params,u.params)}),map$1(r,function(l){return n[l.index]})}else{var o=a==="asc";return n.sort(function(l,u){var c=(l.getValue()-u.getValue())*(o?1:-1);return c===0?(l.dataIndex-u.dataIndex)*(o?-1:1):c})}}function sunburstVisual(n){var a={};function r(o,l,u){for(var c=o;c&&c.depth>1;)c=c.parentNode;var h=l.getColorFromPalette(c.name||c.dataIndex+"",a);return o.depth>1&&isString(h)&&(h=lift(h,(o.depth-1)/(u-1)*.5)),h}n.eachSeriesByType("sunburst",function(o){var l=o.getData(),u=l.tree;u.eachNode(function(c){var h=c.getModel(),f=h.getModel("itemStyle").getItemStyle();f.fill||(f.fill=r(c,o,u.root.height));var v=l.ensureUniqueItemVisual(c.dataIndex,"style");extend(v,f)})})}function install$s(n){n.registerChartView(SunburstView$1),n.registerSeriesModel(SunburstSeriesModel$1),n.registerLayout(curry$1(sunburstLayout,"sunburst")),n.registerProcessor(curry$1(dataFilter$1,"sunburst")),n.registerVisual(sunburstVisual),installSunburstAction(n)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},a.prototype.getInitialData=function(r,o){return createSeriesData(null,this)},a.prototype.getDataParams=function(r,o,l){var u=n.prototype.getDataParams.call(this,r,o);return l&&(u.info=customInnerStore(l).info),u},a.type="series.custom",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},a}(SeriesModel$1);const CustomSeriesModel$1=CustomSeriesModel;function dataToCoordSize$3(n,a){return a=a||[0,0],map$1(["x","y"],function(r,o){var l=this.getAxis(r),u=a[o],c=n[o]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(u-c)-l.dataToCoord(u+c))},this)}function cartesianPrepareCustom(n){var a=n.master.getRect();return{coordSys:{type:"cartesian2d",x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(r){return n.dataToPoint(r)},size:bind$1(dataToCoordSize$3,n)}}}function dataToCoordSize$2(n,a){return a=a||[0,0],map$1([0,1],function(r){var o=a[r],l=n[r]/2,u=[],c=[];return u[r]=o-l,c[r]=o+l,u[1-r]=c[1-r]=a[1-r],Math.abs(this.dataToPoint(u)[r]-this.dataToPoint(c)[r])},this)}function geoPrepareCustom(n){var a=n.getBoundingRect();return{coordSys:{type:"geo",x:a.x,y:a.y,width:a.width,height:a.height,zoom:n.getZoom()},api:{coord:function(r){return n.dataToPoint(r)},size:bind$1(dataToCoordSize$2,n)}}}function dataToCoordSize$1(n,a){var r=this.getAxis(),o=a instanceof Array?a[0]:a,l=(n instanceof Array?n[0]:n)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(o-l)-r.dataToCoord(o+l))}function singlePrepareCustom(n){var a=n.getRect();return{coordSys:{type:"singleAxis",x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(r){return n.dataToPoint(r)},size:bind$1(dataToCoordSize$1,n)}}}function dataToCoordSize(n,a){return a=a||[0,0],map$1(["Radius","Angle"],function(r,o){var l="get"+r+"Axis",u=this[l](),c=a[o],h=n[o]/2,f=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-h)-u.dataToCoord(c+h));return r==="Angle"&&(f=f*Math.PI/180),f},this)}function polarPrepareCustom(n){var a=n.getRadiusAxis(),r=n.getAngleAxis(),o=a.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:o[1],r0:o[0]},api:{coord:function(l){var u=a.dataToRadius(l[0]),c=r.dataToAngle(l[1]),h=n.coordToPoint([u,c]);return h.push(u,c*Math.PI/180),h},size:bind$1(dataToCoordSize,n)}}}function calendarPrepareCustom(n){var a=n.getRect(),r=n.getRangeInfo();return{coordSys:{type:"calendar",x:a.x,y:a.y,width:a.width,height:a.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(o,l){return n.dataToPoint(o,l)}}}}var deprecatedLogs={};function isEC4CompatibleStyle(n,a,r,o){return n&&(n.legacy||n.legacy!==!1&&!r&&!o&&a!=="tspan"&&(a==="text"||hasOwn(n,"text")))}function convertFromEC4CompatibleStyle(n,a,r){var o=n,l,u,c;if(a==="text")c=o;else{c={},hasOwn(o,"text")&&(c.text=o.text),hasOwn(o,"rich")&&(c.rich=o.rich),hasOwn(o,"textFill")&&(c.fill=o.textFill),hasOwn(o,"textStroke")&&(c.stroke=o.textStroke),hasOwn(o,"fontFamily")&&(c.fontFamily=o.fontFamily),hasOwn(o,"fontSize")&&(c.fontSize=o.fontSize),hasOwn(o,"fontStyle")&&(c.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(c.fontWeight=o.fontWeight),u={type:"text",style:c,silent:!0},l={};var h=hasOwn(o,"textPosition");r?l.position=h?o.textPosition:"inside":h&&(l.position=o.textPosition),hasOwn(o,"textPosition")&&(l.position=o.textPosition),hasOwn(o,"textOffset")&&(l.offset=o.textOffset),hasOwn(o,"textRotation")&&(l.rotation=o.textRotation),hasOwn(o,"textDistance")&&(l.distance=o.textDistance)}return convertEC4CompatibleRichItem(c,n),each$f(c.rich,function(f){convertEC4CompatibleRichItem(f,f)}),{textConfig:l,textContent:u}}function convertEC4CompatibleRichItem(n,a){!a||(a.font=a.textFont||a.font,hasOwn(a,"textStrokeWidth")&&(n.lineWidth=a.textStrokeWidth),hasOwn(a,"textAlign")&&(n.align=a.textAlign),hasOwn(a,"textVerticalAlign")&&(n.verticalAlign=a.textVerticalAlign),hasOwn(a,"textLineHeight")&&(n.lineHeight=a.textLineHeight),hasOwn(a,"textWidth")&&(n.width=a.textWidth),hasOwn(a,"textHeight")&&(n.height=a.textHeight),hasOwn(a,"textBackgroundColor")&&(n.backgroundColor=a.textBackgroundColor),hasOwn(a,"textPadding")&&(n.padding=a.textPadding),hasOwn(a,"textBorderColor")&&(n.borderColor=a.textBorderColor),hasOwn(a,"textBorderWidth")&&(n.borderWidth=a.textBorderWidth),hasOwn(a,"textBorderRadius")&&(n.borderRadius=a.textBorderRadius),hasOwn(a,"textBoxShadowColor")&&(n.shadowColor=a.textBoxShadowColor),hasOwn(a,"textBoxShadowBlur")&&(n.shadowBlur=a.textBoxShadowBlur),hasOwn(a,"textBoxShadowOffsetX")&&(n.shadowOffsetX=a.textBoxShadowOffsetX),hasOwn(a,"textBoxShadowOffsetY")&&(n.shadowOffsetY=a.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(n,a,r){var o=n;o.textPosition=o.textPosition||r.position||"inside",r.offset!=null&&(o.textOffset=r.offset),r.rotation!=null&&(o.textRotation=r.rotation),r.distance!=null&&(o.textDistance=r.distance);var l=o.textPosition.indexOf("inside")>=0,u=n.fill||"#000";convertToEC4RichItem(o,a);var c=o.textFill==null;return l?c&&(o.textFill=r.insideFill||"#fff",!o.textStroke&&r.insideStroke&&(o.textStroke=r.insideStroke),!o.textStroke&&(o.textStroke=u),o.textStrokeWidth==null&&(o.textStrokeWidth=2)):(c&&(o.textFill=n.fill||r.outsideFill||"#000"),!o.textStroke&&r.outsideStroke&&(o.textStroke=r.outsideStroke)),o.text=a.text,o.rich=a.rich,each$f(a.rich,function(h){convertToEC4RichItem(h,h)}),o}function convertToEC4RichItem(n,a){!a||(hasOwn(a,"fill")&&(n.textFill=a.fill),hasOwn(a,"stroke")&&(n.textStroke=a.fill),hasOwn(a,"lineWidth")&&(n.textStrokeWidth=a.lineWidth),hasOwn(a,"font")&&(n.font=a.font),hasOwn(a,"fontStyle")&&(n.fontStyle=a.fontStyle),hasOwn(a,"fontWeight")&&(n.fontWeight=a.fontWeight),hasOwn(a,"fontSize")&&(n.fontSize=a.fontSize),hasOwn(a,"fontFamily")&&(n.fontFamily=a.fontFamily),hasOwn(a,"align")&&(n.textAlign=a.align),hasOwn(a,"verticalAlign")&&(n.textVerticalAlign=a.verticalAlign),hasOwn(a,"lineHeight")&&(n.textLineHeight=a.lineHeight),hasOwn(a,"width")&&(n.textWidth=a.width),hasOwn(a,"height")&&(n.textHeight=a.height),hasOwn(a,"backgroundColor")&&(n.textBackgroundColor=a.backgroundColor),hasOwn(a,"padding")&&(n.textPadding=a.padding),hasOwn(a,"borderColor")&&(n.textBorderColor=a.borderColor),hasOwn(a,"borderWidth")&&(n.textBorderWidth=a.borderWidth),hasOwn(a,"borderRadius")&&(n.textBorderRadius=a.borderRadius),hasOwn(a,"shadowColor")&&(n.textBoxShadowColor=a.shadowColor),hasOwn(a,"shadowBlur")&&(n.textBoxShadowBlur=a.shadowBlur),hasOwn(a,"shadowOffsetX")&&(n.textBoxShadowOffsetX=a.shadowOffsetX),hasOwn(a,"shadowOffsetY")&&(n.textBoxShadowOffsetY=a.shadowOffsetY),hasOwn(a,"textShadowColor")&&(n.textShadowColor=a.textShadowColor),hasOwn(a,"textShadowBlur")&&(n.textShadowBlur=a.textShadowBlur),hasOwn(a,"textShadowOffsetX")&&(n.textShadowOffsetX=a.textShadowOffsetX),hasOwn(a,"textShadowOffsetY")&&(n.textShadowOffsetY=a.textShadowOffsetY))}function warnDeprecated(n,a){if({}.NODE_ENV!=="production"){var r=n+"^_^"+a;deprecatedLogs[r]||(console.warn('[ECharts] DEPRECATED: "'+n+'" has been deprecated. '+a),deprecatedLogs[r]=!0)}}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP),TRANSFORM_PROPS_MAP=reduce(TRANSFORMABLE_PROPS,function(n,a){return n[a]=1,n},{}),transformPropNamesStr=TRANSFORMABLE_PROPS.join(", "),ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(n,a,r,o,l){var u=n+"Animation",c=getAnimationConfig(n,o,l)||{},h=transitionInnerStore(a).userDuring;return c.duration>0&&(c.during=h?bind$1(duringCall,{el:a,userDuring:h}):null,c.setToFinal=!0,c.scope=n),extend(c,r[u]),c}function applyUpdateTransition(n,a,r,o){o=o||{};var l=o.dataIndex,u=o.isInit,c=o.clearStyle,h=r.isAnimationEnabled(),f=transitionInnerStore(n),v=a.style;f.userDuring=a.during;var d={},p={};if(prepareTransformAllPropsFinal(n,a,p),prepareShapeOrExtraAllPropsFinal("shape",a,p),prepareShapeOrExtraAllPropsFinal("extra",a,p),!u&&h&&(prepareTransformTransitionFrom(n,a,d),prepareShapeOrExtraTransitionFrom("shape",n,a,d),prepareShapeOrExtraTransitionFrom("extra",n,a,d),prepareStyleTransitionFrom(n,a,v,d)),p.style=v,applyPropsDirectly(n,p,c),applyMiscProps(n,a),h)if(u){var g={};each$f(ELEMENT_ANIMATABLE_PROPS,function(_){var S=_?a[_]:a;S&&S.enterFrom&&(_&&(g[_]=g[_]||{}),extend(_?g[_]:g,S.enterFrom))});var y=getElementAnimationConfig("enter",n,a,r,l);y.duration>0&&n.animateFrom(g,y)}else applyPropsTransition(n,a,l||0,r,d);updateLeaveTo(n,a),v?n.dirty():n.markRedraw()}function updateLeaveTo(n,a){for(var r=transitionInnerStore(n).leaveToProps,o=0;o<ELEMENT_ANIMATABLE_PROPS.length;o++){var l=ELEMENT_ANIMATABLE_PROPS[o],u=l?a[l]:a;u&&u.leaveTo&&(r||(r=transitionInnerStore(n).leaveToProps={}),l&&(r[l]=r[l]||{}),extend(l?r[l]:r,u.leaveTo))}}function applyLeaveTransition(n,a,r,o){if(n){var l=n.parent,u=transitionInnerStore(n).leaveToProps;if(u){var c=getElementAnimationConfig("update",n,a,r,0);c.done=function(){l.remove(n),o&&o()},n.animateTo(u,c)}else l.remove(n),o&&o()}}function isTransitionAll(n){return n==="all"}function applyPropsDirectly(n,a,r){var o=a.style;if(!n.isGroup&&o){if(r){n.useStyle({});for(var l=n.animators,u=0;u<l.length;u++){var c=l[u];c.targetName==="style"&&c.changeTarget(n.style)}}n.setStyle(o)}a&&(a.style=null,a&&n.attr(a),a.style=o)}function applyPropsTransition(n,a,r,o,l){if(l){var u=getElementAnimationConfig("update",n,a,o,r);u.duration>0&&n.animateFrom(l,u)}}function applyMiscProps(n,a){hasOwn(a,"silent")&&(n.silent=a.silent),hasOwn(a,"ignore")&&(n.ignore=a.ignore),n instanceof Displayable$1&&hasOwn(a,"invisible")&&(n.invisible=a.invisible),n instanceof Path$1&&hasOwn(a,"autoBatch")&&(n.autoBatch=a.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(n,a){return{}.NODE_ENV!=="production"&&assert(hasOwn(TRANSFORM_PROPS_MAP,n),"Only "+transformPropNamesStr+" available in `setTransform`."),tmpDuringScope.el[n]=a,this},getTransform:function(n){return{}.NODE_ENV!=="production"&&assert(hasOwn(TRANSFORM_PROPS_MAP,n),"Only "+transformPropNamesStr+" available in `getTransform`."),tmpDuringScope.el[n]},setShape:function(n,a){({}).NODE_ENV!=="production"&&assertNotReserved(n);var r=tmpDuringScope.el,o=r.shape||(r.shape={});return o[n]=a,r.dirtyShape&&r.dirtyShape(),this},getShape:function(n){({}).NODE_ENV!=="production"&&assertNotReserved(n);var a=tmpDuringScope.el.shape;if(a)return a[n]},setStyle:function(n,a){({}).NODE_ENV!=="production"&&assertNotReserved(n);var r=tmpDuringScope.el,o=r.style;return o&&({}.NODE_ENV!=="production"&&eqNaN(a)&&warn("style."+n+" must not be assigned with NaN."),o[n]=a,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(n){({}).NODE_ENV!=="production"&&assertNotReserved(n);var a=tmpDuringScope.el.style;if(a)return a[n]},setExtra:function(n,a){({}).NODE_ENV!=="production"&&assertNotReserved(n);var r=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return r[n]=a,this},getExtra:function(n){({}).NODE_ENV!=="production"&&assertNotReserved(n);var a=tmpDuringScope.el.extra;if(a)return a[n]}};function assertNotReserved(n){if({}.NODE_ENV!=="production"&&(n==="transition"||n==="enterFrom"||n==="leaveTo"))throw new Error('key must not be "'+n+'"')}function duringCall(){var n=this,a=n.el;if(!!a){var r=transitionInnerStore(a).userDuring,o=n.userDuring;if(r!==o){n.el=n.userDuring=null;return}tmpDuringScope.el=a,o(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(n,a,r,o){var l=r[n];if(!!l){var u=a[n],c;if(u){var h=r.transition,f=l.transition;if(f)if(!c&&(c=o[n]={}),isTransitionAll(f))extend(c,u);else for(var v=normalizeToArray(f),d=0;d<v.length;d++){var p=v[d],g=u[p];c[p]=g}else if(isTransitionAll(h)||indexOf(h,n)>=0){!c&&(c=o[n]={});for(var y=keys(u),d=0;d<y.length;d++){var p=y[d],g=u[p];isNonStyleTransitionEnabled(l[p],g)&&(c[p]=g)}}}}}function prepareShapeOrExtraAllPropsFinal(n,a,r){var o=a[n];if(!!o)for(var l=r[n]={},u=keys(o),c=0;c<u.length;c++){var h=u[c];l[h]=cloneValue(o[h])}}function prepareTransformTransitionFrom(n,a,r){for(var o=a.transition,l=isTransitionAll(o)?TRANSFORMABLE_PROPS:normalizeToArray(o||[]),u=0;u<l.length;u++){var c=l[u];if(!(c==="style"||c==="shape"||c==="extra")){var h=n[c];({}).NODE_ENV!=="production"&&checkTransformPropRefer(c,"el.transition"),r[c]=h}}}function prepareTransformAllPropsFinal(n,a,r){for(var o=0;o<LEGACY_TRANSFORM_PROPS.length;o++){var l=LEGACY_TRANSFORM_PROPS[o],u=LEGACY_TRANSFORM_PROPS_MAP[l],c=a[l];c&&(r[u[0]]=c[0],r[u[1]]=c[1])}for(var o=0;o<TRANSFORMABLE_PROPS.length;o++){var h=TRANSFORMABLE_PROPS[o];a[h]!=null&&(r[h]=a[h])}}function prepareStyleTransitionFrom(n,a,r,o){if(!!r){var l=n.style,u;if(l){var c=r.transition,h=a.transition;if(c&&!isTransitionAll(c)){var f=normalizeToArray(c);!u&&(u=o.style={});for(var v=0;v<f.length;v++){var d=f[v],p=l[d];u[d]=p}}else if(n.getAnimationStyleProps&&(isTransitionAll(h)||isTransitionAll(c)||indexOf(h,"style")>=0)){var g=n.getAnimationStyleProps(),y=g?g.style:null;if(y){!u&&(u=o.style={});for(var _=keys(r),v=0;v<_.length;v++){var d=_[v];if(y[d]){var p=l[d];u[d]=p}}}}}}}function isNonStyleTransitionEnabled(n,a){return isArrayLike(n)?n!==a:n!=null&&isFinite(n)}var checkTransformPropRefer;({}).NODE_ENV!=="production"&&(checkTransformPropRefer=function(n,a){hasOwn(TRANSFORM_PROPS_MAP,n)||warn("Prop `"+n+"` is not a permitted in `"+a+"`. Only `"+keys(TRANSFORM_PROPS_MAP).join("`, `")+"` are permitted.")});var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(n){n.stopAnimation("keyframe"),n.attr(getStateToRestore(n))}function applyKeyframeAnimation(n,a,r){if(!(!r.isAnimationEnabled()||!a)){if(isArray$1(a)){each$f(a,function(h){applyKeyframeAnimation(n,h,r)});return}var o=a.keyframes,l=a.duration;if(r&&l==null){var u=getAnimationConfig("enter",r,0);l=u&&u.duration}if(!(!o||!l)){var c=getStateToRestore(n);each$f(ELEMENT_ANIMATABLE_PROPS,function(h){if(!(h&&!n[h])){var f,v=!1;o.sort(function(d,p){return d.percent-p.percent}),each$f(o,function(d){var p=n.animators,g=h?d[h]:d;if({}.NODE_ENV!=="production"&&d.percent>=1&&(v=!0),!!g){var y=keys(g);if(h||(y=filter(y,function(x){return indexOf(KEYFRAME_EXCLUDE_KEYS,x)<0})),!!y.length){f||(f=n.animate(h,a.loop,!0),f.scope="keyframe");for(var _=0;_<p.length;_++)p[_]!==f&&p[_].targetName===f.targetName&&p[_].stopTracks(y);h&&(c[h]=c[h]||{});var S=h?c[h]:c;each$f(y,function(x){S[x]=((h?n[h]:n)||{})[x]}),f.whenWithKeys(l*d.percent,g,y,d.easing)}}}),f&&({}.NODE_ENV!=="production"&&(v||warn("End frame with percent: 1 is missing in the keyframeAnimation.",!0)),f.delay(a.delay||0).duration(l).start(a.easing))}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(n){return n instanceof Path$1}function isDisplayable(n){return n instanceof Displayable$1}function copyElement(n,a){a.copyTransform(n),isDisplayable(a)&&isDisplayable(n)&&(a.setStyle(n.style),a.z=n.z,a.z2=n.z2,a.zlevel=n.zlevel,a.invisible=n.invisible,a.ignore=n.ignore,isPath(a)&&isPath(n)&&a.setShape(n.shape))}var CustomChartView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l,u){this._progressiveEls=null;var c=this._data,h=r.getData(),f=this.group,v=makeRenderItem(r,h,o,l);c||f.removeAll(),h.diff(c).add(function(p){createOrUpdateItem(l,null,p,v(p,u),r,f,h)}).remove(function(p){var g=c.getItemGraphicEl(p);g&&applyLeaveTransition(g,customInnerStore(g).option,r)}).update(function(p,g){var y=c.getItemGraphicEl(g);createOrUpdateItem(l,y,p,v(p,u),r,f,h)}).execute();var d=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;d?f.setClipPath(d):f.removeClipPath(),this._data=h},a.prototype.incrementalPrepareRender=function(r,o,l){this.group.removeAll(),this._data=null},a.prototype.incrementalRender=function(r,o,l,u,c){var h=o.getData(),f=makeRenderItem(o,h,l,u),v=this._progressiveEls=[];function d(y){y.isGroup||(y.incremental=!0,y.ensureState("emphasis").hoverLayer=!0)}for(var p=r.start;p<r.end;p++){var g=createOrUpdateItem(null,null,p,f(p,c),o,this.group,h);g&&(g.traverse(d),v.push(g))}},a.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},a.prototype.filterForExposedEvent=function(r,o,l,u){var c=o.element;if(c==null||l.name===c)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===c)return!0;return!1},a.type="custom",a}(ChartView$1);const CustomChartView$1=CustomChartView;function createEl$1(n){var a=n.type,r;if(a==="path"){var o=n.shape,l=o.width!=null&&o.height!=null?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,u=getPathData(o);r=makePath(u,null,l,o.layout||"center"),customInnerStore(r).customPathData=u}else if(a==="image")r=new ZRImage$1({}),customInnerStore(r).customImagePath=n.style.image;else if(a==="text")r=new ZRText$1({});else if(a==="group")r=new Group$4;else{if(a==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(a);if(!c){var h="";({}).NODE_ENV!=="production"&&(h='graphic type "'+a+'" can not be found.'),throwError(h)}r=new c}return customInnerStore(r).customGraphicType=a,r.name=n.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function updateElNormal(n,a,r,o,l,u,c){stopPreviousKeyframeAnimationAndRestore(a);var h=l&&l.normal.cfg;h&&a.setTextConfig(h),o&&o.transition==null&&(o.transition=DEFAULT_TRANSITION);var f=o&&o.style;if(f){if(a.type==="text"){var v=f;hasOwn(v,"textFill")&&(v.fill=v.textFill),hasOwn(v,"textStroke")&&(v.stroke=v.textStroke)}var d=void 0,p=isPath(a)?f.decal:null;n&&p&&(p.dirty=!0,d=createOrUpdatePatternFromDecal(p,n)),f.__decalPattern=d}if(isDisplayable(a)&&f){var d=f.__decalPattern;d&&(f.decal=d)}applyUpdateTransition(a,o,u,{dataIndex:r,isInit:c,clearStyle:!0}),applyKeyframeAnimation(a,o.keyframeAnimation,u)}function updateElOnState(n,a,r,o,l){var u=a.isGroup?null:a,c=l&&l[n].cfg;if(u){var h=u.ensureState(n);if(o===!1){var f=u.getState(n);f&&(f.style=null)}else h.style=o||null;c&&(h.textConfig=c),setDefaultStateProxy(u)}}function updateZ(n,a,r){if(!n.isGroup){var o=n,l=r.currentZ,u=r.currentZLevel;o.z=l,o.zlevel=u;var c=a.z2;c!=null&&(o.z2=c||0);for(var h=0;h<STATES.length;h++)updateZForEachState(o,a,STATES[h])}}function updateZForEachState(n,a,r){var o=r===NORMAL,l=o?a:retrieveStateOption(a,r),u=l?l.z2:null,c;u!=null&&(c=o?n:n.ensureState(r),c.z2=u||0)}function makeRenderItem(n,a,r,o){var l=n.get("renderItem"),u=n.coordinateSystem,c={};u&&({}.NODE_ENV!=="production"&&(assert(l,"series.render is required."),assert(u.prepareCustoms||prepareCustoms[u.type],"This coordSys does not support custom series.")),c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var h=defaults({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:C,style:w,ordinalRawValue:E,styleEmphasis:D,visual:L,barLayout:I,currentSeriesIndices:R,font:O},c.api||{}),f={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:c.coordSys,dataInsideLength:a.count(),encode:wrapEncodeDef(n.getData())},v,d,p={},g={},y={},_={},S=0;S<STATES.length;S++){var x=STATES[S];y[x]=n.getModel(PATH_ITEM_STYLE[x]),_[x]=n.getModel(PATH_LABEL[x])}function T(N){return N===v?d||(d=a.getItemModel(N)):a.getItemModel(N)}function A(N,V){return a.hasItemOption?N===v?p[V]||(p[V]=T(N).getModel(PATH_ITEM_STYLE[V])):T(N).getModel(PATH_ITEM_STYLE[V]):y[V]}function b(N,V){return a.hasItemOption?N===v?g[V]||(g[V]=T(N).getModel(PATH_LABEL[V])):T(N).getModel(PATH_LABEL[V]):_[V]}return function(N,V){return v=N,d=null,p={},g={},l&&l(defaults({dataIndexInside:N,dataIndex:a.getRawIndex(N),actionType:V?V.type:null},f),h)};function C(N,V){return V==null&&(V=v),a.getStore().get(a.getDimensionIndex(N||0),V)}function E(N,V){V==null&&(V=v),N=N||0;var B=a.getDimensionInfo(N);if(!B){var G=a.getDimensionIndex(N);return G>=0?a.getStore().get(G,V):void 0}var F=a.get(B.name,V),z=B&&B.ordinalMeta;return z?z.categories[F]:F}function w(N,V){({}).NODE_ENV!=="production"&&warnDeprecated("api.style","Please write literal style directly instead."),V==null&&(V=v);var B=a.getItemVisual(V,"style"),G=B&&B.fill,F=B&&B.opacity,z=A(V,NORMAL).getItemStyle();G!=null&&(z.fill=G),F!=null&&(z.opacity=F);var H={inheritColor:isString(G)?G:"#000"},U=b(V,NORMAL),Y=createTextStyle$1(U,null,H,!1,!0);Y.text=U.getShallow("show")?retrieve2(n.getFormattedLabel(V,NORMAL),getDefaultLabel(a,V)):null;var Z=createTextConfig(U,H,!1);return P(N,z),z=convertToEC4StyleForCustomSerise(z,Y,Z),N&&M(z,N),z.legacy=!0,z}function D(N,V){({}).NODE_ENV!=="production"&&warnDeprecated("api.styleEmphasis","Please write literal style directly instead."),V==null&&(V=v);var B=A(V,EMPHASIS).getItemStyle(),G=b(V,EMPHASIS),F=createTextStyle$1(G,null,null,!0,!0);F.text=G.getShallow("show")?retrieve3(n.getFormattedLabel(V,EMPHASIS),n.getFormattedLabel(V,NORMAL),getDefaultLabel(a,V)):null;var z=createTextConfig(G,null,!0);return P(N,B),B=convertToEC4StyleForCustomSerise(B,F,z),N&&M(B,N),B.legacy=!0,B}function M(N,V){for(var B in V)hasOwn(V,B)&&(N[B]=V[B])}function P(N,V){N&&(N.textFill&&(V.textFill=N.textFill),N.textPosition&&(V.textPosition=N.textPosition))}function L(N,V){if(V==null&&(V=v),hasOwn(STYLE_VISUAL_TYPE,N)){var B=a.getItemVisual(V,"style");return B?B[STYLE_VISUAL_TYPE[N]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,N))return a.getItemVisual(V,N)}function I(N){if(u.type==="cartesian2d"){var V=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:V},N))}}function R(){return r.getCurrentSeriesIndices()}function O(N){return getFont(N,r)}}function wrapEncodeDef(n){var a={};return each$f(n.dimensions,function(r){var o=n.getDimensionInfo(r);if(!o.isExtraCoord){var l=o.coordDim,u=a[l]=a[l]||[];u[o.coordDimIndex]=n.getDimensionIndex(r)}}),a}function createOrUpdateItem(n,a,r,o,l,u,c){if(!o){u.remove(a);return}var h=doCreateOrUpdateEl(n,a,r,o,l,u);return h&&c.setItemGraphicEl(r,h),h&&toggleHoverEmphasis(h,o.focus,o.blurScope,o.emphasisDisabled),h}function doCreateOrUpdateEl(n,a,r,o,l,u){({}).NODE_ENV!=="production"&&assert(o,"should not have an null/undefined element setting");var c=-1,h=a;a&&doesElNeedRecreate(a,o,l)&&(c=indexOf(u.childrenRef(),a),a=null);var f=!a,v=a;v?v.clearStates():(v=createEl$1(o),h&&copyElement(h,v)),o.morph===!1?v.disableMorphing=!0:v.disableMorphing&&(v.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(v,r,o,l,f,attachedTxInfoTmp),doCreateOrUpdateClipPath(v,r,o,l,f),updateElNormal(n,v,r,o,attachedTxInfoTmp,l,f),hasOwn(o,"info")&&(customInnerStore(v).info=o.info);for(var d=0;d<STATES.length;d++){var p=STATES[d];if(p!==NORMAL){var g=retrieveStateOption(o,p),y=retrieveStyleOptionOnState(o,g,p);updateElOnState(p,v,g,y,attachedTxInfoTmp)}}return updateZ(v,o,l),o.type==="group"&&mergeChildren(n,v,r,o,l),c>=0?u.replaceAt(v,c):u.add(v),v}function doesElNeedRecreate(n,a,r){var o=customInnerStore(n),l=a.type,u=a.shape,c=a.style;return r.isUniversalTransitionEnabled()||l!=null&&l!==o.customGraphicType||l==="path"&&hasOwnPathData(u)&&getPathData(u)!==o.customPathData||l==="image"&&hasOwn(c,"image")&&c.image!==o.customImagePath}function doCreateOrUpdateClipPath(n,a,r,o,l){var u=r.clipPath;if(u===!1)n&&n.getClipPath()&&n.removeClipPath();else if(u){var c=n.getClipPath();c&&doesElNeedRecreate(c,u,o)&&(c=null),c||(c=createEl$1(u),{}.NODE_ENV!=="production"&&assert(isPath(c),"Only any type of `path` can be used in `clipPath`, rather than "+c.type+"."),n.setClipPath(c)),updateElNormal(null,c,a,u,null,o,l)}}function doCreateOrUpdateAttachedTx(n,a,r,o,l,u){if(!n.isGroup){processTxInfo(r,null,u),processTxInfo(r,EMPHASIS,u);var c=u.normal.conOpt,h=u.emphasis.conOpt,f=u.blur.conOpt,v=u.select.conOpt;if(c!=null||h!=null||v!=null||f!=null){var d=n.getTextContent();if(c===!1)d&&n.removeTextContent();else{c=u.normal.conOpt=c||{type:"text"},d?d.clearStates():(d=createEl$1(c),n.setTextContent(d)),updateElNormal(null,d,a,c,null,o,l);for(var p=c&&c.style,g=0;g<STATES.length;g++){var y=STATES[g];if(y!==NORMAL){var _=u[y].conOpt;updateElOnState(y,d,_,retrieveStyleOptionOnState(c,_,y),null)}}p?d.dirty():d.markRedraw()}}}}function processTxInfo(n,a,r){var o=a?retrieveStateOption(n,a):n,l=a?retrieveStyleOptionOnState(n,o,EMPHASIS):n.style,u=n.type,c=o?o.textConfig:null,h=n.textContent,f=h?a?retrieveStateOption(h,a):h:null;if(l&&(r.isLegacy||isEC4CompatibleStyle(l,u,!!c,!!f))){r.isLegacy=!0;var v=convertFromEC4CompatibleStyle(l,u,!a);!c&&v.textConfig&&(c=v.textConfig),!f&&v.textContent&&(f=v.textContent)}if(!a&&f){var d=f;!d.type&&(d.type="text"),{}.NODE_ENV!=="production"&&assert(d.type==="text",'textContent.type must be "text"')}var p=a?r[a]:r.normal;p.cfg=c,p.conOpt=f}function retrieveStateOption(n,a){return a?n?n[a]:null:n}function retrieveStyleOptionOnState(n,a,r){var o=a&&a.style;return o==null&&r===EMPHASIS&&n&&(o=n.styleEmphasis),o}function mergeChildren(n,a,r,o,l){var u=o.children,c=u?u.length:0,h=o.$mergeChildren,f=h==="byName"||o.diffChildrenByName,v=h===!1;if(!(!c&&!f&&!v)){if(f){diffGroupChildren({api:n,oldChildren:a.children()||[],newChildren:u||[],dataIndex:r,seriesModel:l,group:a});return}v&&a.removeAll();for(var d=0;d<c;d++){var p=u[d],g=a.childAt(d);p?(p.ignore==null&&(p.ignore=!1),doCreateOrUpdateEl(n,g,r,p,l,a)):({}.NODE_ENV!=="production"&&assert(g,"renderItem should not return a group containing elements as null/undefined/{} if they do not exist before."),g.ignore=!0)}for(var y=a.childCount()-1;y>=d;y--){var _=a.childAt(y);removeChildFromGroup(a,_,l)}}}function removeChildFromGroup(n,a,r){a&&applyLeaveTransition(a,customInnerStore(n).option,r)}function diffGroupChildren(n){new DataDiffer$1(n.oldChildren,n.newChildren,getKey,getKey,n).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(n,a){var r=n&&n.name;return r!=null?r:GROUP_DIFF_PREFIX+a}function processAddUpdate(n,a){var r=this.context,o=n!=null?r.newChildren[n]:null,l=a!=null?r.oldChildren[a]:null;doCreateOrUpdateEl(r.api,l,r.dataIndex,o,r.seriesModel,r.group)}function processRemove(n){var a=this.context,r=a.oldChildren[n];r&&applyLeaveTransition(r,customInnerStore(r).option,a.seriesModel)}function getPathData(n){return n&&(n.pathData||n.d)}function hasOwnPathData(n){return n&&(hasOwn(n,"pathData")||hasOwn(n,"d"))}function install$r(n){n.registerChartView(CustomChartView$1),n.registerSeriesModel(CustomSeriesModel$1)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(a,r,o,l){var u=r.get("value"),c=r.get("status");if(this._axisModel=a,this._axisPointerModel=r,this._api=o,!(!l&&this._lastValue===u&&this._lastStatus===c)){this._lastValue=u,this._lastStatus=c;var h=this._group,f=this._handle;if(!c||c==="hide"){h&&h.hide(),f&&f.hide();return}h&&h.show(),f&&f.show();var v={};this.makeElOption(v,u,a,r,o);var d=v.graphicKey;d!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=d;var p=this._moveAnimation=this.determineAnimation(a,r);if(!h)h=this._group=new Group$4,this.createPointerEl(h,v,a,r),this.createLabelEl(h,v,a,r),o.getZr().add(h);else{var g=curry$1(updateProps,r,p);this.updatePointerEl(h,v,g),this.updateLabelEl(h,v,g,r)}updateMandatoryProps(h,r,!0),this._renderHandle(u)}},n.prototype.remove=function(a){this.clear(a)},n.prototype.dispose=function(a){this.clear(a)},n.prototype.determineAnimation=function(a,r){var o=r.get("animation"),l=a.axis,u=l.type==="category",c=r.get("snap");if(!c&&!u)return!1;if(o==="auto"||o==null){var h=this.animationThreshold;if(u&&l.getBandWidth()>h)return!0;if(c){var f=getAxisInfo$1(a).seriesDataCount,v=l.getExtent();return Math.abs(v[0]-v[1])/f>h}return!1}return o===!0},n.prototype.makeElOption=function(a,r,o,l,u){},n.prototype.createPointerEl=function(a,r,o,l){var u=r.pointer;if(u){var c=inner$b(a).pointerEl=new graphic$1[u.type](clone$1(r.pointer));a.add(c)}},n.prototype.createLabelEl=function(a,r,o,l){if(r.label){var u=inner$b(a).labelEl=new ZRText$1(clone$1(r.label));a.add(u),updateLabelShowHide(u,l)}},n.prototype.updatePointerEl=function(a,r,o){var l=inner$b(a).pointerEl;l&&r.pointer&&(l.setStyle(r.pointer.style),o(l,{shape:r.pointer.shape}))},n.prototype.updateLabelEl=function(a,r,o,l){var u=inner$b(a).labelEl;u&&(u.setStyle(r.label.style),o(u,{x:r.label.x,y:r.label.y}),updateLabelShowHide(u,l))},n.prototype._renderHandle=function(a){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,o=this._api.getZr(),l=this._handle,u=r.getModel("handle"),c=r.get("status");if(!u.get("show")||!c||c==="hide"){l&&o.remove(l),this._handle=null;return}var h;this._handle||(h=!0,l=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(v){stop(v.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),o.add(l)),updateMandatoryProps(l,r,!1),l.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var f=u.get("size");isArray$1(f)||(f=[f,f]),l.scaleX=f[0]/2,l.scaleY=f[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(a,h)}},n.prototype._moveHandleToValue=function(a,r){updateProps(this._axisPointerModel,!r&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(a,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(a,r){var o=this._handle;if(!!o){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(o),[a,r],this._axisModel,this._axisPointerModel);this._payloadInfo=l,o.stopAnimation(),o.attr(getHandleTransProps(l)),inner$b(o).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var a=this._handle;if(!!a){var r=this._payloadInfo,o=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:o.axis.dim,axisIndex:o.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var a=this._handle;if(!!a){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(a){this._lastValue=null,this._lastStatus=null;var r=a.getZr(),o=this._group,l=this._handle;r&&o&&(this._lastGraphicKey=null,o&&r.remove(o),l&&r.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(a,r,o){return o=o||0,{x:a[o],y:a[1-o],width:r[o],height:r[1-o]}},n}();function updateProps(n,a,r,o){propsEqual(inner$b(r).lastProp,o)||(inner$b(r).lastProp=o,a?updateProps$1(r,o,n):(r.stopAnimation(),r.attr(o)))}function propsEqual(n,a){if(isObject$3(n)&&isObject$3(a)){var r=!0;return each$f(a,function(o,l){r=r&&propsEqual(n[l],o)}),!!r}else return n===a}function updateLabelShowHide(n,a){n[a.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function updateMandatoryProps(n,a,r){var o=a.get("z"),l=a.get("zlevel");n&&n.traverse(function(u){u.type!=="group"&&(o!=null&&(u.z=o),l!=null&&(u.zlevel=l),u.silent=r)})}const BaseAxisPointer$1=BaseAxisPointer;function buildElStyle(n){var a=n.get("type"),r=n.getModel(a+"Style"),o;return a==="line"?(o=r.getLineStyle(),o.fill=null):a==="shadow"&&(o=r.getAreaStyle(),o.stroke=null),o}function buildLabelElOption(n,a,r,o,l){var u=r.get("value"),c=getValueLabel(u,a.axis,a.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),h=r.getModel("label"),f=normalizeCssArray(h.get("padding")||0),v=h.getFont(),d=getBoundingRect(c,v),p=l.position,g=d.width+f[1]+f[3],y=d.height+f[0]+f[2],_=l.align;_==="right"&&(p[0]-=g),_==="center"&&(p[0]-=g/2);var S=l.verticalAlign;S==="bottom"&&(p[1]-=y),S==="middle"&&(p[1]-=y/2),confineInContainer(p,g,y,o);var x=h.get("backgroundColor");(!x||x==="auto")&&(x=a.get(["axisLine","lineStyle","color"])),n.label={x:p[0],y:p[1],style:createTextStyle$1(h,{text:c,font:v,fill:h.getTextColor(),padding:f,backgroundColor:x}),z2:10}}function confineInContainer(n,a,r,o){var l=o.getWidth(),u=o.getHeight();n[0]=Math.min(n[0]+a,l)-a,n[1]=Math.min(n[1]+r,u)-r,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function getValueLabel(n,a,r,o,l){n=a.scale.parse(n);var u=a.scale.getLabel({value:n},{precision:l.precision}),c=l.formatter;if(c){var h={value:getAxisRawValue(a,{value:n}),axisDimension:a.dim,axisIndex:a.index,seriesData:[]};each$f(o,function(f){var v=r.getSeriesByIndex(f.seriesIndex),d=f.dataIndexInside,p=v&&v.getDataParams(d);p&&h.seriesData.push(p)}),isString(c)?u=c.replace("{value}",u):isFunction(c)&&(u=c(h))}return u}function getTransformedPosition(n,a,r){var o=create$1();return rotate(o,o,r.rotation),translate(o,o,r.position),applyTransform([n.dataToCoord(a),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],o)}function buildCartesianSingleLabelElOption(n,a,r,o,l,u){var c=AxisBuilder$1.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=l.get(["label","margin"]),buildLabelElOption(a,o,l,u,{position:getTransformedPosition(o.axis,n,r),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(n,a,r){return r=r||0,{x1:n[r],y1:n[1-r],x2:a[r],y2:a[1-r]}}function makeRectShape(n,a,r){return r=r||0,{x:n[r],y:n[1-r],width:a[r],height:a[1-r]}}function makeSectorShape(n,a,r,o,l,u){return{cx:n,cy:a,r0:r,r:o,startAngle:l,endAngle:u,clockwise:!0}}var CartesianAxisPointer=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.makeElOption=function(r,o,l,u,c){var h=l.axis,f=h.grid,v=u.get("type"),d=getCartesian(f,h).getOtherAxis(h).getGlobalExtent(),p=h.toGlobalCoord(h.dataToCoord(o,!0));if(v&&v!=="none"){var g=buildElStyle(u),y=pointerShapeBuilder$2[v](h,p,d);y.style=g,r.graphicKey=y.type,r.pointer=y}var _=layout$2(f.model,l);buildCartesianSingleLabelElOption(o,r,_,l,u,c)},a.prototype.getHandleTransform=function(r,o,l){var u=layout$2(o.axis.grid.model,o,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(o.axis,r,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},a.prototype.updateHandleTransform=function(r,o,l,u){var c=l.axis,h=c.grid,f=c.getGlobalExtent(!0),v=getCartesian(h,c).getOtherAxis(c).getGlobalExtent(),d=c.dim==="x"?0:1,p=[r.x,r.y];p[d]+=o[d],p[d]=Math.min(f[1],p[d]),p[d]=Math.max(f[0],p[d]);var g=(v[1]+v[0])/2,y=[g,g];y[d]=p[d];var _=[{verticalAlign:"middle"},{align:"center"}];return{x:p[0],y:p[1],rotation:r.rotation,cursorPoint:y,tooltipOption:_[d]}},a}(BaseAxisPointer$1);function getCartesian(n,a){var r={};return r[a.dim+"AxisIndex"]=a.index,n.getCartesian(r)}var pointerShapeBuilder$2={line:function(n,a,r){var o=makeLineShape([a,r[0]],[a,r[1]],getAxisDimIndex(n));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(n,a,r){var o=Math.max(1,n.getBandWidth()),l=r[1]-r[0];return{type:"Rect",shape:makeRectShape([a-o/2,r[0]],[o,l],getAxisDimIndex(n))}}};function getAxisDimIndex(n){return n.dim==="x"?0:1}const CartesianAxisPointer$1=CartesianAxisPointer;var AxisPointerModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="axisPointer",a.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},a}(ComponentModel$1);const AxisPointerModel$1=AxisPointerModel;var inner$a=makeInner(),each$8=each$f;function register(n,a,r){if(!env$1.node){var o=a.getZr();inner$a(o).records||(inner$a(o).records={}),initGlobalListeners(o,a);var l=inner$a(o).records[n]||(inner$a(o).records[n]={});l.handler=r}}function initGlobalListeners(n,a){if(inner$a(n).initialized)return;inner$a(n).initialized=!0,r("click",curry$1(doEnter,"click")),r("mousemove",curry$1(doEnter,"mousemove")),r("globalout",onLeave);function r(o,l){n.on(o,function(u){var c=makeDispatchAction$1(a);each$8(inner$a(n).records,function(h){h&&l(h,u,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,a)})}}function dispatchTooltipFinally(n,a){var r=n.showTip.length,o=n.hideTip.length,l;r?l=n.showTip[r-1]:o&&(l=n.hideTip[o-1]),l&&(l.dispatchAction=null,a.dispatchAction(l))}function onLeave(n,a,r){n.handler("leave",null,r)}function doEnter(n,a,r,o){a.handler(n,r,o)}function makeDispatchAction$1(n){var a={showTip:[],hideTip:[]},r=function(o){var l=a[o.type];l?l.push(o):(o.dispatchAction=r,n.dispatchAction(o))};return{dispatchAction:r,pendings:a}}function unregister(n,a){if(!env$1.node){var r=a.getZr(),o=(inner$a(r).records||{})[n];o&&(inner$a(r).records[n]=null)}}var AxisPointerView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=o.getComponent("tooltip"),c=r.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(h,f,v){c!=="none"&&(h==="leave"||c.indexOf(h)>=0)&&v({type:"updateAxisPointer",currTrigger:h,x:f&&f.offsetX,y:f&&f.offsetY})})},a.prototype.remove=function(r,o){unregister("axisPointer",o)},a.prototype.dispose=function(r,o){unregister("axisPointer",o)},a.type="axisPointer",a}(ComponentView$1);const AxisPointerView$1=AxisPointerView;function findPointFromSeries(n,a){var r=[],o=n.seriesIndex,l;if(o==null||!(l=a.getSeriesByIndex(o)))return{point:[]};var u=l.getData(),c=queryDataIndex(u,n);if(c==null||c<0||isArray$1(c))return{point:[]};var h=u.getItemGraphicEl(c),f=l.coordinateSystem;if(l.getTooltipPosition)r=l.getTooltipPosition(c)||[];else if(f&&f.dataToPoint)if(n.isStacked){var v=f.getBaseAxis(),d=f.getOtherAxis(v),p=d.dim,g=v.dim,y=p==="x"||p==="radius"?1:0,_=u.mapDimension(g),S=[];S[y]=u.get(_,c),S[1-y]=u.get(u.getCalculationInfo("stackResultDimension"),c),r=f.dataToPoint(S)||[]}else r=f.dataToPoint(u.getValues(map$1(f.dimensions,function(T){return u.mapDimension(T)}),c))||[];else if(h){var x=h.getBoundingRect().clone();x.applyTransform(h.transform),r=[x.x+x.width/2,x.y+x.height/2]}return{point:r,el:h}}var inner$9=makeInner();function axisTrigger(n,a,r){var o=n.currTrigger,l=[n.x,n.y],u=n,c=n.dispatchAction||bind$1(r.dispatchAction,r),h=a.getComponent("axisPointer").coordSysAxesInfo;if(!!h){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},a).point);var f=illegalPoint(l),v=u.axesInfo,d=h.axesInfo,p=o==="leave"||illegalPoint(l),g={},y={},_={list:[],map:{}},S={showPointer:curry$1(showPointer,y),showTooltip:curry$1(showTooltip,_)};each$f(h.coordSysMap,function(T,A){var b=f||T.containPoint(l);each$f(h.coordSysAxesInfo[A],function(C,E){var w=C.axis,D=findInputAxisInfo(v,C);if(!p&&b&&(!v||D)){var M=D&&D.value;M==null&&!f&&(M=w.pointToData(l)),M!=null&&processOnAxis(C,M,S,!1,g)}})});var x={};return each$f(d,function(T,A){var b=T.linkGroup;b&&!y[A]&&each$f(b.axesInfo,function(C,E){var w=y[E];if(C!==T&&w){var D=w.value;b.mapper&&(D=T.axis.scale.parse(b.mapper(D,makeMapperParam(C),makeMapperParam(T)))),x[T.key]=D}})}),each$f(x,function(T,A){processOnAxis(d[A],T,S,!0,g)}),updateModelActually(y,d,g),dispatchTooltipActually(_,l,n,c),dispatchHighDownActually(d,c,r),g}}function processOnAxis(n,a,r,o,l){var u=n.axis;if(!(u.scale.isBlank()||!u.containData(a))){if(!n.involveSeries){r.showPointer(n,a);return}var c=buildPayloadsBySeries(a,n),h=c.payloadBatch,f=c.snapToValue;h[0]&&l.seriesIndex==null&&extend(l,h[0]),!o&&n.snap&&u.containData(f)&&f!=null&&(a=f),r.showPointer(n,a,h),r.showTooltip(n,c,f)}}function buildPayloadsBySeries(n,a){var r=a.axis,o=r.dim,l=n,u=[],c=Number.MAX_VALUE,h=-1;return each$f(a.seriesModels,function(f,v){var d=f.getData().mapDimensionsAll(o),p,g;if(f.getAxisTooltipData){var y=f.getAxisTooltipData(d,n,r);g=y.dataIndices,p=y.nestestValue}else{if(g=f.getData().indicesOfNearest(d[0],n,r.type==="category"?.5:null),!g.length)return;p=f.getData().get(d[0],g[0])}if(!(p==null||!isFinite(p))){var _=n-p,S=Math.abs(_);S<=c&&((S<c||_>=0&&h<0)&&(c=S,h=_,l=p,u.length=0),each$f(g,function(x){u.push({seriesIndex:f.seriesIndex,dataIndexInside:x,dataIndex:f.getData().getRawIndex(x)})}))}}),{payloadBatch:u,snapToValue:l}}function showPointer(n,a,r,o){n[a.key]={value:r,payloadBatch:o}}function showTooltip(n,a,r,o){var l=r.payloadBatch,u=a.axis,c=u.model,h=a.axisPointerModel;if(!(!a.triggerTooltip||!l.length)){var f=a.coordSys.model,v=makeKey(f),d=n.map[v];d||(d=n.map[v]={coordSysId:f.id,coordSysIndex:f.componentIndex,coordSysType:f.type,coordSysMainType:f.mainType,dataByAxis:[]},n.list.push(d)),d.dataByAxis.push({axisDim:u.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:o,valueLabelOpt:{precision:h.get(["label","precision"]),formatter:h.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(n,a,r){var o=r.axesInfo=[];each$f(a,function(l,u){var c=l.axisPointerModel.option,h=n[u];h?(!l.useHandle&&(c.status="show"),c.value=h.value,c.seriesDataIndices=(h.payloadBatch||[]).slice()):!l.useHandle&&(c.status="hide"),c.status==="show"&&o.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(n,a,r,o){if(illegalPoint(a)||!n.list.length){o({type:"hideTip"});return}var l=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:a[0],y:a[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:n.list})}function dispatchHighDownActually(n,a,r){var o=r.getZr(),l="axisPointerLastHighlights",u=inner$9(o)[l]||{},c=inner$9(o)[l]={};each$f(n,function(v,d){var p=v.axisPointerModel.option;p.status==="show"&&v.triggerEmphasis&&each$f(p.seriesDataIndices,function(g){var y=g.seriesIndex+" | "+g.dataIndex;c[y]=g})});var h=[],f=[];each$f(u,function(v,d){!c[d]&&f.push(v)}),each$f(c,function(v,d){!u[d]&&h.push(v)}),f.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:f}),h.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:h})}function findInputAxisInfo(n,a){for(var r=0;r<(n||[]).length;r++){var o=n[r];if(a.axis.dim===o.axisDim&&a.axis.model.componentIndex===o.axisIndex)return o}}function makeMapperParam(n){var a=n.axis.model,r={},o=r.axisDim=n.axis.dim;return r.axisIndex=r[o+"AxisIndex"]=a.componentIndex,r.axisName=r[o+"AxisName"]=a.name,r.axisId=r[o+"AxisId"]=a.id,r}function illegalPoint(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function install$q(n){AxisView$1.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer$1),n.registerComponentModel(AxisPointerModel$1),n.registerComponentView(AxisPointerView$1),n.registerPreprocessor(function(a){if(a){(!a.axisPointer||a.axisPointer.length===0)&&(a.axisPointer={});var r=a.axisPointer.link;r&&!isArray$1(r)&&(a.axisPointer.link=[r])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(a,r){a.getComponent("axisPointer").coordSysAxesInfo=collect(a,r)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(n){use(install$N),use(install$q)}var PolarAxisPointer=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.makeElOption=function(r,o,l,u,c){var h=l.axis;h.dim==="angle"&&(this.animationThreshold=Math.PI/18);var f=h.polar,v=f.getOtherAxis(h),d=v.getExtent(),p=h.dataToCoord(o),g=u.get("type");if(g&&g!=="none"){var y=buildElStyle(u),_=pointerShapeBuilder$1[g](h,f,p,d);_.style=y,r.graphicKey=_.type,r.pointer=_}var S=u.get(["label","margin"]),x=getLabelPosition(o,l,u,f,S);buildLabelElOption(r,l,u,c,x)},a}(BaseAxisPointer$1);function getLabelPosition(n,a,r,o,l){var u=a.axis,c=u.dataToCoord(n),h=o.getAngleAxis().getExtent()[0];h=h/180*Math.PI;var f=o.getRadiusAxis().getExtent(),v,d,p;if(u.dim==="radius"){var g=create$1();rotate(g,g,h),translate(g,g,[o.cx,o.cy]),v=applyTransform([c,-l],g);var y=a.getModel("axisLabel").get("rotate")||0,_=AxisBuilder$1.innerTextLayout(h,y*Math.PI/180,-1);d=_.textAlign,p=_.textVerticalAlign}else{var S=f[1];v=o.coordToPoint([S+l,c]);var x=o.cx,T=o.cy;d=Math.abs(v[0]-x)/S<.3?"center":v[0]>x?"left":"right",p=Math.abs(v[1]-T)/S<.3?"middle":v[1]>T?"top":"bottom"}return{position:v,align:d,verticalAlign:p}}var pointerShapeBuilder$1={line:function(n,a,r,o){return n.dim==="angle"?{type:"Line",shape:makeLineShape(a.coordToPoint([o[0],r]),a.coordToPoint([o[1],r]))}:{type:"Circle",shape:{cx:a.cx,cy:a.cy,r}}},shadow:function(n,a,r,o){var l=Math.max(1,n.getBandWidth()),u=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:makeSectorShape(a.cx,a.cy,o[0],o[1],(-r-l/2)*u,(-r+l/2)*u)}:{type:"Sector",shape:makeSectorShape(a.cx,a.cy,r-l/2,r+l/2,0,Math.PI*2)}}};const PolarAxisPointer$1=PolarAxisPointer;var PolarModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.findAxisModel=function(r){var o,l=this.ecModel;return l.eachComponent(r,function(u){u.getCoordSysModel()===this&&(o=u)},this),o},a.type="polar",a.dependencies=["radiusAxis","angleAxis"],a.defaultOption={z:0,center:["50%","50%"],radius:"80%"},a}(ComponentModel$1);const PolarModel$1=PolarModel;var PolarAxisModel=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},a.type="polarAxis",a}(ComponentModel$1);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="angleAxis",a}(PolarAxisModel),RadiusAxisModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="radiusAxis",a}(PolarAxisModel),RadiusAxis=function(n){__extends(a,n);function a(r,o){return n.call(this,"radius",r,o)||this}return a.prototype.pointToData=function(r,o){return this.polar.pointToData(r,o)[this.dim==="radius"?0:1]},a}(Axis$1);RadiusAxis.prototype.dataToRadius=Axis$1.prototype.dataToCoord,RadiusAxis.prototype.radiusToData=Axis$1.prototype.coordToData;const RadiusAxis$1=RadiusAxis;var inner$8=makeInner(),AngleAxis=function(n){__extends(a,n);function a(r,o){return n.call(this,"angle",r,o||[0,360])||this}return a.prototype.pointToData=function(r,o){return this.polar.pointToData(r,o)[this.dim==="radius"?0:1]},a.prototype.calculateCategoryInterval=function(){var r=this,o=r.getLabelModel(),l=r.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var h=u[0],f=r.dataToCoord(h+1)-r.dataToCoord(h),v=Math.abs(f),d=getBoundingRect(h==null?"":h+"",o.getFont(),"center","top"),p=Math.max(d.height,7),g=p/v;isNaN(g)&&(g=1/0);var y=Math.max(0,Math.floor(g)),_=inner$8(r.model),S=_.lastAutoInterval,x=_.lastTickCount;return S!=null&&x!=null&&Math.abs(S-y)<=1&&Math.abs(x-c)<=1&&S>y?y=S:(_.lastTickCount=c,_.lastAutoInterval=y),y},a}(Axis$1);AngleAxis.prototype.dataToAngle=Axis$1.prototype.dataToCoord,AngleAxis.prototype.angleToData=Axis$1.prototype.coordToData;const AngleAxis$1=AngleAxis;var polarDimensions=["radius","angle"],Polar=function(){function n(a){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis$1,this._angleAxis=new AngleAxis$1,this.axisPointerEnabled=!0,this.name=a||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(a){var r=this.pointToCoord(a);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},n.prototype.containData=function(a){return this._radiusAxis.containData(a[0])&&this._angleAxis.containData(a[1])},n.prototype.getAxis=function(a){var r="_"+a+"Axis";return this[r]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(a){var r=[],o=this._angleAxis,l=this._radiusAxis;return o.scale.type===a&&r.push(o),l.scale.type===a&&r.push(l),r},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(a){var r=this._angleAxis;return a===r?this._radiusAxis:r},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(a){var r=a!=null&&a!=="auto"?this.getAxis(a):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},n.prototype.dataToPoint=function(a,r){return this.coordToPoint([this._radiusAxis.dataToRadius(a[0],r),this._angleAxis.dataToAngle(a[1],r)])},n.prototype.pointToData=function(a,r){var o=this.pointToCoord(a);return[this._radiusAxis.radiusToData(o[0],r),this._angleAxis.angleToData(o[1],r)]},n.prototype.pointToCoord=function(a){var r=a[0]-this.cx,o=a[1]-this.cy,l=this.getAngleAxis(),u=l.getExtent(),c=Math.min(u[0],u[1]),h=Math.max(u[0],u[1]);l.inverse?c=h-360:h=c+360;var f=Math.sqrt(r*r+o*o);r/=f,o/=f;for(var v=Math.atan2(-o,r)/Math.PI*180,d=v<c?1:-1;v<c||v>h;)v+=d*360;return[f,v]},n.prototype.coordToPoint=function(a){var r=a[0],o=a[1]/180*Math.PI,l=Math.cos(o)*r+this.cx,u=-Math.sin(o)*r+this.cy;return[l,u]},n.prototype.getArea=function(){var a=this.getAngleAxis(),r=this.getRadiusAxis(),o=r.getExtent().slice();o[0]>o[1]&&o.reverse();var l=a.getExtent(),u=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:o[0],r:o[1],startAngle:-l[0]*u,endAngle:-l[1]*u,clockwise:a.inverse,contain:function(c,h){var f=c-this.cx,v=h-this.cy,d=f*f+v*v-1e-4,p=this.r,g=this.r0;return d<=p*p&&d>=g*g}}},n.prototype.convertToPixel=function(a,r,o){var l=getCoordSys$2(r);return l===this?this.dataToPoint(o):null},n.prototype.convertFromPixel=function(a,r,o){var l=getCoordSys$2(r);return l===this?this.pointToData(o):null},n}();function getCoordSys$2(n){var a=n.seriesModel,r=n.polarModel;return r&&r.coordinateSystem||a&&a.coordinateSystem}const Polar$1=Polar;function resizePolar(n,a,r){var o=a.get("center"),l=r.getWidth(),u=r.getHeight();n.cx=parsePercent(o[0],l),n.cy=parsePercent(o[1],u);var c=n.getRadiusAxis(),h=Math.min(l,u)/2,f=a.get("radius");f==null?f=[0,"100%"]:isArray$1(f)||(f=[0,f]);var v=[parsePercent(f[0],h),parsePercent(f[1],h)];c.inverse?c.setExtent(v[1],v[0]):c.setExtent(v[0],v[1])}function updatePolarScale(n,a){var r=this,o=r.getAngleAxis(),l=r.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),n.eachSeries(function(h){if(h.coordinateSystem===r){var f=h.getData();each$f(getDataDimensionsOnAxis(f,"radius"),function(v){l.scale.unionExtentFromData(f,v)}),each$f(getDataDimensionsOnAxis(f,"angle"),function(v){o.scale.unionExtentFromData(f,v)})}}),niceScaleExtent(o.scale,o.model),niceScaleExtent(l.scale,l.model),o.type==="category"&&!o.onBand){var u=o.getExtent(),c=360/o.scale.count();o.inverse?u[1]+=c:u[1]-=c,o.setExtent(u[0],u[1])}}function isAngleAxisModel(n){return n.mainType==="angleAxis"}function setAxis(n,a){if(n.type=a.get("type"),n.scale=createScaleByModel$1(a),n.onBand=a.get("boundaryGap")&&n.type==="category",n.inverse=a.get("inverse"),isAngleAxisModel(a)){n.inverse=n.inverse!==a.get("clockwise");var r=a.get("startAngle");n.setExtent(r,r+(n.inverse?-360:360))}a.axis=n,n.model=a}var polarCreator={dimensions:polarDimensions,create:function(n,a){var r=[];return n.eachComponent("polar",function(o,l){var u=new Polar$1(l+"");u.update=updatePolarScale;var c=u.getRadiusAxis(),h=u.getAngleAxis(),f=o.findAxisModel("radiusAxis"),v=o.findAxisModel("angleAxis");setAxis(c,f),setAxis(h,v),resizePolar(u,o,a),r.push(u),o.coordinateSystem=u,u.model=o}),n.eachSeries(function(o){if(o.get("coordinateSystem")==="polar"){var l=o.getReferringComponents("polar",SINGLE_REFERRING).models[0];if({}.NODE_ENV!=="production"&&!l)throw new Error('Polar "'+retrieve(o.get("polarIndex"),o.get("polarId"),0)+'" not found');o.coordinateSystem=l.coordinateSystem}}),r}};const polarCreator$1=polarCreator;var elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(n,a,r){a[1]>a[0]&&(a=a.slice().reverse());var o=n.coordToPoint([a[0],r]),l=n.coordToPoint([a[1],r]);return{x1:o[0],y1:o[1],x2:l[0],y2:l[1]}}function getRadiusIdx(n){var a=n.getRadiusAxis();return a.inverse?0:1}function fixAngleOverlap(n){var a=n[0],r=n[n.length-1];a&&r&&Math.abs(Math.abs(a.coord-r.coord)-360)<1e-4&&n.pop()}var AngleAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.axisPointerClass="PolarAxisPointer",r}return a.prototype.render=function(r,o){if(this.group.removeAll(),!!r.get("show")){var l=r.axis,u=l.polar,c=u.getRadiusAxis().getExtent(),h=l.getTicksCoords(),f=l.getMinorTicksCoords(),v=map$1(l.getViewLabels(),function(d){d=clone$4(d);var p=l.scale,g=p.type==="ordinal"?p.getRawOrdinalNumber(d.tickValue):d.tickValue;return d.coord=l.dataToCoord(g),d});fixAngleOverlap(v),fixAngleOverlap(h),each$f(elementList,function(d){r.get([d,"show"])&&(!l.scale.isBlank()||d==="axisLine")&&angelAxisElementsBuilders[d](this.group,r,u,h,f,c,v)},this)}},a.type="angleAxis",a}(AxisView$1),angelAxisElementsBuilders={axisLine:function(n,a,r,o,l,u){var c=a.getModel(["axisLine","lineStyle"]),h=getRadiusIdx(r),f=h?0:1,v;u[f]===0?v=new Circle$1({shape:{cx:r.cx,cy:r.cy,r:u[h]},style:c.getLineStyle(),z2:1,silent:!0}):v=new Ring$1({shape:{cx:r.cx,cy:r.cy,r:u[h],r0:u[f]},style:c.getLineStyle(),z2:1,silent:!0}),v.style.fill=null,n.add(v)},axisTick:function(n,a,r,o,l,u){var c=a.getModel("axisTick"),h=(c.get("inside")?-1:1)*c.get("length"),f=u[getRadiusIdx(r)],v=map$1(o,function(d){return new Line$3({shape:getAxisLineShape(r,[f,f+h],d.coord)})});n.add(mergePath(v,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,a,r,o,l,u){if(!!l.length){for(var c=a.getModel("axisTick"),h=a.getModel("minorTick"),f=(c.get("inside")?-1:1)*h.get("length"),v=u[getRadiusIdx(r)],d=[],p=0;p<l.length;p++)for(var g=0;g<l[p].length;g++)d.push(new Line$3({shape:getAxisLineShape(r,[v,v+f],l[p][g].coord)}));n.add(mergePath(d,{style:defaults(h.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,a,r,o,l,u,c){var h=a.getCategories(!0),f=a.getModel("axisLabel"),v=f.get("margin"),d=a.get("triggerEvent");each$f(c,function(p,g){var y=f,_=p.tickValue,S=u[getRadiusIdx(r)],x=r.coordToPoint([S+v,p.coord]),T=r.cx,A=r.cy,b=Math.abs(x[0]-T)/S<.3?"center":x[0]>T?"left":"right",C=Math.abs(x[1]-A)/S<.3?"middle":x[1]>A?"top":"bottom";if(h&&h[_]){var E=h[_];isObject$3(E)&&E.textStyle&&(y=new Model$1(E.textStyle,f,f.ecModel))}var w=new ZRText$1({silent:AxisBuilder$1.isLabelSilent(a),style:createTextStyle$1(y,{x:x[0],y:x[1],fill:y.getTextColor()||a.get(["axisLine","lineStyle","color"]),text:p.formattedLabel,align:b,verticalAlign:C})});if(n.add(w),d){var D=AxisBuilder$1.makeAxisEventDataBase(a);D.targetType="axisLabel",D.value=p.rawLabel,getECData(w).eventData=D}},this)},splitLine:function(n,a,r,o,l,u){var c=a.getModel("splitLine"),h=c.getModel("lineStyle"),f=h.get("color"),v=0;f=f instanceof Array?f:[f];for(var d=[],p=0;p<o.length;p++){var g=v++%f.length;d[g]=d[g]||[],d[g].push(new Line$3({shape:getAxisLineShape(r,u,o[p].coord)}))}for(var p=0;p<d.length;p++)n.add(mergePath(d[p],{style:defaults({stroke:f[p%f.length]},h.getLineStyle()),silent:!0,z:a.get("z")}))},minorSplitLine:function(n,a,r,o,l,u){if(!!l.length){for(var c=a.getModel("minorSplitLine"),h=c.getModel("lineStyle"),f=[],v=0;v<l.length;v++)for(var d=0;d<l[v].length;d++)f.push(new Line$3({shape:getAxisLineShape(r,u,l[v][d].coord)}));n.add(mergePath(f,{style:h.getLineStyle(),silent:!0,z:a.get("z")}))}},splitArea:function(n,a,r,o,l,u){if(!!o.length){var c=a.getModel("splitArea"),h=c.getModel("areaStyle"),f=h.get("color"),v=0;f=f instanceof Array?f:[f];for(var d=[],p=Math.PI/180,g=-o[0].coord*p,y=Math.min(u[0],u[1]),_=Math.max(u[0],u[1]),S=a.get("clockwise"),x=1,T=o.length;x<=T;x++){var A=x===T?o[0].coord:o[x].coord,b=v++%f.length;d[b]=d[b]||[],d[b].push(new Sector$1({shape:{cx:r.cx,cy:r.cy,r0:y,r:_,startAngle:g,endAngle:-A*p,clockwise:S},silent:!0})),g=-A*p}for(var x=0;x<d.length;x++)n.add(mergePath(d[x],{style:defaults({fill:f[x%f.length]},h.getAreaStyle()),silent:!0}))}}};const AngleAxisView$1=AngleAxisView;var axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.axisPointerClass="PolarAxisPointer",r}return a.prototype.render=function(r,o){if(this.group.removeAll(),!!r.get("show")){var l=this._axisGroup,u=this._axisGroup=new Group$4;this.group.add(u);var c=r.axis,h=c.polar,f=h.getAngleAxis(),v=c.getTicksCoords(),d=c.getMinorTicksCoords(),p=f.getExtent()[0],g=c.getExtent(),y=layoutAxis(h,r,p),_=new AxisBuilder$1(r,y);each$f(axisBuilderAttrs$1,_.add,_),u.add(_.getGroup()),groupTransition(l,u,r),each$f(selfBuilderAttrs$1,function(S){r.get([S,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[S](this.group,r,h,p,g,v,d)},this)}},a.type="radiusAxis",a}(AxisView$1),axisElementBuilders$1={splitLine:function(n,a,r,o,l,u){var c=a.getModel("splitLine"),h=c.getModel("lineStyle"),f=h.get("color"),v=0;f=f instanceof Array?f:[f];for(var d=[],p=0;p<u.length;p++){var g=v++%f.length;d[g]=d[g]||[],d[g].push(new Circle$1({shape:{cx:r.cx,cy:r.cy,r:Math.max(u[p].coord,0)}}))}for(var p=0;p<d.length;p++)n.add(mergePath(d[p],{style:defaults({stroke:f[p%f.length],fill:null},h.getLineStyle()),silent:!0}))},minorSplitLine:function(n,a,r,o,l,u,c){if(!!c.length){for(var h=a.getModel("minorSplitLine"),f=h.getModel("lineStyle"),v=[],d=0;d<c.length;d++)for(var p=0;p<c[d].length;p++)v.push(new Circle$1({shape:{cx:r.cx,cy:r.cy,r:c[d][p].coord}}));n.add(mergePath(v,{style:defaults({fill:null},f.getLineStyle()),silent:!0}))}},splitArea:function(n,a,r,o,l,u){if(!!u.length){var c=a.getModel("splitArea"),h=c.getModel("areaStyle"),f=h.get("color"),v=0;f=f instanceof Array?f:[f];for(var d=[],p=u[0].coord,g=1;g<u.length;g++){var y=v++%f.length;d[y]=d[y]||[],d[y].push(new Sector$1({shape:{cx:r.cx,cy:r.cy,r0:p,r:u[g].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),p=u[g].coord}for(var g=0;g<d.length;g++)n.add(mergePath(d[g],{style:defaults({fill:f[g%f.length]},h.getAreaStyle()),silent:!0}))}}};function layoutAxis(n,a,r){return{position:[n.cx,n.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:a.getModel("axisLabel").get("rotate"),z2:1}}const RadiusAxisView$1=RadiusAxisView;function getSeriesStackId(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function getAxisKey(n,a){return a.dim+n.model.componentIndex}function barLayoutPolar(n,a,r){var o={},l=calRadialBar(filter(a.getSeriesByType(n),function(u){return!a.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));a.eachSeriesByType(n,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),h=u.coordinateSystem,f=h.getBaseAxis(),v=getAxisKey(h,f),d=getSeriesStackId(u),p=l[v][d],g=p.offset,y=p.width,_=h.getOtherAxis(f),S=u.coordinateSystem.cx,x=u.coordinateSystem.cy,T=u.get("barMinHeight")||0,A=u.get("barMinAngle")||0;o[d]=o[d]||[];for(var b=c.mapDimension(_.dim),C=c.mapDimension(f.dim),E=isDimensionStacked(c,b),w=f.dim!=="radius"||!u.get("roundCap",!0),D=_.dataToCoord(0),M=0,P=c.count();M<P;M++){var L=c.get(b,M),I=c.get(C,M),R=L>=0?"p":"n",O=D;E&&(o[d][I]||(o[d][I]={p:D,n:D}),O=o[d][I][R]);var N=void 0,V=void 0,B=void 0,G=void 0;if(_.dim==="radius"){var F=_.dataToCoord(L)-D,z=f.dataToCoord(I);Math.abs(F)<T&&(F=(F<0?-1:1)*T),N=O,V=O+F,B=z-g,G=B-y,E&&(o[d][I][R]=V)}else{var H=_.dataToCoord(L,w)-D,U=f.dataToCoord(I);Math.abs(H)<A&&(H=(H<0?-1:1)*A),N=U+g,V=N+y,B=O,G=O+H,E&&(o[d][I][R]=G)}c.setItemLayout(M,{cx:S,cy:x,r0:N,r:V,startAngle:-B*Math.PI/180,endAngle:-G*Math.PI/180,clockwise:B>=G})}}})}function calRadialBar(n){var a={};each$f(n,function(o,l){var u=o.getData(),c=o.coordinateSystem,h=c.getBaseAxis(),f=getAxisKey(c,h),v=h.getExtent(),d=h.type==="category"?h.getBandWidth():Math.abs(v[1]-v[0])/u.count(),p=a[f]||{bandWidth:d,remainedWidth:d,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},g=p.stacks;a[f]=p;var y=getSeriesStackId(o);g[y]||p.autoWidthCount++,g[y]=g[y]||{width:0,maxWidth:0};var _=parsePercent(o.get("barWidth"),d),S=parsePercent(o.get("barMaxWidth"),d),x=o.get("barGap"),T=o.get("barCategoryGap");_&&!g[y].width&&(_=Math.min(p.remainedWidth,_),g[y].width=_,p.remainedWidth-=_),S&&(g[y].maxWidth=S),x!=null&&(p.gap=x),T!=null&&(p.categoryGap=T)});var r={};return each$f(a,function(o,l){r[l]={};var u=o.stacks,c=o.bandWidth,h=parsePercent(o.categoryGap,c),f=parsePercent(o.gap,1),v=o.remainedWidth,d=o.autoWidthCount,p=(v-h)/(d+(d-1)*f);p=Math.max(p,0),each$f(u,function(S,x){var T=S.maxWidth;T&&T<p&&(T=Math.min(T,v),S.width&&(T=Math.min(T,S.width)),v-=T,S.width=T,d--)}),p=(v-h)/(d+(d-1)*f),p=Math.max(p,0);var g=0,y;each$f(u,function(S,x){S.width||(S.width=p),y=S,g+=S.width*(1+f)}),y&&(g-=y.width*f);var _=-g/2;each$f(u,function(S,x){r[l][x]=r[l][x]||{offset:_,width:S.width},_+=S.width*(1+f)})}),r}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="polar",a}(ComponentView$1);function install$o(n){use(install$q),AxisView$1.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer$1),n.registerCoordinateSystem("polar",polarCreator$1),n.registerComponentModel(PolarModel$1),n.registerComponentView(PolarView),axisModelCreator(n,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(n,"radius",RadiusAxisModel,radiusAxisExtraOption),n.registerComponentView(AngleAxisView$1),n.registerComponentView(RadiusAxisView$1),n.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(n,a){a=a||{};var r=n.coordinateSystem,o=n.axis,l={},u=o.position,c=o.orient,h=r.getRect(),f=[h.x,h.x+h.width,h.y,h.y+h.height],v={horizontal:{top:f[2],bottom:f[3]},vertical:{left:f[0],right:f[1]}};l.position=[c==="vertical"?v.vertical[u]:f[0],c==="horizontal"?v.horizontal[u]:f[3]];var d={horizontal:0,vertical:1};l.rotation=Math.PI/2*d[c];var p={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=p[u],n.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(a.labelInside,n.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var g=a.rotate;return g==null&&(g=n.get(["axisLabel","rotate"])),l.labelRotation=u==="top"?-g:g,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.axisPointerClass="SingleAxisPointer",r}return a.prototype.render=function(r,o,l,u){var c=this.group;c.removeAll();var h=this._axisGroup;this._axisGroup=new Group$4;var f=layout$1(r),v=new AxisBuilder$1(r,f);each$f(axisBuilderAttrs,v.add,v),c.add(this._axisGroup),c.add(v.getGroup()),each$f(selfBuilderAttrs,function(d){r.get([d,"show"])&&axisElementBuilders[d](this,this.group,this._axisGroup,r)},this),groupTransition(h,this._axisGroup,r),n.prototype.render.call(this,r,o,l,u)},a.prototype.remove=function(){rectCoordAxisHandleRemove(this)},a.type="singleAxis",a}(AxisView$1),axisElementBuilders={splitLine:function(n,a,r,o){var l=o.axis;if(!l.scale.isBlank()){var u=o.getModel("splitLine"),c=u.getModel("lineStyle"),h=c.get("color");h=h instanceof Array?h:[h];for(var f=c.get("width"),v=o.coordinateSystem.getRect(),d=l.isHorizontal(),p=[],g=0,y=l.getTicksCoords({tickModel:u}),_=[],S=[],x=0;x<y.length;++x){var T=l.toGlobalCoord(y[x].coord);d?(_[0]=T,_[1]=v.y,S[0]=T,S[1]=v.y+v.height):(_[0]=v.x,_[1]=T,S[0]=v.x+v.width,S[1]=T);var A=new Line$3({shape:{x1:_[0],y1:_[1],x2:S[0],y2:S[1]},silent:!0});subPixelOptimizeLine(A.shape,f);var b=g++%h.length;p[b]=p[b]||[],p[b].push(A)}for(var C=c.getLineStyle(["color"]),x=0;x<p.length;++x)a.add(mergePath(p[x],{style:defaults({stroke:h[x%h.length]},C),silent:!0}))}},splitArea:function(n,a,r,o){rectCoordAxisBuildSplitArea(n,r,o,o)}};const SingleAxisView$1=SingleAxisView;var SingleAxisModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.getCoordSysModel=function(){return this},a.type="singleAxis",a.layoutMode="box",a.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},a}(ComponentModel$1);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);const SingleAxisModel$1=SingleAxisModel;var SingleAxis=function(n){__extends(a,n);function a(r,o,l,u,c){var h=n.call(this,r,o,l)||this;return h.type=u||"value",h.position=c||"bottom",h}return a.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},a.prototype.pointToData=function(r,o){return this.coordinateSystem.pointToData(r)[0]},a}(Axis$1);const SingleAxis$1=SingleAxis;var singleDimensions=["single"],Single=function(){function n(a,r,o){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=a,this._init(a,r,o)}return n.prototype._init=function(a,r,o){var l=this.dimension,u=new SingleAxis$1(l,createScaleByModel$1(a),[0,0],a.get("type"),a.get("position")),c=u.type==="category";u.onBand=c&&a.get("boundaryGap"),u.inverse=a.get("inverse"),u.orient=a.get("orient"),a.axis=u,u.model=a,u.coordinateSystem=this,this._axis=u},n.prototype.update=function(a,r){a.eachSeries(function(o){if(o.coordinateSystem===this){var l=o.getData();each$f(l.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(l,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(a,r){this._rect=getLayoutRect({left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var a=this._rect,r=this._axis,o=r.isHorizontal(),l=o?[0,a.width]:[0,a.height],u=r.inverse?1:0;r.setExtent(l[u],l[1-u]),this._updateAxisTransform(r,o?a.x:a.y)},n.prototype._updateAxisTransform=function(a,r){var o=a.getExtent(),l=o[0]+o[1],u=a.isHorizontal();a.toGlobalCoord=u?function(c){return c+r}:function(c){return l-c+r},a.toLocalCoord=u?function(c){return c-r}:function(c){return l-c+r}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(a){var r=this.getRect(),o=this.getAxis(),l=o.orient;return l==="horizontal"?o.contain(o.toLocalCoord(a[0]))&&a[1]>=r.y&&a[1]<=r.y+r.height:o.contain(o.toLocalCoord(a[1]))&&a[0]>=r.y&&a[0]<=r.y+r.height},n.prototype.pointToData=function(a){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(a[r.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(a){var r=this.getAxis(),o=this.getRect(),l=[],u=r.orient==="horizontal"?0:1;return a instanceof Array&&(a=a[0]),l[u]=r.toGlobalCoord(r.dataToCoord(+a)),l[1-u]=u===0?o.y+o.height/2:o.x+o.width/2,l},n.prototype.convertToPixel=function(a,r,o){var l=getCoordSys$1(r);return l===this?this.dataToPoint(o):null},n.prototype.convertFromPixel=function(a,r,o){var l=getCoordSys$1(r);return l===this?this.pointToData(o):null},n}();function getCoordSys$1(n){var a=n.seriesModel,r=n.singleAxisModel;return r&&r.coordinateSystem||a&&a.coordinateSystem}function create(n,a){var r=[];return n.eachComponent("singleAxis",function(o,l){var u=new Single(o,n,a);u.name="single_"+l,u.resize(o,a),o.coordinateSystem=u,r.push(u)}),n.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var l=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];o.coordinateSystem=l&&l.coordinateSystem}}),r}var singleCreator={create,dimensions:singleDimensions};const singleCreator$1=singleCreator;var XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.makeElOption=function(r,o,l,u,c){var h=l.axis,f=h.coordinateSystem,v=getGlobalExtent(f,1-getPointDimIndex(h)),d=f.dataToPoint(o)[0],p=u.get("type");if(p&&p!=="none"){var g=buildElStyle(u),y=pointerShapeBuilder[p](h,d,v);y.style=g,r.graphicKey=y.type,r.pointer=y}var _=layout$1(l);buildCartesianSingleLabelElOption(o,r,_,l,u,c)},a.prototype.getHandleTransform=function(r,o,l){var u=layout$1(o,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(o.axis,r,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},a.prototype.updateHandleTransform=function(r,o,l,u){var c=l.axis,h=c.coordinateSystem,f=getPointDimIndex(c),v=getGlobalExtent(h,f),d=[r.x,r.y];d[f]+=o[f],d[f]=Math.min(v[1],d[f]),d[f]=Math.max(v[0],d[f]);var p=getGlobalExtent(h,1-f),g=(p[1]+p[0])/2,y=[g,g];return y[f]=d[f],{x:d[0],y:d[1],rotation:r.rotation,cursorPoint:y,tooltipOption:{verticalAlign:"middle"}}},a}(BaseAxisPointer$1),pointerShapeBuilder={line:function(n,a,r){var o=makeLineShape([a,r[0]],[a,r[1]],getPointDimIndex(n));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(n,a,r){var o=n.getBandWidth(),l=r[1]-r[0];return{type:"Rect",shape:makeRectShape([a-o/2,r[0]],[o,l],getPointDimIndex(n))}}};function getPointDimIndex(n){return n.isHorizontal()?0:1}function getGlobalExtent(n,a){var r=n.getRect();return[r[XY$1[a]],r[XY$1[a]]+r[WH$1[a]]]}const SingleAxisPointer$1=SingleAxisPointer;var SingleView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="single",a}(ComponentView$1);function install$n(n){use(install$q),AxisView$1.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer$1),n.registerComponentView(SingleView),n.registerComponentView(SingleAxisView$1),n.registerComponentModel(SingleAxisModel$1),axisModelCreator(n,"single",SingleAxisModel$1,SingleAxisModel$1.defaultOption),n.registerCoordinateSystem("single",singleCreator$1)}var CalendarModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o,l){var u=getLayoutParams(r);n.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(r,u)},a.prototype.mergeOption=function(r){n.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,r)},a.prototype.getCellSize=function(){return this.option.cellSize},a.type="calendar",a.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},a}(ComponentModel$1);function mergeAndNormalizeLayoutParams$1(n,a){var r=n.cellSize,o;isArray$1(r)?o=r:o=n.cellSize=[r,r],o.length===1&&(o[1]=o[0]);var l=map$1([0,1],function(u){return sizeCalculable(a,u)&&(o[u]="auto"),o[u]!=null&&o[u]!=="auto"});mergeLayoutParam(n,a,{type:"box",ignoreSize:l})}const CalendarModel$1=CalendarModel;var CalendarView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){var u=this.group;u.removeAll();var c=r.coordinateSystem,h=c.getRangeInfo(),f=c.getOrient(),v=o.getLocaleModel();this._renderDayRect(r,h,u),this._renderLines(r,h,f,u),this._renderYearText(r,h,f,u),this._renderMonthText(r,v,f,u),this._renderWeekText(r,v,h,f,u)},a.prototype._renderDayRect=function(r,o,l){for(var u=r.coordinateSystem,c=r.getModel("itemStyle").getItemStyle(),h=u.getCellWidth(),f=u.getCellHeight(),v=o.start.time;v<=o.end.time;v=u.getNextNDay(v,1).time){var d=u.dataToRect([v],!1).tl,p=new Rect$3({shape:{x:d[0],y:d[1],width:h,height:f},cursor:"default",style:c});l.add(p)}},a.prototype._renderLines=function(r,o,l,u){var c=this,h=r.coordinateSystem,f=r.getModel(["splitLine","lineStyle"]).getLineStyle(),v=r.get(["splitLine","show"]),d=f.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var p=o.start,g=0;p.time<=o.end.time;g++){_(p.formatedDate),g===0&&(p=h.getDateInfo(o.start.y+"-"+o.start.m));var y=p.date;y.setMonth(y.getMonth()+1),p=h.getDateInfo(y)}_(h.getNextNDay(o.end.time,1).formatedDate);function _(S){c._firstDayOfMonth.push(h.getDateInfo(S)),c._firstDayPoints.push(h.dataToRect([S],!1).tl);var x=c._getLinePointsOfOneWeek(r,S,l);c._tlpoints.push(x[0]),c._blpoints.push(x[x.length-1]),v&&c._drawSplitline(x,f,u)}v&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,d,l),f,u),v&&this._drawSplitline(c._getEdgesPoints(c._blpoints,d,l),f,u)},a.prototype._getEdgesPoints=function(r,o,l){var u=[r[0].slice(),r[r.length-1].slice()],c=l==="horizontal"?0:1;return u[0][c]=u[0][c]-o/2,u[1][c]=u[1][c]+o/2,u},a.prototype._drawSplitline=function(r,o,l){var u=new Polyline$3({z2:20,shape:{points:r},style:o});l.add(u)},a.prototype._getLinePointsOfOneWeek=function(r,o,l){for(var u=r.coordinateSystem,c=u.getDateInfo(o),h=[],f=0;f<7;f++){var v=u.getNextNDay(c.time,f),d=u.dataToRect([v.time],!1);h[2*v.day]=d.tl,h[2*v.day+1]=d[l==="horizontal"?"bl":"tr"]}return h},a.prototype._formatterLabel=function(r,o){return isString(r)&&r?formatTplSimple(r,o):isFunction(r)?r(o):o.nameMap},a.prototype._yearTextPositionControl=function(r,o,l,u,c){var h=o[0],f=o[1],v=["center","bottom"];u==="bottom"?(f+=c,v=["center","top"]):u==="left"?h-=c:u==="right"?(h+=c,v=["center","top"]):f-=c;var d=0;return(u==="left"||u==="right")&&(d=Math.PI/2),{rotation:d,x:h,y:f,style:{align:v[0],verticalAlign:v[1]}}},a.prototype._renderYearText=function(r,o,l,u){var c=r.getModel("yearLabel");if(!!c.get("show")){var h=c.get("margin"),f=c.get("position");f||(f=l!=="horizontal"?"top":"left");var v=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(v[0][0]+v[1][0])/2,p=(v[0][1]+v[1][1])/2,g=l==="horizontal"?0:1,y={top:[d,v[g][1]],bottom:[d,v[1-g][1]],left:[v[1-g][0],p],right:[v[g][0],p]},_=o.start.y;+o.end.y>+o.start.y&&(_=_+"-"+o.end.y);var S=c.get("formatter"),x={start:o.start.y,end:o.end.y,nameMap:_},T=this._formatterLabel(S,x),A=new ZRText$1({z2:30,style:createTextStyle$1(c,{text:T})});A.attr(this._yearTextPositionControl(A,y[f],l,f,h)),u.add(A)}},a.prototype._monthTextPositionControl=function(r,o,l,u,c){var h="left",f="top",v=r[0],d=r[1];return l==="horizontal"?(d=d+c,o&&(h="center"),u==="start"&&(f="bottom")):(v=v+c,o&&(f="middle"),u==="start"&&(h="right")),{x:v,y:d,align:h,verticalAlign:f}},a.prototype._renderMonthText=function(r,o,l,u){var c=r.getModel("monthLabel");if(!!c.get("show")){var h=c.get("nameMap"),f=c.get("margin"),v=c.get("position"),d=c.get("align"),p=[this._tlpoints,this._blpoints];(!h||isString(h))&&(h&&(o=getLocaleModel(h)||o),h=o.get(["time","monthAbbr"])||[]);var g=v==="start"?0:1,y=l==="horizontal"?0:1;f=v==="start"?-f:f;for(var _=d==="center",S=0;S<p[g].length-1;S++){var x=p[g][S].slice(),T=this._firstDayOfMonth[S];if(_){var A=this._firstDayPoints[S];x[y]=(A[y]+p[0][S+1][y])/2}var b=c.get("formatter"),C=h[+T.m-1],E={yyyy:T.y,yy:(T.y+"").slice(2),MM:T.m,M:+T.m,nameMap:C},w=this._formatterLabel(b,E),D=new ZRText$1({z2:30,style:extend(createTextStyle$1(c,{text:w}),this._monthTextPositionControl(x,_,l,v,f))});u.add(D)}}},a.prototype._weekTextPositionControl=function(r,o,l,u,c){var h="center",f="middle",v=r[0],d=r[1],p=l==="start";return o==="horizontal"?(v=v+u+(p?1:-1)*c[0]/2,h=p?"right":"left"):(d=d+u+(p?1:-1)*c[1]/2,f=p?"bottom":"top"),{x:v,y:d,align:h,verticalAlign:f}},a.prototype._renderWeekText=function(r,o,l,u,c){var h=r.getModel("dayLabel");if(!!h.get("show")){var f=r.coordinateSystem,v=h.get("position"),d=h.get("nameMap"),p=h.get("margin"),g=f.getFirstDayOfWeek();if(!d||isString(d)){d&&(o=getLocaleModel(d)||o);var y=o.get(["time","dayOfWeekShort"]);d=y||map$1(o.get(["time","dayOfWeekAbbr"]),function(E){return E[0]})}var _=f.getNextNDay(l.end.time,7-l.lweek).time,S=[f.getCellWidth(),f.getCellHeight()];p=parsePercent(p,Math.min(S[1],S[0])),v==="start"&&(_=f.getNextNDay(l.start.time,-(7+l.fweek)).time,p=-p);for(var x=0;x<7;x++){var T=f.getNextNDay(_,x),A=f.dataToRect([T.time],!1).center,b=x;b=Math.abs((x+g)%7);var C=new ZRText$1({z2:30,style:extend(createTextStyle$1(h,{text:d[b]}),this._weekTextPositionControl(A,u,v,p,S))});c.add(C)}}},a.type="calendar",a}(ComponentView$1);const CalendarView$1=CalendarView;var PROXIMATE_ONE_DAY=864e5,Calendar=function(){function n(a,r,o){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=a}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(a){a=parseDate(a);var r=a.getFullYear(),o=a.getMonth()+1,l=o<10?"0"+o:""+o,u=a.getDate(),c=u<10?"0"+u:""+u,h=a.getDay();return h=Math.abs((h+7-this.getFirstDayOfWeek())%7),{y:r+"",m:l,d:c,day:h,time:a.getTime(),formatedDate:r+"-"+l+"-"+c,date:a}},n.prototype.getNextNDay=function(a,r){return r=r||0,r===0?this.getDateInfo(a):(a=new Date(this.getDateInfo(a).time),a.setDate(a.getDate()+r),this.getDateInfo(a))},n.prototype.update=function(a,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,l=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),h=this._orient==="horizontal"?[o,7]:[7,o];each$f([0,1],function(p){d(u,p)&&(c[l[p]]=u[p]*h[p])});var f={width:r.getWidth(),height:r.getHeight()},v=this._rect=getLayoutRect(c,f);each$f([0,1],function(p){d(u,p)||(u[p]=v[l[p]]/h[p])});function d(p,g){return p[g]!=null&&p[g]!=="auto"}this._sw=u[0],this._sh=u[1]},n.prototype.dataToPoint=function(a,r){isArray$1(a)&&(a=a[0]),r==null&&(r=!0);var o=this.getDateInfo(a),l=this._rangeInfo,u=o.formatedDate;if(r&&!(o.time>=l.start.time&&o.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=o.day,h=this._getRangeInfo([l.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]:[this._rect.x+h*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},n.prototype.pointToData=function(a){var r=this.pointToDate(a);return r&&r.time},n.prototype.dataToRect=function(a,r){var o=this.dataToPoint(a,r);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},n.prototype.pointToDate=function(a){var r=Math.floor((a[0]-this._rect.x)/this._sw)+1,o=Math.floor((a[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,r-1,l):this._getDateByWeeksAndDay(r,o-1,l)},n.prototype.convertToPixel=function(a,r,o){var l=getCoordSys(r);return l===this?l.dataToPoint(o):null},n.prototype.convertFromPixel=function(a,r,o){var l=getCoordSys(r);return l===this?l.pointToData(o):null},n.prototype.containPoint=function(a){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var a=this._model.get("range"),r;if(isArray$1(a)&&a.length===1&&(a=a[0]),isArray$1(a))r=a;else{var o=a.toString();if(/^\d{4}$/.test(o)&&(r=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var l=this.getDateInfo(o),u=l.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);r=[l.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(r=[o,o])}if(!r)return{}.NODE_ENV!=="production"&&logError("Invalid date range."),a;var h=this._getRangeInfo(r);return h.start.time>h.end.time&&r.reverse(),r},n.prototype._getRangeInfo=function(a){var r=[this.getDateInfo(a[0]),this.getDateInfo(a[1])],o;r[0].time>r[1].time&&(o=!0,r.reverse());var l=Math.floor(r[1].time/PROXIMATE_ONE_DAY)-Math.floor(r[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(r[0].time),c=u.getDate(),h=r[1].date.getDate();u.setDate(c+l-1);var f=u.getDate();if(f!==h)for(var v=u.getTime()-r[1].time>0?1:-1;(f=u.getDate())!==h&&(u.getTime()-r[1].time)*v>0;)l-=v,u.setDate(f-v);var d=Math.floor((l+r[0].day+6)/7),p=o?-d+1:d-1;return o&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:l,weeks:d,nthWeek:p,fweek:r[0].day,lweek:r[1].day}},n.prototype._getDateByWeeksAndDay=function(a,r,o){var l=this._getRangeInfo(o);if(a>l.weeks||a===0&&r<l.fweek||a===l.weeks&&r>l.lweek)return null;var u=(a-1)*7-l.fweek+r,c=new Date(l.start.time);return c.setDate(+l.start.d+u),this.getDateInfo(c)},n.create=function(a,r){var o=[];return a.eachComponent("calendar",function(l){var u=new n(l);o.push(u),l.coordinateSystem=u}),a.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=o[l.get("calendarIndex")||0])}),o},n.dimensions=["time","value"],n}();function getCoordSys(n){var a=n.calendarModel,r=n.seriesModel,o=a?a.coordinateSystem:r?r.coordinateSystem:null;return o}const Calendar$1=Calendar;function install$m(n){n.registerComponentModel(CalendarModel$1),n.registerComponentView(CalendarView$1),n.registerCoordinateSystem("calendar",Calendar$1)}function setKeyInfoToNewElOption(n,a){var r=n.existing;if(a.id=n.keyInfo.id,!a.type&&r&&(a.type=r.type),a.parentId==null){var o=a.parentOption;o?a.parentId=o.id:r&&(a.parentId=r.parentId)}a.parentOption=null}function isSetLoc(n,a){var r;return each$f(a,function(o){n[o]!=null&&n[o]!=="auto"&&(r=!0)}),r}function mergeNewElOptionToExist(n,a,r){var o=extend({},r),l=n[a],u=r.$action||"merge";if(u==="merge")if(l){if({}.NODE_ENV!=="production"){var c=r.type;assert(!c||l.type===c,'Please set $action: "replace" to change `type`')}merge(l,o,!0),mergeLayoutParam(l,o,{ignoreSize:!0}),copyLayoutParams(r,l),copyTransitionInfo(r,l),copyTransitionInfo(r,l,"shape"),copyTransitionInfo(r,l,"style"),copyTransitionInfo(r,l,"extra"),r.clipPath=l.clipPath}else n[a]=o;else u==="replace"?n[a]=o:u==="remove"&&l&&(n[a]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(n,a,r){if(r&&(!n[r]&&a[r]&&(n[r]={}),n=n[r],a=a[r]),!(!n||!a))for(var o=r?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<o.length;l++){var u=o[l];n[u]==null&&a[u]!=null&&(n[u]=a[u])}}function setLayoutInfoToExist(n,a){if(!!n&&(n.hv=a.hv=[isSetLoc(a,["left","right"]),isSetLoc(a,["top","bottom"])],n.type==="group")){var r=n,o=a;r.width==null&&(r.width=o.width=0),r.height==null&&(r.height=o.height=0)}}var GraphicComponentModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.preventAutoZ=!0,r}return a.prototype.mergeOption=function(r,o){var l=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,r,o),this.option.elements=l},a.prototype.optionUpdated=function(r,o){var l=this.option,u=(o?l:r).elements,c=l.elements=o?[]:l.elements,h=[];this._flatten(u,h,null);var f=mappingToExists(c,h,"normalMerge"),v=this._elOptionsToUpdate=[];each$f(f,function(d,p){var g=d.newOption;({}).NODE_ENV!=="production"&&assert(isObject$3(g)||d.existing,"Empty graphic option definition"),g&&(v.push(g),setKeyInfoToNewElOption(d,g),mergeNewElOptionToExist(c,p,g),setLayoutInfoToExist(c[p],g))},this),l.elements=filter(c,function(d){return d&&delete d.$action,d!=null})},a.prototype._flatten=function(r,o,l){each$f(r,function(u){if(!!u){l&&(u.parentOption=l),o.push(u);var c=u.children;c&&c.length&&this._flatten(c,o,u),delete u.children}},this)},a.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},a.type="graphic",a.defaultOption={elements:[]},a}(ComponentModel$1),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$4,image:ZRImage$1,text:ZRText$1},inner$7=makeInner(),GraphicComponentView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(){this._elMap=createHashMap()},a.prototype.render=function(r,o,l){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,l)},a.prototype._updateElements=function(r){var o=r.useElOptionsToUpdate();if(!!o){var l=this._elMap,u=this.group,c=r.get("z"),h=r.get("zlevel");each$f(o,function(f){var v=convertOptionIdName(f.id,null),d=v!=null?l.get(v):null,p=convertOptionIdName(f.parentId,null),g=p!=null?l.get(p):u,y=f.type,_=f.style;y==="text"&&_&&f.hv&&f.hv[1]&&(_.textVerticalAlign=_.textBaseline=_.verticalAlign=_.align=null);var S=f.textContent,x=f.textConfig;if(_&&isEC4CompatibleStyle(_,y,!!x,!!S)){var T=convertFromEC4CompatibleStyle(_,y,!0);!x&&T.textConfig&&(x=f.textConfig=T.textConfig),!S&&T.textContent&&(S=T.textContent)}var A=getCleanedElOption(f);({}).NODE_ENV!=="production"&&d&&assert(g===d.parent,"Changing parent is not supported.");var b=f.$action||"merge",C=b==="merge",E=b==="replace";if(C){var w=!d,D=d;w?D=createEl(v,g,f.type,l):(D&&(inner$7(D).isNew=!1),stopPreviousKeyframeAnimationAndRestore(D)),D&&(applyUpdateTransition(D,A,r,{isInit:w}),updateCommonAttrs(D,f,c,h))}else if(E){removeEl$1(d,f,l,r);var M=createEl(v,g,f.type,l);M&&(applyUpdateTransition(M,A,r,{isInit:!0}),updateCommonAttrs(M,f,c,h))}else b==="remove"&&(updateLeaveTo(d,f),removeEl$1(d,f,l,r));var P=l.get(v);if(P&&S)if(C){var L=P.getTextContent();L?L.attr(S):P.setTextContent(new ZRText$1(S))}else E&&P.setTextContent(new ZRText$1(S));if(P){var I=f.clipPath;if(I){var R=I.type,O=void 0,w=!1;if(C){var N=P.getClipPath();w=!N||inner$7(N).type!==R,O=w?newEl(R):N}else E&&(w=!0,O=newEl(R));P.setClipPath(O),applyUpdateTransition(O,I,r,{isInit:w}),applyKeyframeAnimation(O,I.keyframeAnimation,r)}var V=inner$7(P);P.setTextConfig(x),V.option=f,setEventData(P,r,f),setTooltipConfig({el:P,componentModel:r,itemName:P.name,itemTooltipOption:f.tooltip}),applyKeyframeAnimation(P,f.keyframeAnimation,r)}})}},a.prototype._relocate=function(r,o){for(var l=r.option.elements,u=this.group,c=this._elMap,h=o.getWidth(),f=o.getHeight(),v=["x","y"],d=0;d<l.length;d++){var p=l[d],g=convertOptionIdName(p.id,null),y=g!=null?c.get(g):null;if(!(!y||!y.isGroup)){var _=y.parent,S=_===u,x=inner$7(y),T=inner$7(_);x.width=parsePercent(x.option.width,S?h:T.width)||0,x.height=parsePercent(x.option.height,S?f:T.height)||0}}for(var d=l.length-1;d>=0;d--){var p=l[d],g=convertOptionIdName(p.id,null),y=g!=null?c.get(g):null;if(!!y){var _=y.parent,T=inner$7(_),A=_===u?{width:h,height:f}:{width:T.width,height:T.height},b={},C=positionElement(y,p,A,null,{hv:p.hv,boundingMode:p.bounding},b);if(!inner$7(y).isNew&&C){for(var E=p.transition,w={},D=0;D<v.length;D++){var M=v[D],P=b[M];E&&(isTransitionAll(E)||indexOf(E,M)>=0)?w[M]=P:y[M]=P}updateProps$1(y,w,r,0)}else y.attr(b)}}},a.prototype._clear=function(){var r=this,o=this._elMap;o.each(function(l){removeEl$1(l,inner$7(l).option,o,r._lastGraphicModel)}),this._elMap=createHashMap()},a.prototype.dispose=function(){this._clear()},a.type="graphic",a}(ComponentView$1);function newEl(n){({}).NODE_ENV!=="production"&&assert(n,"graphic type MUST be set");var a=hasOwn(nonShapeGraphicElements,n)?nonShapeGraphicElements[n]:getShapeClass(n);({}).NODE_ENV!=="production"&&assert(a,"graphic type "+n+" can not be found");var r=new a({});return inner$7(r).type=n,r}function createEl(n,a,r,o){var l=newEl(r);return a.add(l),o.set(n,l),inner$7(l).id=n,inner$7(l).isNew=!0,l}function removeEl$1(n,a,r,o){var l=n&&n.parent;l&&(n.type==="group"&&n.traverse(function(u){removeEl$1(u,a,r,o)}),applyLeaveTransition(n,a,o),r.removeKey(inner$7(n).id))}function updateCommonAttrs(n,a,r,o){n.isGroup||each$f([["cursor",Displayable$1.prototype.cursor],["zlevel",o||0],["z",r||0],["z2",0]],function(l){var u=l[0];hasOwn(a,u)?n[u]=retrieve2(a[u],l[1]):n[u]==null&&(n[u]=l[1])}),each$f(keys(a),function(l){if(l.indexOf("on")===0){var u=a[l];n[l]=isFunction(u)?u:null}}),hasOwn(a,"draggable")&&(n.draggable=a.draggable),a.name!=null&&(n.name=a.name),a.id!=null&&(n.id=a.id)}function getCleanedElOption(n){return n=extend({},n),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(a){delete n[a]}),n}function setEventData(n,a,r){var o=getECData(n).eventData;!n.silent&&!n.ignore&&!o&&(o=getECData(n).eventData={componentType:"graphic",componentIndex:a.componentIndex,name:n.name}),o&&(o.info=r.info)}function install$l(n){n.registerComponentModel(GraphicComponentModel),n.registerComponentView(GraphicComponentView),n.registerPreprocessor(function(a){var r=a.graphic;isArray$1(r)?!r[0]||!r[0].elements?a.graphic=[{elements:r}]:a.graphic=[a.graphic[0]]:r&&!r.elements&&(a.graphic=[{elements:[r]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(n){var a=n.get("coordinateSystem");return indexOf(SERIES_COORDS,a)>=0}function getAxisMainType(n){return{}.NODE_ENV!=="production"&&assert(n),n+"Axis"}function findEffectedDataZooms(n,a){var r=createHashMap(),o=[],l=createHashMap();n.eachComponent({mainType:"dataZoom",query:a},function(d){l.get(d.uid)||h(d)});var u;do u=!1,n.eachComponent("dataZoom",c);while(u);function c(d){!l.get(d.uid)&&f(d)&&(h(d),u=!0)}function h(d){l.set(d.uid,!0),o.push(d),v(d)}function f(d){var p=!1;return d.eachTargetAxis(function(g,y){var _=r.get(g);_&&_[y]&&(p=!0)}),p}function v(d){d.eachTargetAxis(function(p,g){(r.get(p)||r.set(p,[]))[g]=!0})}return o}function collectReferCoordSysModelInfo(n){var a=n.ecModel,r={infoList:[],infoMap:createHashMap()};return n.eachTargetAxis(function(o,l){var u=a.getComponent(getAxisMainType(o),l);if(!!u){var c=u.getCoordSysModel();if(!!c){var h=c.uid,f=r.infoMap.get(h);f||(f={model:c,axisModels:[]},r.infoList.push(f),r.infoMap.set(h,f)),f.axisModels.push(u)}}}),r}var DataZoomAxisInfo=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(a){this.indexMap[a]||(this.indexList.push(a),this.indexMap[a]=!0)},n}(),DataZoomModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return a.prototype.init=function(r,o,l){var u=retrieveRawOption(r);this.settledOption=u,this.mergeDefaultAndTheme(r,l),this._doInit(u)},a.prototype.mergeOption=function(r){var o=retrieveRawOption(r);merge(this.option,r,!0),merge(this.settledOption,o,!0),this._doInit(o)},a.prototype._doInit=function(r){var o=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,c){this._rangePropMode[c]==="value"&&(o[u[0]]=l[u[0]]=null)},this),this._resetTarget()},a.prototype._resetTarget=function(){var r=this.get("orient",!0),o=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(o);l?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(o,this._orient)),this._noTarget=!0,o.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},a.prototype._fillSpecifiedTargetAxis=function(r){var o=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var u=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(!!u.specified){o=!0;var c=new DataZoomAxisInfo;each$f(u.models,function(h){c.add(h.componentIndex)}),r.set(l,c)}},this),o},a.prototype._fillAutoTargetAxisByOrient=function(r,o){var l=this.ecModel,u=!0;if(u){var c=o==="vertical"?"y":"x",h=l.findComponents({mainType:c+"Axis"});f(h,c)}if(u){var h=l.findComponents({mainType:"singleAxis",filter:function(d){return d.get("orient",!0)===o}});f(h,"single")}function f(v,d){var p=v[0];if(!!p){var g=new DataZoomAxisInfo;if(g.add(p.componentIndex),r.set(d,g),u=!1,d==="x"||d==="y"){var y=p.getReferringComponents("grid",SINGLE_REFERRING).models[0];y&&each$f(v,function(_){p.componentIndex!==_.componentIndex&&y===_.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&g.add(_.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(v){if(!!u){var d=l.findComponents({mainType:getAxisMainType(v),filter:function(g){return g.get("type",!0)==="category"}});if(d[0]){var p=new DataZoomAxisInfo;p.add(d[0].componentIndex),r.set(v,p),u=!1}}},this)},a.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(o){!r&&(r=o)},this),r==="y"?"vertical":"horizontal"},a.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var o=this.ecModel.option;this.option.throttle=o.animation&&o.animationDurationUpdate>0?100:20}},a.prototype._updateRangeUse=function(r){var o=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,c){var h=r[u[0]]!=null,f=r[u[1]]!=null;h&&!f?o[c]="percent":!h&&f?o[c]="value":l?o[c]=l[c]:h&&(o[c]="percent")})},a.prototype.noTarget=function(){return this._noTarget},a.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(o,l){r==null&&(r=this.ecModel.getComponent(getAxisMainType(o),l))},this),r},a.prototype.eachTargetAxis=function(r,o){this._targetAxisInfoMap.each(function(l,u){each$f(l.indexList,function(c){r.call(o,u,c)})})},a.prototype.getAxisProxy=function(r,o){var l=this.getAxisModel(r,o);if(l)return l.__dzAxisProxy},a.prototype.getAxisModel=function(r,o){({}).NODE_ENV!=="production"&&assert(r&&o!=null);var l=this._targetAxisInfoMap.get(r);if(l&&l.indexMap[o])return this.ecModel.getComponent(getAxisMainType(r),o)},a.prototype.setRawRange=function(r){var o=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(r[u[0]]!=null||r[u[1]]!=null)&&(o[u[0]]=l[u[0]]=r[u[0]],o[u[1]]=l[u[1]]=r[u[1]])},this),this._updateRangeUse(r)},a.prototype.setCalculatedRange=function(r){var o=this.option;each$f(["start","startValue","end","endValue"],function(l){o[l]=r[l]})},a.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},a.prototype.getValueRange=function(r,o){if(r==null&&o==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(r,o).getDataValueWindow()},a.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var o,l=this._targetAxisInfoMap.keys(),u=0;u<l.length;u++)for(var c=l[u],h=this._targetAxisInfoMap.get(c),f=0;f<h.indexList.length;f++){var v=this.getAxisProxy(c,h.indexList[f]);if(v.hostedBy(this))return v;o||(o=v)}return o},a.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},a.prototype.getOrient=function(){return{}.NODE_ENV!=="production"&&assert(this._orient),this._orient},a.type="dataZoom",a.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],a.defaultOption={z:4,filterMode:"filter",start:0,end:100},a}(ComponentModel$1);function retrieveRawOption(n){var a={};return each$f(["start","end","startValue","endValue","throttle"],function(r){n.hasOwnProperty(r)&&(a[r]=n[r])}),a}const DataZoomModel$1=DataZoomModel;var SelectDataZoomModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="dataZoom.select",a}(DataZoomModel$1);const SelectZoomModel=SelectDataZoomModel;var DataZoomView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l,u){this.dataZoomModel=r,this.ecModel=o,this.api=l},a.type="dataZoom",a}(ComponentView$1);const DataZoomView$1=DataZoomView;var SelectDataZoomView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="dataZoom.select",a}(DataZoomView$1);const SelectZoomView=SelectDataZoomView;var each$7=each$f,asc$1=asc$2,AxisProxy=function(){function n(a,r,o,l){this._dimName=a,this._axisIndex=r,this.ecModel=l,this._dataZoomModel=o}return n.prototype.hostedBy=function(a){return this._dataZoomModel===a},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var a=[];return this.ecModel.eachSeries(function(r){if(isCoordSupported(r)){var o=getAxisMainType(this._dimName),l=r.getReferringComponents(o,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&a.push(r)}},this),a},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},n.prototype.calculateDataWindow=function(a){var r=this._dataExtent,o=this.getAxisModel(),l=o.axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],h=[],f=[],v;each$7(["start","end"],function(g,y){var _=a[g],S=a[g+"Value"];u[y]==="percent"?(_==null&&(_=c[y]),S=l.parse(linearMap$2(_,c,r))):(v=!0,S=S==null?r[y]:l.parse(S),_=linearMap$2(S,r,c)),f[y]=S==null||isNaN(S)?r[y]:S,h[y]=_==null||isNaN(_)?c[y]:_}),asc$1(f),asc$1(h);var d=this._minMaxSpan;v?p(f,h,r,c,!1):p(h,f,c,r,!0);function p(g,y,_,S,x){var T=x?"Span":"ValueSpan";sliderMove(0,g,_,"all",d["min"+T],d["max"+T]);for(var A=0;A<2;A++)y[A]=linearMap$2(g[A],_,S,!0),x&&(y[A]=l.parse(y[A]))}return{valueWindow:f,percentWindow:h}},n.prototype.reset=function(a){if(a===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,r),this._updateMinMaxSpan();var o=this.calculateDataWindow(a.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(a,r){if(a!==this._dataZoomModel)return;var o=this._dimName,l=this.getTargetSeriesModels(),u=a.get("filterMode"),c=this._valueWindow;if(u==="none")return;each$7(l,function(f){var v=f.getData(),d=v.mapDimensionsAll(o);if(!!d.length){if(u==="weakFilter"){var p=v.getStore(),g=map$1(d,function(y){return v.getDimensionIndex(y)},v);v.filterSelf(function(y){for(var _,S,x,T=0;T<d.length;T++){var A=p.get(g[T],y),b=!isNaN(A),C=A<c[0],E=A>c[1];if(b&&!C&&!E)return!0;b&&(x=!0),C&&(_=!0),E&&(S=!0)}return x&&_&&S})}else each$7(d,function(y){if(u==="empty")f.setData(v=v.map(y,function(S){return h(S)?S:NaN}));else{var _={};_[y]=c,v.selectRange(_)}});each$7(d,function(y){v.setApproximateExtent(c,y)})}});function h(f){return f>=c[0]&&f<=c[1]}},n.prototype._updateMinMaxSpan=function(){var a=this._minMaxSpan={},r=this._dataZoomModel,o=this._dataExtent;each$7(["min","max"],function(l){var u=r.get(l+"Span"),c=r.get(l+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?u=linearMap$2(o[0]+c,o,[0,100],!0):u!=null&&(c=linearMap$2(u,[0,100],o,!0)-o[0]),a[l+"Span"]=u,a[l+"ValueSpan"]=c},this)},n.prototype._setAxisModel=function(){var a=this.getAxisModel(),r=this._percentWindow,o=this._valueWindow;if(!!r){var l=getPixelPrecision(o,[0,500]);l=Math.min(l,20);var u=a.axis.scale.rawExtentInfo;r[0]!==0&&u.setDeterminedMinMax("min",+o[0].toFixed(l)),r[1]!==100&&u.setDeterminedMinMax("max",+o[1].toFixed(l)),u.freeze()}},n}();function calculateDataExtent(n,a,r){var o=[1/0,-1/0];each$7(r,function(c){unionAxisExtentFromData(o,c.getData(),a)});var l=n.getAxisModel(),u=ensureScaleRawExtentInfo(l.axis.scale,l,o).calculate();return[u.min,u.max]}const AxisProxy$1=AxisProxy;var dataZoomProcessor={getTargetSeries:function(n){function a(l){n.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(c,h){var f=n.getComponent(getAxisMainType(c),h);l(c,h,f,u)})})}a(function(l,u,c,h){c.__dzAxisProxy=null});var r=[];a(function(l,u,c,h){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy$1(l,u,h,n),r.push(c.__dzAxisProxy))});var o=createHashMap();return each$f(r,function(l){each$f(l.getTargetSeriesModels(),function(u){o.set(u.uid,u)})}),o},overallReset:function(n,a){n.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(o,l){r.getAxisProxy(o,l).reset(r)}),r.eachTargetAxis(function(o,l){r.getAxisProxy(o,l).filterData(r,a)})}),n.eachComponent("dataZoom",function(r){var o=r.findRepresentativeAxisProxy();if(o){var l=o.getDataPercentWindow(),u=o.getDataValueWindow();r.setCalculatedRange({start:l[0],end:l[1],startValue:u[0],endValue:u[1]})}})}};const dataZoomProcessor$1=dataZoomProcessor;function installDataZoomAction(n){n.registerAction("dataZoom",function(a,r){var o=findEffectedDataZooms(r,a);each$f(o,function(l){l.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})})}var installed$1=!1;function installCommon$1(n){installed$1||(installed$1=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor$1),installDataZoomAction(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(n){n.registerComponentModel(SelectZoomModel),n.registerComponentView(SelectZoomView),installCommon$1(n)}var ToolboxFeature=function(){function n(){}return n}(),features={};function registerFeature(n,a){features[n]=a}function getFeature(n){return features[n]}var ToolboxModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;each$f(this.option.feature,function(o,l){var u=getFeature(l);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(r)),merge(o,u.defaultOption))})},a.type="toolbox",a.layoutMode={type:"box",ignoreSize:!0},a.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},a}(ComponentModel$1);const ToolboxModel$1=ToolboxModel;function layout(n,a,r){var o=a.getBoxLayoutParams(),l=a.get("padding"),u={width:r.getWidth(),height:r.getHeight()},c=getLayoutRect(o,u,l);box(a.get("orient"),n,a.get("itemGap"),c.width,c.height),positionElement(n,o,u,l)}function makeBackground(n,a){var r=normalizeCssArray(a.get("padding")),o=a.getItemStyle(["color","opacity"]);return o.fill=a.get("backgroundColor"),n=new Rect$3({shape:{x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2],r:a.get("borderRadius")},style:o,silent:!0,z2:-1}),n}var ToolboxView=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.render=function(r,o,l,u){var c=this.group;if(c.removeAll(),!r.get("show"))return;var h=+r.get("itemSize"),f=r.get("orient")==="vertical",v=r.get("feature")||{},d=this._features||(this._features={}),p=[];each$f(v,function(_,S){p.push(S)}),new DataDiffer$1(this._featureNames||[],p).add(g).update(g).remove(curry$1(g,null)).execute(),this._featureNames=p;function g(_,S){var x=p[_],T=p[S],A=v[x],b=new Model$1(A,r,r.ecModel),C;if(u&&u.newTitle!=null&&u.featureName===x&&(A.title=u.newTitle),x&&!T){if(isUserFeatureName(x))C={onclick:b.option.onclick,featureName:x};else{var E=getFeature(x);if(!E)return;C=new E}d[x]=C}else if(C=d[T],!C)return;C.uid=getUID("toolbox-feature"),C.model=b,C.ecModel=o,C.api=l;var w=C instanceof ToolboxFeature;if(!x&&T){w&&C.dispose&&C.dispose(o,l);return}if(!b.get("show")||w&&C.unusable){w&&C.remove&&C.remove(o,l);return}y(b,C,x),b.setIconStatus=function(D,M){var P=this.option,L=this.iconPaths;P.iconStatus=P.iconStatus||{},P.iconStatus[D]=M,L[D]&&(M==="emphasis"?enterEmphasis:leaveEmphasis)(L[D])},C instanceof ToolboxFeature&&C.render&&C.render(b,o,l,u)}function y(_,S,x){var T=_.getModel("iconStyle"),A=_.getModel(["emphasis","iconStyle"]),b=S instanceof ToolboxFeature&&S.getIcons?S.getIcons():_.get("icon"),C=_.get("title")||{},E,w;isString(b)?(E={},E[x]=b):E=b,isString(C)?(w={},w[x]=C):w=C;var D=_.iconPaths={};each$f(E,function(M,P){var L=createIcon(M,{},{x:-h/2,y:-h/2,width:h,height:h});L.setStyle(T.getItemStyle());var I=L.ensureState("emphasis");I.style=A.getItemStyle();var R=new ZRText$1({style:{text:w[P],align:A.get("textAlign"),borderRadius:A.get("textBorderRadius"),padding:A.get("textPadding"),fill:null},ignore:!0});L.setTextContent(R),setTooltipConfig({el:L,componentModel:r,itemName:P,formatterParamsExtra:{title:w[P]}}),L.__title=w[P],L.on("mouseover",function(){var O=A.getItemStyle(),N=f?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";R.setStyle({fill:A.get("textFill")||O.fill||O.stroke||"#000",backgroundColor:A.get("textBackgroundColor")}),L.setTextConfig({position:A.get("textPosition")||N}),R.ignore=!r.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){_.get(["iconStatus",P])!=="emphasis"&&l.leaveEmphasis(this),R.hide()}),(_.get(["iconStatus",P])==="emphasis"?enterEmphasis:leaveEmphasis)(L),c.add(L),L.on("click",bind$1(S.onclick,S,o,l,P)),D[P]=L})}layout(c,r,l),c.add(makeBackground(c.getBoundingRect(),r)),f||c.eachChild(function(_){var S=_.__title,x=_.ensureState("emphasis"),T=x.textConfig||(x.textConfig={}),A=_.getTextContent(),b=A&&A.ensureState("emphasis");if(b&&!isFunction(b)&&S){var C=b.style||(b.style={}),E=getBoundingRect(S,ZRText$1.makeFont(C)),w=_.x+c.x,D=_.y+c.y+h,M=!1;D+E.height>l.getHeight()&&(T.position="top",M=!0);var P=M?-5-E.height:h+10;w+E.width/2>l.getWidth()?(T.position=["100%",P],C.align="right"):w-E.width/2<0&&(T.position=[0,P],C.align="left")}})},a.prototype.updateView=function(r,o,l,u){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,o,l,u)})},a.prototype.remove=function(r,o){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(r,o)}),this.group.removeAll()},a.prototype.dispose=function(r,o){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(r,o)})},a.type="toolbox",a}(ComponentView$1);function isUserFeatureName(n){return n.indexOf("my")===0}const ToolboxView$1=ToolboxView;var SaveAsImage=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.onclick=function(r,o){var l=this.model,u=l.get("name")||r.get("title.0.text")||"echarts",c=o.getZr().painter.getType()==="svg",h=c?"svg":l.get("type",!0)||"png",f=o.getConnectedDataURL({type:h,backgroundColor:l.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),v=env$1.browser;if(isFunction(MouseEvent)&&(v.newEdge||!v.ie&&!v.edge)){var d=document.createElement("a");d.download=u+"."+h,d.target="_blank",d.href=f;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});d.dispatchEvent(p)}else if(window.navigator.msSaveOrOpenBlob||c){var g=f.split(","),y=g[0].indexOf("base64")>-1,_=c?decodeURIComponent(g[1]):g[1];y&&(_=window.atob(_));var S=u+"."+h;if(window.navigator.msSaveOrOpenBlob){for(var x=_.length,T=new Uint8Array(x);x--;)T[x]=_.charCodeAt(x);var A=new Blob([T]);window.navigator.msSaveOrOpenBlob(A,S)}else{var b=document.createElement("iframe");document.body.appendChild(b);var C=b.contentWindow,E=C.document;E.open("image/svg+xml","replace"),E.write(_),E.close(),C.focus(),E.execCommand("SaveAs",!0,S),document.body.removeChild(b)}}else{var w=l.get("lang"),D='<body style="margin:0;"><img src="'+f+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',M=window.open();M.document.write(D),M.document.title=u}},a.getDefaultOption=function(r){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},a}(ToolboxFeature);const SaveAsImage$1=SaveAsImage;var INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getIcons=function(){var r=this.model,o=r.get("icon"),l={};return each$f(r.get("type"),function(u){o[u]&&(l[u]=o[u])}),l},a.getDefaultOption=function(r){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},a.prototype.onclick=function(r,o,l){var u=this.model,c=u.get(["seriesIndex",l]);if(!!seriesOptGenreator[l]){var h={series:[]},f=function(p){var g=p.subType,y=p.id,_=seriesOptGenreator[l](g,y,p,u);_&&(defaults(_,p.option),h.series.push(_));var S=p.coordinateSystem;if(S&&S.type==="cartesian2d"&&(l==="line"||l==="bar")){var x=S.getAxesByScale("ordinal")[0];if(x){var T=x.dim,A=T+"Axis",b=p.getReferringComponents(A,SINGLE_REFERRING).models[0],C=b.componentIndex;h[A]=h[A]||[];for(var E=0;E<=C;E++)h[A][C]=h[A][C]||{};h[A][C].boundaryGap=l==="bar"}}};each$f(radioTypes,function(p){indexOf(p,l)>=0&&each$f(p,function(g){u.setIconStatus(g,"normal")})}),u.setIconStatus(l,"emphasis"),r.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},f);var v,d=l;l==="stack"&&(v=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",l])!=="emphasis"&&(d="tiled")),o.dispatchAction({type:"changeMagicType",currentType:d,newOption:h,newTitle:v,featureName:"magicType"})}},a}(ToolboxFeature),seriesOptGenreator={line:function(n,a,r,o){if(n==="bar")return merge({id:a,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(n,a,r,o){if(n==="line")return merge({id:a,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(n,a,r,o){var l=r.get("stack")===INNER_STACK_KEYWORD;if(n==="line"||n==="bar")return o.setIconStatus("stack",l?"normal":"emphasis"),merge({id:a,stack:l?"":INNER_STACK_KEYWORD},o.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,a){a.mergeOption(n.newOption)});const MagicType$1=MagicType;var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(n){var a={},r=[],o=[];return n.eachRawSeries(function(l){var u=l.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var c=u.getBaseAxis();if(c.type==="category"){var h=c.dim+"_"+c.index;a[h]||(a[h]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},o.push({axisDim:c.dim,axisIndex:c.index})),a[h].series.push(l)}else r.push(l)}else r.push(l)}),{seriesGroupByCategoryAxis:a,other:r,meta:o}}function assembleSeriesWithCategoryAxis(n){var a=[];return each$f(n,function(r,o){var l=r.categoryAxis,u=r.valueAxis,c=u.dim,h=[" "].concat(map$1(r.series,function(y){return y.name})),f=[l.model.getCategories()];each$f(r.series,function(y){var _=y.getRawData();f.push(y.getRawData().mapArray(_.mapDimension(c),function(S){return S}))});for(var v=[h.join(ITEM_SPLITER)],d=0;d<f[0].length;d++){for(var p=[],g=0;g<f.length;g++)p.push(f[g][d]);v.push(p.join(ITEM_SPLITER))}a.push(v.join(`
`))}),a.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(n){return map$1(n,function(a){var r=a.getRawData(),o=[a.name],l=[];return r.each(r.dimensions,function(){for(var u=arguments.length,c=arguments[u-1],h=r.getName(c),f=0;f<u-1;f++)l[f]=arguments[f];o.push((h?h+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),o.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(n){var a=groupSeries(n);return{value:filter([assembleSeriesWithCategoryAxis(a.seriesGroupByCategoryAxis),assembleOtherSeries(a.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:a.meta}}function trim(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(n){var a=n.slice(0,n.indexOf(`
`));if(a.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(n){for(var a=n.split(/\n+/g),r=trim(a.shift()).split(itemSplitRegex),o=[],l=map$1(r,function(f){return{name:f,data:[]}}),u=0;u<a.length;u++){var c=trim(a[u]).split(itemSplitRegex);o.push(c.shift());for(var h=0;h<c.length;h++)l[h]&&(l[h].data[u]=c[h])}return{series:l,categories:o}}function parseListContents(n){for(var a=n.split(/\n+/g),r=trim(a.shift()),o=[],l=0;l<a.length;l++){var u=trim(a[l]);if(!!u){var c=u.split(itemSplitRegex),h="",f=void 0,v=!1;isNaN(c[0])?(v=!0,h=c[0],c=c.slice(1),o[l]={name:h,value:[]},f=o[l].value):f=o[l]=[];for(var d=0;d<c.length;d++)f.push(+c[d]);f.length===1&&(v?o[l].value=f[0]:o[l]=f[0])}}return{name:r,data:o}}function parseContents(n,a){var r=n.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),o={series:[]};return each$f(r,function(l,u){if(isTSVFormat(l)){var c=parseTSVContents(l),h=a[u],f=h.axisDim+"Axis";h&&(o[f]=o[f]||[],o[f][h.axisIndex]={data:c.categories},o.series=o.series.concat(c.series))}else{var c=parseListContents(l);o.series.push(c)}}),o}var DataView=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.onclick=function(r,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var l=o.getDom(),u=this.model;this._dom&&l.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=u.get("backgroundColor")||"#fff";var h=document.createElement("h4"),f=u.get("lang")||[];h.innerHTML=f[0]||u.get("title"),h.style.cssText="margin:10px 20px",h.style.color=u.get("textColor");var v=document.createElement("div"),d=document.createElement("textarea");v.style.cssText="overflow:auto";var p=u.get("optionToContent"),g=u.get("contentToOption"),y=getContentFromModel(r);if(isFunction(p)){var _=p(o.getOption());isString(_)?v.innerHTML=_:isDom(_)&&v.appendChild(_)}else{d.readOnly=u.get("readOnly");var S=d.style;S.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",S.color=u.get("textColor"),S.borderColor=u.get("textareaBorderColor"),S.backgroundColor=u.get("textareaColor"),d.value=y.value,v.appendChild(d)}var x=y.meta,T=document.createElement("div");T.style.cssText="position:absolute;bottom:5px;left:0;right:0";var A="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),C=document.createElement("div");A+=";background-color:"+u.get("buttonColor"),A+=";color:"+u.get("buttonTextColor");var E=this;function w(){l.removeChild(c),E._dom=null}addEventListener(b,"click",w),addEventListener(C,"click",function(){if(g==null&&p!=null||g!=null&&p==null){({}).NODE_ENV!=="production"&&warn("It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored."),w();return}var D;try{isFunction(g)?D=g(v,o.getOption()):D=parseContents(d.value,x)}catch(M){throw w(),new Error("Data view format error "+M)}D&&o.dispatchAction({type:"changeDataView",newOption:D}),w()}),b.innerHTML=f[1],C.innerHTML=f[2],C.style.cssText=b.style.cssText=A,!u.get("readOnly")&&T.appendChild(C),T.appendChild(b),c.appendChild(h),c.appendChild(v),c.appendChild(T),v.style.height=l.clientHeight-80+"px",l.appendChild(c),this._dom=c},a.prototype.remove=function(r,o){this._dom&&o.getDom().removeChild(this._dom)},a.prototype.dispose=function(r,o){this.remove(r,o)},a.getDefaultOption=function(r){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},a}(ToolboxFeature);function tryMergeDataOption(n,a){return map$1(n,function(r,o){var l=a&&a[o];if(isObject$3(l)&&!isArray$1(l)){var u=isObject$3(r)&&!isArray$1(r);u||(r={value:r});var c=l.name!=null&&r.name==null;return r=defaults(r,l),c&&delete r.name,r}else return r})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,a){var r=[];each$f(n.newOption.series,function(o){var l=a.getSeriesByName(o.name)[0];if(!l)r.push(extend({type:"scatter"},o));else{var u=l.get("data");r.push({name:o.name,data:tryMergeDataOption(o.data,u)})}}),a.mergeOption(defaults({series:r},n.newOption))});const DataView$1=DataView;var each$6=each$f,inner$6=makeInner();function push(n,a){var r=getStoreSnapshots(n);each$6(a,function(o,l){for(var u=r.length-1;u>=0;u--){var c=r[u];if(c[l])break}if(u<0){var h=n.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(h){var f=h.getPercentRange();r[0][l]={dataZoomId:l,start:f[0],end:f[1]}}}}),r.push(a)}function pop(n){var a=getStoreSnapshots(n),r=a[a.length-1];a.length>1&&a.pop();var o={};return each$6(r,function(l,u){for(var c=a.length-1;c>=0;c--)if(l=a[c][u],l){o[u]=l;break}}),o}function clear(n){inner$6(n).snapshots=null}function count(n){return getStoreSnapshots(n).length}function getStoreSnapshots(n){var a=inner$6(n);return a.snapshots||(a.snapshots=[{}]),a.snapshots}var RestoreOption=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.onclick=function(r,o){clear(r),o.dispatchAction({type:"restore",from:this.uid})},a.getDefaultOption=function(r){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return o},a}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,a){a.resetOption("recreate")});const Restore=RestoreOption;var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function n(a,r,o){var l=this;this._targetInfoList=[];var u=parseFinder(r,a);each$f(targetInfoBuilders,function(c,h){(!o||!o.include||indexOf(o.include,h)>=0)&&c(u,l._targetInfoList)})}return n.prototype.setOutputRanges=function(a,r){return this.matchOutputRanges(a,r,function(o,l,u){if((o.coordRanges||(o.coordRanges=[])).push(l),!o.coordRange){o.coordRange=l;var c=coordConvert[o.brushType](0,u,l);o.__rangeOffset={offset:diffProcessor[o.brushType](c.values,o.range,[1,1]),xyMinMax:c.xyMinMax}}}),a},n.prototype.matchOutputRanges=function(a,r,o){each$f(a,function(l){var u=this.findTargetInfo(l,r);u&&u!==!0&&each$f(u.coordSyses,function(c){var h=coordConvert[l.brushType](1,c,l.range,!0);o(l,h.values,c,r)})},this)},n.prototype.setInputRanges=function(a,r){each$f(a,function(o){var l=this.findTargetInfo(o,r);if({}.NODE_ENV!=="production"&&(assert(!l||l===!0||o.coordRange,"coordRange must be specified when coord index specified."),assert(!l||l!==!0||o.range,"range must be specified in global brush.")),o.range=o.range||[],l&&l!==!0){o.panelId=l.panelId;var u=coordConvert[o.brushType](0,l.coordSys,o.coordRange),c=o.__rangeOffset;o.range=c?diffProcessor[o.brushType](u.values,c.offset,getScales(u.xyMinMax,c.xyMinMax)):u.values}},this)},n.prototype.makePanelOpts=function(a,r){return map$1(this._targetInfoList,function(o){var l=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:r?r(o):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,a,o.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},n.prototype.controlSeries=function(a,r,o){var l=this.findTargetInfo(a,o);return l===!0||l&&indexOf(l.coordSyses,r.coordinateSystem)>=0},n.prototype.findTargetInfo=function(a,r){for(var o=this._targetInfoList,l=parseFinder(r,a),u=0;u<o.length;u++){var c=o[u],h=a.panelId;if(h){if(c.panelId===h)return c}else for(var f=0;f<targetInfoMatchers.length;f++)if(targetInfoMatchers[f](l,c))return c}return!0},n}();function formatMinMax(n){return n[0]>n[1]&&n.reverse(),n}function parseFinder(n,a){return parseFinder$1(n,a,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(n,a){var r=n.xAxisModels,o=n.yAxisModels,l=n.gridModels,u=createHashMap(),c={},h={};!r&&!o&&!l||(each$f(r,function(f){var v=f.axis.grid.model;u.set(v.id,v),c[v.id]=!0}),each$f(o,function(f){var v=f.axis.grid.model;u.set(v.id,v),h[v.id]=!0}),each$f(l,function(f){u.set(f.id,f),c[f.id]=!0,h[f.id]=!0}),u.each(function(f){var v=f.coordinateSystem,d=[];each$f(v.getCartesians(),function(p,g){(indexOf(r,p.getAxis("x").model)>=0||indexOf(o,p.getAxis("y").model)>=0)&&d.push(p)}),a.push({panelId:"grid--"+f.id,gridModel:f,coordSysModel:f,coordSys:d[0],coordSyses:d,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[f.id],yAxisDeclared:h[f.id]})}))},geo:function(n,a){each$f(n.geoModels,function(r){var o=r.coordinateSystem;a.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:o,coordSyses:[o],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(n,a){var r=n.xAxisModel,o=n.yAxisModel,l=n.gridModel;return!l&&r&&(l=r.axis.grid.model),!l&&o&&(l=o.axis.grid.model),l&&l===a.gridModel},function(n,a){var r=n.geoModel;return r&&r===a.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,a=n.getBoundingRect().clone();return a.applyTransform(getTransform$1(n)),a}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(n,a,r,o){var l=n?a.pointToData([r[0][0],r[1][0]],o):a.dataToPoint([r[0][0],r[1][0]],o),u=n?a.pointToData([r[0][1],r[1][1]],o):a.dataToPoint([r[0][1],r[1][1]],o),c=[formatMinMax([l[0],u[0]]),formatMinMax([l[1],u[1]])];return{values:c,xyMinMax:c}},polygon:function(n,a,r,o){var l=[[1/0,-1/0],[1/0,-1/0]],u=map$1(r,function(c){var h=n?a.pointToData(c,o):a.dataToPoint(c,o);return l[0][0]=Math.min(l[0][0],h[0]),l[1][0]=Math.min(l[1][0],h[1]),l[0][1]=Math.max(l[0][1],h[0]),l[1][1]=Math.max(l[1][1],h[1]),h});return{values:u,xyMinMax:l}}};function axisConvert(n,a,r,o){({}).NODE_ENV!=="production"&&assert(r.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var l=r.getAxis(["x","y"][n]),u=formatMinMax(map$1([0,1],function(h){return a?l.coordToData(l.toLocalCoord(o[h]),!0):l.toGlobalCoord(l.dataToCoord(o[h]))})),c=[];return c[n]=u,c[1-n]=[NaN,NaN],{values:u,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(n,a,r){return[[n[0][0]-r[0]*a[0][0],n[0][1]-r[0]*a[0][1]],[n[1][0]-r[1]*a[1][0],n[1][1]-r[1]*a[1][1]]]},polygon:function(n,a,r){return map$1(n,function(o,l){return[o[0]-r[0]*a[l][0],o[1]-r[1]*a[l][1]]})}};function axisDiffProcessor(n,a,r,o){return[a[0]-o[n]*r[0],a[1]-o[n]*r[1]]}function getScales(n,a){var r=getSize(n),o=getSize(a),l=[r[0]/o[0],r[1]/o[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}const BrushTargetManager$1=BrushTargetManager;var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.render=function(r,o,l,u){this._brushController||(this._brushController=new BrushController$1(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(r,o,this,u,l),updateBackBtnStatus(r,o)},a.prototype.onclick=function(r,o,l){handlers[l].call(this)},a.prototype.remove=function(r,o){this._brushController&&this._brushController.unmount()},a.prototype.dispose=function(r,o){this._brushController&&this._brushController.dispose()},a.prototype._onBrush=function(r){var o=r.areas;if(!r.isEnd||!o.length)return;var l={},u=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager$1(makeAxisFinder(this.model),u,{include:["grid"]});c.matchOutputRanges(o,u,function(v,d,p){if(p.type==="cartesian2d"){var g=v.brushType;g==="rect"?(h("x",p,d[0]),h("y",p,d[1])):h({lineX:"x",lineY:"y"}[g],p,d)}}),push(u,l),this._dispatchZoomAction(l);function h(v,d,p){var g=d.getAxis(v),y=g.model,_=f(v,y,u),S=_.findRepresentativeAxisProxy(y).getMinMaxSpan();(S.minValueSpan!=null||S.maxValueSpan!=null)&&(p=sliderMove(0,p.slice(),g.scale.getExtent(),0,S.minValueSpan,S.maxValueSpan)),_&&(l[_.id]={dataZoomId:_.id,startValue:p[0],endValue:p[1]})}function f(v,d,p){var g;return p.eachComponent({mainType:"dataZoom",subType:"select"},function(y){var _=y.getAxisModel(v,d.componentIndex);_&&(g=y)}),g}},a.prototype._dispatchZoomAction=function(r){var o=[];each$5(r,function(l,u){o.push(clone$4(l))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},a.getDefaultOption=function(r){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},a}(ToolboxFeature),handlers={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(n){var a={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return a.xAxisIndex==null&&a.xAxisId==null&&(a.xAxisIndex="all"),a.yAxisIndex==null&&a.yAxisId==null&&(a.yAxisIndex="all"),a}function updateBackBtnStatus(n,a){n.setIconStatus("back",count(a)>1?"emphasis":"normal")}function updateZoomBtnStatus(n,a,r,o,l){var u=r._isZoomActive;o&&o.type==="takeGlobalCursor"&&(u=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),r._isZoomActive=u,n.setIconStatus("zoom",u?"emphasis":"normal");var c=new BrushTargetManager$1(makeAxisFinder(n),a,{include:["grid"]}),h=c.makePanelOpts(l,function(f){return f.xAxisDeclared&&!f.yAxisDeclared?"lineX":!f.xAxisDeclared&&f.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(h).enableBrush(u&&h.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(n){var a=n.getComponent("toolbox",0),r=["feature","dataZoom"];if(!a||a.get(r)==null)return;var o=a.getModel(r),l=[],u=makeAxisFinder(o),c=parseFinder$1(n,u);each$5(c.xAxisModels,function(f){return h(f,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(f){return h(f,"yAxis","yAxisIndex")});function h(f,v,d){var p=f.componentIndex,g={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+v+p};g[d]=p,l.push(g)}return l});const DataZoom=DataZoomFeature;function install$j(n){n.registerComponentModel(ToolboxModel$1),n.registerComponentView(ToolboxView$1),registerFeature("saveAsImage",SaveAsImage$1),registerFeature("magicType",MagicType$1),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoom),registerFeature("restore",Restore),use(install$k)}var TooltipModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="tooltip",a.dependencies=["axisPointer"],a.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},a}(ComponentModel$1);const TooltipModel$1=TooltipModel;function shouldTooltipConfine(n){var a=n.get("confine");return a!=null?!!a:n.get("renderMode")==="richText"}function testStyle(n){if(!!env$1.domSupported){for(var a=document.documentElement.style,r=0,o=n.length;r<o;r++)if(n[r]in a)return n[r]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(n,a){if(!n)return a;a=toCamelCase(a,!0);var r=n.indexOf(a);return n=r===-1?a:"-"+n.slice(0,r)+"-"+a,n.toLowerCase()}function getComputedStyle(n,a){var r=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return r?a?r[a]:r:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env$1.transform3dSupported?"will-change:transform;":"");function mirrorPos(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function assembleArrow(n,a,r){if(!isString(r)||r==="inside")return"";var o=n.get("backgroundColor"),l=n.get("borderWidth");a=convertToColorString(a);var u=mirrorPos(r),c=Math.max(Math.round(l)*1.5,6),h="",f=CSS_TRANSFORM_VENDOR+":",v;indexOf(["left","right"],u)>-1?(h+="top:50%",f+="translateY(-50%) rotate("+(v=u==="left"?-225:-45)+"deg)"):(h+="left:50%",f+="translateX(-50%) rotate("+(v=u==="top"?225:45)+"deg)");var d=v*Math.PI/180,p=c+l,g=p*Math.abs(Math.cos(d))+p*Math.abs(Math.sin(d)),y=Math.round(((g-Math.SQRT2*l)/2+Math.SQRT2*l-(g-p)/2)*100)/100;h+=";"+u+":-"+y+"px";var _=a+" solid "+l+"px;",S=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",h+";"+f+";","border-bottom:"+_,"border-right:"+_,"background-color:"+o+";"];return'<div style="'+S.join("")+'"></div>'}function assembleTransition(n,a){var r="cubic-bezier(0.23,1,0.32,1)",o=" "+n/2+"s "+r,l="opacity"+o+",visibility"+o;return a||(o=" "+n+"s "+r,l+=env$1.transformSupported?","+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(n,a,r){var o=n.toFixed(0)+"px",l=a.toFixed(0)+"px";if(!env$1.transformSupported)return r?"top:"+l+";left:"+o+";":[["top",l],["left",o]];var u=env$1.transform3dSupported,c="translate"+(u?"3d":"")+"("+o+","+l+(u?",0":"")+")";return r?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(n){var a=[],r=n.get("fontSize"),o=n.getTextColor();o&&a.push("color:"+o),a.push("font:"+n.getFont()),r&&a.push("line-height:"+Math.round(r*3/2)+"px");var l=n.get("textShadowColor"),u=n.get("textShadowBlur")||0,c=n.get("textShadowOffsetX")||0,h=n.get("textShadowOffsetY")||0;return l&&u&&a.push("text-shadow:"+c+"px "+h+"px "+u+"px "+l),each$f(["decoration","align"],function(f){var v=n.get(f);v&&a.push("text-"+f+":"+v)}),a.join(";")}function assembleCssText(n,a,r){var o=[],l=n.get("transitionDuration"),u=n.get("backgroundColor"),c=n.get("shadowBlur"),h=n.get("shadowColor"),f=n.get("shadowOffsetX"),v=n.get("shadowOffsetY"),d=n.getModel("textStyle"),p=getPaddingFromTooltipModel(n,"html"),g=f+"px "+v+"px "+c+"px "+h;return o.push("box-shadow:"+g),a&&l&&o.push(assembleTransition(l,r)),u&&o.push("background-color:"+u),each$f(["width","color","radius"],function(y){var _="border-"+y,S=toCamelCase(_),x=n.get(S);x!=null&&o.push(_+":"+x+(y==="color"?"":"px"))}),o.push(assembleFont(d)),p!=null&&o.push("padding:"+normalizeCssArray(p).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(n,a,r,o,l){var u=a&&a.painter;if(r){var c=u&&u.getViewportRoot();c&&transformLocalCoord(n,c,document.body,o,l)}else{n[0]=o,n[1]=l;var h=u&&u.getViewportRootOffset();h&&(n[0]+=h.offsetLeft,n[1]+=h.offsetTop)}n[2]=n[0]/a.getWidth(),n[3]=n[1]/a.getHeight()}var TooltipHTMLContent=function(){function n(a,r,o){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env$1.wxa)return null;var l=document.createElement("div");l.domBelongToZr=!0,this.el=l;var u=this._zr=r.getZr(),c=this._appendToBody=o&&o.appendToBody;makeStyleCoord$1(this._styleCoord,u,c,r.getWidth()/2,r.getHeight()/2),c?document.body.appendChild(l):a.appendChild(l),this._container=a;var h=this;l.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},l.onmousemove=function(f){if(f=f||window.event,!h._enterable){var v=u.handler,d=u.painter.getViewportRoot();normalizeEvent(d,f,!0),v.dispatch("mousemove",f)}},l.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return n.prototype.update=function(a){var r=this._container,o=getComputedStyle(r,"position"),l=r.style;l.position!=="absolute"&&o!=="absolute"&&(l.position="relative");var u=a.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=a.get("className")||""},n.prototype.show=function(a,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,l=o.style,u=this._styleCoord;o.innerHTML?l.cssText=gCssText+assembleCssText(a,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(r)+";")+(a.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(a,r,o,l,u){var c=this.el;if(a==null){c.innerHTML="";return}var h="";if(isString(u)&&o.get("trigger")==="item"&&!shouldTooltipConfine(o)&&(h=assembleArrow(o,l,u)),isString(a))c.innerHTML=a+h;else if(a){c.innerHTML="",isArray$1(a)||(a=[a]);for(var f=0;f<a.length;f++)isDom(a[f])&&a[f].parentNode!==c&&c.appendChild(a[f]);if(h&&c.childNodes.length){var v=document.createElement("div");v.innerHTML=h,c.appendChild(v)}}},n.prototype.setEnterable=function(a){this._enterable=a},n.prototype.getSize=function(){var a=this.el;return[a.offsetWidth,a.offsetHeight]},n.prototype.moveTo=function(a,r){var o=this._styleCoord;if(makeStyleCoord$1(o,this._zr,this._appendToBody,a,r),o[0]!=null&&o[1]!=null){var l=this.el.style,u=assembleTransform(o[0],o[1]);each$f(u,function(c){l[c[0]]=c[1]})}},n.prototype._moveIfResized=function(){var a=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(a*this._zr.getWidth(),r*this._zr.getHeight())},n.prototype.hide=function(){var a=this,r=this.el.style;r.visibility="hidden",r.opacity="0",env$1.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return a._longHide=!0},500)},n.prototype.hideLater=function(a){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(a?(this._hideDelay=a,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),a)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}();const TooltipHTMLContent$1=TooltipHTMLContent;var TooltipRichContent=function(){function n(a){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=a.getZr(),makeStyleCoord(this._styleCoord,this._zr,a.getWidth()/2,a.getHeight()/2)}return n.prototype.update=function(a){var r=a.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(a,r,o,l,u){var c=this;isObject$3(a)&&throwError({}.NODE_ENV!=="production"?"Passing DOM nodes as content is not supported in richText tooltip!":""),this.el&&this._zr.remove(this.el);var h=o.getModel("textStyle");this.el=new ZRText$1({style:{rich:r.richTextStyles,text:a,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:h.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(v){c.el.style[v]=o.get(v)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(v){c.el.style[v]=h.get(v)||0}),this._zr.add(this.el);var f=this;this.el.on("mouseover",function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0}),this.el.on("mouseout",function(){f._enterable&&f._show&&f.hideLater(f._hideDelay),f._inContent=!1})},n.prototype.setEnterable=function(a){this._enterable=a},n.prototype.getSize=function(){var a=this.el,r=this.el.getBoundingRect(),o=calcShadowOuterSize(a.style);return[r.width+o.left+o.right,r.height+o.top+o.bottom]},n.prototype.moveTo=function(a,r){var o=this.el;if(o){var l=this._styleCoord;makeStyleCoord(l,this._zr,a,r),a=l[0],r=l[1];var u=o.style,c=mathMaxWith0(u.borderWidth||0),h=calcShadowOuterSize(u);o.x=a+c+h.left,o.y=r+c+h.top,o.markRedraw()}},n.prototype._moveIfResized=function(){var a=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(a*this._zr.getWidth(),r*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(a){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(a?(this._hideDelay=a,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),a)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function mathMaxWith0(n){return Math.max(0,n)}function calcShadowOuterSize(n){var a=mathMaxWith0(n.shadowBlur||0),r=mathMaxWith0(n.shadowOffsetX||0),o=mathMaxWith0(n.shadowOffsetY||0);return{left:mathMaxWith0(a-r),right:mathMaxWith0(a+r),top:mathMaxWith0(a-o),bottom:mathMaxWith0(a+o)}}function makeStyleCoord(n,a,r,o){n[0]=r,n[1]=o,n[2]=n[0]/a.getWidth(),n[3]=n[1]/a.getHeight()}const TooltipRichContent$1=TooltipRichContent;var proxyRect=new Rect$3({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o){if(!(env$1.node||!o.getDom())){var l=r.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent$1(o):new TooltipHTMLContent$1(o.getDom(),o,{appendToBody:l.get("appendToBody",!0)})}},a.prototype.render=function(r,o,l){if(!(env$1.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=o,this._api=l;var u=this._tooltipContent;u.update(r),u.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},a.prototype._initGlobalListener=function(){var r=this._tooltipModel,o=r.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,u,c){o!=="none"&&(o.indexOf(l)>=0?this._tryShow(u,c):l==="leave"&&this._hide(c))},this))},a.prototype._keepShow=function(){var r=this._tooltipModel,o=this._ecModel,l=this._api,u=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&c.manuallyShowTip(r,o,l,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},a.prototype.manuallyShowTip=function(r,o,l,u){if(!(u.from===this.uid||env$1.node||!l.getDom())){var c=makeDispatchAction(u,l);this._ticket="";var h=u.dataByCoordSys,f=findComponentReference(u,o,l);if(f){var v=f.el.getBoundingRect().clone();v.applyTransform(f.el.transform),this._tryShow({offsetX:v.x+v.width/2,offsetY:v.y+v.height/2,target:f.el,position:u.position,positionDefault:"bottom"},c)}else if(u.tooltip&&u.x!=null&&u.y!=null){var d=proxyRect;d.x=u.x,d.y=u.y,d.update(),getECData(d).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:d},c)}else if(h)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:h,tooltipOption:u.tooltipOption},c);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(r,o,l,u))return;var p=findPointFromSeries(u,o),g=p.point[0],y=p.point[1];g!=null&&y!=null&&this._tryShow({offsetX:g,offsetY:y,target:p.el,position:u.position,positionDefault:"bottom"},c)}else u.x!=null&&u.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:l.getZr().findHover(u.x,u.y).target},c))}},a.prototype.manuallyHideTip=function(r,o,l,u){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,l))},a.prototype._manuallyAxisShowTip=function(r,o,l,u){var c=u.seriesIndex,h=u.dataIndex,f=o.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||h==null||f==null)){var v=o.getSeriesByIndex(c);if(!!v){var d=v.getData(),p=buildTooltipModel([d.getItemModel(h),v,(v.coordinateSystem||{}).model],this._tooltipModel);if(p.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:h,position:u.position}),!0}}},a.prototype._tryShow=function(r,o){var l=r.target,u=this._tooltipModel;if(!!u){this._lastX=r.offsetX,this._lastY=r.offsetY;var c=r.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,r);else if(l){this._lastDataByCoordSys=null;var h,f;findEventDispatcher(l,function(v){if(getECData(v).dataIndex!=null)return h=v,!0;if(getECData(v).tooltipConfig!=null)return f=v,!0},!0),h?this._showSeriesItemTooltip(r,h,o):f?this._showComponentItemTooltip(r,f,o):this._hide(o)}else this._lastDataByCoordSys=null,this._hide(o)}},a.prototype._showOrMove=function(r,o){var l=r.get("showDelay");o=bind$1(o,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(o,l):o()},a.prototype._showAxisTooltip=function(r,o){var l=this._ecModel,u=this._tooltipModel,c=[o.offsetX,o.offsetY],h=buildTooltipModel([o.tooltipOption],u),f=this._renderMode,v=[],d=createTooltipMarkup("section",{blocks:[],noHeader:!0}),p=[],g=new TooltipMarkupStyleCreator;each$f(r,function(A){each$f(A.dataByAxis,function(b){var C=l.getComponent(b.axisDim+"Axis",b.axisIndex),E=b.value;if(!(!C||E==null)){var w=getValueLabel(E,C.axis,l,b.seriesDataIndices,b.valueLabelOpt),D=createTooltipMarkup("section",{header:w,noHeader:!trim$1(w),sortBlocks:!0,blocks:[]});d.blocks.push(D),each$f(b.seriesDataIndices,function(M){var P=l.getSeriesByIndex(M.seriesIndex),L=M.dataIndexInside,I=P.getDataParams(L);if(!(I.dataIndex<0)){I.axisDim=b.axisDim,I.axisIndex=b.axisIndex,I.axisType=b.axisType,I.axisId=b.axisId,I.axisValue=getAxisRawValue(C.axis,{value:E}),I.axisValueLabel=w,I.marker=g.makeTooltipMarker("item",convertToColorString(I.color),f);var R=normalizeTooltipFormatResult(P.formatTooltip(L,!0,null)),O=R.frag;if(O){var N=buildTooltipModel([P],u).get("valueFormatter");D.blocks.push(N?extend({valueFormatter:N},O):O)}R.text&&p.push(R.text),v.push(I)}})}})}),d.blocks.reverse(),p.reverse();var y=o.position,_=h.get("order"),S=buildTooltipMarkup(d,g,f,_,l.get("useUTC"),h.get("textStyle"));S&&p.unshift(S);var x=f==="richText"?`

`:"<br/>",T=p.join(x);this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(r,v)?this._updatePosition(h,y,c[0],c[1],this._tooltipContent,v):this._showTooltipContent(h,T,v,Math.random()+"",c[0],c[1],y,null,g)})},a.prototype._showSeriesItemTooltip=function(r,o,l){var u=this._ecModel,c=getECData(o),h=c.seriesIndex,f=u.getSeriesByIndex(h),v=c.dataModel||f,d=c.dataIndex,p=c.dataType,g=v.getData(p),y=this._renderMode,_=r.positionDefault,S=buildTooltipModel([g.getItemModel(d),v,f&&(f.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),x=S.get("trigger");if(!(x!=null&&x!=="item")){var T=v.getDataParams(d,p),A=new TooltipMarkupStyleCreator;T.marker=A.makeTooltipMarker("item",convertToColorString(T.color),y);var b=normalizeTooltipFormatResult(v.formatTooltip(d,!1,p)),C=S.get("order"),E=S.get("valueFormatter"),w=b.frag,D=w?buildTooltipMarkup(E?extend({valueFormatter:E},w):w,A,y,C,u.get("useUTC"),S.get("textStyle")):b.text,M="item_"+v.name+"_"+d;this._showOrMove(S,function(){this._showTooltipContent(S,D,T,M,r.offsetX,r.offsetY,r.position,r.target,A)}),l({type:"showTip",dataIndexInside:d,dataIndex:g.getRawIndex(d),seriesIndex:h,from:this.uid})}},a.prototype._showComponentItemTooltip=function(r,o,l){var u=getECData(o),c=u.tooltipConfig,h=c.option||{};if(isString(h)){var f=h;h={content:f,formatter:f}}var v=[h],d=this._ecModel.getComponent(u.componentMainType,u.componentIndex);d&&v.push(d),v.push({formatter:h.content});var p=r.positionDefault,g=buildTooltipModel(v,this._tooltipModel,p?{position:p}:null),y=g.get("content"),_=Math.random()+"",S=new TooltipMarkupStyleCreator;this._showOrMove(g,function(){var x=clone$4(g.get("formatterParams")||{});this._showTooltipContent(g,y,x,_,r.offsetX,r.offsetY,r.position,o,S)}),l({type:"showTip",from:this.uid})},a.prototype._showTooltipContent=function(r,o,l,u,c,h,f,v,d){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var p=this._tooltipContent;p.setEnterable(r.get("enterable"));var g=r.get("formatter");f=f||r.get("position");var y=o,_=this._getNearestPoint([c,h],l,r.get("trigger"),r.get("borderColor")),S=_.color;if(g)if(isString(g)){var x=r.ecModel.get("useUTC"),T=isArray$1(l)?l[0]:l,A=T&&T.axisType&&T.axisType.indexOf("time")>=0;y=g,A&&(y=format$1(T.axisValue,y,x)),y=formatTpl(y,l,!0)}else if(isFunction(g)){var b=bind$1(function(C,E){C===this._ticket&&(p.setContent(E,d,r,S,f),this._updatePosition(r,f,c,h,p,l,v))},this);this._ticket=u,y=g(l,u,b)}else y=g;p.setContent(y,d,r,S,f),p.show(r,S),this._updatePosition(r,f,c,h,p,l,v)}},a.prototype._getNearestPoint=function(r,o,l,u){if(l==="axis"||isArray$1(o))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(o))return{color:u||o.color||o.borderColor}},a.prototype._updatePosition=function(r,o,l,u,c,h,f){var v=this._api.getWidth(),d=this._api.getHeight();o=o||r.get("position");var p=c.getSize(),g=r.get("align"),y=r.get("verticalAlign"),_=f&&f.getBoundingRect().clone();if(f&&_.applyTransform(f.transform),isFunction(o)&&(o=o([l,u],h,c.el,_,{viewSize:[v,d],contentSize:p.slice()})),isArray$1(o))l=parsePercent(o[0],v),u=parsePercent(o[1],d);else if(isObject$3(o)){var S=o;S.width=p[0],S.height=p[1];var x=getLayoutRect(S,{width:v,height:d});l=x.x,u=x.y,g=null,y=null}else if(isString(o)&&f){var T=calcTooltipPosition(o,_,p,r.get("borderWidth"));l=T[0],u=T[1]}else{var T=refixTooltipPosition(l,u,c,v,d,g?null:20,y?null:20);l=T[0],u=T[1]}if(g&&(l-=isCenterAlign(g)?p[0]/2:g==="right"?p[0]:0),y&&(u-=isCenterAlign(y)?p[1]/2:y==="bottom"?p[1]:0),shouldTooltipConfine(r)){var T=confineTooltipPosition(l,u,c,v,d);l=T[0],u=T[1]}c.moveTo(l,u)},a.prototype._updateContentNotChangedOnAxis=function(r,o){var l=this._lastDataByCoordSys,u=this._cbParamsList,c=!!l&&l.length===r.length;return c&&each$f(l,function(h,f){var v=h.dataByAxis||[],d=r[f]||{},p=d.dataByAxis||[];c=c&&v.length===p.length,c&&each$f(v,function(g,y){var _=p[y]||{},S=g.seriesDataIndices||[],x=_.seriesDataIndices||[];c=c&&g.value===_.value&&g.axisType===_.axisType&&g.axisId===_.axisId&&S.length===x.length,c&&each$f(S,function(T,A){var b=x[A];c=c&&T.seriesIndex===b.seriesIndex&&T.dataIndex===b.dataIndex}),u&&each$f(g.seriesDataIndices,function(T){var A=T.seriesIndex,b=o[A],C=u[A];b&&C&&C.data!==b.data&&(c=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=o,!!c},a.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},a.prototype.dispose=function(r,o){env$1.node||!o.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",o))},a.type="tooltip",a}(ComponentView$1);function buildTooltipModel(n,a,r){var o=a.ecModel,l;r?(l=new Model$1(r,o,o),l=new Model$1(a.option,l,o)):l=a;for(var u=n.length-1;u>=0;u--){var c=n[u];c&&(c instanceof Model$1&&(c=c.get("tooltip",!0)),isString(c)&&(c={formatter:c}),c&&(l=new Model$1(c,l,o)))}return l}function makeDispatchAction(n,a){return n.dispatchAction||bind$1(a.dispatchAction,a)}function refixTooltipPosition(n,a,r,o,l,u,c){var h=r.getSize(),f=h[0],v=h[1];return u!=null&&(n+f+u+2>o?n-=f+u:n+=u),c!=null&&(a+v+c>l?a-=v+c:a+=c),[n,a]}function confineTooltipPosition(n,a,r,o,l){var u=r.getSize(),c=u[0],h=u[1];return n=Math.min(n+c,o)-c,a=Math.min(a+h,l)-h,n=Math.max(n,0),a=Math.max(a,0),[n,a]}function calcTooltipPosition(n,a,r,o){var l=r[0],u=r[1],c=Math.ceil(Math.SQRT2*o)+8,h=0,f=0,v=a.width,d=a.height;switch(n){case"inside":h=a.x+v/2-l/2,f=a.y+d/2-u/2;break;case"top":h=a.x+v/2-l/2,f=a.y-u-c;break;case"bottom":h=a.x+v/2-l/2,f=a.y+d+c;break;case"left":h=a.x-l-c,f=a.y+d/2-u/2;break;case"right":h=a.x+v+c,f=a.y+d/2-u/2}return[h,f]}function isCenterAlign(n){return n==="center"||n==="middle"}function findComponentReference(n,a,r){var o=preParseFinder(n).queryOptionMap,l=o.keys()[0];if(!(!l||l==="series")){var u=queryReferringComponents(a,l,o.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),c=u.models[0];if(!!c){var h=r.getViewOfComponentModel(c),f;if(h.group.traverse(function(v){var d=getECData(v).tooltipConfig;if(d&&d.name===n.name)return f=v,!0}),f)return{componentMainType:l,componentIndex:c.componentIndex,el:f}}}}const TooltipView$1=TooltipView;function install$i(n){use(install$q),n.registerComponentModel(TooltipModel$1),n.registerComponentView(TooltipView$1),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(n,a){var r=normalizeToArray(n?n.brush:[]);if(!!r.length){var o=[];each$f(r,function(f){var v=f.hasOwnProperty("toolbox")?f.toolbox:[];v instanceof Array&&(o=o.concat(v))});var l=n&&n.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},n.toolbox=[l]);var u=l.feature||(l.feature={}),c=u.brush||(u.brush={}),h=c.type||(c.type=[]);h.push.apply(h,o),removeDuplicate(h),a&&!h.length&&h.push.apply(h,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(n){var a={};each$f(n,function(r){a[r]=1}),n.length=0,each$f(a,function(r,o){n.push(o)})}var each$4=each$f;function hasKeys(n){if(n){for(var a in n)if(n.hasOwnProperty(a))return!0}}function createVisualMappings(n,a,r){var o={};return each$4(a,function(u){var c=o[u]=l();each$4(n[u],function(h,f){if(!!VisualMapping$1.isValidType(f)){var v={type:f,visual:h};r&&r(v,u),c[f]=new VisualMapping$1(v),f==="opacity"&&(v=clone$4(v),v.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping$1(v))}})}),o;function l(){var u=function(){};u.prototype.__hidden=u.prototype;var c=new u;return c}}function replaceVisualOption(n,a,r){var o;each$f(r,function(l){a.hasOwnProperty(l)&&hasKeys(a[l])&&(o=!0)}),o&&each$f(r,function(l){a.hasOwnProperty(l)&&hasKeys(a[l])?n[l]=clone$4(a[l]):delete n[l]})}function applyVisual(n,a,r,o,l,u){var c={};each$f(n,function(p){var g=VisualMapping$1.prepareVisualTypes(a[p]);c[p]=g});var h;function f(p){return getItemVisualFromData(r,h,p)}function v(p,g){setItemVisualFromData(r,h,p,g)}u==null?r.each(d):r.each([u],d);function d(p,g){h=u==null?p:g;var y=r.getRawDataItem(h);if(!(y&&y.visualMap===!1))for(var _=o.call(l,p),S=a[_],x=c[_],T=0,A=x.length;T<A;T++){var b=x[T];S[b]&&S[b].applyVisual(p,f,v)}}}function incrementalApplyVisual(n,a,r,o){var l={};return each$f(n,function(u){var c=VisualMapping$1.prepareVisualTypes(a[u]);l[u]=c}),{progress:function(c,h){var f;o!=null&&(f=h.getDimensionIndex(o));function v(E){return getItemVisualFromData(h,p,E)}function d(E,w){setItemVisualFromData(h,p,E,w)}for(var p,g=h.getStore();(p=c.next())!=null;){var y=h.getRawDataItem(p);if(!(y&&y.visualMap===!1))for(var _=o!=null?g.get(f,p):p,S=r(_),x=a[S],T=l[S],A=0,b=T.length;A<b;A++){var C=T[A];x[C]&&x[C].applyVisual(_,v,d)}}}}}function makeBrushCommonSelectorForSeries(n){var a=n.brushType,r={point:function(o){return selector[a].point(o,r,n)},rect:function(o){return selector[a].rect(o,r,n)}};return r}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(n,a,r){return n&&r.boundingRect.contain(n[0],n[1])},rect:function(n,a,r){return n&&r.boundingRect.intersect(n)}},polygon:{point:function(n,a,r){return n&&r.boundingRect.contain(n[0],n[1])&&contain(r.range,n[0],n[1])},rect:function(n,a,r){var o=r.range;if(!n||o.length<=1)return!1;var l=n.x,u=n.y,c=n.width,h=n.height,f=o[0];if(contain(o,l,u)||contain(o,l+c,u)||contain(o,l,u+h)||contain(o,l+c,u+h)||BoundingRect$1.create(n).contain(f[0],f[1])||linePolygonIntersect(l,u,l+c,u,o)||linePolygonIntersect(l,u,l,u+h,o)||linePolygonIntersect(l+c,u,l+c,u+h,o)||linePolygonIntersect(l,u+h,l+c,u+h,o))return!0}}};function getLineSelectors(n){var a=["x","y"],r=["width","height"];return{point:function(o,l,u){if(o){var c=u.range,h=o[n];return inLineRange(h,c)}},rect:function(o,l,u){if(o){var c=u.range,h=[o[a[n]],o[a[n]]+o[r[n]]];return h[1]<h[0]&&h.reverse(),inLineRange(h[0],c)||inLineRange(h[1],c)||inLineRange(c[0],h)||inLineRange(c[1],h)}}}}function inLineRange(n,a){return a[0]<=n&&n<=a[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(n){n.eachComponent({mainType:"brush"},function(a){var r=a.brushTargetManager=new BrushTargetManager$1(a.option,n);r.setInputRanges(a.areas,n)})}function brushVisual(n,a,r){var o=[],l,u;n.eachComponent({mainType:"brush"},function(c){r&&r.type==="takeGlobalCursor"&&c.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),layoutCovers(n),n.eachComponent({mainType:"brush"},function(c,h){var f={brushId:c.id,brushIndex:h,brushName:c.name,areas:clone$4(c.areas),selected:[]};o.push(f);var v=c.option,d=v.brushLink,p=[],g=[],y=[],_=!1;h||(l=v.throttleType,u=v.throttleDelay);var S=map$1(c.areas,function(E){var w=boundingRectBuilders[E.brushType],D=defaults({boundingRect:w?w(E):void 0},E);return D.selectors=makeBrushCommonSelectorForSeries(D),D}),x=createVisualMappings(c.option,STATE_LIST,function(E){E.mappingMethod="fixed"});isArray$1(d)&&each$f(d,function(E){p[E]=1});function T(E){return d==="all"||!!p[E]}function A(E){return!!E.length}n.eachSeries(function(E,w){var D=y[w]=[];E.subType==="parallel"?b(E,w):C(E,w,D)});function b(E,w){var D=E.coordinateSystem;_=_||D.hasAxisBrushed(),T(w)&&D.eachActiveState(E.getData(),function(M,P){M==="active"&&(g[P]=1)})}function C(E,w,D){if(!(!E.brushSelector||brushModelNotControll(c,w))&&(each$f(S,function(P){c.brushTargetManager.controlSeries(P,E,n)&&D.push(P),_=_||A(D)}),T(w)&&A(D))){var M=E.getData();M.each(function(P){checkInRange(E,D,M,P)&&(g[P]=1)})}}n.eachSeries(function(E,w){var D={seriesId:E.id,seriesIndex:w,seriesName:E.name,dataIndex:[]};f.selected.push(D);var M=y[w],P=E.getData(),L=T(w)?function(I){return g[I]?(D.dataIndex.push(P.getRawIndex(I)),"inBrush"):"outOfBrush"}:function(I){return checkInRange(E,M,P,I)?(D.dataIndex.push(P.getRawIndex(I)),"inBrush"):"outOfBrush"};(T(w)?_:A(M))&&applyVisual(STATE_LIST,x,P,L)})}),dispatchAction$1(a,l,u,o,r)}function dispatchAction$1(n,a,r,o,l){if(!!l){var u=n.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(u,DISPATCH_METHOD,r,a);c(n,o)}}}function doDispatch(n,a){if(!n.isDisposed()){var r=n.getZr();r[DISPATCH_FLAG]=!0,n.dispatchAction({type:"brushSelect",batch:a}),r[DISPATCH_FLAG]=!1}}function checkInRange(n,a,r,o){for(var l=0,u=a.length;l<u;l++){var c=a[l];if(n.brushSelector(o,r,c.selectors,c))return!0}}function brushModelNotControll(n,a){var r=n.option.seriesIndex;return r!=null&&r!=="all"&&(isArray$1(r)?indexOf(r,a)<0:a!==r)}var boundingRectBuilders={rect:function(n){return getBoundingRectFromMinMax(n.range)},polygon:function(n){for(var a,r=n.range,o=0,l=r.length;o<l;o++){a=a||[[1/0,-1/0],[1/0,-1/0]];var u=r[o];u[0]<a[0][0]&&(a[0][0]=u[0]),u[0]>a[0][1]&&(a[0][1]=u[0]),u[1]<a[1][0]&&(a[1][0]=u[1]),u[1]>a[1][1]&&(a[1][1]=u[1])}return a&&getBoundingRectFromMinMax(a)}};function getBoundingRectFromMinMax(n){return new BoundingRect$1(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var BrushView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o){this.ecModel=r,this.api=o,this.model,(this._brushController=new BrushController$1(o.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},a.prototype.render=function(r,o,l,u){this.model=r,this._updateController(r,o,l,u)},a.prototype.updateTransform=function(r,o,l,u){layoutCovers(o),this._updateController(r,o,l,u)},a.prototype.updateVisual=function(r,o,l,u){this.updateTransform(r,o,l,u)},a.prototype.updateView=function(r,o,l,u){this._updateController(r,o,l,u)},a.prototype._updateController=function(r,o,l,u){(!u||u.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(l)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},a.prototype.dispose=function(){this._brushController.dispose()},a.prototype._onBrush=function(r){var o=this.model.id,l=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:o,areas:clone$4(l),$from:o}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:clone$4(l),$from:o})},a.type="brush",a}(ComponentView$1);const BrushView$1=BrushView;var DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.areas=[],r.brushOption={},r}return a.prototype.optionUpdated=function(r,o){var l=this.option;!o&&replaceVisualOption(l,r,["inBrush","outOfBrush"]);var u=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},a.prototype.setAreas=function(r){({}).NODE_ENV!=="production"&&(assert(isArray$1(r)),each$f(r,function(o){assert(o.brushType,"Illegal areas")})),r&&(this.areas=map$1(r,function(o){return generateBrushOption(this.option,o)},this))},a.prototype.setBrushOption=function(r){this.brushOption=generateBrushOption(this.option,r),this.brushType=this.brushOption.brushType},a.type="brush",a.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],a.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},a}(ComponentModel$1);function generateBrushOption(n,a){return merge({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Model$1(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},a,!0)}const BrushModel$1=BrushModel;var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(n){__extends(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.render=function(r,o,l){var u,c,h;o.eachComponent({mainType:"brush"},function(f){u=f.brushType,c=f.brushOption.brushMode||"single",h=h||!!f.areas.length}),this._brushType=u,this._brushMode=c,each$f(r.get("type",!0),function(f){r.setIconStatus(f,(f==="keep"?c==="multiple":f==="clear"?h:f===u)?"emphasis":"normal")})},a.prototype.updateView=function(r,o,l){this.render(r,o,l)},a.prototype.getIcons=function(){var r=this.model,o=r.get("icon",!0),l={};return each$f(r.get("type",!0),function(u){o[u]&&(l[u]=o[u])}),l},a.prototype.onclick=function(r,o,l){var u=this._brushType,c=this._brushMode;l==="clear"?(o.dispatchAction({type:"axisAreaSelect",intervals:[]}),o.dispatchAction({type:"brush",command:"clear",areas:[]})):o.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?u:u===l?!1:l,brushMode:l==="keep"?c==="multiple"?"single":"multiple":c}})},a.getDefaultOption=function(r){var o={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return o},a}(ToolboxFeature);const BrushFeature$1=BrushFeature;function install$h(n){n.registerComponentView(BrushView$1),n.registerComponentModel(BrushModel$1),n.registerPreprocessor(brushPreprocessor),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,brushVisual),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(a,r){r.eachComponent({mainType:"brush",query:a},function(o){o.setAreas(a.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature$1)}var TitleModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.layoutMode={type:"box",ignoreSize:!0},r}return a.type="title",a.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},a}(ComponentModel$1),TitleView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.render=function(r,o,l){if(this.group.removeAll(),!!r.get("show")){var u=this.group,c=r.getModel("textStyle"),h=r.getModel("subtextStyle"),f=r.get("textAlign"),v=retrieve2(r.get("textBaseline"),r.get("textVerticalAlign")),d=new ZRText$1({style:createTextStyle$1(c,{text:r.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),p=d.getBoundingRect(),g=r.get("subtext"),y=new ZRText$1({style:createTextStyle$1(h,{text:g,fill:h.getTextColor(),y:p.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=r.get("link"),S=r.get("sublink"),x=r.get("triggerEvent",!0);d.silent=!_&&!x,y.silent=!S&&!x,_&&d.on("click",function(){windowOpen(_,"_"+r.get("target"))}),S&&y.on("click",function(){windowOpen(S,"_"+r.get("subtarget"))}),getECData(d).eventData=getECData(y).eventData=x?{componentType:"title",componentIndex:r.componentIndex}:null,u.add(d),g&&u.add(y);var T=u.getBoundingRect(),A=r.getBoxLayoutParams();A.width=T.width,A.height=T.height;var b=getLayoutRect(A,{width:l.getWidth(),height:l.getHeight()},r.get("padding"));f||(f=r.get("left")||r.get("right"),f==="middle"&&(f="center"),f==="right"?b.x+=b.width:f==="center"&&(b.x+=b.width/2)),v||(v=r.get("top")||r.get("bottom"),v==="center"&&(v="middle"),v==="bottom"?b.y+=b.height:v==="middle"&&(b.y+=b.height/2),v=v||"top"),u.x=b.x,u.y=b.y,u.markRedraw();var C={align:f,verticalAlign:v};d.setStyle(C),y.setStyle(C),T=u.getBoundingRect();var E=b.margin,w=r.getItemStyle(["color","opacity"]);w.fill=r.get("backgroundColor");var D=new Rect$3({shape:{x:T.x-E[3],y:T.y-E[0],width:T.width+E[1]+E[3],height:T.height+E[0]+E[2],r:r.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});u.add(D)}},a.type="title",a}(ComponentView$1);function install$g(n){n.registerComponentModel(TitleModel),n.registerComponentView(TitleView)}var TimelineModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.layoutMode="box",r}return a.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l),this._initData()},a.prototype.mergeOption=function(r){n.prototype.mergeOption.apply(this,arguments),this._initData()},a.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var o=this._data.count();this.option.loop?r=(r%o+o)%o:(r>=o&&(r=o-1),r<0&&(r=0)),this.option.currentIndex=r},a.prototype.getCurrentIndex=function(){return this.option.currentIndex},a.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},a.prototype.setPlayState=function(r){this.option.autoPlay=!!r},a.prototype.getPlayState=function(){return!!this.option.autoPlay},a.prototype._initData=function(){var r=this.option,o=r.data||[],l=r.axisType,u=this._names=[],c;l==="category"?(c=[],each$f(o,function(v,d){var p=convertOptionIdName(getDataItemValue(v),""),g;isObject$3(v)?(g=clone$4(v),g.value=d):g=d,c.push(g),u.push(p)})):c=o;var h={category:"ordinal",time:"time",value:"number"}[l]||"number",f=this._data=new SeriesData$1([{name:"value",type:h}],this);f.initData(c,u)},a.prototype.getData=function(){return this._data},a.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},a.type="timeline",a.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},a}(ComponentModel$1);const TimelineModel$1=TimelineModel;var SliderTimelineModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="timeline.slider",a.defaultOption=inheritDefaultOption(TimelineModel$1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),a}(TimelineModel$1);mixin(SliderTimelineModel,DataFormatMixin.prototype);const SliderTimelineModel$1=SliderTimelineModel;var TimelineView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="timeline",a}(ComponentView$1);const TimelineView$1=TimelineView;var TimelineAxis=function(n){__extends(a,n);function a(r,o,l,u){var c=n.call(this,r,o,l)||this;return c.type=u||"value",c}return a.prototype.getLabelModel=function(){return this.model.getModel("label")},a.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},a}(Axis$1);const TimelineAxis$1=TimelineAxis;var PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(r,o){this.api=o},a.prototype.render=function(r,o,l){if(this.model=r,this.api=l,this.ecModel=o,this.group.removeAll(),r.get("show",!0)){var u=this._layout(r,l),c=this._createGroup("_mainGroup"),h=this._createGroup("_labelGroup"),f=this._axis=this._createAxis(u,r);r.formatTooltip=function(v){var d=f.scale.getLabel({value:v});return createTooltipMarkup("nameValue",{noName:!0,value:d})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(v){this["_render"+v](u,c,f,r)},this),this._renderAxisLabel(u,h,f,r),this._position(u,r)}this._doPlayStop(),this._updateTicksStatus()},a.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},a.prototype.dispose=function(){this._clearTimer()},a.prototype._layout=function(r,o){var l=r.get(["label","position"]),u=r.get("orient"),c=getViewRect(r,o),h;l==null||l==="auto"?h=u==="horizontal"?c.y+c.height/2<o.getHeight()/2?"-":"+":c.x+c.width/2<o.getWidth()/2?"+":"-":isString(l)?h={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][l]:h=l;var f={horizontal:"center",vertical:h>=0||h==="+"?"left":"right"},v={horizontal:h>=0||h==="+"?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:PI/2},p=u==="vertical"?c.height:c.width,g=r.getModel("controlStyle"),y=g.get("show",!0),_=y?g.get("itemSize"):0,S=y?g.get("itemGap"):0,x=_+S,T=r.get(["label","rotate"])||0;T=T*PI/180;var A,b,C,E=g.get("position",!0),w=y&&g.get("showPlayBtn",!0),D=y&&g.get("showPrevBtn",!0),M=y&&g.get("showNextBtn",!0),P=0,L=p;E==="left"||E==="bottom"?(w&&(A=[0,0],P+=x),D&&(b=[P,0],P+=x),M&&(C=[L-_,0],L-=x)):(w&&(A=[L-_,0],L-=x),D&&(b=[0,0],P+=x),M&&(C=[L-_,0],L-=x));var I=[P,L];return r.get("inverse")&&I.reverse(),{viewRect:c,mainLength:p,orient:u,rotation:d[u],labelRotation:T,labelPosOpt:h,labelAlign:r.get(["label","align"])||f[u],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||v[u],playPosition:A,prevBtnPosition:b,nextBtnPosition:C,axisExtent:I,controlSize:_,controlGap:S}},a.prototype._position=function(r,o){var l=this._mainGroup,u=this._labelGroup,c=r.viewRect;if(r.orient==="vertical"){var h=create$1(),f=c.x,v=c.y+c.height;translate(h,h,[-f,-v]),rotate(h,h,-PI/2),translate(h,h,[f,v]),c=c.clone(),c.applyTransform(h)}var d=A(c),p=A(l.getBoundingRect()),g=A(u.getBoundingRect()),y=[l.x,l.y],_=[u.x,u.y];_[0]=y[0]=d[0][0];var S=r.labelPosOpt;if(S==null||isString(S)){var x=S==="+"?0:1;b(y,p,d,1,x),b(_,g,d,1,1-x)}else{var x=S>=0?0:1;b(y,p,d,1,x),_[1]=y[1]+S}l.setPosition(y),u.setPosition(_),l.rotation=u.rotation=r.rotation,T(l),T(u);function T(C){C.originX=d[0][0]-C.x,C.originY=d[1][0]-C.y}function A(C){return[[C.x,C.x+C.width],[C.y,C.y+C.height]]}function b(C,E,w,D,M){C[D]+=w[D][M]-E[D][M]}},a.prototype._createAxis=function(r,o){var l=o.getData(),u=o.get("axisType"),c=createScaleByModel(o,u);c.getTicks=function(){return l.mapArray(["value"],function(v){return{value:v}})};var h=l.getDataExtent("value");c.setExtent(h[0],h[1]),c.calcNiceTicks();var f=new TimelineAxis$1("value",c,r.axisExtent,u);return f.model=o,f},a.prototype._createGroup=function(r){var o=this[r]=new Group$4;return this.group.add(o),o},a.prototype._renderAxisLine=function(r,o,l,u){var c=l.getExtent();if(!!u.get(["lineStyle","show"])){var h=new Line$3({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(h);var f=this._progressLine=new Line$3({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:h.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(f)}},a.prototype._renderAxisTick=function(r,o,l,u){var c=this,h=u.getData(),f=l.scale.getTicks();this._tickSymbols=[],each$f(f,function(v){var d=l.dataToCoord(v.value),p=h.getItemModel(v.value),g=p.getModel("itemStyle"),y=p.getModel(["emphasis","itemStyle"]),_=p.getModel(["progress","itemStyle"]),S={x:d,y:0,onclick:bind$1(c._changeTimeline,c,v.value)},x=giveSymbol(p,g,o,S);x.ensureState("emphasis").style=y.getItemStyle(),x.ensureState("progress").style=_.getItemStyle(),enableHoverEmphasis(x);var T=getECData(x);p.get("tooltip")?(T.dataIndex=v.value,T.dataModel=u):T.dataIndex=T.dataModel=null,c._tickSymbols.push(x)})},a.prototype._renderAxisLabel=function(r,o,l,u){var c=this,h=l.getLabelModel();if(!!h.get("show")){var f=u.getData(),v=l.getViewLabels();this._tickLabels=[],each$f(v,function(d){var p=d.tickValue,g=f.getItemModel(p),y=g.getModel("label"),_=g.getModel(["emphasis","label"]),S=g.getModel(["progress","label"]),x=l.dataToCoord(d.tickValue),T=new ZRText$1({x,y:0,rotation:r.labelRotation-r.rotation,onclick:bind$1(c._changeTimeline,c,p),silent:!1,style:createTextStyle$1(y,{text:d.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});T.ensureState("emphasis").style=createTextStyle$1(_),T.ensureState("progress").style=createTextStyle$1(S),o.add(T),enableHoverEmphasis(T),labelDataIndexStore(T).dataIndex=p,c._tickLabels.push(T)})}},a.prototype._renderControl=function(r,o,l,u){var c=r.controlSize,h=r.rotation,f=u.getModel("controlStyle").getItemStyle(),v=u.getModel(["emphasis","controlStyle"]).getItemStyle(),d=u.getPlayState(),p=u.get("inverse",!0);g(r.nextBtnPosition,"next",bind$1(this._changeTimeline,this,p?"-":"+")),g(r.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,p?"+":"-")),g(r.playPosition,d?"stop":"play",bind$1(this._handlePlayClick,this,!d),!0);function g(y,_,S,x){if(!!y){var T=parsePercent$1(retrieve2(u.get(["controlStyle",_+"BtnSize"]),c),c),A=[0,-T/2,T,T],b=makeControlIcon(u,_+"Icon",A,{x:y[0],y:y[1],originX:c/2,originY:0,rotation:x?-h:0,rectHover:!0,style:f,onclick:S});b.ensureState("emphasis").style=v,o.add(b),enableHoverEmphasis(b)}}},a.prototype._renderCurrentPointer=function(r,o,l,u){var c=u.getData(),h=u.getCurrentIndex(),f=c.getItemModel(h).getModel("checkpointStyle"),v=this,d={onCreate:function(p){p.draggable=!0,p.drift=bind$1(v._handlePointerDrag,v),p.ondragend=bind$1(v._handlePointerDragend,v),pointerMoveTo(p,v._progressLine,h,l,u,!0)},onUpdate:function(p){pointerMoveTo(p,v._progressLine,h,l,u)}};this._currentPointer=giveSymbol(f,f,this._mainGroup,{},this._currentPointer,d)},a.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},a.prototype._handlePointerDrag=function(r,o,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},a.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},a.prototype._pointerChangeTimeline=function(r,o){var l=this._toAxisCoord(r)[0],u=this._axis,c=asc$2(u.getExtent().slice());l>c[1]&&(l=c[1]),l<c[0]&&(l=c[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var h=this._progressLine;h&&(h.shape.x2=l,h.dirty());var f=this._findNearestTick(l),v=this.model;(o||f!==v.getCurrentIndex()&&v.get("realtime"))&&this._changeTimeline(f)},a.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=r.model;r._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},a.prototype._toAxisCoord=function(r){var o=this._mainGroup.getLocalTransform();return applyTransform(r,o,!0)},a.prototype._findNearestTick=function(r){var o=this.model.getData(),l=1/0,u,c=this._axis;return o.each(["value"],function(h,f){var v=c.dataToCoord(h),d=Math.abs(v-r);d<l&&(l=d,u=f)}),u},a.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},a.prototype._changeTimeline=function(r){var o=this.model.getCurrentIndex();r==="+"?r=o+1:r==="-"&&(r=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},a.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),o=this._tickSymbols,l=this._tickLabels;if(o)for(var u=0;u<o.length;u++)o&&o[u]&&o[u].toggleState("progress",u<r);if(l)for(var u=0;u<l.length;u++)l&&l[u]&&l[u].toggleState("progress",labelDataIndexStore(l[u]).dataIndex<=r)},a.type="timeline.slider",a}(TimelineView$1);function createScaleByModel(n,a){if(a=a||n.get("type"),a)switch(a){case"category":return new OrdinalScale$1({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new IntervalScale$1}}function getViewRect(n,a){return getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()},n.get("padding"))}function makeControlIcon(n,a,r,o){var l=o.style,u=createIcon(n.get(["controlStyle",a]),o||{},new BoundingRect$1(r[0],r[1],r[2],r[3]));return l&&u.setStyle(l),u}function giveSymbol(n,a,r,o,l,u){var c=a.get("color");if(l)l.setColor(c),r.add(l),u&&u.onUpdate(l);else{var h=n.get("symbol");l=createSymbol$1(h,-1,-1,2,2,c),l.setStyle("strokeNoScale",!0),r.add(l),u&&u.onCreate(l)}var f=a.getItemStyle(["color"]);l.setStyle(f),o=merge({rectHover:!0,z2:100},o,!0);var v=normalizeSymbolSize(n.get("symbolSize"));o.scaleX=v[0]/2,o.scaleY=v[1]/2;var d=normalizeSymbolOffset(n.get("symbolOffset"),v);d&&(o.x=(o.x||0)+d[0],o.y=(o.y||0)+d[1]);var p=n.get("symbolRotate");return o.rotation=(p||0)*Math.PI/180||0,l.attr(o),l.updateTransform(),l}function pointerMoveTo(n,a,r,o,l,u){if(!n.dragging){var c=l.getModel("checkpointStyle"),h=o.dataToCoord(l.getData().get("value",r));if(u||!c.get("animation",!0))n.attr({x:h,y:0}),a&&a.attr({shape:{x2:h}});else{var f={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:h,y:0},f),a&&a.animateTo({shape:{x2:h}},f)}}}const SliderTimelineView$1=SliderTimelineView;function installTimelineAction(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(a,r,o){var l=r.getComponent("timeline");return l&&a.currentIndex!=null&&(l.setCurrentIndex(a.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:a.from}))),r.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},a)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(a,r){var o=r.getComponent("timeline");o&&a.playState!=null&&o.setPlayState(a.playState)})}function timelinePreprocessor(n){var a=n&&n.timeline;isArray$1(a)||(a=a?[a]:[]),each$f(a,function(r){!r||compatibleEC2(r)})}function compatibleEC2(n){var a=n.type,r={number:"value",time:"time"};if(r[a]&&(n.axisType=r[a],delete n.type),transferItem(n),has$1(n,"controlPosition")){var o=n.controlStyle||(n.controlStyle={});has$1(o,"position")||(o.position=n.controlPosition),o.position==="none"&&!has$1(o,"show")&&(o.show=!1,delete o.position),delete n.controlPosition}each$f(n.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(n){var a=n.itemStyle||(n.itemStyle={}),r=a.emphasis||(a.emphasis={}),o=n.label||n.label||{},l=o.normal||(o.normal={}),u={normal:1,emphasis:1};each$f(o,function(c,h){!u[h]&&!has$1(l,h)&&(l[h]=c)}),r.label&&!has$1(o,"emphasis")&&(o.emphasis=r.label,delete r.label)}function has$1(n,a){return n.hasOwnProperty(a)}function install$f(n){n.registerComponentModel(SliderTimelineModel$1),n.registerComponentView(SliderTimelineView$1),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(n),n.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(n,a){if(!n)return!1;for(var r=isArray$1(n)?n:[n],o=0;o<r.length;o++)if(r[o]&&r[o][a])return!0;return!1}function fillLabel(n){defaultEmphasis(n,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.createdBySelf=!1,r}return a.prototype.init=function(r,o,l){if({}.NODE_ENV!=="production"&&this.type==="marker")throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(r,l),this._mergeOption(r,l,!1,!0)},a.prototype.isAnimationEnabled=function(){if(env$1.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},a.prototype.mergeOption=function(r,o){this._mergeOption(r,o,!1,!1)},a.prototype._mergeOption=function(r,o,l,u){var c=this.mainType;l||o.eachSeries(function(h){var f=h.get(this.mainType,!0),v=inner$5(h)[c];if(!f||!f.data){inner$5(h)[c]=null;return}v?v._mergeOption(f,o,!0):(u&&fillLabel(f),each$f(f.data,function(d){d instanceof Array?(fillLabel(d[0]),fillLabel(d[1])):fillLabel(d)}),v=this.createMarkerModelFromSeries(f,this,o),extend(v,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0}),v.__hostSeries=h),inner$5(h)[c]=v},this)},a.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=this.getRawValue(r),h=u.getName(r);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:h,value:c,noName:!h,noValue:c==null})]})},a.prototype.getData=function(){return this._data},a.prototype.setData=function(r){this._data=r},a.getMarkerModelFromSeries=function(r,o){return inner$5(r)[o]},a.type="marker",a.dependencies=["series","grid","polar","geo"],a}(ComponentModel$1);mixin(MarkerModel,DataFormatMixin.prototype);const MarkerModel$1=MarkerModel;var MarkPointModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.createMarkerModelFromSeries=function(r,o,l){return new a(r,o,l)},a.type="markPoint",a.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},a}(MarkerModel$1);const MarkPointModel$1=MarkPointModel;function hasXOrY(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function hasXAndY(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function markerTypeCalculatorWithExtent(n,a,r,o,l,u){var c=[],h=isDimensionStacked(a,o),f=h?a.getCalculationInfo("stackResultDimension"):o,v=numCalculate(a,f,n),d=a.indicesOfNearest(f,v)[0];c[l]=a.get(r,d),c[u]=a.get(f,d);var p=a.get(o,d),g=getPrecision(a.get(o,d));return g=Math.min(g,20),g>=0&&(c[u]=+c[u].toFixed(g)),[c,p]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(n,a){if(!!a){var r=n.getData(),o=n.coordinateSystem,l=o&&o.dimensions;if(!hasXAndY(a)&&!isArray$1(a.coord)&&isArray$1(l)){var u=getAxisInfo(a,r,o,n);if(a=clone$4(a),a.type&&markerTypeCalculator[a.type]&&u.baseAxis&&u.valueAxis){var c=indexOf(l,u.baseAxis.dim),h=indexOf(l,u.valueAxis.dim),f=markerTypeCalculator[a.type](r,u.baseDataDim,u.valueDataDim,c,h);a.coord=f[0],a.value=f[1]}else a.coord=[a.xAxis!=null?a.xAxis:a.radiusAxis,a.yAxis!=null?a.yAxis:a.angleAxis]}if(a.coord==null||!isArray$1(l))a.coord=[];else for(var v=a.coord,d=0;d<2;d++)markerTypeCalculator[v[d]]&&(v[d]=numCalculate(r,r.mapDimension(l[d]),v[d]));return a}}function getAxisInfo(n,a,r,o){var l={};return n.valueIndex!=null||n.valueDim!=null?(l.valueDataDim=n.valueIndex!=null?a.getDimension(n.valueIndex):n.valueDim,l.valueAxis=r.getAxis(dataDimToCoordDim(o,l.valueDataDim)),l.baseAxis=r.getOtherAxis(l.valueAxis),l.baseDataDim=a.mapDimension(l.baseAxis.dim)):(l.baseAxis=o.getBaseAxis(),l.valueAxis=r.getOtherAxis(l.baseAxis),l.baseDataDim=a.mapDimension(l.baseAxis.dim),l.valueDataDim=a.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(n,a){var r=n.getData().getDimensionInfo(a);return r&&r.coordDim}function dataFilter(n,a){return n&&n.containData&&a.coord&&!hasXOrY(a)?n.containData(a.coord):!0}function zoneFilter(n,a,r){return n&&n.containZone&&a.coord&&r.coord&&!hasXOrY(a)&&!hasXOrY(r)?n.containZone(a.coord,r.coord):!0}function createMarkerDimValueGetter(n,a){return n?function(r,o,l,u){var c=u<2?r.coord&&r.coord[u]:r.value;return parseDataValue(c,a[u])}:function(r,o,l,u){return parseDataValue(r.value,a[u])}}function numCalculate(n,a,r){if(r==="average"){var o=0,l=0;return n.each(a,function(u,c){isNaN(u)||(o+=u,l++)}),o/l}else return r==="median"?n.getMedian(a):n.getDataExtent(a)[r==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.init=function(){this.markerGroupMap=createHashMap()},a.prototype.render=function(r,o,l){var u=this,c=this.markerGroupMap;c.each(function(h){inner$4(h).keep=!1}),o.eachSeries(function(h){var f=MarkerModel$1.getMarkerModelFromSeries(h,u.type);f&&u.renderSeries(h,f,o,l)}),c.each(function(h){!inner$4(h).keep&&u.group.remove(h.group)})},a.prototype.markKeep=function(r){inner$4(r).keep=!0},a.prototype.toggleBlurSeries=function(r,o){var l=this;each$f(r,function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,l.type);if(c){var h=c.getData();h.eachItemGraphicEl(function(f){f&&(o?enterBlur(f):leaveBlur(f))})}})},a.type="marker",a}(ComponentView$1);const MarkerView$1=MarkerView;function updateMarkerLayout(n,a,r){var o=a.coordinateSystem;n.each(function(l){var u=n.getItemModel(l),c,h=parsePercent(u.get("x"),r.getWidth()),f=parsePercent(u.get("y"),r.getHeight());if(!isNaN(h)&&!isNaN(f))c=[h,f];else if(a.getMarkerPosition)c=a.getMarkerPosition(n.getValues(n.dimensions,l));else if(o){var v=n.get(o.dimensions[0],l),d=n.get(o.dimensions[1],l);c=o.dataToPoint([v,d])}isNaN(h)||(c[0]=h),isNaN(f)||(c[1]=f),n.setItemLayout(l,c)})}var MarkPointView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.updateTransform=function(r,o,l){o.eachSeries(function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,"markPoint");c&&(updateMarkerLayout(c.getData(),u,l),this.markerGroupMap.get(u.id).updateLayout())},this)},a.prototype.renderSeries=function(r,o,l,u){var c=r.coordinateSystem,h=r.id,f=r.getData(),v=this.markerGroupMap,d=v.get(h)||v.set(h,new SymbolDraw$1),p=createData(c,r,o);o.setData(p),updateMarkerLayout(o.getData(),r,u),p.each(function(g){var y=p.getItemModel(g),_=y.getShallow("symbol"),S=y.getShallow("symbolSize"),x=y.getShallow("symbolRotate"),T=y.getShallow("symbolOffset"),A=y.getShallow("symbolKeepAspect");if(isFunction(_)||isFunction(S)||isFunction(x)||isFunction(T)){var b=o.getRawValue(g),C=o.getDataParams(g);isFunction(_)&&(_=_(b,C)),isFunction(S)&&(S=S(b,C)),isFunction(x)&&(x=x(b,C)),isFunction(T)&&(T=T(b,C))}var E=y.getModel("itemStyle").getItemStyle(),w=getVisualFromData(f,"color");E.fill||(E.fill=w),p.setItemVisual(g,{symbol:_,symbolSize:S,symbolRotate:x,symbolOffset:T,symbolKeepAspect:A,style:E})}),d.updateData(p),this.group.add(d.group),p.eachItemGraphicEl(function(g){g.traverse(function(y){getECData(y).dataModel=o})}),this.markKeep(d),d.group.silent=o.get("silent")||r.get("silent")},a.type="markPoint",a}(MarkerView$1);function createData(n,a,r){var o;n?o=map$1(n&&n.dimensions,function(h){var f=a.getData().getDimensionInfo(a.getData().mapDimension(h))||{};return extend(extend({},f),{name:h,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var l=new SeriesData$1(o,r),u=map$1(r.get("data"),curry$1(dataTransform,a));n&&(u=filter(u,curry$1(dataFilter,n)));var c=createMarkerDimValueGetter(!!n,o);return l.initData(u,null,c),l}const MarkPointView$1=MarkPointView;function install$e(n){n.registerComponentModel(MarkPointModel$1),n.registerComponentView(MarkPointView$1),n.registerPreprocessor(function(a){checkMarkerInSeries(a.series,"markPoint")&&(a.markPoint=a.markPoint||{})})}var MarkLineModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.createMarkerModelFromSeries=function(r,o,l){return new a(r,o,l)},a.type="markLine",a.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},a}(MarkerModel$1);const MarkLineModel$1=MarkLineModel;var inner$3=makeInner(),markLineTransform=function(n,a,r,o){var l=n.getData(),u;if(isArray$1(o))u=o;else{var c=o.type;if(c==="min"||c==="max"||c==="average"||c==="median"||o.xAxis!=null||o.yAxis!=null){var h=void 0,f=void 0;if(o.yAxis!=null||o.xAxis!=null)h=a.getAxis(o.yAxis!=null?"y":"x"),f=retrieve(o.yAxis,o.xAxis);else{var v=getAxisInfo(o,l,a,n);h=v.valueAxis;var d=getStackedDimension(l,v.valueDataDim);f=numCalculate(l,d,c)}var p=h.dim==="x"?0:1,g=1-p,y=clone$4(o),_={coord:[]};y.type=null,y.coord=[],y.coord[g]=-1/0,_.coord[g]=1/0;var S=r.get("precision");S>=0&&isNumber(f)&&(f=+f.toFixed(Math.min(S,20))),y.coord[p]=_.coord[p]=f,u=[y,_,{type:c,valueIndex:o.valueIndex,value:f}]}else({}).NODE_ENV!=="production"&&logError("Invalid markLine data."),u=[]}var x=[dataTransform(n,u[0]),dataTransform(n,u[1]),extend({},u[2])];return x[2].type=x[2].type||null,merge(x[2],x[0]),merge(x[2],x[1]),x};function isInfinity$1(n){return!isNaN(n)&&!isFinite(n)}function ifMarkLineHasOnlyDim(n,a,r,o){var l=1-n,u=o.dimensions[n];return isInfinity$1(a[l])&&isInfinity$1(r[l])&&a[n]===r[n]&&o.getAxis(u).containData(a[n])}function markLineFilter(n,a){if(n.type==="cartesian2d"){var r=a[0].coord,o=a[1].coord;if(r&&o&&(ifMarkLineHasOnlyDim(1,r,o,n)||ifMarkLineHasOnlyDim(0,r,o,n)))return!0}return dataFilter(n,a[0])&&dataFilter(n,a[1])}function updateSingleMarkerEndLayout(n,a,r,o,l){var u=o.coordinateSystem,c=n.getItemModel(a),h,f=parsePercent(c.get("x"),l.getWidth()),v=parsePercent(c.get("y"),l.getHeight());if(!isNaN(f)&&!isNaN(v))h=[f,v];else{if(o.getMarkerPosition)h=o.getMarkerPosition(n.getValues(n.dimensions,a));else{var d=u.dimensions,p=n.get(d[0],a),g=n.get(d[1],a);h=u.dataToPoint([p,g])}if(isCoordinateSystemType(u,"cartesian2d")){var y=u.getAxis("x"),_=u.getAxis("y"),d=u.dimensions;isInfinity$1(n.get(d[0],a))?h[0]=y.toGlobalCoord(y.getExtent()[r?0:1]):isInfinity$1(n.get(d[1],a))&&(h[1]=_.toGlobalCoord(_.getExtent()[r?0:1]))}isNaN(f)||(h[0]=f),isNaN(v)||(h[1]=v)}n.setItemLayout(a,h)}var MarkLineView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.updateTransform=function(r,o,l){o.eachSeries(function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,"markLine");if(c){var h=c.getData(),f=inner$3(c).from,v=inner$3(c).to;f.each(function(d){updateSingleMarkerEndLayout(f,d,!0,u,l),updateSingleMarkerEndLayout(v,d,!1,u,l)}),h.each(function(d){h.setItemLayout(d,[f.getItemLayout(d),v.getItemLayout(d)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},a.prototype.renderSeries=function(r,o,l,u){var c=r.coordinateSystem,h=r.id,f=r.getData(),v=this.markerGroupMap,d=v.get(h)||v.set(h,new LineDraw$1);this.group.add(d.group);var p=createList$1(c,r,o),g=p.from,y=p.to,_=p.line;inner$3(o).from=g,inner$3(o).to=y,o.setData(_);var S=o.get("symbol"),x=o.get("symbolSize"),T=o.get("symbolRotate"),A=o.get("symbolOffset");isArray$1(S)||(S=[S,S]),isArray$1(x)||(x=[x,x]),isArray$1(T)||(T=[T,T]),isArray$1(A)||(A=[A,A]),p.from.each(function(C){b(g,C,!0),b(y,C,!1)}),_.each(function(C){var E=_.getItemModel(C).getModel("lineStyle").getLineStyle();_.setItemLayout(C,[g.getItemLayout(C),y.getItemLayout(C)]),E.stroke==null&&(E.stroke=g.getItemVisual(C,"style").fill),_.setItemVisual(C,{fromSymbolKeepAspect:g.getItemVisual(C,"symbolKeepAspect"),fromSymbolOffset:g.getItemVisual(C,"symbolOffset"),fromSymbolRotate:g.getItemVisual(C,"symbolRotate"),fromSymbolSize:g.getItemVisual(C,"symbolSize"),fromSymbol:g.getItemVisual(C,"symbol"),toSymbolKeepAspect:y.getItemVisual(C,"symbolKeepAspect"),toSymbolOffset:y.getItemVisual(C,"symbolOffset"),toSymbolRotate:y.getItemVisual(C,"symbolRotate"),toSymbolSize:y.getItemVisual(C,"symbolSize"),toSymbol:y.getItemVisual(C,"symbol"),style:E})}),d.updateData(_),p.line.eachItemGraphicEl(function(C){getECData(C).dataModel=o,C.traverse(function(E){getECData(E).dataModel=o})});function b(C,E,w){var D=C.getItemModel(E);updateSingleMarkerEndLayout(C,E,w,r,u);var M=D.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=getVisualFromData(f,"color")),C.setItemVisual(E,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:retrieve2(D.get("symbolOffset",!0),A[w?0:1]),symbolRotate:retrieve2(D.get("symbolRotate",!0),T[w?0:1]),symbolSize:retrieve2(D.get("symbolSize"),x[w?0:1]),symbol:retrieve2(D.get("symbol",!0),S[w?0:1]),style:M})}this.markKeep(d),d.group.silent=o.get("silent")||r.get("silent")},a.type="markLine",a}(MarkerView$1);function createList$1(n,a,r){var o;n?o=map$1(n&&n.dimensions,function(v){var d=a.getData().getDimensionInfo(a.getData().mapDimension(v))||{};return extend(extend({},d),{name:v,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var l=new SeriesData$1(o,r),u=new SeriesData$1(o,r),c=new SeriesData$1([],r),h=map$1(r.get("data"),curry$1(markLineTransform,a,n,r));n&&(h=filter(h,curry$1(markLineFilter,n)));var f=createMarkerDimValueGetter(!!n,o);return l.initData(map$1(h,function(v){return v[0]}),null,f),u.initData(map$1(h,function(v){return v[1]}),null,f),c.initData(map$1(h,function(v){return v[2]})),c.hasItemOption=!0,{from:l,to:u,line:c}}const MarkLineView$1=MarkLineView;function install$d(n){n.registerComponentModel(MarkLineModel$1),n.registerComponentView(MarkLineView$1),n.registerPreprocessor(function(a){checkMarkerInSeries(a.series,"markLine")&&(a.markLine=a.markLine||{})})}var MarkAreaModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.createMarkerModelFromSeries=function(r,o,l){return new a(r,o,l)},a.type="markArea",a.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},a}(MarkerModel$1);const MarkAreaModel$1=MarkAreaModel;var inner$2=makeInner(),markAreaTransform=function(n,a,r,o){var l=o[0],u=o[1];if(!(!l||!u)){var c=dataTransform(n,l),h=dataTransform(n,u),f=c.coord,v=h.coord;f[0]=retrieve(f[0],-1/0),f[1]=retrieve(f[1],-1/0),v[0]=retrieve(v[0],1/0),v[1]=retrieve(v[1],1/0);var d=mergeAll([{},c,h]);return d.coord=[c.coord,h.coord],d.x0=c.x,d.y0=c.y,d.x1=h.x,d.y1=h.y,d}};function isInfinity(n){return!isNaN(n)&&!isFinite(n)}function ifMarkAreaHasOnlyDim(n,a,r,o){var l=1-n;return isInfinity(a[l])&&isInfinity(r[l])}function markAreaFilter(n,a){var r=a.coord[0],o=a.coord[1],l={coord:r,x:a.x0,y:a.y0},u={coord:o,x:a.x1,y:a.y1};return isCoordinateSystemType(n,"cartesian2d")?r&&o&&(ifMarkAreaHasOnlyDim(1,r,o)||ifMarkAreaHasOnlyDim(0,r,o))?!0:zoneFilter(n,l,u):dataFilter(n,l)||dataFilter(n,u)}function getSingleMarkerEndPoint(n,a,r,o,l){var u=o.coordinateSystem,c=n.getItemModel(a),h,f=parsePercent(c.get(r[0]),l.getWidth()),v=parsePercent(c.get(r[1]),l.getHeight());if(!isNaN(f)&&!isNaN(v))h=[f,v];else{if(o.getMarkerPosition){var d=n.getValues(["x0","y0"],a),p=n.getValues(["x1","y1"],a),g=u.clampData(d),y=u.clampData(p),_=[];r[0]==="x0"?_[0]=g[0]>y[0]?p[0]:d[0]:_[0]=g[0]>y[0]?d[0]:p[0],r[1]==="y0"?_[1]=g[1]>y[1]?p[1]:d[1]:_[1]=g[1]>y[1]?d[1]:p[1],h=o.getMarkerPosition(_,r,!0)}else{var S=n.get(r[0],a),x=n.get(r[1],a),T=[S,x];u.clampData&&u.clampData(T,T),h=u.dataToPoint(T,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var A=u.getAxis("x"),b=u.getAxis("y"),S=n.get(r[0],a),x=n.get(r[1],a);isInfinity(S)?h[0]=A.toGlobalCoord(A.getExtent()[r[0]==="x0"?0:1]):isInfinity(x)&&(h[1]=b.toGlobalCoord(b.getExtent()[r[1]==="y0"?0:1]))}isNaN(f)||(h[0]=f),isNaN(v)||(h[1]=v)}return h}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.updateTransform=function(r,o,l){o.eachSeries(function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,"markArea");if(c){var h=c.getData();h.each(function(f){var v=map$1(dimPermutations,function(p){return getSingleMarkerEndPoint(h,f,p,u,l)});h.setItemLayout(f,v);var d=h.getItemGraphicEl(f);d.setShape("points",v)})}},this)},a.prototype.renderSeries=function(r,o,l,u){var c=r.coordinateSystem,h=r.id,f=r.getData(),v=this.markerGroupMap,d=v.get(h)||v.set(h,{group:new Group$4});this.group.add(d.group),this.markKeep(d);var p=createList(c,r,o);o.setData(p),p.each(function(g){var y=map$1(dimPermutations,function(M){return getSingleMarkerEndPoint(p,g,M,r,u)}),_=c.getAxis("x").scale,S=c.getAxis("y").scale,x=_.getExtent(),T=S.getExtent(),A=[_.parse(p.get("x0",g)),_.parse(p.get("x1",g))],b=[S.parse(p.get("y0",g)),S.parse(p.get("y1",g))];asc$2(A),asc$2(b);var C=!(x[0]>A[1]||x[1]<A[0]||T[0]>b[1]||T[1]<b[0]),E=!C;p.setItemLayout(g,{points:y,allClipped:E});var w=p.getItemModel(g).getModel("itemStyle").getItemStyle(),D=getVisualFromData(f,"color");w.fill||(w.fill=D,isString(w.fill)&&(w.fill=modifyAlpha(w.fill,.4))),w.stroke||(w.stroke=D),p.setItemVisual(g,"style",w)}),p.diff(inner$2(d).data).add(function(g){var y=p.getItemLayout(g);if(!y.allClipped){var _=new Polygon$1({shape:{points:y.points}});p.setItemGraphicEl(g,_),d.group.add(_)}}).update(function(g,y){var _=inner$2(d).data.getItemGraphicEl(y),S=p.getItemLayout(g);S.allClipped?_&&d.group.remove(_):(_?updateProps$1(_,{shape:{points:S.points}},o,g):_=new Polygon$1({shape:{points:S.points}}),p.setItemGraphicEl(g,_),d.group.add(_))}).remove(function(g){var y=inner$2(d).data.getItemGraphicEl(g);d.group.remove(y)}).execute(),p.eachItemGraphicEl(function(g,y){var _=p.getItemModel(y),S=p.getItemVisual(y,"style");g.useStyle(p.getItemVisual(y,"style")),setLabelStyle(g,getLabelStatesModels(_),{labelFetcher:o,labelDataIndex:y,defaultText:p.getName(y)||"",inheritColor:isString(S.fill)?modifyAlpha(S.fill,1):"#000"}),setStatesStylesFromModel(g,_),toggleHoverEmphasis(g,null,null,_.get(["emphasis","disabled"])),getECData(g).dataModel=o}),inner$2(d).data=p,d.group.silent=o.get("silent")||r.get("silent")},a.type="markArea",a}(MarkerView$1);function createList(n,a,r){var o,l,u=["x0","y0","x1","y1"];if(n){var c=map$1(n&&n.dimensions,function(v){var d=a.getData(),p=d.getDimensionInfo(d.mapDimension(v))||{};return extend(extend({},p),{name:v,ordinalMeta:null})});l=map$1(u,function(v,d){return{name:v,type:c[d%2].type}}),o=new SeriesData$1(l,r)}else l=[{name:"value",type:"float"}],o=new SeriesData$1(l,r);var h=map$1(r.get("data"),curry$1(markAreaTransform,a,n,r));n&&(h=filter(h,curry$1(markAreaFilter,n)));var f=n?function(v,d,p,g){var y=v.coord[Math.floor(g/2)][g%2];return parseDataValue(y,l[g])}:function(v,d,p,g){return parseDataValue(v.value,l[g])};return o.initData(h,null,f),o.hasItemOption=!0,o}const MarkAreaView$1=MarkAreaView;function install$c(n){n.registerComponentModel(MarkAreaModel$1),n.registerComponentView(MarkAreaView$1),n.registerPreprocessor(function(a){checkMarkerInSeries(a.series,"markArea")&&(a.markArea=a.markArea||{})})}var getDefaultSelectorOptions=function(n,a){if(a==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(a==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.layoutMode={type:"box",ignoreSize:!0},r}return a.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l),r.selected=r.selected||{},this._updateSelector(r)},a.prototype.mergeOption=function(r,o){n.prototype.mergeOption.call(this,r,o),this._updateSelector(r)},a.prototype._updateSelector=function(r){var o=r.selector,l=this.ecModel;o===!0&&(o=r.selector=["all","inverse"]),isArray$1(o)&&each$f(o,function(u,c){isString(u)&&(u={type:u}),o[c]=merge(u,getDefaultSelectorOptions(l,u.type))})},a.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var o=!1,l=0;l<r.length;l++){var u=r[l].get("name");if(this.isSelected(u)){this.select(u),o=!0;break}}!o&&this.select(r[0].get("name"))}},a.prototype._updateData=function(r){var o=[],l=[];r.eachRawSeries(function(f){var v=f.name;l.push(v);var d;if(f.legendVisualProvider){var p=f.legendVisualProvider,g=p.getAllNames();r.isSeriesFiltered(f)||(l=l.concat(g)),g.length?o=o.concat(g):d=!0}else d=!0;d&&isNameSpecified(f)&&o.push(f.name)}),this._availableNames=l;var u=this.get("data")||o,c=createHashMap(),h=map$1(u,function(f){return(isString(f)||isNumber(f))&&(f={name:f}),c.get(f.name)?null:(c.set(f.name,!0),new Model$1(f,this,this.ecModel))},this);this._data=filter(h,function(f){return!!f})},a.prototype.getData=function(){return this._data},a.prototype.select=function(r){var o=this.option.selected,l=this.get("selectedMode");if(l==="single"){var u=this._data;each$f(u,function(c){o[c.get("name")]=!1})}o[r]=!0},a.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},a.prototype.toggleSelected=function(r){var o=this.option.selected;o.hasOwnProperty(r)||(o[r]=!0),this[o[r]?"unSelect":"select"](r)},a.prototype.allSelect=function(){var r=this._data,o=this.option.selected;each$f(r,function(l){o[l.get("name",!0)]=!0})},a.prototype.inverseSelect=function(){var r=this._data,o=this.option.selected;each$f(r,function(l){var u=l.get("name",!0);o.hasOwnProperty(u)||(o[u]=!0),o[u]=!o[u]})},a.prototype.isSelected=function(r){var o=this.option.selected;return!(o.hasOwnProperty(r)&&!o[r])&&indexOf(this._availableNames,r)>=0},a.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},a.type="legend.plain",a.dependencies=["series"],a.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},a}(ComponentModel$1);const LegendModel$1=LegendModel;var curry=curry$1,each$3=each$f,Group$1=Group$4,LegendView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.newlineDisabled=!1,r}return a.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},a.prototype.getContentGroup=function(){return this._contentGroup},a.prototype.getSelectorGroup=function(){return this._selectorGroup},a.prototype.render=function(r,o,l){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var c=r.get("align"),h=r.get("orient");(!c||c==="auto")&&(c=r.get("left")==="right"&&h==="vertical"?"right":"left");var f=r.get("selector",!0),v=r.get("selectorPosition",!0);f&&(!v||v==="auto")&&(v=h==="horizontal"?"end":"start"),this.renderInner(c,r,o,l,f,h,v);var d=r.getBoxLayoutParams(),p={width:l.getWidth(),height:l.getHeight()},g=r.get("padding"),y=getLayoutRect(d,p,g),_=this.layoutInner(r,c,y,u,f,v),S=getLayoutRect(defaults({width:_.width,height:_.height},d),p,g);this.group.x=S.x-_.x,this.group.y=S.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(_,r))}},a.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},a.prototype.renderInner=function(r,o,l,u,c,h,f){var v=this.getContentGroup(),d=createHashMap(),p=o.get("selectedMode"),g=[];l.eachRawSeries(function(y){!y.get("legendHoverLink")&&g.push(y.id)}),each$3(o.getData(),function(y,_){var S=y.get("name");if(!this.newlineDisabled&&(S===""||S===`
`)){var x=new Group$1;x.newline=!0,v.add(x);return}var T=l.getSeriesByName(S)[0];if(!d.get(S)){if(T){var A=T.getData(),b=A.getVisual("legendLineStyle")||{},C=A.getVisual("legendIcon"),E=A.getVisual("style"),w=this._createItem(T,S,_,y,o,r,b,E,C,p,u);w.on("click",curry(dispatchSelectAction,S,null,u,g)).on("mouseover",curry(dispatchHighlightAction,T.name,null,u,g)).on("mouseout",curry(dispatchDownplayAction,T.name,null,u,g)),d.set(S,!0)}else l.eachRawSeries(function(D){if(!d.get(S)&&D.legendVisualProvider){var M=D.legendVisualProvider;if(!M.containName(S))return;var P=M.indexOfName(S),L=M.getItemVisual(P,"style"),I=M.getItemVisual(P,"legendIcon"),R=parse(L.fill);R&&R[3]===0&&(R[3]=.2,L=extend(extend({},L),{fill:stringify(R,"rgba")}));var O=this._createItem(D,S,_,y,o,r,{},L,I,p,u);O.on("click",curry(dispatchSelectAction,null,S,u,g)).on("mouseover",curry(dispatchHighlightAction,null,S,u,g)).on("mouseout",curry(dispatchDownplayAction,null,S,u,g)),d.set(S,!0)}},this);({}).NODE_ENV!=="production"&&(d.get(S)||console.warn(S+" series not exists. Legend data should be same with series name or data name."))}},this),c&&this._createSelector(c,o,u,h,f)},a.prototype._createSelector=function(r,o,l,u,c){var h=this.getSelectorGroup();each$3(r,function(v){var d=v.type,p=new ZRText$1({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:d==="all"?"legendAllSelect":"legendInverseSelect"})}});h.add(p);var g=o.getModel("selectorLabel"),y=o.getModel(["emphasis","selectorLabel"]);setLabelStyle(p,{normal:g,emphasis:y},{defaultText:v.title}),enableHoverEmphasis(p)})},a.prototype._createItem=function(r,o,l,u,c,h,f,v,d,p,g){var y=r.visualDrawType,_=c.get("itemWidth"),S=c.get("itemHeight"),x=c.isSelected(o),T=u.get("symbolRotate"),A=u.get("symbolKeepAspect"),b=u.get("icon");d=b||d||"roundRect";var C=getLegendStyle(d,u,f,v,y,x,g),E=new Group$1,w=u.getModel("textStyle");if(isFunction(r.getLegendIcon)&&(!b||b==="inherit"))E.add(r.getLegendIcon({itemWidth:_,itemHeight:S,icon:d,iconRotate:T,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:A}));else{var D=b==="inherit"&&r.getData().getVisual("symbol")?T==="inherit"?r.getData().getVisual("symbolRotate"):T:0;E.add(getDefaultLegendIcon({itemWidth:_,itemHeight:S,icon:d,iconRotate:D,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:A}))}var M=h==="left"?_+5:-5,P=h,L=c.get("formatter"),I=o;isString(L)&&L?I=L.replace("{name}",o!=null?o:""):isFunction(L)&&(I=L(o));var R=x?w.getTextColor():u.get("inactiveColor");E.add(new ZRText$1({style:createTextStyle$1(w,{text:I,x:M,y:S/2,fill:R,align:P,verticalAlign:"middle"},{inheritColor:R})}));var O=new Rect$3({shape:E.getBoundingRect(),invisible:!0}),N=u.getModel("tooltip");return N.get("show")&&setTooltipConfig({el:O,componentModel:c,itemName:o,itemTooltipOption:N.option}),E.add(O),E.eachChild(function(V){V.silent=!0}),O.silent=!p,this.getContentGroup().add(E),enableHoverEmphasis(E),E.__legendDataIndex=l,E},a.prototype.layoutInner=function(r,o,l,u,c,h){var f=this.getContentGroup(),v=this.getSelectorGroup();box(r.get("orient"),f,r.get("itemGap"),l.width,l.height);var d=f.getBoundingRect(),p=[-d.x,-d.y];if(v.markRedraw(),f.markRedraw(),c){box("horizontal",v,r.get("selectorItemGap",!0));var g=v.getBoundingRect(),y=[-g.x,-g.y],_=r.get("selectorButtonGap",!0),S=r.getOrient().index,x=S===0?"width":"height",T=S===0?"height":"width",A=S===0?"y":"x";h==="end"?y[S]+=d[x]+_:p[S]+=g[x]+_,y[1-S]+=d[T]/2-g[T]/2,v.x=y[0],v.y=y[1],f.x=p[0],f.y=p[1];var b={x:0,y:0};return b[x]=d[x]+_+g[x],b[T]=Math.max(d[T],g[T]),b[A]=Math.min(0,g[A]+y[1-S]),b}else return f.x=p[0],f.y=p[1],this.group.getBoundingRect()},a.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},a.type="legend.plain",a}(ComponentView$1);function getLegendStyle(n,a,r,o,l,u,c){function h(x,T){x.lineWidth==="auto"&&(x.lineWidth=T.lineWidth>0?2:0),each$3(x,function(A,b){x[b]==="inherit"&&(x[b]=T[b])})}var f=a.getModel("itemStyle"),v=f.getItemStyle(),d=n.lastIndexOf("empty",0)===0?"fill":"stroke",p=f.getShallow("decal");v.decal=!p||p==="inherit"?o.decal:createOrUpdatePatternFromDecal(p,c),v.fill==="inherit"&&(v.fill=o[l]),v.stroke==="inherit"&&(v.stroke=o[d]),v.opacity==="inherit"&&(v.opacity=(l==="fill"?o:r).opacity),h(v,o);var g=a.getModel("lineStyle"),y=g.getLineStyle();if(h(y,r),v.fill==="auto"&&(v.fill=o.fill),v.stroke==="auto"&&(v.stroke=o.fill),y.stroke==="auto"&&(y.stroke=o.fill),!u){var _=a.get("inactiveBorderWidth"),S=v[d];v.lineWidth=_==="auto"?o.lineWidth>0&&S?2:0:v.lineWidth,v.fill=a.get("inactiveColor"),v.stroke=a.get("inactiveBorderColor"),y.stroke=g.get("inactiveColor"),y.lineWidth=g.get("inactiveWidth")}return{itemStyle:v,lineStyle:y}}function getDefaultLegendIcon(n){var a=n.icon||"roundRect",r=createSymbol$1(a,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return r.setStyle(n.itemStyle),r.rotation=(n.iconRotate||0)*Math.PI/180,r.setOrigin([n.itemWidth/2,n.itemHeight/2]),a.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function dispatchSelectAction(n,a,r,o){dispatchDownplayAction(n,a,r,o),r.dispatchAction({type:"legendToggleSelect",name:n!=null?n:a}),dispatchHighlightAction(n,a,r,o)}function isUseHoverLayer(n){for(var a=n.getZr().storage.getDisplayList(),r,o=0,l=a.length;o<l&&!(r=a[o].states.emphasis);)o++;return r&&r.hoverLayer}function dispatchHighlightAction(n,a,r,o){isUseHoverLayer(r)||r.dispatchAction({type:"highlight",seriesName:n,name:a,excludeSeriesId:o})}function dispatchDownplayAction(n,a,r,o){isUseHoverLayer(r)||r.dispatchAction({type:"downplay",seriesName:n,name:a,excludeSeriesId:o})}const LegendView$1=LegendView;function legendFilter(n){var a=n.findComponents({mainType:"legend"});a&&a.length&&n.filterSeries(function(r){for(var o=0;o<a.length;o++)if(!a[o].isSelected(r.name))return!1;return!0})}function legendSelectActionHandler(n,a,r){var o={},l=n==="toggleSelected",u;return r.eachComponent("legend",function(c){l&&u!=null?c[u?"select":"unSelect"](a.name):n==="allSelect"||n==="inverseSelect"?c[n]():(c[n](a.name),u=c.isSelected(a.name));var h=c.getData();each$f(h,function(f){var v=f.get("name");if(!(v===`
`||v==="")){var d=c.isSelected(v);o.hasOwnProperty(v)?o[v]=o[v]&&d:o[v]=d}})}),n==="allSelect"||n==="inverseSelect"?{selected:o}:{name:a.name,selected:o}}function installLegendAction(n){n.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),n.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),n.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(n){n.registerComponentModel(LegendModel$1),n.registerComponentView(LegendView$1),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),n.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(n)}var ScrollableLegendModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},a.prototype.init=function(r,o,l){var u=getLayoutParams(r);n.prototype.init.call(this,r,o,l),mergeAndNormalizeLayoutParams(this,r,u)},a.prototype.mergeOption=function(r,o){n.prototype.mergeOption.call(this,r,o),mergeAndNormalizeLayoutParams(this,this.option,r)},a.type="legend.scroll",a.defaultOption=inheritDefaultOption(LegendModel$1.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),a}(LegendModel$1);function mergeAndNormalizeLayoutParams(n,a,r){var o=n.getOrient(),l=[1,1];l[o.index]=0,mergeLayoutParam(a,r,{type:"box",ignoreSize:!!l})}const ScrollableLegendModel$1=ScrollableLegendModel;var Group=Group$4,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.newlineDisabled=!0,r._currentIndex=0,r}return a.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},a.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},a.prototype.renderInner=function(r,o,l,u,c,h,f){var v=this;n.prototype.renderInner.call(this,r,o,l,u,c,h,f);var d=this._controllerGroup,p=o.get("pageIconSize",!0),g=isArray$1(p)?p:[p,p];_("pagePrev",0);var y=o.getModel("pageTextStyle");d.add(new ZRText$1({name:"pageText",style:{text:"xx/xx",fill:y.getTextColor(),font:y.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),_("pageNext",1);function _(S,x){var T=S+"DataIndex",A=createIcon(o.get("pageIcons",!0)[o.getOrient().name][x],{onclick:bind$1(v._pageGo,v,T,o,u)},{x:-g[0]/2,y:-g[1]/2,width:g[0],height:g[1]});A.name=S,d.add(A)}},a.prototype.layoutInner=function(r,o,l,u,c,h){var f=this.getSelectorGroup(),v=r.getOrient().index,d=WH[v],p=XY[v],g=WH[1-v],y=XY[1-v];c&&box("horizontal",f,r.get("selectorItemGap",!0));var _=r.get("selectorButtonGap",!0),S=f.getBoundingRect(),x=[-S.x,-S.y],T=clone$4(l);c&&(T[d]=l[d]-S[d]-_);var A=this._layoutContentAndController(r,u,T,v,d,g,y,p);if(c){if(h==="end")x[v]+=A[d]+_;else{var b=S[d]+_;x[v]-=b,A[p]-=b}A[d]+=S[d]+_,x[1-v]+=A[y]+A[g]/2-S[g]/2,A[g]=Math.max(A[g],S[g]),A[y]=Math.min(A[y],S[y]+x[1-v]),f.x=x[0],f.y=x[1],f.markRedraw()}return A},a.prototype._layoutContentAndController=function(r,o,l,u,c,h,f,v){var d=this.getContentGroup(),p=this._containerGroup,g=this._controllerGroup;box(r.get("orient"),d,r.get("itemGap"),u?l.width:null,u?null:l.height),box("horizontal",g,r.get("pageButtonItemGap",!0));var y=d.getBoundingRect(),_=g.getBoundingRect(),S=this._showController=y[c]>l[c],x=[-y.x,-y.y];o||(x[u]=d[v]);var T=[0,0],A=[-_.x,-_.y],b=retrieve2(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(S){var C=r.get("pageButtonPosition",!0);C==="end"?A[u]+=l[c]-_[c]:T[u]+=_[c]+b}A[1-u]+=y[h]/2-_[h]/2,d.setPosition(x),p.setPosition(T),g.setPosition(A);var E={x:0,y:0};if(E[c]=S?l[c]:y[c],E[h]=Math.max(y[h],_[h]),E[f]=Math.min(0,_[f]+A[1-u]),p.__rectSize=l[c],S){var w={x:0,y:0};w[c]=Math.max(l[c]-_[c]-b,0),w[h]=E[h],p.setClipPath(new Rect$3({shape:w})),p.__rectSize=w[c]}else g.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(r);return D.pageIndex!=null&&updateProps$1(d,{x:D.contentPosition[0],y:D.contentPosition[1]},S?r:null),this._updatePageInfoView(r,D),E},a.prototype._pageGo=function(r,o,l){var u=this._getPageInfo(o)[r];u!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:o.id})},a.prototype._updatePageInfoView=function(r,o){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(d){var p=d+"DataIndex",g=o[p]!=null,y=l.childOfName(d);y&&(y.setStyle("fill",g?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),y.cursor=g?"pointer":"default")});var u=l.childOfName("pageText"),c=r.get("pageFormatter"),h=o.pageIndex,f=h!=null?h+1:0,v=o.pageCount;u&&c&&u.setStyle("text",isString(c)?c.replace("{current}",f==null?"":f+"").replace("{total}",v==null?"":v+""):c({current:f,total:v}))},a.prototype._getPageInfo=function(r){var o=r.get("scrollDataIndex",!0),l=this.getContentGroup(),u=this._containerGroup.__rectSize,c=r.getOrient().index,h=WH[c],f=XY[c],v=this._findTargetItemIndex(o),d=l.children(),p=d[v],g=d.length,y=g?1:0,_={contentPosition:[l.x,l.y],pageCount:y,pageIndex:y-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return _;var S=C(p);_.contentPosition[c]=-S.s;for(var x=v+1,T=S,A=S,b=null;x<=g;++x)b=C(d[x]),(!b&&A.e>T.s+u||b&&!E(b,T.s))&&(A.i>T.i?T=A:T=b,T&&(_.pageNextDataIndex==null&&(_.pageNextDataIndex=T.i),++_.pageCount)),A=b;for(var x=v-1,T=S,A=S,b=null;x>=-1;--x)b=C(d[x]),(!b||!E(A,b.s))&&T.i<A.i&&(A=T,_.pagePrevDataIndex==null&&(_.pagePrevDataIndex=T.i),++_.pageCount,++_.pageIndex),T=b;return _;function C(w){if(w){var D=w.getBoundingRect(),M=D[f]+w[f];return{s:M,e:M+D[h],i:w.__legendDataIndex}}}function E(w,D){return w.e>=D&&w.s<=D+u}},a.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var o,l=this.getContentGroup(),u;return l.eachChild(function(c,h){var f=c.__legendDataIndex;u==null&&f!=null&&(u=h),f===r&&(o=h)}),o!=null?o:u},a.type="legend.scroll",a}(LegendView$1);const ScrollableLegendView$1=ScrollableLegendView;function installScrollableLegendAction(n){n.registerAction("legendScroll","legendscroll",function(a,r){var o=a.scrollDataIndex;o!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:a},function(l){l.setScrollDataIndex(o)})})}function install$a(n){use(install$b),n.registerComponentModel(ScrollableLegendModel$1),n.registerComponentView(ScrollableLegendView$1),installScrollableLegendAction(n)}function install$9(n){use(install$b),use(install$a)}var InsideZoomModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="dataZoom.inside",a.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),a}(DataZoomModel$1);const InsideZoomModel$1=InsideZoomModel;var inner$1=makeInner();function setViewInfoToCoordSysRecord(n,a,r){inner$1(n).coordSysRecordMap.each(function(o){var l=o.dataZoomInfoMap.get(a.uid);l&&(l.getRange=r)})}function disposeCoordSysRecordIfNeeded(n,a){for(var r=inner$1(n).coordSysRecordMap,o=r.keys(),l=0;l<o.length;l++){var u=o[l],c=r.get(u),h=c.dataZoomInfoMap;if(h){var f=a.uid,v=h.get(f);v&&(h.removeKey(f),h.keys().length||disposeCoordSysRecord(r,c))}}}function disposeCoordSysRecord(n,a){if(a){n.removeKey(a.model.uid);var r=a.controller;r&&r.dispose()}}function createCoordSysRecord(n,a){var r={model:a,containsPoint:curry$1(containsPoint,a),dispatchAction:curry$1(dispatchAction,n),dataZoomInfoMap:null,controller:null},o=r.controller=new RoamController$1(n.getZr());return each$f(["pan","zoom","scrollMove"],function(l){o.on(l,function(u){var c=[];r.dataZoomInfoMap.each(function(h){if(!!u.isAvailableBehavior(h.model.option)){var f=(h.getRange||{})[l],v=f&&f(h.dzReferCoordSysInfo,r.model.mainType,r.controller,u);!h.model.get("disabled",!0)&&v&&c.push({dataZoomId:h.model.id,start:v[0],end:v[1]})}}),c.length&&r.dispatchAction(c)})}),r}function dispatchAction(n,a){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:a})}function containsPoint(n,a,r,o){return n.coordinateSystem.containPoint([r,o])}function mergeControllerParams(n){var a,r="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return n.each(function(u){var c=u.model,h=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;o[r+h]>o[r+a]&&(a=h),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:a,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(a,r){var o=inner$1(r),l=o.coordSysRecordMap||(o.coordSysRecordMap=createHashMap());l.each(function(u){u.dataZoomInfoMap=null}),a.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var c=collectReferCoordSysModelInfo(u);each$f(c.infoList,function(h){var f=h.model.uid,v=l.get(f)||l.set(f,createCoordSysRecord(r,h.model)),d=v.dataZoomInfoMap||(v.dataZoomInfoMap=createHashMap());d.set(u.uid,{dzReferCoordSysInfo:h,model:u,getRange:null})})}),l.each(function(u){var c=u.controller,h,f=u.dataZoomInfoMap;if(f){var v=f.keys()[0];v!=null&&(h=f.get(v))}if(!h){disposeCoordSysRecord(l,u);return}var d=mergeControllerParams(f);c.enable(d.controlType,d.opt),c.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",h.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return a.prototype.render=function(r,o,l){if(n.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),setViewInfoToCoordSysRecord(l,r,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},a.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},a.type="dataZoom.inside",a}(DataZoomView$1),getRangeHandlers={zoom:function(n,a,r,o){var l=this.range,u=l.slice(),c=n.axisModels[0];if(!!c){var h=getDirectionInfo[a](null,[o.originX,o.originY],c,r,n),f=(h.signal>0?h.pixelStart+h.pixelLength-h.pixel:h.pixel-h.pixelStart)/h.pixelLength*(u[1]-u[0])+u[0],v=Math.max(1/o.scale,0);u[0]=(u[0]-f)*v+f,u[1]=(u[1]-f)*v+f;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,d.minSpan,d.maxSpan),this.range=u,l[0]!==u[0]||l[1]!==u[1])return u}},pan:makeMover(function(n,a,r,o,l,u){var c=getDirectionInfo[o]([u.oldX,u.oldY],[u.newX,u.newY],a,l,r);return c.signal*(n[1]-n[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(n,a,r,o,l,u){var c=getDirectionInfo[o]([0,0],[u.scrollDelta,u.scrollDelta],a,l,r);return c.signal*(n[1]-n[0])*u.scrollDelta})};function makeMover(n){return function(a,r,o,l){var u=this.range,c=u.slice(),h=a.axisModels[0];if(!!h){var f=n(c,h,a,r,o,l);if(sliderMove(f,c,[0,100],"all"),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}}}var getDirectionInfo={grid:function(n,a,r,o,l){var u=r.axis,c={},h=l.model.coordinateSystem.getRect();return n=n||[0,0],u.dim==="x"?(c.pixel=a[0]-n[0],c.pixelLength=h.width,c.pixelStart=h.x,c.signal=u.inverse?1:-1):(c.pixel=a[1]-n[1],c.pixelLength=h.height,c.pixelStart=h.y,c.signal=u.inverse?-1:1),c},polar:function(n,a,r,o,l){var u=r.axis,c={},h=l.model.coordinateSystem,f=h.getRadiusAxis().getExtent(),v=h.getAngleAxis().getExtent();return n=n?h.pointToCoord(n):[0,0],a=h.pointToCoord(a),r.mainType==="radiusAxis"?(c.pixel=a[0]-n[0],c.pixelLength=f[1]-f[0],c.pixelStart=f[0],c.signal=u.inverse?1:-1):(c.pixel=a[1]-n[1],c.pixelLength=v[1]-v[0],c.pixelStart=v[0],c.signal=u.inverse?-1:1),c},singleAxis:function(n,a,r,o,l){var u=r.axis,c=l.model.coordinateSystem.getRect(),h={};return n=n||[0,0],u.orient==="horizontal"?(h.pixel=a[0]-n[0],h.pixelLength=c.width,h.pixelStart=c.x,h.signal=u.inverse?1:-1):(h.pixel=a[1]-n[1],h.pixelLength=c.height,h.pixelStart=c.y,h.signal=u.inverse?-1:1),h}};const InsideZoomView$1=InsideZoomView;function install$8(n){installCommon$1(n),n.registerComponentModel(InsideZoomModel$1),n.registerComponentView(InsideZoomView$1),installDataZoomRoamProcessor(n)}var SliderZoomModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.type="dataZoom.slider",a.layoutMode="box",a.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),a}(DataZoomModel$1);const SliderZoomModel$1=SliderZoomModel;var Rect=Rect$3,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._displayables={},r}return a.prototype.init=function(r,o){this.api=o,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},a.prototype.render=function(r,o,l,u){if(n.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},a.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},a.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Group$4;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(o),this._positionGroup()},a.prototype._resetLocation=function(){var r=this.dataZoomModel,o=this.api,l=r.get("brushSelect"),u=l?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),h={width:o.getWidth(),height:o.getHeight()},f=this._orient===HORIZONTAL?{right:h.width-c.x-c.width,top:h.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},v=getLayoutParams(r.option);each$f(["right","top","width","height"],function(p){v[p]==="ph"&&(v[p]=f[p])});var d=getLayoutRect(v,h);this._location={x:d.x,y:d.y},this._size=[d.width,d.height],this._orient===VERTICAL&&this._size.reverse()},a.prototype._positionGroup=function(){var r=this.group,o=this._location,l=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),c=u&&u.get("inverse"),h=this._displayables.sliderGroup,f=(this._dataShadowInfo||{}).otherAxisInverse;h.attr(l===HORIZONTAL&&!c?{scaleY:f?1:-1,scaleX:1}:l===HORIZONTAL&&c?{scaleY:f?1:-1,scaleX:-1}:l===VERTICAL&&!c?{scaleY:f?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:f?-1:1,scaleX:-1,rotation:Math.PI/2});var v=r.getBoundingRect([h]);r.x=o.x-v.x,r.y=o.y-v.y,r.markRedraw()},a.prototype._getViewExtent=function(){return[0,this._size[0]]},a.prototype._renderBackground=function(){var r=this.dataZoomModel,o=this._size,l=this._displayables.sliderGroup,u=r.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),h=this.api.getZr();u?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",h.on("mousemove",this._onBrush),h.on("mouseup",this._onBrushEnd)):(h.off("mousemove",this._onBrush),h.off("mouseup",this._onBrushEnd)),l.add(c)},a.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var o=this._size,l=this._shadowSize||[],u=r.series,c=u.getRawData(),h=u.getShadowDim&&u.getShadowDim(),f=h&&c.getDimensionInfo(h)?u.getShadowDim():r.otherDim;if(f==null)return;var v=this._shadowPolygonPts,d=this._shadowPolylinePts;if(c!==this._shadowData||f!==this._shadowDim||o[0]!==l[0]||o[1]!==l[1]){var p=c.getDataExtent(f),g=(p[1]-p[0])*.3;p=[p[0]-g,p[1]+g];var y=[0,o[1]],_=[0,o[0]],S=[[o[0],0],[0,0]],x=[],T=_[1]/(c.count()-1),A=0,b=Math.round(c.count()/o[0]),C;c.each([f],function(P,L){if(b>0&&L%b){A+=T;return}var I=P==null||isNaN(P)||P==="",R=I?0:linearMap$2(P,p,y,!0);I&&!C&&L?(S.push([S[S.length-1][0],0]),x.push([x[x.length-1][0],0])):!I&&C&&(S.push([A,0]),x.push([A,0])),S.push([A,R]),x.push([A,R]),A+=T,C=I}),v=this._shadowPolygonPts=S,d=this._shadowPolylinePts=x}this._shadowData=c,this._shadowDim=f,this._shadowSize=[o[0],o[1]];var E=this.dataZoomModel;function w(P){var L=E.getModel(P?"selectedDataBackground":"dataBackground"),I=new Group$4,R=new Polygon$1({shape:{points:v},segmentIgnoreThreshold:1,style:L.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),O=new Polyline$3({shape:{points:d},segmentIgnoreThreshold:1,style:L.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return I.add(R),I.add(O),I}for(var D=0;D<3;D++){var M=w(D===1);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}},a.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,o=r.get("showDataShadow");if(o!==!1){var l,u=this.ecModel;return r.eachTargetAxis(function(c,h){var f=r.getAxisProxy(c,h).getTargetSeriesModels();each$f(f,function(v){if(!l&&!(o!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,v.get("type"))<0)){var d=u.getComponent(getAxisMainType(c),h).axis,p=getOtherDim(c),g,y=v.coordinateSystem;p!=null&&y.getOtherAxis&&(g=y.getOtherAxis(d).inverse),p=v.getData().mapDimension(p),l={thisAxis:d,series:v,thisDim:c,otherDim:p,otherAxisInverse:g}}},this)},this),l}},a.prototype._renderHandle=function(){var r=this.group,o=this._displayables,l=o.handles=[null,null],u=o.handleLabels=[null,null],c=this._displayables.sliderGroup,h=this._size,f=this.dataZoomModel,v=this.api,d=f.get("borderRadius")||0,p=f.get("brushSelect"),g=o.filler=new Rect({silent:p,style:{fill:f.get("fillerColor")},textConfig:{position:"inside"}});c.add(g),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:h[0],height:h[1],r:d},style:{stroke:f.get("dataBackgroundColor")||f.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(b){var C=f.get("handleIcon");!symbolBuildProxies[C]&&C.indexOf("path://")<0&&C.indexOf("image://")<0&&(C="path://"+C,{}.NODE_ENV!=="production"&&deprecateLog("handleIcon now needs 'path://' prefix when using a path string"));var E=createSymbol$1(C,-1,0,2,2,null,!0);E.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,b),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var w=E.getBoundingRect(),D=f.get("handleSize");this._handleHeight=parsePercent(D,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,E.setStyle(f.getModel("handleStyle").getItemStyle()),E.style.strokeNoScale=!0,E.rectHover=!0,E.ensureState("emphasis").style=f.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(E);var M=f.get("handleColor");M!=null&&(E.style.fill=M),c.add(l[b]=E);var P=f.getModel("textStyle");r.add(u[b]=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle$1(P,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:P.getTextColor(),font:P.getFont()}),z2:10}))},this);var y=g;if(p){var _=parsePercent(f.get("moveHandleSize"),h[1]),S=o.moveHandle=new Rect$3({style:f.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:h[1]-.5,height:_}}),x=_*.8,T=o.moveHandleIcon=createSymbol$1(f.get("moveHandleIcon"),-x/2,-x/2,x,x,"#fff",!0);T.silent=!0,T.y=h[1]+_/2-.5,S.ensureState("emphasis").style=f.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var A=Math.min(h[1]/2,Math.max(_,10));y=o.moveZone=new Rect$3({invisible:!0,shape:{y:h[1]-A,height:_+A}}),y.on("mouseover",function(){v.enterEmphasis(S)}).on("mouseout",function(){v.leaveEmphasis(S)}),c.add(S),c.add(T),c.add(y)}y.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},a.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[linearMap$2(r[0],[0,100],o,!0),linearMap$2(r[1],[0,100],o,!0)]},a.prototype._updateInterval=function(r,o){var l=this.dataZoomModel,u=this._handleEnds,c=this._getViewExtent(),h=l.findRepresentativeAxisProxy().getMinMaxSpan(),f=[0,100];sliderMove(o,u,c,l.get("zoomLock")?"all":r,h.minSpan!=null?linearMap$2(h.minSpan,f,c,!0):null,h.maxSpan!=null?linearMap$2(h.maxSpan,f,c,!0):null);var v=this._range,d=this._range=asc$2([linearMap$2(u[0],c,f,!0),linearMap$2(u[1],c,f,!0)]);return!v||v[0]!==d[0]||v[1]!==d[1]},a.prototype._updateView=function(r){var o=this._displayables,l=this._handleEnds,u=asc$2(l.slice()),c=this._size;each$f([0,1],function(y){var _=o.handles[y],S=this._handleHeight;_.attr({scaleX:S/2,scaleY:S/2,x:l[y]+(y?-1:1),y:c[1]/2-S/2})},this),o.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:c[1]});var h={x:u[0],width:u[1]-u[0]};o.moveHandle&&(o.moveHandle.setShape(h),o.moveZone.setShape(h),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",h.x+h.width/2));for(var f=o.dataShadowSegs,v=[0,u[0],u[1],c[0]],d=0;d<f.length;d++){var p=f[d],g=p.getClipPath();g||(g=new Rect$3,p.setClipPath(g)),g.setShape({x:v[d],y:0,width:v[d+1]-v[d],height:c[1]})}this._updateDataInfo(r)},a.prototype._updateDataInfo=function(r){var o=this.dataZoomModel,l=this._displayables,u=l.handleLabels,c=this._orient,h=["",""];if(o.get("showDetail")){var f=o.findRepresentativeAxisProxy();if(f){var v=f.getAxisModel().axis,d=this._range,p=r?f.calculateDataWindow({start:d[0],end:d[1]}).valueWindow:f.getDataValueWindow();h=[this._formatLabel(p[0],v),this._formatLabel(p[1],v)]}}var g=asc$2(this._handleEnds.slice());y.call(this,0),y.call(this,1);function y(_){var S=getTransform$1(l.handles[_].parent,this.group),x=transformDirection(_===0?"right":"left",S),T=this._handleWidth/2+LABEL_GAP,A=applyTransform([g[_]+(_===0?-T:T),this._size[1]/2],S);u[_].setStyle({x:A[0],y:A[1],verticalAlign:c===HORIZONTAL?"middle":x,align:c===HORIZONTAL?x:"center",text:h[_]})}},a.prototype._formatLabel=function(r,o){var l=this.dataZoomModel,u=l.get("labelFormatter"),c=l.get("labelPrecision");(c==null||c==="auto")&&(c=o.getPixelPrecision());var h=r==null||isNaN(r)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(c,20));return isFunction(u)?u(r,h):isString(u)?u.replace("{value}",h):h},a.prototype._showDataInfo=function(r){r=this._dragging||r;var o=this._displayables,l=o.handleLabels;l[0].attr("invisible",!r),l[1].attr("invisible",!r),o.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](o.moveHandle,1)},a.prototype._onDragMove=function(r,o,l,u){this._dragging=!0,stop(u.event);var c=this._displayables.sliderGroup.getLocalTransform(),h=applyTransform([o,l],c,!0),f=this._updateInterval(r,h[0]),v=this.dataZoomModel.get("realtime");this._updateView(!v),f&&v&&this._dispatchZoomAction(!0)},a.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},a.prototype._onClickPanel=function(r){var o=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(l[0]<0||l[0]>o[0]||l[1]<0||l[1]>o[1])){var u=this._handleEnds,c=(u[0]+u[1])/2,h=this._updateInterval("all",l[0]-c);this._updateView(),h&&this._dispatchZoomAction(!1)}},a.prototype._onBrushStart=function(r){var o=r.offsetX,l=r.offsetY;this._brushStart=new Point$1(o,l),this._brushing=!0,this._brushStartTime=+new Date},a.prototype._onBrushEnd=function(r){if(!!this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var l=o.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(l.width)<5)){var c=this._getViewExtent(),h=[0,100];this._range=asc$2([linearMap$2(l.x,c,h,!0),linearMap$2(l.x+l.width,c,h,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},a.prototype._onBrush=function(r){this._brushing&&(stop(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},a.prototype._updateBrushRect=function(r,o){var l=this._displayables,u=this.dataZoomModel,c=l.brushRect;c||(c=l.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(c)),c.attr("ignore",!1);var h=this._brushStart,f=this._displayables.sliderGroup,v=f.transformCoordToLocal(r,o),d=f.transformCoordToLocal(h.x,h.y),p=this._size;v[0]=Math.max(Math.min(p[0],v[0]),0),c.setShape({x:d[0],y:0,width:v[0]-d[0],height:p[1]})},a.prototype._dispatchZoomAction=function(r){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?REALTIME_ANIMATION_CONFIG:null,start:o[0],end:o[1]})},a.prototype._findCoordRect=function(){var r,o=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!r&&o.length){var l=o[0].model.coordinateSystem;r=l.getRect&&l.getRect()}if(!r){var u=this.api.getWidth(),c=this.api.getHeight();r={x:u*.2,y:c*.2,width:u*.6,height:c*.6}}return r},a.type="dataZoom.slider",a}(DataZoomView$1);function getOtherDim(n){var a={x:"y",y:"x",radius:"angle",angle:"radius"};return a[n]}function getCursor$1(n){return n==="vertical"?"ns-resize":"ew-resize"}const SliderZoomView$1=SliderZoomView;function install$7(n){n.registerComponentModel(SliderZoomModel$1),n.registerComponentView(SliderZoomView$1),installCommon$1(n)}function install$6(n){use(install$8),use(install$7)}var visualDefault={get:function(n,a,r){var o=clone$4((defaultOption[n]||{})[a]);return r&&isArray$1(o)?o[o.length-1]:o}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const visualDefault$1=visualDefault;var mapVisual=VisualMapping$1.mapVisual,eachVisual=VisualMapping$1.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return a.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l)},a.prototype.optionUpdated=function(r,o){var l=this.option;!o&&replaceVisualOption(l,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},a.prototype.resetVisual=function(r){var o=this.stateList;r=bind$1(r,this),this.controllerVisuals=createVisualMappings(this.option.controller,o,r),this.targetVisuals=createVisualMappings(this.option.target,o,r)},a.prototype.getItemSymbol=function(){return null},a.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,o=[];return r==null||r==="all"?this.ecModel.eachSeries(function(l,u){o.push(u)}):o=normalizeToArray(r),o},a.prototype.eachTargetSeries=function(r,o){each$f(this.getTargetSeriesIndices(),function(l){var u=this.ecModel.getSeriesByIndex(l);u&&r.call(o,u)},this)},a.prototype.isTargetSeries=function(r){var o=!1;return this.eachTargetSeries(function(l){l===r&&(o=!0)}),o},a.prototype.formatValueText=function(r,o,l){var u=this.option,c=u.precision,h=this.dataBound,f=u.formatter,v;l=l||["<",">"],isArray$1(r)&&(r=r.slice(),v=!0);var d=o?r:v?[p(r[0]),p(r[1])]:p(r);if(isString(f))return f.replace("{value}",v?d[0]:d).replace("{value2}",v?d[1]:d);if(isFunction(f))return v?f(r[0],r[1]):f(r);if(v)return r[0]===h[0]?l[0]+" "+d[1]:r[1]===h[1]?l[1]+" "+d[0]:d[0]+" - "+d[1];return d;function p(g){return g===h[0]?"min":g===h[1]?"max":(+g).toFixed(Math.min(c,20))}},a.prototype.resetExtent=function(){var r=this.option,o=asc([r.min,r.max]);this._dataExtent=o},a.prototype.getDataDimensionIndex=function(r){var o=this.option.dimension;if(o!=null)return r.getDimensionIndex(o);for(var l=r.dimensions,u=l.length-1;u>=0;u--){var c=l[u],h=r.getDimensionInfo(c);if(!h.isCalculationCoord)return h.storeDimIndex}},a.prototype.getExtent=function(){return this._dataExtent.slice()},a.prototype.completeVisualOption=function(){var r=this.ecModel,o=this.option,l={inRange:o.inRange,outOfRange:o.outOfRange},u=o.target||(o.target={}),c=o.controller||(o.controller={});merge(u,l),merge(c,l);var h=this.isCategory();f.call(this,u),f.call(this,c),v.call(this,u,"inRange","outOfRange"),d.call(this,c);function f(p){isArray(o.color)&&!p.inRange&&(p.inRange={color:o.color.slice().reverse()}),p.inRange=p.inRange||{color:r.get("gradientColor")}}function v(p,g,y){var _=p[g],S=p[y];_&&!S&&(S=p[y]={},each$2(_,function(x,T){if(!!VisualMapping$1.isValidType(T)){var A=visualDefault$1.get(T,"inactive",h);A!=null&&(S[T]=A,T==="color"&&!S.hasOwnProperty("opacity")&&!S.hasOwnProperty("colorAlpha")&&(S.opacity=[0,0]))}}))}function d(p){var g=(p.inRange||{}).symbol||(p.outOfRange||{}).symbol,y=(p.inRange||{}).symbolSize||(p.outOfRange||{}).symbolSize,_=this.get("inactiveColor"),S=this.getItemSymbol(),x=S||"roundRect";each$2(this.stateList,function(T){var A=this.itemSize,b=p[T];b||(b=p[T]={color:h?_:[_]}),b.symbol==null&&(b.symbol=g&&clone$4(g)||(h?x:[x])),b.symbolSize==null&&(b.symbolSize=y&&clone$4(y)||(h?A[0]:[A[0],A[0]])),b.symbol=mapVisual(b.symbol,function(w){return w==="none"?x:w});var C=b.symbolSize;if(C!=null){var E=-1/0;eachVisual(C,function(w){w>E&&(E=w)}),b.symbolSize=mapVisual(C,function(w){return linearMap$1(w,[0,E],[0,A[0]],!0)})}},this)}},a.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},a.prototype.isCategory=function(){return!!this.option.categories},a.prototype.setSelected=function(r){},a.prototype.getSelected=function(){return null},a.prototype.getValueState=function(r){return null},a.prototype.getVisualMeta=function(r){return null},a.type="visualMap",a.dependencies=["series"],a.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},a}(ComponentModel$1);const VisualMapModel$1=VisualMapModel;var DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.optionUpdated=function(r,o){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},a.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=DEFAULT_BAR_BOUND[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=DEFAULT_BAR_BOUND[1])},a.prototype._resetRange=function(){var r=this.getExtent(),o=this.option.range;!o||o.auto?(r.auto=1,this.option.range=r):isArray$1(o)&&(o[0]>o[1]&&o.reverse(),o[0]=Math.max(o[0],r[0]),o[1]=Math.min(o[1],r[1]))},a.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(r){var o=this.option.controller[r].symbolSize;o&&o[0]!==o[1]&&(o[0]=o[1]/3)},this)},a.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},a.prototype.getSelected=function(){var r=this.getExtent(),o=asc$2((this.get("range")||[]).slice());return o[0]>r[1]&&(o[0]=r[1]),o[1]>r[1]&&(o[1]=r[1]),o[0]<r[0]&&(o[0]=r[0]),o[1]<r[0]&&(o[1]=r[0]),o},a.prototype.getValueState=function(r){var o=this.option.range,l=this.getExtent();return(o[0]<=l[0]||o[0]<=r)&&(o[1]>=l[1]||r<=o[1])?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(r){var o=[];return this.eachTargetSeries(function(l){var u=[],c=l.getData();c.each(this.getDataDimensionIndex(c),function(h,f){r[0]<=h&&h<=r[1]&&u.push(f)},this),o.push({seriesId:l.id,dataIndex:u})},this),o},a.prototype.getVisualMeta=function(r){var o=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function c(y,_){u.push({value:y,color:r(y,_)})}for(var h=0,f=0,v=l.length,d=o.length;f<d&&(!l.length||o[f]<=l[0]);f++)o[f]<l[h]&&c(o[f],"outOfRange");for(var p=1;h<v;h++,p=0)p&&u.length&&c(l[h],"outOfRange"),c(l[h],"inRange");for(var p=1;f<d;f++)(!l.length||l[l.length-1]<o[f])&&(p&&(u.length&&c(u[u.length-1].value,"outOfRange"),p=0),c(o[f],"outOfRange"));var g=u.length;return{stops:u,outerColors:[g?u[0].color:"transparent",g?u[g-1].color:"transparent"]}},a.type="visualMap.continuous",a.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),a}(VisualMapModel$1);function getColorStopValues(n,a,r){if(r[0]===r[1])return r.slice();for(var o=200,l=(r[1]-r[0])/o,u=r[0],c=[],h=0;h<=o&&u<r[1];h++)c.push(u),u+=l;return c.push(r[1]),c}const ContinuousModel$1=ContinuousModel;var VisualMapView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return a.prototype.init=function(r,o){this.ecModel=r,this.api=o},a.prototype.render=function(r,o,l,u){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,o,l,u)},a.prototype.renderBackground=function(r){var o=this.visualMapModel,l=normalizeCssArray(o.get("padding")||0),u=r.getBoundingRect();r.add(new Rect$3({z2:-1,silent:!0,shape:{x:u.x-l[3],y:u.y-l[0],width:u.width+l[3]+l[1],height:u.height+l[0]+l[2]},style:{fill:o.get("backgroundColor"),stroke:o.get("borderColor"),lineWidth:o.get("borderWidth")}}))},a.prototype.getControllerVisual=function(r,o,l){l=l||{};var u=l.forceState,c=this.visualMapModel,h={};if(o==="color"){var f=c.get("contentColor");h.color=f}function v(y){return h[y]}function d(y,_){h[y]=_}var p=c.controllerVisuals[u||c.getValueState(r)],g=VisualMapping$1.prepareVisualTypes(p);return each$f(g,function(y){var _=p[y];l.convertOpacityToAlpha&&y==="opacity"&&(y="colorAlpha",_=p.__alphaForOpacity),VisualMapping$1.dependsOn(y,o)&&_&&_.applyVisual(r,v,d)}),h[o]},a.prototype.positionGroup=function(r){var o=this.visualMapModel,l=this.api;positionElement(r,o.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},a.prototype.doRender=function(r,o,l,u){},a.type="visualMap",a}(ComponentView$1);const VisualMapView$1=VisualMapView;var paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(n,a,r){var o=n.option,l=o.align;if(l!=null&&l!=="auto")return l;for(var u={width:a.getWidth(),height:a.getHeight()},c=o.orient==="horizontal"?1:0,h=paramsSet[c],f=[0,null,10],v={},d=0;d<3;d++)v[paramsSet[1-c][d]]=f[d],v[h[d]]=d===2?r[0]:o[h[d]];var p=[["x","width",3],["y","height",0]][c],g=getLayoutRect(v,u,o.padding);return h[(g.margin[p[2]]||0)+g[p[0]]+g[p[1]]*.5<u[p[1]]*.5?0:1]}function makeHighDownBatch(n,a){return each$f(n||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(a?a.componentIndex:"")}),n}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return a.prototype.doRender=function(r,o,l,u){this._api=l,(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},a.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,o=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(o);var l=r.get("text");this._renderEndsText(o,l,0),this._renderEndsText(o,l,1),this._updateView(!0),this.renderBackground(o),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(o)},a.prototype._renderEndsText=function(r,o,l){if(!!o){var u=o[1-l];u=u!=null?u+"":"";var c=this.visualMapModel,h=c.get("textGap"),f=c.itemSize,v=this._shapes.mainGroup,d=this._applyTransform([f[0]/2,l===0?-h:f[1]+h],v),p=this._applyTransform(l===0?"bottom":"top",v),g=this._orient,y=this.visualMapModel.textStyleModel;this.group.add(new ZRText$1({style:createTextStyle$1(y,{x:d[0],y:d[1],verticalAlign:g==="horizontal"?"middle":p,align:g==="horizontal"?p:"center",text:u})}))}},a.prototype._renderBar=function(r){var o=this.visualMapModel,l=this._shapes,u=o.itemSize,c=this._orient,h=this._useHandle,f=getItemAlign(o,this.api,u),v=l.mainGroup=this._createBarGroup(f),d=new Group$4;v.add(d),d.add(l.outOfRange=createPolygon()),d.add(l.inRange=createPolygon(null,h?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),d.setClipPath(new Rect$3({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var p=o.textStyleModel.getTextRect("\u56FD"),g=mathMax(p.width,p.height);h&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(o,v,0,u,g,c),this._createHandle(o,v,1,u,g,c)),this._createIndicator(o,v,u,g,c),r.add(v)},a.prototype._createHandle=function(r,o,l,u,c,h){var f=bind$1(this._dragHandle,this,l,!1),v=bind$1(this._dragHandle,this,l,!0),d=parsePercent$1(r.get("handleSize"),u[0]),p=createSymbol$1(r.get("handleIcon"),-d/2,-d/2,d,d,null,!0),g=getCursor(this._orient);p.attr({cursor:g,draggable:!0,drift:f,ondragend:v,onmousemove:function(T){stop(T.event)}}),p.x=u[0]/2,p.useStyle(r.getModel("handleStyle").getItemStyle()),p.setStyle({strokeNoScale:!0,strokeFirst:!0}),p.style.lineWidth*=2,p.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(p,!0),o.add(p);var y=this.visualMapModel.textStyleModel,_=new ZRText$1({cursor:g,draggable:!0,drift:f,onmousemove:function(T){stop(T.event)},ondragend:v,style:createTextStyle$1(y,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var S=[d,0],x=this._shapes;x.handleThumbs[l]=p,x.handleLabelPoints[l]=S,x.handleLabels[l]=_},a.prototype._createIndicator=function(r,o,l,u,c){var h=parsePercent$1(r.get("indicatorSize"),l[0]),f=createSymbol$1(r.get("indicatorIcon"),-h/2,-h/2,h,h,null,!0);f.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var v=r.getModel("indicatorStyle").getItemStyle();if(f instanceof ZRImage$1){var d=f.style;f.useStyle(extend({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},v))}else f.useStyle(v);o.add(f);var p=this.visualMapModel.textStyleModel,g=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle$1(p,{x:0,y:0,text:""})});this.group.add(g);var y=[(c==="horizontal"?u/2:HOVER_LINK_OUT)+l[0]/2,0],_=this._shapes;_.indicator=f,_.indicatorLabel=g,_.indicatorLabelPoint=y,this._firstShowIndicator=!0},a.prototype._dragHandle=function(r,o,l,u){if(!!this._useHandle){if(this._dragging=!o,!o){var c=this._applyTransform([l,u],this._shapes.mainGroup,!0);this._updateInterval(r,c[1]),this._hideIndicator(),this._updateView()}o===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),o?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},a.prototype._resetInterval=function(){var r=this.visualMapModel,o=this._dataInterval=r.getSelected(),l=r.getExtent(),u=[0,r.itemSize[1]];this._handleEnds=[linearMap(o[0],l,u,!0),linearMap(o[1],l,u,!0)]},a.prototype._updateInterval=function(r,o){o=o||0;var l=this.visualMapModel,u=this._handleEnds,c=[0,l.itemSize[1]];sliderMove(o,u,c,r,0);var h=l.getExtent();this._dataInterval=[linearMap(u[0],c,h,!0),linearMap(u[1],c,h,!0)]},a.prototype._updateView=function(r){var o=this.visualMapModel,l=o.getExtent(),u=this._shapes,c=[0,o.itemSize[1]],h=r?c:this._handleEnds,f=this._createBarVisual(this._dataInterval,l,h,"inRange"),v=this._createBarVisual(l,l,c,"outOfRange");u.inRange.setStyle({fill:f.barColor}).setShape("points",f.barPoints),u.outOfRange.setStyle({fill:v.barColor}).setShape("points",v.barPoints),this._updateHandle(h,f)},a.prototype._createBarVisual=function(r,o,l,u){var c={forceState:u,convertOpacityToAlpha:!0},h=this._makeColorGradient(r,c),f=[this.getControllerVisual(r[0],"symbolSize",c),this.getControllerVisual(r[1],"symbolSize",c)],v=this._createBarPoints(l,f);return{barColor:new LinearGradient$1(0,0,0,1,h),barPoints:v,handlesColor:[h[0].color,h[h.length-1].color]}},a.prototype._makeColorGradient=function(r,o){var l=100,u=[],c=(r[1]-r[0])/l;u.push({color:this.getControllerVisual(r[0],"color",o),offset:0});for(var h=1;h<l;h++){var f=r[0]+c*h;if(f>r[1])break;u.push({color:this.getControllerVisual(f,"color",o),offset:h/l})}return u.push({color:this.getControllerVisual(r[1],"color",o),offset:1}),u},a.prototype._createBarPoints=function(r,o){var l=this.visualMapModel.itemSize;return[[l[0]-o[0],r[0]],[l[0],r[0]],[l[0],r[1]],[l[0]-o[1],r[1]]]},a.prototype._createBarGroup=function(r){var o=this._orient,l=this.visualMapModel.get("inverse");return new Group$4(o==="horizontal"&&!l?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:o==="horizontal"&&l?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:o==="vertical"&&!l?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},a.prototype._updateHandle=function(r,o){if(!!this._useHandle){var l=this._shapes,u=this.visualMapModel,c=l.handleThumbs,h=l.handleLabels,f=u.itemSize,v=u.getExtent();each$1([0,1],function(d){var p=c[d];p.setStyle("fill",o.handlesColor[d]),p.y=r[d];var g=linearMap(r[d],[0,f[1]],v,!0),y=this.getControllerVisual(g,"symbolSize");p.scaleX=p.scaleY=y/f[0],p.x=f[0]-y/2;var _=applyTransform(l.handleLabelPoints[d],getTransform$1(p,this.group));h[d].setStyle({x:_[0],y:_[1],text:u.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},a.prototype._showIndicator=function(r,o,l,u){var c=this.visualMapModel,h=c.getExtent(),f=c.itemSize,v=[0,f[1]],d=this._shapes,p=d.indicator;if(!!p){p.attr("invisible",!1);var g={convertOpacityToAlpha:!0},y=this.getControllerVisual(r,"color",g),_=this.getControllerVisual(r,"symbolSize"),S=linearMap(r,h,v,!0),x=f[0]-_/2,T={x:p.x,y:p.y};p.y=S,p.x=x;var A=applyTransform(d.indicatorLabelPoint,getTransform$1(p,this.group)),b=d.indicatorLabel;b.attr("invisible",!1);var C=this._applyTransform("left",d.mainGroup),E=this._orient,w=E==="horizontal";b.setStyle({text:(l||"")+c.formatValueText(o),verticalAlign:w?C:"middle",align:w?"center":C});var D={x,y:S,style:{fill:y}},M={style:{x:A[0],y:A[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var P={duration:100,easing:"cubicInOut",additive:!0};p.x=T.x,p.y=T.y,p.animateTo(D,P),b.animateTo(M,P)}else p.attr(D),b.attr(M);this._firstShowIndicator=!1;var L=this._shapes.handleLabels;if(L)for(var I=0;I<L.length;I++)this._api.enterBlur(L[I])}},a.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(o){if(r._hovering=!0,!r._dragging){var l=r.visualMapModel.itemSize,u=r._applyTransform([o.offsetX,o.offsetY],r._shapes.mainGroup,!0,!0);u[1]=mathMin(mathMax(0,u[1]),l[1]),r._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=l[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},a.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},a.prototype._doHoverLinkToSeries=function(r,o){var l=this.visualMapModel,u=l.itemSize;if(!!l.option.hoverLink){var c=[0,u[1]],h=l.getExtent();r=mathMin(mathMax(c[0],r),c[1]);var f=getHalfHoverLinkSize(l,h,c),v=[r-f,r+f],d=linearMap(r,c,h,!0),p=[linearMap(v[0],c,h,!0),linearMap(v[1],c,h,!0)];v[0]<c[0]&&(p[0]=-1/0),v[1]>c[1]&&(p[1]=1/0),o&&(p[0]===-1/0?this._showIndicator(d,p[1],"< ",f):p[1]===1/0?this._showIndicator(d,p[0],"> ",f):this._showIndicator(d,d,"\u2248 ",f));var g=this._hoverLinkDataIndices,y=[];(o||useHoverLinkOnHandle(l))&&(y=this._hoverLinkDataIndices=l.findTargetDataIndices(p));var _=compressBatches(g,y);this._dispatchHighDown("downplay",makeHighDownBatch(_[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(_[1],l))}},a.prototype._hoverLinkFromSeriesMouseOver=function(r){var o;if(findEventDispatcher(r.target,function(f){var v=getECData(f);if(v.dataIndex!=null)return o=v,!0},!0),!!o){var l=this.ecModel.getSeriesByIndex(o.seriesIndex),u=this.visualMapModel;if(!!u.isTargetSeries(l)){var c=l.getData(o.dataType),h=c.getStore().get(u.getDataDimensionIndex(c),o.dataIndex);isNaN(h)||this._showIndicator(h,h)}}},a.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var o=this._shapes.handleLabels;if(o)for(var l=0;l<o.length;l++)this._api.leaveBlur(o[l])},a.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(r,this.visualMapModel)),r.length=0},a.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},a.prototype._applyTransform=function(r,o,l,u){var c=getTransform$1(o,u?null:this.group);return isArray$1(r)?applyTransform(r,c,l):transformDirection(r,c,l)},a.prototype._dispatchHighDown=function(r,o){o&&o.length&&this.api.dispatchAction({type:r,batch:o})},a.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},a.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},a.type="visualMap.continuous",a}(VisualMapView$1);function createPolygon(n,a,r,o){return new Polygon$1({shape:{points:n},draggable:!!r,cursor:a,drift:r,onmousemove:function(l){stop(l.event)},ondragend:o})}function getHalfHoverLinkSize(n,a,r){var o=HOVER_LINK_SIZE/2,l=n.get("hoverLinkDataSize");return l&&(o=linearMap(l,a,r,!0)/2),o}function useHoverLinkOnHandle(n){var a=n.get("hoverLinkOnHandle");return!!(a==null?n.get("realtime"):a)}function getCursor(n){return n==="vertical"?"ns-resize":"ew-resize"}const ContinuousView$1=ContinuousView;var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(n,a){a.eachComponent({mainType:"visualMap",query:n},function(r){r.setSelected(n.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(n,a){var r=[];return a.eachComponent("visualMap",function(o){var l=n.pipelineContext;!o.isTargetSeries(n)||l&&l.large||r.push(incrementalApplyVisual(o.stateList,o.targetVisuals,bind$1(o.getValueState,o),o.getDataDimensionIndex(n.getData())))}),r}},{createOnAllSeries:!0,reset:function(n,a){var r=n.getData(),o=[];a.eachComponent("visualMap",function(l){if(l.isTargetSeries(n)){var u=l.getVisualMeta(bind$1(getColorVisual,null,n,l))||{stops:[],outerColors:[]},c=l.getDataDimensionIndex(r);c>=0&&(u.dimension=c,o.push(u))}}),n.getData().setVisual("visualMeta",o)}}];function getColorVisual(n,a,r,o){for(var l=a.targetVisuals[o],u=VisualMapping$1.prepareVisualTypes(l),c={color:getVisualFromData(n.getData(),"color")},h=0,f=u.length;h<f;h++){var v=u[h],d=l[v==="opacity"?"__alphaForOpacity":v];d&&d.applyVisual(r,p,g)}return c.color;function p(y){return c[y]}function g(y,_){c[y]=_}}var each=each$f;function visualMapPreprocessor(n){var a=n&&n.visualMap;isArray$1(a)||(a=a?[a]:[]),each(a,function(r){if(!!r){has(r,"splitList")&&!has(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var o=r.pieces;o&&isArray$1(o)&&each(o,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(n,a){return n&&n.hasOwnProperty&&n.hasOwnProperty(a)}var installed=!1;function installCommon(n){installed||(installed=!0,n.registerSubTypeDefaulter("visualMap",function(a){return!a.categories&&(!(a.pieces?a.pieces.length>0:a.splitNumber>0)||a.calculable)?"continuous":"piecewise"}),n.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(a){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,a)}),n.registerPreprocessor(visualMapPreprocessor))}function install$5(n){n.registerComponentModel(ContinuousModel$1),n.registerComponentView(ContinuousView$1),installCommon(n)}var PiecewiseModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r._pieceList=[],r}return a.prototype.optionUpdated=function(r,o){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(r,o);var u=this.option.categories;this.resetVisual(function(c,h){l==="categories"?(c.mappingMethod="category",c.categories=clone$4(u)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(f){return f=clone$4(f),h!=="inRange"&&(f.visual=null),f}))})},a.prototype.completeVisualOption=function(){var r=this.option,o={},l=VisualMapping$1.listVisualTypes(),u=this.isCategory();each$f(r.pieces,function(h){each$f(l,function(f){h.hasOwnProperty(f)&&(o[f]=1)})}),each$f(o,function(h,f){var v=!1;each$f(this.stateList,function(d){v=v||c(r,d,f)||c(r.target,d,f)},this),!v&&each$f(this.stateList,function(d){(r[d]||(r[d]={}))[f]=visualDefault$1.get(f,d==="inRange"?"active":"inactive",u)})},this);function c(h,f,v){return h&&h[f]&&h[f].hasOwnProperty(v)}n.prototype.completeVisualOption.apply(this,arguments)},a.prototype._resetSelected=function(r,o){var l=this.option,u=this._pieceList,c=(o?l:r).selected||{};if(l.selected=c,each$f(u,function(f,v){var d=this.getSelectedMapKey(f);c.hasOwnProperty(d)||(c[d]=!0)},this),l.selectedMode==="single"){var h=!1;each$f(u,function(f,v){var d=this.getSelectedMapKey(f);c[d]&&(h?c[d]=!1:h=!0)},this)}},a.prototype.getItemSymbol=function(){return this.get("itemSymbol")},a.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},a.prototype.getPieceList=function(){return this._pieceList},a.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},a.prototype.setSelected=function(r){this.option.selected=clone$4(r)},a.prototype.getValueState=function(r){var o=VisualMapping$1.findPieceIndex(r,this._pieceList);return o!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[o])]?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(r){var o=[],l=this._pieceList;return this.eachTargetSeries(function(u){var c=[],h=u.getData();h.each(this.getDataDimensionIndex(h),function(f,v){var d=VisualMapping$1.findPieceIndex(f,l);d===r&&c.push(v)},this),o.push({seriesId:u.id,dataIndex:c})},this),o},a.prototype.getRepresentValue=function(r){var o;if(this.isCategory())o=r.value;else if(r.value!=null)o=r.value;else{var l=r.interval||[];o=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return o},a.prototype.getVisualMeta=function(r){if(this.isCategory())return;var o=[],l=["",""],u=this;function c(d,p){var g=u.getRepresentValue({interval:d});p||(p=u.getValueState(g));var y=r(g,p);d[0]===-1/0?l[0]=y:d[1]===1/0?l[1]=y:o.push({value:d[0],color:y},{value:d[1],color:y})}var h=this._pieceList.slice();if(!h.length)h.push({interval:[-1/0,1/0]});else{var f=h[0].interval[0];f!==-1/0&&h.unshift({interval:[-1/0,f]}),f=h[h.length-1].interval[1],f!==1/0&&h.push({interval:[f,1/0]})}var v=-1/0;return each$f(h,function(d){var p=d.interval;p&&(p[0]>v&&c([v,p[0]],"outOfRange"),c(p.slice()),v=p[1])},this),{stops:o,outerColors:l}},a.type="visualMap.piecewise",a.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),a}(VisualMapModel$1),resetMethods={splitNumber:function(n){var a=this.option,r=Math.min(a.precision,20),o=this.getExtent(),l=a.splitNumber;l=Math.max(parseInt(l,10),1),a.splitNumber=l;for(var u=(o[1]-o[0])/l;+u.toFixed(r)!==u&&r<5;)r++;a.precision=r,u=+u.toFixed(r),a.minOpen&&n.push({interval:[-1/0,o[0]],close:[0,0]});for(var c=0,h=o[0];c<l;h+=u,c++){var f=c===l-1?o[1]:h+u;n.push({interval:[h,f],close:[1,1]})}a.maxOpen&&n.push({interval:[o[1],1/0],close:[0,0]}),reformIntervals(n),each$f(n,function(v,d){v.index=d,v.text=this.formatValueText(v.interval)},this)},categories:function(n){var a=this.option;each$f(a.categories,function(r){n.push({text:this.formatValueText(r,!0),value:r})},this),normalizeReverse(a,n)},pieces:function(n){var a=this.option;each$f(a.pieces,function(r,o){isObject$3(r)||(r={value:r});var l={text:"",index:o};if(r.label!=null&&(l.text=r.label),r.hasOwnProperty("value")){var u=l.value=r.value;l.interval=[u,u],l.close=[1,1]}else{for(var c=l.interval=[],h=l.close=[0,0],f=[1,0,1],v=[-1/0,1/0],d=[],p=0;p<2;p++){for(var g=[["gte","gt","min"],["lte","lt","max"]][p],y=0;y<3&&c[p]==null;y++)c[p]=r[g[y]],h[p]=f[y],d[p]=y===2;c[p]==null&&(c[p]=v[p])}d[0]&&c[1]===1/0&&(h[0]=0),d[1]&&c[0]===-1/0&&(h[1]=0),{}.NODE_ENV!=="production"&&c[0]>c[1]&&console.warn("Piece "+o+"is illegal: "+c+" lower bound should not greater then uppper bound."),c[0]===c[1]&&h[0]&&h[1]&&(l.value=c[0])}l.visual=VisualMapping$1.retrieveVisuals(r),n.push(l)},this),normalizeReverse(a,n),reformIntervals(n),each$f(n,function(r){var o=r.close,l=[["<","\u2264"][o[1]],[">","\u2265"][o[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,l)},this)}};function normalizeReverse(n,a){var r=n.inverse;(n.orient==="vertical"?!r:r)&&a.reverse()}const PiecewiseModel$1=PiecewiseModel;var PiecewiseVisualMapView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type=a.type,r}return a.prototype.doRender=function(){var r=this.group;r.removeAll();var o=this.visualMapModel,l=o.get("textGap"),u=o.textStyleModel,c=u.getFont(),h=u.getTextColor(),f=this._getItemAlign(),v=o.itemSize,d=this._getViewData(),p=d.endsText,g=retrieve(o.get("showLabel",!0),!p);p&&this._renderEndsText(r,p[0],v,g,f),each$f(d.viewPieceList,function(y){var _=y.piece,S=new Group$4;S.onclick=bind$1(this._onItemClick,this,_),this._enableHoverLink(S,y.indexInModelPieceList);var x=o.getRepresentValue(_);if(this._createItemSymbol(S,x,[0,0,v[0],v[1]]),g){var T=this.visualMapModel.getValueState(x);S.add(new ZRText$1({style:{x:f==="right"?-l:v[0]+l,y:v[1]/2,text:_.text,verticalAlign:"middle",align:f,font:c,fill:h,opacity:T==="outOfRange"?.5:1}}))}r.add(S)},this),p&&this._renderEndsText(r,p[1],v,g,f),box(o.get("orient"),r,o.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},a.prototype._enableHoverLink=function(r,o){var l=this;r.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(c){var h=l.visualMapModel;h.option.hoverLink&&l.api.dispatchAction({type:c,batch:makeHighDownBatch(h.findTargetDataIndices(o),h)})}},a.prototype._getItemAlign=function(){var r=this.visualMapModel,o=r.option;if(o.orient==="vertical")return getItemAlign(r,this.api,r.itemSize);var l=o.align;return(!l||l==="auto")&&(l="left"),l},a.prototype._renderEndsText=function(r,o,l,u,c){if(!!o){var h=new Group$4,f=this.visualMapModel.textStyleModel;h.add(new ZRText$1({style:createTextStyle$1(f,{x:u?c==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:u?c:"center",text:o})})),r.add(h)}},a.prototype._getViewData=function(){var r=this.visualMapModel,o=map$1(r.getPieceList(),function(h,f){return{piece:h,indexInModelPieceList:f}}),l=r.get("text"),u=r.get("orient"),c=r.get("inverse");return(u==="horizontal"?c:!c)?o.reverse():l&&(l=l.slice().reverse()),{viewPieceList:o,endsText:l}},a.prototype._createItemSymbol=function(r,o,l){r.add(createSymbol$1(this.getControllerVisual(o,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(o,"color")))},a.prototype._onItemClick=function(r){var o=this.visualMapModel,l=o.option,u=l.selectedMode;if(!!u){var c=clone$4(l.selected),h=o.getSelectedMapKey(r);u==="single"||u===!0?(c[h]=!0,each$f(c,function(f,v){c[v]=v===h})):c[h]=!c[h],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},a.type="visualMap.piecewise",a}(VisualMapView$1);const PiecewiseView=PiecewiseVisualMapView;function install$4(n){n.registerComponentModel(PiecewiseModel$1),n.registerComponentView(PiecewiseView),installCommon(n)}function install$3(n){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(n,a){var r=n.getModel("aria");if(!r.get("enabled"))return;var o=clone$4(DEFAULT_OPTION);merge(o.label,n.getLocaleModel().get("aria"),!1),merge(r.option,o,!1),l(),u();function l(){var v=r.getModel("decal"),d=v.get("show");if(d){var p=createHashMap();n.eachSeries(function(g){if(!g.isColorBySeries()){var y=p.get(g.type);y||(y={},p.set(g.type,y)),inner(g).scope=y}}),n.eachRawSeries(function(g){if(n.isSeriesFiltered(g))return;if(isFunction(g.enableAriaDecal)){g.enableAriaDecal();return}var y=g.getData();if(g.isColorBySeries()){var A=getDecalFromPalette(g.ecModel,g.name,decalPaletteScope,n.getSeriesCount()),b=y.getVisual("decal");y.setVisual("decal",C(b,A))}else{var _=g.getRawData(),S={},x=inner(g).scope;y.each(function(E){var w=y.getRawIndex(E);S[w]=E});var T=_.count();_.each(function(E){var w=S[E],D=_.getName(E)||E+"",M=getDecalFromPalette(g.ecModel,D,x,T),P=y.getItemVisual(w,"decal");y.setItemVisual(w,"decal",C(P,M))})}function C(E,w){var D=E?extend(extend({},w),E):w;return D.dirty=!0,D}})}}function u(){var v=n.getLocaleModel().get("aria"),d=r.getModel("label");if(d.option=defaults(d.option,v),!!d.get("enabled")){var p=a.getZr().dom;if(d.get("description")){p.setAttribute("aria-label",d.get("description"));return}var g=n.getSeriesCount(),y=d.get(["data","maxCount"])||10,_=d.get(["series","maxCount"])||10,S=Math.min(g,_),x;if(!(g<1)){var T=h();if(T){var A=d.get(["general","withTitle"]);x=c(A,{title:T})}else x=d.get(["general","withoutTitle"]);var b=[],C=g>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);x+=c(C,{seriesCount:g}),n.eachSeries(function(M,P){if(P<S){var L=void 0,I=M.get("name"),R=I?"withName":"withoutName";L=g>1?d.get(["series","multiple",R]):d.get(["series","single",R]),L=c(L,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:f(M.subType)});var O=M.getData();if(O.count()>y){var N=d.get(["data","partialData"]);L+=c(N,{displayCnt:y})}else L+=d.get(["data","allData"]);for(var V=d.get(["data","separator","middle"]),B=d.get(["data","separator","end"]),G=[],F=0;F<O.count();F++)if(F<y){var z=O.getName(F),H=O.getValues(F),U=d.get(["data",z?"withName":"withoutName"]);G.push(c(U,{name:z,value:H.join(V)}))}L+=G.join(V)+B,b.push(L)}});var E=d.getModel(["series","multiple","separator"]),w=E.get("middle"),D=E.get("end");x+=b.join(w)+D,p.setAttribute("aria-label",x)}}}function c(v,d){if(!isString(v))return v;var p=v;return each$f(d,function(g,y){p=p.replace(new RegExp("\\{\\s*"+y+"\\s*\\}","g"),g)}),p}function h(){var v=n.get("title");return v&&v.length&&(v=v[0]),v&&v.text}function f(v){return n.getLocaleModel().get(["series","typeNames"])[v]||"\u81EA\u5B9A\u4E49\u56FE"}}function ariaPreprocessor(n){if(!(!n||!n.aria)){var a=n.aria;a.show!=null&&(a.enabled=a.show),a.label=a.label||{},each$f(["description","general","series","data"],function(r){a[r]!=null&&(a.label[r]=a[r])})}}function install$2(n){n.registerPreprocessor(ariaPreprocessor),n.registerVisual(n.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function n(a){var r=this._condVal=isString(a)?new RegExp(a):isRegExp(a)?a:null;if(r==null){var o="";({}).NODE_ENV!=="production"&&(o=makePrintable("Illegal regexp",a,"in")),throwError(o)}}return n.prototype.evaluate=function(a){var r=typeof a;return isString(r)?this._condVal.test(a):isNumber(r)?this._condVal.test(a+""):!1},n}(),ConstConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),AndConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var a=this.children,r=0;r<a.length;r++)if(!a[r].evaluate())return!1;return!0},n}(),OrConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var a=this.children,r=0;r<a.length;r++)if(a[r].evaluate())return!0;return!1},n}(),NotConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),RelationalConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var a=!!this.valueParser,r=this.getValue,o=r(this.valueGetterParam),l=a?this.valueParser(o):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(a?l:o))return!1;return!0},n}();function parseOption(n,a){if(n===!0||n===!1){var r=new ConstConditionInternal;return r.value=n,r}var o="";return isObjectNotArray(n)||({}.NODE_ENV!=="production"&&(o=makePrintable("Illegal config. Expect a plain object but actually",n)),throwError(o)),n.and?parseAndOrOption("and",n,a):n.or?parseAndOrOption("or",n,a):n.not?parseNotOption(n,a):parseRelationalOption(n,a)}function parseAndOrOption(n,a,r){var o=a[n],l="";({}).NODE_ENV!=="production"&&(l=makePrintable('"and"/"or" condition should only be `'+n+": [...]` and must not be empty array.","Illegal condition:",a)),isArray$1(o)||throwError(l),o.length||throwError(l);var u=n==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(o,function(c){return parseOption(c,r)}),u.children.length||throwError(l),u}function parseNotOption(n,a){var r=n.not,o="";({}).NODE_ENV!=="production"&&(o=makePrintable('"not" condition should only be `not: {}`.',"Illegal condition:",n)),isObjectNotArray(r)||throwError(o);var l=new NotConditionInternal;return l.child=parseOption(r,a),l.child||throwError(o),l}function parseRelationalOption(n,a){for(var r="",o=a.prepareGetValue(n),l=[],u=keys(n),c=n.parser,h=c?getRawValueParser(c):null,f=0;f<u.length;f++){var v=u[f];if(!(v==="parser"||a.valueGetterAttrMap.get(v))){var d=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,v)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[v]:v,p=n[v],g=h?h(p):p,y=createFilterComparator(d,g)||d==="reg"&&new RegExpEvaluator(g);y||({}.NODE_ENV!=="production"&&(r=makePrintable('Illegal relational operation: "'+v+'" in condition:',n)),throwError(r)),l.push(y)}}l.length||({}.NODE_ENV!=="production"&&(r=makePrintable("Relational condition must have at least one operator.","Illegal condition:",n)),throwError(r));var _=new RelationalConditionInternal;return _.valueGetterParam=o,_.valueParser=h,_.getValue=a.getValue,_.subCondList=l,_}function isObjectNotArray(n){return isObject$3(n)&&!isArrayLike(n)}var ConditionalExpressionParsed=function(){function n(a,r){this._cond=parseOption(a,r)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function parseConditionalExpression(n,a){return new ConditionalExpressionParsed(n,a)}var filterTransform={type:"echarts:filter",transform:function(n){for(var a=n.upstream,r,o=parseConditionalExpression(n.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(h){var f="",v=h.dimension;hasOwn(h,"dimension")||({}.NODE_ENV!=="production"&&(f=makePrintable('Relation condition must has prop "dimension" specified.',"Illegal condition:",h)),throwError(f));var d=a.getDimensionInfo(v);return d||({}.NODE_ENV!=="production"&&(f=makePrintable("Can not find dimension info via: "+v+`.
`,"Existing dimensions: ",a.cloneAllDimensionInfo(),`.
`,"Illegal condition:",h,`.
`)),throwError(f)),{dimIdx:d.index}},getValue:function(h){return a.retrieveValueFromItem(r,h.dimIdx)}}),l=[],u=0,c=a.count();u<c;u++)r=a.getRawDataItem(u),o.evaluate()&&l.push(r);return{data:l}}},sampleLog="";({}).NODE_ENV!=="production"&&(sampleLog=["Valid config is like:",'{ dimension: "age", order: "asc" }','or [{ dimension: "age", order: "asc"], { dimension: "date", order: "desc" }]'].join(" "));var sortTransform={type:"echarts:sort",transform:function(n){var a=n.upstream,r=n.config,o="",l=normalizeToArray(r);l.length||({}.NODE_ENV!=="production"&&(o="Empty `config` in sort transform."),throwError(o));var u=[];each$f(l,function(d){var p=d.dimension,g=d.order,y=d.parser,_=d.incomparable;if(p==null&&({}.NODE_ENV!=="production"&&(o='Sort transform config must has "dimension" specified.'+sampleLog),throwError(o)),g!=="asc"&&g!=="desc"&&({}.NODE_ENV!=="production"&&(o='Sort transform config must has "order" specified.'+sampleLog),throwError(o)),_&&_!=="min"&&_!=="max"){var S="";({}).NODE_ENV!=="production"&&(S='incomparable must be "min" or "max" rather than "'+_+'".'),throwError(S)}if(g!=="asc"&&g!=="desc"){var x="";({}).NODE_ENV!=="production"&&(x='order must be "asc" or "desc" rather than "'+g+'".'),throwError(x)}var T=a.getDimensionInfo(p);T||({}.NODE_ENV!=="production"&&(o=makePrintable("Can not find dimension info via: "+p+`.
`,"Existing dimensions: ",a.cloneAllDimensionInfo(),`.
`,"Illegal config:",d,`.
`)),throwError(o));var A=y?getRawValueParser(y):null;y&&!A&&({}.NODE_ENV!=="production"&&(o=makePrintable("Invalid parser name "+y+`.
`,"Illegal config:",d,`.
`)),throwError(o)),u.push({dimIdx:T.index,parser:A,comparator:new SortOrderComparator(g,_)})});var c=a.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&({}.NODE_ENV!=="production"&&(o='sourceFormat "'+c+'" is not supported yet'),throwError(o));for(var h=[],f=0,v=a.count();f<v;f++)h.push(a.getRawDataItem(f));return h.sort(function(d,p){for(var g=0;g<u.length;g++){var y=u[g],_=a.retrieveValueFromItem(d,y.dimIdx),S=a.retrieveValueFromItem(p,y.dimIdx);y.parser&&(_=y.parser(_),S=y.parser(S));var x=y.comparator.evaluate(_,S);if(x!==0)return x}return 0}),{data:h}}};function install$1(n){n.registerTransform(filterTransform),n.registerTransform(sortTransform)}var DatasetModel=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="dataset",r}return a.prototype.init=function(r,o,l){n.prototype.init.call(this,r,o,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},a.prototype.mergeOption=function(r,o){n.prototype.mergeOption.call(this,r,o),disableTransformOptionMerge(this)},a.prototype.optionUpdated=function(){this._sourceManager.dirty()},a.prototype.getSourceManager=function(){return this._sourceManager},a.type="dataset",a.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},a}(ComponentModel$1),DatasetView=function(n){__extends(a,n);function a(){var r=n!==null&&n.apply(this,arguments)||this;return r.type="dataset",r}return a.type="dataset",a}(ComponentView$1);function install(n){n.registerComponentModel(DatasetModel),n.registerComponentView(DatasetView)}var CMD=PathProxy$1.CMD;function aroundEqual(n,a){return Math.abs(n-a)<1e-5}function pathToBezierCurves(n){var a=n.data,r=n.len(),o=[],l,u=0,c=0,h=0,f=0;function v(O,N){l&&l.length>2&&o.push(l),l=[O,N]}function d(O,N,V,B){aroundEqual(O,V)&&aroundEqual(N,B)||l.push(O,N,V,B,V,B)}function p(O,N,V,B,G,F){var z=Math.abs(N-O),H=Math.tan(z/4)*4/3,U=N<O?-1:1,Y=Math.cos(O),Z=Math.sin(O),X=Math.cos(N),J=Math.sin(N),te=Y*G+V,Q=Z*F+B,q=X*G+V,ee=J*F+B,K=G*H*U,W=F*H*U;l.push(te-K*Z,Q+W*Y,q+K*J,ee-W*X,q,ee)}for(var g,y,_,S,x=0;x<r;){var T=a[x++],A=x===1;switch(A&&(u=a[x],c=a[x+1],h=u,f=c,(T===CMD.L||T===CMD.C||T===CMD.Q)&&(l=[h,f])),T){case CMD.M:u=h=a[x++],c=f=a[x++],v(h,f);break;case CMD.L:g=a[x++],y=a[x++],d(u,c,g,y),u=g,c=y;break;case CMD.C:l.push(a[x++],a[x++],a[x++],a[x++],u=a[x++],c=a[x++]);break;case CMD.Q:g=a[x++],y=a[x++],_=a[x++],S=a[x++],l.push(u+2/3*(g-u),c+2/3*(y-c),_+2/3*(g-_),S+2/3*(y-S),_,S),u=_,c=S;break;case CMD.A:var b=a[x++],C=a[x++],E=a[x++],w=a[x++],D=a[x++],M=a[x++]+D;x+=1;var P=!a[x++];g=Math.cos(D)*E+b,y=Math.sin(D)*w+C,A?(h=g,f=y,v(h,f)):d(u,c,g,y),u=Math.cos(M)*E+b,c=Math.sin(M)*w+C;for(var L=(P?-1:1)*Math.PI/2,I=D;P?I>M:I<M;I+=L){var R=P?Math.max(I+L,M):Math.min(I+L,M);p(I,R,b,C,E,w)}break;case CMD.R:h=u=a[x++],f=c=a[x++],g=h+a[x++],y=f+a[x++],v(g,f),d(g,f,g,y),d(g,y,h,y),d(h,y,h,f),d(h,f,g,f);break;case CMD.Z:l&&d(u,c,h,f),u=h,c=f;break}}return l&&l.length>2&&o.push(l),o}function adpativeBezier(n,a,r,o,l,u,c,h,f,v){if(aroundEqual(n,r)&&aroundEqual(a,o)&&aroundEqual(l,c)&&aroundEqual(u,h)){f.push(c,h);return}var d=2/v,p=d*d,g=c-n,y=h-a,_=Math.sqrt(g*g+y*y);g/=_,y/=_;var S=r-n,x=o-a,T=l-c,A=u-h,b=S*S+x*x,C=T*T+A*A;if(b<p&&C<p){f.push(c,h);return}var E=g*S+y*x,w=-g*T-y*A,D=b-E*E,M=C-w*w;if(D<p&&E>=0&&M<p&&w>=0){f.push(c,h);return}var P=[],L=[];cubicSubdivide(n,r,l,c,.5,P),cubicSubdivide(a,o,u,h,.5,L),adpativeBezier(P[0],L[0],P[1],L[1],P[2],L[2],P[3],L[3],f,v),adpativeBezier(P[4],L[4],P[5],L[5],P[6],L[6],P[7],L[7],f,v)}function pathToPolygons(n,a){var r=pathToBezierCurves(n),o=[];a=a||1;for(var l=0;l<r.length;l++){var u=r[l],c=[],h=u[0],f=u[1];c.push(h,f);for(var v=2;v<u.length;){var d=u[v++],p=u[v++],g=u[v++],y=u[v++],_=u[v++],S=u[v++];adpativeBezier(h,f,d,p,g,y,_,S,c,a),h=_,f=S}o.push(c)}return o}function getDividingGrids(n,a,r){var o=n[a],l=n[1-a],u=Math.abs(o/l),c=Math.ceil(Math.sqrt(u*r)),h=Math.floor(r/c);h===0&&(h=1,c=r);for(var f=[],v=0;v<c;v++)f.push(h);var d=c*h,p=r-d;if(p>0)for(var v=0;v<p;v++)f[v%c]+=1;return f}function divideSector(n,a,r){for(var o=n.r0,l=n.r,u=n.startAngle,c=n.endAngle,h=Math.abs(c-u),f=h*l,v=l-o,d=f>Math.abs(v),p=getDividingGrids([f,v],d?0:1,a),g=(d?h:v)/p.length,y=0;y<p.length;y++)for(var _=(d?v:h)/p[y],S=0;S<p[y];S++){var x={};d?(x.startAngle=u+g*y,x.endAngle=u+g*(y+1),x.r0=o+_*S,x.r=o+_*(S+1)):(x.startAngle=u+_*S,x.endAngle=u+_*(S+1),x.r0=o+g*y,x.r=o+g*(y+1)),x.clockwise=n.clockwise,x.cx=n.cx,x.cy=n.cy,r.push(x)}}function divideRect(n,a,r){for(var o=n.width,l=n.height,u=o>l,c=getDividingGrids([o,l],u?0:1,a),h=u?"width":"height",f=u?"height":"width",v=u?"x":"y",d=u?"y":"x",p=n[h]/c.length,g=0;g<c.length;g++)for(var y=n[f]/c[g],_=0;_<c[g];_++){var S={};S[v]=g*p,S[d]=_*y,S[h]=p,S[f]=y,S.x+=n.x,S.y+=n.y,r.push(S)}}function crossProduct2d(n,a,r,o){return n*o-r*a}function lineLineIntersect(n,a,r,o,l,u,c,h){var f=r-n,v=o-a,d=c-l,p=h-u,g=crossProduct2d(d,p,f,v);if(Math.abs(g)<1e-6)return null;var y=n-l,_=a-u,S=crossProduct2d(y,_,d,p)/g;return S<0||S>1?null:new Point$1(S*f+n,S*v+a)}function projPtOnLine(n,a,r){var o=new Point$1;Point$1.sub(o,r,a),o.normalize();var l=new Point$1;Point$1.sub(l,n,a);var u=l.dot(o);return u}function addToPoly(n,a){var r=n[n.length-1];r&&r[0]===a[0]&&r[1]===a[1]||n.push(a)}function splitPolygonByLine(n,a,r){for(var o=n.length,l=[],u=0;u<o;u++){var c=n[u],h=n[(u+1)%o],f=lineLineIntersect(c[0],c[1],h[0],h[1],a.x,a.y,r.x,r.y);f&&l.push({projPt:projPtOnLine(f,a,r),pt:f,idx:u})}if(l.length<2)return[{points:n},{points:n}];l.sort(function(x,T){return x.projPt-T.projPt});var v=l[0],d=l[l.length-1];if(d.idx<v.idx){var p=v;v=d,d=p}for(var g=[v.pt.x,v.pt.y],y=[d.pt.x,d.pt.y],_=[g],S=[y],u=v.idx+1;u<=d.idx;u++)addToPoly(_,n[u].slice());addToPoly(_,y),addToPoly(_,g);for(var u=d.idx+1;u<=v.idx+o;u++)addToPoly(S,n[u%o].slice());return addToPoly(S,g),addToPoly(S,y),[{points:_},{points:S}]}function binaryDividePolygon(n){var a=n.points,r=[],o=[];fromPoints(a,r,o);var l=new BoundingRect$1(r[0],r[1],o[0]-r[0],o[1]-r[1]),u=l.width,c=l.height,h=l.x,f=l.y,v=new Point$1,d=new Point$1;return u>c?(v.x=d.x=h+u/2,v.y=f,d.y=f+c):(v.y=d.y=f+c/2,v.x=h,d.x=h+u),splitPolygonByLine(a,v,d)}function binaryDivideRecursive(n,a,r,o){if(r===1)o.push(a);else{var l=Math.floor(r/2),u=n(a);binaryDivideRecursive(n,u[0],l,o),binaryDivideRecursive(n,u[1],r-l,o)}return o}function clone(n,a){for(var r=[],o=0;o<a;o++)r.push(clonePath(n));return r}function copyPathProps(n,a){a.setStyle(n.style),a.z=n.z,a.z2=n.z2,a.zlevel=n.zlevel}function polygonConvert(n){for(var a=[],r=0;r<n.length;)a.push([n[r++],n[r++]]);return a}function split(n,a){var r=[],o=n.shape,l;switch(n.type){case"rect":divideRect(o,a,r),l=Rect$3;break;case"sector":divideSector(o,a,r),l=Sector$1;break;case"circle":divideSector({r0:0,r:o.r,startAngle:0,endAngle:Math.PI*2,cx:o.cx,cy:o.cy},a,r),l=Sector$1;break;default:var u=n.getComputedTransform(),c=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,h=map$1(pathToPolygons(n.getUpdatedPathProxy(),c),function(T){return polygonConvert(T)}),f=h.length;if(f===0)binaryDivideRecursive(binaryDividePolygon,{points:h[0]},a,r);else if(f===a)for(var v=0;v<f;v++)r.push({points:h[v]});else{var d=0,p=map$1(h,function(T){var A=[],b=[];fromPoints(T,A,b);var C=(b[1]-A[1])*(b[0]-A[0]);return d+=C,{poly:T,area:C}});p.sort(function(T,A){return A.area-T.area});for(var g=a,v=0;v<f;v++){var y=p[v];if(g<=0)break;var _=v===f-1?g:Math.ceil(y.area/d*a);_<0||(binaryDivideRecursive(binaryDividePolygon,{points:y.poly},_,r),g-=_)}}l=Polygon$1;break}if(!l)return clone(n,a);for(var S=[],v=0;v<r.length;v++){var x=new l;x.setShape(r[v]),copyPathProps(n,x),S.push(x)}return S}function alignSubpath(n,a){var r=n.length,o=a.length;if(r===o)return[n,a];for(var l=[],u=[],c=r<o?n:a,h=Math.min(r,o),f=Math.abs(o-r)/6,v=(h-2)/6,d=Math.ceil(f/v)+1,p=[c[0],c[1]],g=f,y=2;y<h;){var _=c[y-2],S=c[y-1],x=c[y++],T=c[y++],A=c[y++],b=c[y++],C=c[y++],E=c[y++];if(g<=0){p.push(x,T,A,b,C,E);continue}for(var w=Math.min(g,d-1)+1,D=1;D<=w;D++){var M=D/w;cubicSubdivide(_,x,A,C,M,l),cubicSubdivide(S,T,b,E,M,u),_=l[3],S=u[3],p.push(l[1],u[1],l[2],u[2],_,S),x=l[5],T=u[5],A=l[6],b=u[6]}g-=w-1}return c===n?[p,a]:[n,p]}function createSubpath(n,a){for(var r=n.length,o=n[r-2],l=n[r-1],u=[],c=0;c<a.length;)u[c++]=o,u[c++]=l;return u}function alignBezierCurves(n,a){for(var r,o,l,u=[],c=[],h=0;h<Math.max(n.length,a.length);h++){var f=n[h],v=a[h],d=void 0,p=void 0;f?v?(r=alignSubpath(f,v),d=r[0],p=r[1],o=d,l=p):(p=createSubpath(l||f,f),d=f):(d=createSubpath(o||v,v),p=v),u.push(d),c.push(p)}return[u,c]}function centroid(n){for(var a=0,r=0,o=0,l=n.length,u=0,c=l-2;u<l;c=u,u+=2){var h=n[c],f=n[c+1],v=n[u],d=n[u+1],p=h*d-v*f;a+=p,r+=(h+v)*p,o+=(f+d)*p}return a===0?[n[0]||0,n[1]||0]:[r/a/3,o/a/3,a]}function findBestRingOffset(n,a,r,o){for(var l=(n.length-2)/6,u=1/0,c=0,h=n.length,f=h-2,v=0;v<l;v++){for(var d=v*6,p=0,g=0;g<h;g+=2){var y=g===0?d:(d+g-2)%f+2,_=n[y]-r[0],S=n[y+1]-r[1],x=a[g]-o[0],T=a[g+1]-o[1],A=x-_,b=T-S;p+=A*A+b*b}p<u&&(u=p,c=v)}return c}function reverse(n){for(var a=[],r=n.length,o=0;o<r;o+=2)a[o]=n[r-o-2],a[o+1]=n[r-o-1];return a}function findBestMorphingRotation(n,a,r,o){for(var l=[],u,c=0;c<n.length;c++){var h=n[c],f=a[c],v=centroid(h),d=centroid(f);u==null&&(u=v[2]<0!=d[2]<0);var p=[],g=[],y=0,_=1/0,S=[],x=h.length;u&&(h=reverse(h));for(var T=findBestRingOffset(h,f,v,d)*6,A=x-2,b=0;b<A;b+=2){var C=(T+b)%A+2;p[b+2]=h[C]-v[0],p[b+3]=h[C+1]-v[1]}if(p[0]=h[T]-v[0],p[1]=h[T+1]-v[1],r>0)for(var E=o/r,w=-o/2;w<=o/2;w+=E){for(var D=Math.sin(w),M=Math.cos(w),P=0,b=0;b<h.length;b+=2){var L=p[b],I=p[b+1],R=f[b]-d[0],O=f[b+1]-d[1],N=R*M-O*D,V=R*D+O*M;S[b]=N,S[b+1]=V;var B=N-L,G=V-I;P+=B*B+G*G}if(P<_){_=P,y=w;for(var F=0;F<S.length;F++)g[F]=S[F]}}else for(var z=0;z<x;z+=2)g[z]=f[z]-d[0],g[z+1]=f[z+1]-d[1];l.push({from:p,to:g,fromCp:v,toCp:d,rotation:-y})}return l}function isCombineMorphing(n){return n.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(n,a,r){var o=SAVED_METHOD_PREFIX+a,l=n[o]||n[a];n[o]||(n[o]=n[a]);var u=r.replace,c=r.after,h=r.before;n[a]=function(){var f=arguments,v;return h&&h.apply(this,f),u?v=u.apply(this,f):v=l.apply(this,f),c&&c.apply(this,f),v}}function restoreMethod(n,a){var r=SAVED_METHOD_PREFIX+a;n[r]&&(n[a]=n[r],n[r]=null)}function applyTransformOnBeziers(n,a){for(var r=0;r<n.length;r++)for(var o=n[r],l=0;l<o.length;){var u=o[l],c=o[l+1];o[l++]=a[0]*u+a[2]*c+a[4],o[l++]=a[1]*u+a[3]*c+a[5]}}function prepareMorphPath(n,a){var r=n.getUpdatedPathProxy(),o=a.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(r),pathToBezierCurves(o)),u=l[0],c=l[1],h=n.getComputedTransform(),f=a.getComputedTransform();function v(){this.transform=null}h&&applyTransformOnBeziers(u,h),f&&applyTransformOnBeziers(c,f),saveAndModifyMethod(a,"updateTransform",{replace:v}),a.transform=null;var d=findBestMorphingRotation(u,c,10,Math.PI),p=[];saveAndModifyMethod(a,"buildPath",{replace:function(g){for(var y=a.__morphT,_=1-y,S=[],x=0;x<d.length;x++){var T=d[x],A=T.from,b=T.to,C=T.rotation*y,E=T.fromCp,w=T.toCp,D=Math.sin(C),M=Math.cos(C);lerp$1(S,E,w,y);for(var P=0;P<A.length;P+=2){var L=A[P],I=A[P+1],R=b[P],O=b[P+1],N=L*_+R*y,V=I*_+O*y;p[P]=N*M-V*D+S[0],p[P+1]=N*D+V*M+S[1]}var B=p[0],G=p[1];g.moveTo(B,G);for(var P=2;P<A.length;){var R=p[P++],O=p[P++],F=p[P++],z=p[P++],H=p[P++],U=p[P++];B===R&&G===O&&F===H&&z===U?g.lineTo(H,U):g.bezierCurveTo(R,O,F,z,H,U),B=H,G=U}}}})}function morphPath(n,a,r){if(!n||!a)return a;var o=r.done,l=r.during;prepareMorphPath(n,a),a.__morphT=0;function u(){restoreMethod(a,"buildPath"),restoreMethod(a,"updateTransform"),a.__morphT=-1,a.createPathProxy(),a.dirtyShape()}return a.animateTo({__morphT:1},defaults({during:function(c){a.dirtyShape(),l&&l(c)},done:function(){u(),o&&o()}},r)),a}function hilbert(n,a,r,o,l,u){var c=16;n=l===r?0:Math.round(32767*(n-r)/(l-r)),a=u===o?0:Math.round(32767*(a-o)/(u-o));for(var h=0,f,v=(1<<c)/2;v>0;v/=2){var d=0,p=0;(n&v)>0&&(d=1),(a&v)>0&&(p=1),h+=v*v*(3*d^p),p===0&&(d===1&&(n=v-1-n,a=v-1-a),f=n,n=a,a=f)}return h}function sortPaths(n){var a=1/0,r=1/0,o=-1/0,l=-1/0,u=map$1(n,function(h){var f=h.getBoundingRect(),v=h.getComputedTransform(),d=f.x+f.width/2+(v?v[4]:0),p=f.y+f.height/2+(v?v[5]:0);return a=Math.min(d,a),r=Math.min(p,r),o=Math.max(d,o),l=Math.max(p,l),[d,p]}),c=map$1(u,function(h,f){return{cp:h,z:hilbert(h[0],h[1],a,r,o,l),path:n[f]}});return c.sort(function(h,f){return h.z-f.z}).map(function(h){return h.path})}function defaultDividePath(n){return split(n.path,n.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(n,a,r){var o=[];function l(E){for(var w=0;w<E.length;w++){var D=E[w];isCombineMorphing(D)?l(D.childrenRef()):D instanceof Path$1&&o.push(D)}}l(n);var u=o.length;if(!u)return createEmptyReturn();var c=r.dividePath||defaultDividePath,h=c({path:a,count:u});if(h.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();o=sortPaths(o),h=sortPaths(h);for(var f=r.done,v=r.during,d=r.individualDelay,p=new Transformable$1,g=0;g<u;g++){var y=o[g],_=h[g];_.parent=a,_.copyTransform(p),d||prepareMorphPath(y,_)}a.__isCombineMorphing=!0,a.childrenRef=function(){return h};function S(E){for(var w=0;w<h.length;w++)h[w].addSelfToZr(E)}saveAndModifyMethod(a,"addSelfToZr",{after:function(E){S(E)}}),saveAndModifyMethod(a,"removeSelfFromZr",{after:function(E){for(var w=0;w<h.length;w++)h[w].removeSelfFromZr(E)}});function x(){a.__isCombineMorphing=!1,a.__morphT=-1,a.childrenRef=null,restoreMethod(a,"addSelfToZr"),restoreMethod(a,"removeSelfFromZr")}var T=h.length;if(d)for(var A=T,b=function(){A--,A===0&&(x(),f&&f())},g=0;g<T;g++){var C=d?defaults({delay:(r.delay||0)+d(g,T,o[g],h[g]),done:b},r):r;morphPath(o[g],h[g],C)}else a.__morphT=0,a.animateTo({__morphT:1},defaults({during:function(E){for(var w=0;w<T;w++){var D=h[w];D.__morphT=a.__morphT,D.dirtyShape()}v&&v(E)},done:function(){x();for(var E=0;E<n.length;E++)restoreMethod(n[E],"updateTransform");f&&f()}},r));return a.__zr&&S(a.__zr),{fromIndividuals:o,toIndividuals:h,count:T}}function separateMorph(n,a,r){var o=a.length,l=[],u=r.dividePath||defaultDividePath;function c(y){for(var _=0;_<y.length;_++){var S=y[_];isCombineMorphing(S)?c(S.childrenRef()):S instanceof Path$1&&l.push(S)}}if(isCombineMorphing(n)){c(n.childrenRef());var h=l.length;if(h<o)for(var f=0,v=h;v<o;v++)l.push(clonePath(l[f++%h]));l.length=o}else{l=u({path:n,count:o});for(var d=n.getComputedTransform(),v=0;v<l.length;v++)l[v].setLocalTransform(d);if(l.length!==o)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),a=sortPaths(a);for(var p=r.individualDelay,v=0;v<o;v++){var g=p?defaults({delay:(r.delay||0)+p(v,o,l[v],a[v])},r):r;morphPath(l[v],a[v],g)}return{fromIndividuals:l,toIndividuals:a,count:a.length}}function isMultiple(n){return isArray$1(n[0])}function prepareMorphBatches(n,a){for(var r=[],o=n.length,l=0;l<o;l++)r.push({one:n[l],many:[]});for(var l=0;l<a.length;l++){var u=a[l].length,c=void 0;for(c=0;c<u;c++)r[c%o].many.push(a[l][c])}for(var h=0,l=o-1;l>=0;l--)if(!r[l].many.length){var f=r[h].many;if(f.length<=1)if(h)h=0;else return r;var u=f.length,v=Math.ceil(u/2);r[l].many=f.slice(v,u),r[h].many=f.slice(0,v),h++}return r}var pathDividers={clone:function(n){for(var a=[],r=1-Math.pow(1-n.path.style.opacity,1/n.count),o=0;o<n.count;o++){var l=clonePath(n.path);l.setStyle("opacity",r),a.push(l)}return a},split:null};function applyMorphAnimation(n,a,r,o,l,u){if(!n.length||!a.length)return;var c=getAnimationConfig("update",o,l);if(!(c&&c.duration>0))return;var h=o.getModel("universalTransition").get("delay"),f=Object.assign({setToFinal:!0},c),v,d;isMultiple(n)&&(v=n,d=a),isMultiple(a)&&(v=a,d=n);function p(T,A,b,C,E){var w=T.many,D=T.one;if(w.length===1&&!E){var M=A?w[0]:D,P=A?D:w[0];if(isCombineMorphing(M))p({many:[M],one:P},!0,b,C,!0);else{var L=h?defaults({delay:h(b,C)},f):f;morphPath(M,P,L),u(M,P,M,P,L)}}else for(var I=defaults({dividePath:pathDividers[r],individualDelay:h&&function(G,F,z,H){return h(G+b,C)}},f),R=A?combineMorph(w,D,I):separateMorph(D,w,I),O=R.fromIndividuals,N=R.toIndividuals,V=O.length,B=0;B<V;B++){var L=h?defaults({delay:h(B,V)},f):f;u(O[B],N[B],A?w[B]:T.one,A?T.one:w[B],L)}}for(var g=v?v===n:n.length>a.length,y=v?prepareMorphBatches(d,v):prepareMorphBatches(g?a:n,[g?n:a]),_=0,S=0;S<y.length;S++)_+=y[S].many.length;for(var x=0,S=0;S<y.length;S++)p(y[S],g,x,_),x+=y[S].many.length}function getPathList(n){if(!n)return[];if(isArray$1(n)){for(var a=[],r=0;r<n.length;r++)a.push(getPathList(n[r]));return a}var o=[];return n.traverse(function(l){l instanceof Path$1&&!l.disableMorphing&&!l.invisible&&!l.ignore&&o.push(l)}),o}var DATA_COUNT_THRESHOLD=1e4,getUniversalTransitionGlobalStore=makeInner();function getGroupIdDimension(n){for(var a=n.dimensions,r=0;r<a.length;r++){var o=n.getDimensionInfo(a[r]);if(o&&o.otherDims.itemGroupId===0)return a[r]}}function flattenDataDiffItems(n){var a=[];return each$f(n,function(r){var o=r.data;if(o.count()>DATA_COUNT_THRESHOLD){({}).NODE_ENV!=="production"&&warn("Universal transition is disabled on large data > 10k.");return}for(var l=o.getIndices(),u=getGroupIdDimension(o),c=0;c<l.length;c++)a.push({dataGroupId:r.dataGroupId,data:o,dim:r.dim||u,divide:r.divide,dataIndex:c})}),a}function fadeInElement(n,a,r){n.traverse(function(o){o instanceof Path$1&&initProps(o,{style:{opacity:0}},a,{dataIndex:r,isFrom:!0})})}function removeEl(n){if(n.parent){var a=n.getComputedTransform();n.setLocalTransform(a),n.parent.remove(n)}}function stopAnimation(n){n.stopAnimation(),n.isGroup&&n.traverse(function(a){a.stopAnimation()})}function animateElementStyles(n,a,r){var o=getAnimationConfig("update",r,a);o&&n.traverse(function(l){if(l instanceof Displayable$1){var u=getOldStyle(l);u&&l.animateFrom({style:u},o)}})}function isAllIdSame(n,a){var r=n.length;if(r!==a.length)return!1;for(var o=0;o<r;o++){var l=n[o],u=a[o];if(l.data.getId(l.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(n,a,r){var o=flattenDataDiffItems(n),l=flattenDataDiffItems(a);function u(T,A,b,C,E){(b||T)&&A.animateFrom({style:b&&b!==T?extend(extend({},b.style),T.style):T.style},E)}function c(T){for(var A=0;A<T.length;A++)if(T[A].dim)return T[A].dim}var h=c(o),f=c(l),v=!1;function d(T,A){return function(b){var C=b.data,E=b.dataIndex;if(A)return C.getId(E);var w=b.dataGroupId,D=T?h||f:f||h,M=D&&C.getDimensionInfo(D),P=M&&M.ordinalMeta;if(M){var L=C.get(M.name,E);return P&&P.categories[L]||L+""}var I=C.getRawDataItem(E);return I&&I.groupId?I.groupId+"":w||C.getId(E)}}var p=isAllIdSame(o,l),g={};if(!p)for(var y=0;y<l.length;y++){var _=l[y],S=_.data.getItemGraphicEl(_.dataIndex);S&&(g[S.id]=!0)}function x(T,A){var b=o[A],C=l[T],E=C.data.hostModel,w=b.data.getItemGraphicEl(b.dataIndex),D=C.data.getItemGraphicEl(C.dataIndex);if(w===D){D&&animateElementStyles(D,C.dataIndex,E);return}w&&g[w.id]||D&&(stopAnimation(D),w?(stopAnimation(w),removeEl(w),v=!0,applyMorphAnimation(getPathList(w),getPathList(D),C.divide,E,T,u)):fadeInElement(D,E,T))}new DataDiffer$1(o,l,d(!0,p),d(!1,p),null,"multiple").update(x).updateManyToOne(function(T,A){var b=l[T],C=b.data,E=C.hostModel,w=C.getItemGraphicEl(b.dataIndex),D=filter(map$1(A,function(M){return o[M].data.getItemGraphicEl(o[M].dataIndex)}),function(M){return M&&M!==w&&!g[M.id]});w&&(stopAnimation(w),D.length?(each$f(D,function(M){stopAnimation(M),removeEl(M)}),v=!0,applyMorphAnimation(getPathList(D),getPathList(w),b.divide,E,T,u)):fadeInElement(w,E,b.dataIndex))}).updateOneToMany(function(T,A){var b=o[A],C=b.data.getItemGraphicEl(b.dataIndex);if(!(C&&g[C.id])){var E=filter(map$1(T,function(D){return l[D].data.getItemGraphicEl(l[D].dataIndex)}),function(D){return D&&D!==C}),w=l[T[0]].data.hostModel;E.length&&(each$f(E,function(D){return stopAnimation(D)}),C?(stopAnimation(C),removeEl(C),v=!0,applyMorphAnimation(getPathList(C),getPathList(E),b.divide,w,T[0],u)):each$f(E,function(D){return fadeInElement(D,w,T[0])}))}}).updateManyToMany(function(T,A){new DataDiffer$1(A,T,function(b){return o[b].data.getId(o[b].dataIndex)},function(b){return l[b].data.getId(l[b].dataIndex)}).update(function(b,C){x(T[b],A[C])}).execute()}).execute(),v&&each$f(a,function(T){var A=T.data,b=A.hostModel,C=b&&r.getViewOfSeriesModel(b),E=getAnimationConfig("update",b,0);C&&b.isAnimationEnabled()&&E&&E.duration>0&&C.group.traverse(function(w){w instanceof Path$1&&!w.animators.length&&w.animateFrom({style:{opacity:0}},E)})})}function getSeriesTransitionKey(n){var a=n.getModel("universalTransition").get("seriesKey");return a||n.id}function convertArraySeriesKeyToString(n){return isArray$1(n)?n.sort().join(","):n}function getDivideShapeFromData(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(n,a){var r=createHashMap(),o=createHashMap(),l=createHashMap();each$f(n.oldSeries,function(c,h){var f=n.oldDataGroupIds[h],v=n.oldData[h],d=getSeriesTransitionKey(c),p=convertArraySeriesKeyToString(d);o.set(p,{dataGroupId:f,data:v}),isArray$1(d)&&each$f(d,function(g){l.set(g,{key:p,dataGroupId:f,data:v})})});function u(c){r.get(c)&&warn("Duplicated seriesKey in universalTransition "+c)}return each$f(a.updatedSeries,function(c){if(c.isUniversalTransitionEnabled()&&c.isAnimationEnabled()){var h=c.get("dataGroupId"),f=c.getData(),v=getSeriesTransitionKey(c),d=convertArraySeriesKeyToString(v),p=o.get(d);if(p)({}).NODE_ENV!=="production"&&u(d),r.set(d,{oldSeries:[{dataGroupId:p.dataGroupId,divide:getDivideShapeFromData(p.data),data:p.data}],newSeries:[{dataGroupId:h,divide:getDivideShapeFromData(f),data:f}]});else if(isArray$1(v)){({}).NODE_ENV!=="production"&&u(d);var g=[];each$f(v,function(S){var x=o.get(S);x.data&&g.push({dataGroupId:x.dataGroupId,divide:getDivideShapeFromData(x.data),data:x.data})}),g.length&&r.set(d,{oldSeries:g,newSeries:[{dataGroupId:h,data:f,divide:getDivideShapeFromData(f)}]})}else{var y=l.get(v);if(y){var _=r.get(y.key);_||(_={oldSeries:[{dataGroupId:y.dataGroupId,data:y.data,divide:getDivideShapeFromData(y.data)}],newSeries:[]},r.set(y.key,_)),_.newSeries.push({dataGroupId:h,data:f,divide:getDivideShapeFromData(f)})}}}}),r}function querySeries(n,a){for(var r=0;r<n.length;r++){var o=a.seriesIndex!=null&&a.seriesIndex===n[r].seriesIndex||a.seriesId!=null&&a.seriesId===n[r].id;if(o)return r}}function transitionSeriesFromOpt(n,a,r,o){var l=[],u=[];each$f(normalizeToArray(n.from),function(c){var h=querySeries(a.oldSeries,c);h>=0&&l.push({dataGroupId:a.oldDataGroupIds[h],data:a.oldData[h],divide:getDivideShapeFromData(a.oldData[h]),dim:c.dimension})}),each$f(normalizeToArray(n.to),function(c){var h=querySeries(r.updatedSeries,c);if(h>=0){var f=r.updatedSeries[h].getData();u.push({dataGroupId:a.oldDataGroupIds[h],data:f,divide:getDivideShapeFromData(f),dim:c.dimension})}}),l.length>0&&u.length>0&&transitionBetween(l,u,o)}function installUniversalTransition(n){n.registerUpdateLifecycle("series:beforeupdate",function(a,r,o){each$f(normalizeToArray(o.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(u){for(var c=o.updatedSeries,h=0;h<c.length;h++)(u.seriesIndex!=null&&u.seriesIndex===c[h].seriesIndex||u.seriesId!=null&&u.seriesId===c[h].id)&&(c[h][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(a,r,o){var l=getUniversalTransitionGlobalStore(r);if(l.oldSeries&&o.updatedSeries&&o.optionChanged){var u=o.seriesTransition;if(u)each$f(normalizeToArray(u),function(y){transitionSeriesFromOpt(y,l,o,r)});else{var c=findTransitionSeriesBatches(l,o);each$f(c.keys(),function(y){var _=c.get(y);transitionBetween(_.oldSeries,_.newSeries,r)})}each$f(o.updatedSeries,function(y){y[SERIES_UNIVERSAL_TRANSITION_PROP]&&(y[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var h=a.getSeries(),f=l.oldSeries=[],v=l.oldDataGroupIds=[],d=l.oldData=[],p=0;p<h.length;p++){var g=h[p].getData();g.count()<DATA_COUNT_THRESHOLD&&(f.push(h[p]),v.push(h[p].get("dataGroupId")),d.push(g))}})}use([install$R]),use([install$S]),use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]),use(install$p),use(install$o),use(install$J),use(install$n),use(install$C),use(install$m),use(install$l),use(install$j),use(install$i),use(install$q),use(install$h),use(install$g),use(install$f),use(install$e),use(install$d),use(install$c),use(install$9),use(install$6),use(install$8),use(install$7),use(install$3),use(install$5),use(install$4),use(install$2),use(install$1),use(install),use(installUniversalTransition),use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,registerLocale,version,dependencies,PRIORITY,init:init$1,connect,disconnect,disConnect,dispose,getInstanceByDom,getInstanceById,registerTheme,registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,getCoordinateSystemDimensions,registerLayout,registerVisual,registerLoading,setCanvasCreator,registerMap:registerMap$1,getMap,registerTransform,dataTool,throttle,use,setPlatformAPI,parseGeoJSON,parseGeoJson:parseGeoJSON,env:env$1,Model:Model$1,Axis:Axis$1,innerDrawElementOnCanvas:brushSingle,zrender,matrix,vector,zrUtil:util$1,color,helper,number,time,graphic,format,util,List:SeriesData$1,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,SeriesModel:SeriesModel$1,ChartView:ChartView$1,extendComponentModel,extendComponentView,extendSeriesModel,extendChartView},Symbol.toStringTag,{value:"Module"})),createOptions=function(){return[function(){function n(){this.name="eChartsOption"}return n.prototype.createTarget=function(){var a=`<div class="hiprint-option-item hiprint-option-item-row">
        <div class="hiprint-option-item-label">
        ${format$2("\u6E32\u67D3\u51FD\u6570")}
        </div>
        <div class="hiprint-option-item-field">
        <textarea style="height:80px;" placeholder="function(title,value,options,templateData,canvas,fabric){}" class="auto-submit"></textarea>
        </div>
    </div>`;return this.target=$(a),this.target},n.prototype.getValue=function(){var a=this.target.find("textarea").val();if(a)return a},n.prototype.setValue=function(a){this.target.find("textarea").val(a?a.toString():null)},n.prototype.destroy=function(){this.target.remove()},n}(),function(){function n(){this.name="customTitle"}return n.prototype.createTarget=function(){var a=`<div class="hiprint-option-item hiprint-option-item-row">
              <div class="hiprint-option-item-label">${format$2("\u6807\u9898")}</div>
              <div class="hiprint-option-item-field">
                <input type="text" placeholder="${format$2("\u8BF7\u8F93\u5165\u6807\u9898")}" class="auto-submit">
              </div>
            </div>`;return this.target=$(a),this.target},n.prototype.getValue=function(){return this.target.find("input").val()},n.prototype.setValue=function(a){this.target.find("input").val(a?a.toString():null)},n.prototype.destroy=function(){this.target.remove()},n}(),function(){function n(){this.name="dataColumns"}return n.prototype.createTarget=function(){var a=`<div class="hiprint-option-item hiprint-option-item-row">
              <div class="hiprint-option-item-label">${format$2("\u6570\u636E\u5217")}</div>
              <div class="hiprint-option-item-field">
                <input type="text" placeholder="${format$2("\u8BF7\u8F93\u5165\u6570\u636E\u5217, \u683C\u5F0F: x,y,x,y")}" class="auto-submit">
              </div>
            </div>`;return this.target=$(a),this.target},n.prototype.getValue=function(){return this.target.find("input").val()},n.prototype.setValue=function(a){this.target.find("input").val(a?a.toString():null)},n.prototype.destroy=function(){this.target.remove()},n}()]},typeOptions={createOptions},createPrintElement=({Config,BasePrintElement,Options,Supper,ele,eleOpt})=>{if(ele.type!=="echarts"&&ele.type!=="echartsXY"&&ele.type!=="defaultEcharts")return null;if(ele.type==="echarts"||ele.type==="echartsXY"||ele.type==="defaultEcharts")return PrintElementConfig.echarts=PrintElementConfig[ele.type],function(t){function e(n,a){var r=t.call(this,n)||this;return r.options=new Options(a),r.options.setDefault(new Options(PrintElementConfig.echarts.default).getPrintElementOptionEntity()),r}return Supper(e,t),e.prototype.getDesignTarget=function(n){return t.prototype.getDesignTarget.call(this,n)},e.prototype.getProxyTarget=function(n){n&&this.SetProxyTargetOption(n);var a=this.createTarget();return this.updateTargetSize(a),a},e.prototype.getTitle=function(){var n=this.options.title||this.printElementType.title||"";return n},e.prototype.updateDesignViewFromOptions=function(){this.designTarget&&(this.css(this.designTarget),this.updateTarget(this.designTarget))},e.prototype.getConfigOptions=function(){return PrintElementConfig.echarts=PrintElementConfig[ele.type],PrintElementConfig.echarts},e.prototype.getData=function(n){var a=this.getField(),r=a&&a.split(".").reduce((o,l)=>o?o[l]:n?n[l]:"",!1)||"";return n?r||"":this.options.testData||this.printElementType.getData()||""},e.prototype.getEChartsOption=function(){var eChartsOption=void 0;if(this.printElementType.eChartsOption&&(eChartsOption=this.printElementType.eChartsOption),this.options.eChartsOption)try{var s="eChartsOption="+this.options.eChartsOption;eChartsOption=eval(s)}catch(n){console.log(n)}return eChartsOption},e.prototype.updateTarget=function(n){var g;let a=this;var r=this.getEChartsOption(),o=n.find(".hiprint-printElement-content");try{o.html("");var l=this.options.getWidth()||20,u=this.options.getHeight()||20,c=parseInt(globalThis.hinnn.pt.toPx(l)),h=parseInt(globalThis.hinnn.pt.toPx(u));o.css({width:c+"px",height:h+"px"}),a.chart?(getInstanceByDom(o[0])&&getInstanceByDom(o[0]).dispose(),a.chart=init$1(o[0],null,{renderer:"canvas"})):a.chart=init$1(o[0],null,{renderer:"canvas"});var f=(g=a.panel)==null?void 0:g.printElements.filter(function(S){var x;return((x=S.designTarget)==null?void 0:x.children().last().css("display"))=="block"&&S.printElementType.type.includes("table")}),v=f==null?void 0:f.filter(function(S){return a.options.field===S.options.field}),d=v&&v.length>0?v[0].getColumns():[],p=d&&d.length>0?d[0].columns:[];let y=r&&r(a.options,a._currenttemplateData,echarts,a.chart,p);const _=`${n[0].className}`.includes("design");a.chart.setOption(Object.assign({animation:_?!0:!a._currenttemplateData},y))}catch(y){console.log(y),o.html(format$2("\u914D\u7F6E\u9519\u8BEF\u65E0\u6CD5\u6E32\u67D3"))}},e.prototype.onResize=function(n,a,r,o,l){t.prototype.onResize.call(this,n,a,r,o,l),this.updateTarget(this.designTarget)},e.prototype.createTarget=function(n,a,r){var o=globalThis.$('<div class="hiprint-printElement hiprint-printElement-echarts" style="position: absolute;"><div class="hiprint-printElement-content" style="height:100%;width:100%"></div></div>');return this.updateTarget(o),o},e.prototype.getReizeableShowPoints=function(){return["r","s","e","n","w","ne","nw","se","sw"]},e.prototype.getHtml=function(n,a,r){return this.getHtml2(n,a,r)},e}(BasePrintElement)};function plugin(n){return{name:"echarts",description:"\u65B0\u589E\u6253\u5370\u5143\u7D20 echarts",hooks:[{hook:"init",name:"add style",description:"add style",priority:1,run:({Config:a,ElementTypes:r,hiprint:o})=>{a.registerItems([...typeOptions.createOptions(n)]),r.addPrintElementType({tid:"defaultModule.line",type:"defaultEcharts",title:format$2("\u6298\u7EBF\u56FE"),options:{width:300,height:200,eChartsOption:`function (options, templateData, echarts, chart, columns) {
                let xAxisData = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
                let seriesData = [[150, 230, 224, 218, 135, 147, 260]];
                if (options && options.field && templateData) {
                  let fieldDataStr = templateData[options.field];
                  if (fieldDataStr && fieldDataStr.length > 0) {
                    xAxisData = Object.keys(fieldDataStr[0]);
                    if (options.customTitle) {
                      let customTitles = options.customTitle.split(',');
                      xAxisData = customTitles.map(item => {
                        return item ;
                      });
                    } else if (columns && columns.length > 0) {
                      xAxisData = xAxisData.map(item => {
                        const matchColumn = columns.find(column => column.field === item);
                        return (matchColumn && matchColumn.title) ? matchColumn.title : item;
                      });
                    }
                    seriesData = [];
                    fieldDataStr.forEach(item => {
                      seriesData.push(Object.values(item));
                    });
                  }
                }
                let series = seriesData.map(function(data) {
                    return {
                        data: data,
                        type: "line",
                    };
                });
                let option = {
                  xAxis: {
                    type: "category",
                    data: xAxisData,
                  },
                  yAxis: {
                    type: "value",
                  },
                  series: series,
                };
                return option;
              }`}});let l=r.allElementTypes.find(u=>u.tid==="defaultModule.line");l&&(l.icon="svp-demo sv-chart-line"),r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868"))?r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868")).printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:format$2("\u56FE\u8868"),printElementTypes:[l]}),r.addPrintElementType({tid:"defaultModule.bar",title:format$2("\u67F1\u72B6\u56FE"),type:"defaultEcharts",options:{width:300,height:200,eChartsOption:`function (options, templateData, echarts, chart, columns) {
                let xAxisData = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
                let seriesData = [[100, 200, 300, 400, 500, 600, 700]];
                if (options && options.field && templateData) {
                  let fieldDataStr = templateData[options.field];
                  if (fieldDataStr && fieldDataStr.length > 0) {
                    xAxisData = Object.keys(fieldDataStr[0]);
                    if (options.customTitle) {
                      let customTitles = options.customTitle.split(',');
                      xAxisData = customTitles.map(item => {
                        return item ;
                      });
                    } else if (columns && columns.length > 0) {
                      xAxisData = xAxisData.map(item => {
                        const matchColumn = columns.find(column => column.field === item);
                        return (matchColumn && matchColumn.title) ? matchColumn.title : item;
                      });
                    }
                    seriesData = [];
                    fieldDataStr.forEach(item => {
                      seriesData.push(Object.values(item));
                    });
                  }
                }
                let series = seriesData.map(function(data) {
                    return {
                        data: data,
                        type: "bar",
                    };
                });
                let option = {
                  xAxis: {
                    type: "category",
                    data: xAxisData,
                  },
                  yAxis: {
                    type: "value",
                  },
                  series: series,
                };
                return option;
              }`}}),l=r.allElementTypes.find(u=>u.tid==="defaultModule.bar"),l&&(l.icon="svp-demo sv-chart-bar"),r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868"))?r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868")).printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:format$2("\u56FE\u8868"),printElementTypes:[l]}),r.addPrintElementType({tid:"defaultModule.pie",title:format$2("\u997C\u56FE"),type:"defaultEcharts",options:{width:300,height:200,eChartsOption:`function (options, templateData, echarts, chart, columns) {
                let seriesData = [
                  { value: 1048, name: "Search Engine" },
                  { value: 735, name: "Direct" },
                  { value: 580, name: "Email" },
                  { value: 484, name: "Union Ads" },
                  { value: 300, name: "Video Ads" },
                ];
                if (options && options.field && templateData) {
                  let fieldDataStr = templateData[options.field];
                  if (fieldDataStr && fieldDataStr.length > 0) {
                    seriesData = [];
                    if (options.customTitle) {
                      let customTitles = options.customTitle.split(',');
                      let values = Object.values(fieldDataStr[0]);
                      seriesData = customTitles.map((item, index) => {
                        return { value: values[index], name: item };
                      });
                    } else if (columns && columns.length > 0) {
                      Object.keys(fieldDataStr[0]).forEach(key => {
                        const matchColumn = columns.find(column => column.field === key);
                        const name = matchColumn && matchColumn.title ? matchColumn.title : key;
                        seriesData.push({ value: fieldDataStr[0][key], name });
                      });
                    } else {
                      Object.keys(fieldDataStr[0]).forEach(key => {
                        seriesData.push({ value: fieldDataStr[0][key], name: key });
                      });
                    }
                  }
                }
                let option = {
                  legend: {
                    left: "center",
                  },
                  series: [
                    {
                      name: "Access From",
                      type: "pie",
                      radius: ["50%"],
                      data: seriesData,
                      emphasis: {
                        itemStyle: {
                          shadowBlur: 10,
                          shadowOffsetX: 0,
                          shadowColor: "rgba(0, 0, 0, 0.5)",
                        },
                      },
                    },
                  ],
                };
                return option;
              }`}}),l=r.allElementTypes.find(u=>u.tid==="defaultModule.pie"),l&&(l.icon="svp-demo sv-chart-pie"),r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868"))?r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868")).printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:format$2("\u56FE\u8868"),printElementTypes:[l]}),r.addPrintElementType({tid:"defaultModule.radar",title:format$2("\u96F7\u8FBE\u56FE"),type:"defaultEcharts",options:{width:300,height:200,eChartsOption:`function (options, templateData, echarts, chart, columns) {
                let indicatorData = [
                  { name: "Sales" },
                  { name: "Administration" },
                  { name: "Information Technology" },
                  { name: "Customer Support" },
                  { name: "Development" },
                  { name: "Marketing" },
                ];
                let seriesData = [
                  {
                    value: [4200, 3000, 20000, 35000, 50000, 18000]
                  },
                  {
                    value: [5000, 14000, 28000, 26000, 42000, 21000]
                  },
                ];
                if (options && options.field && templateData) {
                  let fieldDataStr = templateData[options.field];
                  if (fieldDataStr && fieldDataStr.length > 0) {
                    indicatorData = [];
                    indicatorData = Object.keys(fieldDataStr[0]).map(key => ({ name: key }));
                    if (options.customTitle) {
                      let customTitles = options.customTitle.split(',');
                      indicatorData = customTitles.map(item => {
                        return { name: item };
                      });
                    } else if (columns && columns.length > 0) {
                      indicatorData = indicatorData.map(item => {
                        const matchColumn = columns.find(column => column.field === item.name);
                        return { name: (matchColumn && matchColumn.title) ? matchColumn.title : item.name };
                      });
                    }
                    seriesData = [];
                    seriesData = fieldDataStr.map(item => {
                      return { value: Object.values(item) };
                    });
                  }
                }
                let option = {
                  radar: {
                    indicator: indicatorData,
                  },
                  series: [
                    {
                      name: "Budget vs spending",
                      type: "radar",
                      data: seriesData,
                    },
                  ],
                };
                return option;
              }`}}),l=r.allElementTypes.find(u=>u.tid==="defaultModule.radar"),l&&(l.icon="svp-demo sv-chart-radar"),r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868"))?r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868")).printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:format$2("\u56FE\u8868"),printElementTypes:[l]}),r.addPrintElementType({tid:"defaultModule.scatter",title:format$2("\u6563\u70B9\u56FE"),type:"echartsXY",options:{width:300,height:200,eChartsOption:`function (options, templateData, echarts, chart, columns) {
                let seriesData = [
                  [10.0, 8.04],
                  [8.07, 6.95],
                  [13.0, 7.58],
                  [9.05, 8.81],
                  [11.0, 8.33],
                  [14.0, 7.66],
                  [13.4, 6.81],
                  [10.0, 6.33]
                ];
                if (options && options.field && templateData) {
                  let fieldDataStr = templateData[options.field];
                  if (fieldDataStr && fieldDataStr.length > 0) {
                    if (options.dataColumns) {
                      let xObjs = [];
                      let yObjs = [];
                      let dataColumns = options.dataColumns.split(',');
                      if (dataColumns.length % 2 !== 0) {
                        dataColumns = dataColumns.slice(0, -1);
                      }
                      dataColumns.forEach((key, index) => {
                        fieldDataStr.forEach(item => {
                          if (item[key]) {
                            index++;
                            if (index % 2 == 0) {
                              yObjs.push(item[key]);
                            } else {
                              xObjs.push(item[key]);
                            }
                          }
                        });
                      });
                      seriesData = [];
                      xObjs.forEach((xObj, index) => {
                        if (xObj && yObjs[index]) {
                          let objs = [];
                          objs.push(xObj);
                          objs.push(yObjs[index]);
                          seriesData.push(objs);
                        }
                      });
                    } else {
                      seriesData = [];
                      seriesData = fieldDataStr.map(obj => {
                        let values = Object.values(obj);
                        return [values[0], values[1]];
                      });
                    }
                  }
                }
                let option = {
                  xAxis: {},
                  yAxis: {},
                  series: [
                    {
                      symbolSize: 20,
                      data: seriesData,
                      type: "scatter",
                    },
                  ],
                };
                return option;
              }`}}),l=r.allElementTypes.find(u=>u.tid==="defaultModule.scatter"),l&&(l.icon="svp-demo sv-chart-scatter"),r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868"))?r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868")).printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:format$2("\u56FE\u8868"),printElementTypes:[l]}),r.addPrintElementType({tid:"defaultModule.funnel",title:format$2("\u6F0F\u6597\u56FE"),type:"defaultEcharts",options:{width:300,height:300,eChartsOption:`function (options, templateData, echarts, chart, columns) {
                let legendData = ["Show", "Click", "Visit", "Inquiry"];
                let seriesData = [
                  { value: 60, name: "Visit" },
                  { value: 40, name: "Inquiry" },
                  { value: 20, name: "Order" },
                  { value: 80, name: "Click" },
                  { value: 100, name: "Show" },
                ];
                if (options && options.field && templateData) {
                  let fieldDataStr = templateData[options.field];
                  if (fieldDataStr && fieldDataStr.length > 0) {
                    var names = Object.keys(fieldDataStr[0]);
                    legendData = Object.keys(fieldDataStr[0]);
                    if (options.customTitle) {
                      let customTitles = options.customTitle.split(',');
                      legendData = customTitles.map(item => {
                        return item;
                      });
                    } else if (columns && columns.length > 0) {
                      legendData = legendData.map(item => {
                        const matchColumn = columns.find(column => column.field === item);
                        return (matchColumn && matchColumn.title) ? matchColumn.title : item;
                      });
                    }
                    seriesData = [];
                    fieldDataStr.forEach(item => {
                      legendData.forEach((data, index) => {
                        var dataObject = {};
                        dataObject['value'] = item[names[index]];
                        dataObject['name'] = data;
                        seriesData.push(dataObject);
                      });
                    });
                  }
                }
                let option = {
                  legend: {
                    data: legendData,
                  },
                  series: [
                    {
                      name: "Funnel",
                      type: "funnel",
                      left: "10%",
                      top: 60,
                      bottom: 60,
                      width: "80%",
                      min: 0,
                      max: 100,
                      minSize: "0%",
                      maxSize: "100%",
                      sort: "descending",
                      gap: 2,
                      label: {
                        show: true,
                        position: "inside",
                      },
                      labelLine: {
                        length: 10,
                        lineStyle: {
                          width: 1,
                          type: "solid",
                        },
                      },
                      itemStyle: {
                        borderColor: "#fff",
                        borderWidth: 1,
                      },
                      emphasis: {
                        label: {
                          fontSize: 20,
                        },
                      },
                      data: seriesData,
                    },
                  ],
                };
                return option;
              }`}}),l=r.allElementTypes.find(u=>u.tid==="defaultModule.funnel"),l&&(l.icon="svp-demo sv-chart-funnel"),r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868"))?r.getElementTypeGroups("defaultModule").find(u=>u.name==format$2("\u56FE\u8868")).printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:format$2("\u56FE\u8868"),printElementTypes:[l]})}},{hook:"createPrintElement",name:"echarts",description:"add PrintElement echarts",priority:1,run:createPrintElement}],leastHiprintVersion:"0.1.8"}}function index(n){return plugin(n)}return index});
